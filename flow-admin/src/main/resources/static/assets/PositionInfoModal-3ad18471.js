var B=Object.defineProperty,D=Object.defineProperties;var F=Object.getOwnPropertyDescriptors;var w=Object.getOwnPropertySymbols;var S=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable;var b=(t,s,e)=>s in t?B(t,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[s]=e,P=(t,s)=>{for(var e in s||(s={}))S.call(s,e)&&b(t,e,s[e]);if(w)for(var e of w(s))x.call(s,e)&&b(t,e,s[e]);return t},I=(t,s)=>D(t,F(s));var p=(t,s,e)=>new Promise((i,r)=>{var u=a=>{try{n(e.next(a))}catch(d){r(d)}},l=a=>{try{n(e.throw(a))}catch(d){r(d)}},n=a=>a.done?i(a.value):Promise.resolve(a.value).then(u,l);n((e=e.apply(t,s)).next())});import{B as k,a as N}from"./index-6bb63bf0.js";import{_ as v}from"./BasicForm.vue_vue_type_script_setup_true_lang-b5fd2c2d.js";import"./BasicForm.vue_vue_type_style_index_0_lang-1d0165cd.js";import{u as R}from"./useForm-d2875f1c.js";import{m as C,d as $,f as V,u as g,c as O,a6 as _,Z as T,a7 as j,a8 as E,l as L,ab as U}from"./vue-f7f38239.js";import{Q as W}from"./antd-bebda08e.js";import{c as z,s as A}from"./positionInfo-e2730662.js";import{a2 as G,c as Q}from"./index.js";import{F as Z}from"./constantEnum-c819fa5f.js";const de=[{title:"岗位名称",dataIndex:"name",align:"left"},{title:"编码",dataIndex:"code",align:"left"},{title:"排序编号",dataIndex:"orderNo",width:100,align:"left"},{title:"状态",dataIndex:"status",width:80,customRender:({record:t})=>{const e=~~t.status===1,i=e?"green":"red",r=e?"启用":"停用";return C(W,{color:i},()=>r)}},{title:"成立日期",dataIndex:"startDate",width:100,align:"left"}],ce=[{field:"keyword",label:"关键字",component:"Input",componentProps:{placeholder:"请输入名称/编码"},labelWidth:60,colProps:{span:6,lg:{span:6,offset:0},sm:{span:10,offset:0},xs:{span:16,offset:0}}}],H=[{field:"id",label:"ID",required:!1,component:"Input",show:!1},{field:"name",label:"岗位名称",required:!0,component:"Input",show:!0,rules:[{required:!0,whitespace:!0,message:"岗位名称不能为空！"},{max:80,message:"字符长度不能大于80！"}],colProps:{span:24}},{field:"code",label:"编码",required:!0,component:"Input",show:!0,colProps:{span:24}},{field:"positionSeqId",label:"岗位序列ID",required:!1,component:"Input",show:!1},{field:"positionSeqCode",label:"岗位序列编码",required:!1,component:"Input",show:!1},{field:"startDate",label:"成立日期",required:!1,component:"DatePicker",show:!0,colProps:{span:24}},{field:"orderNo",label:"排序编号",required:!1,component:"InputNumber",show:!0},{field:"status",label:"状态",required:!1,component:"Switch",defaultValue:!0,componentProps:{checkedChildren:"启用",unCheckedChildren:"停用"},colProps:{span:24}}],J=$({name:"PositionInfoModal",components:{BasicModal:k,BasicForm:v},emits:["success","register"],setup(t,{emit:s}){const e=V(!0),[i,{resetFields:r,updateSchema:u,setFieldsValue:l,validate:n}]=R({labelWidth:100,schemas:H,showActionButtonGroup:!1}),a=o=>[{trigger:"blur",validator:(c,h)=>h?z({id:o.id,field:o.field,fieldValue:h,fieldName:o.fieldName}).then(f=>f?Promise.resolve():Promise.reject(o.fieldName+"已存在，请修改！")).catch(f=>Promise.reject(f)):Promise.resolve()}],[d,{setModalProps:m,closeModal:q}]=N(o=>p(this,null,function*(){yield r(),m({confirmLoading:!1}),e.value=!!(o!=null&&o.isUpdate);let c=o.record;yield u([{field:"code",dynamicRules:()=>[{required:!0,whitespace:!0,message:"标识不能为空！"},{pattern:new RegExp(Z.SN),type:"string",message:"请输入英文或数字！"},{max:40,message:"字符长度不能大于40！"},...a({id:g(e)&&c&&c.id||"",field:"code",fieldValue:"",fieldName:"标识"})]}]),g(e)&&l(I(P({},o.record),{status:typeof c.status=="undefined"||c.status===1}))})),y=O(()=>g(e)?"修改":"新增");function M(){return p(this,null,function*(){try{m({confirmLoading:!0});const o=yield n();o.status=o.status?1:0,o.startDate&&(o.startDate=G(o.startDate)),yield A(o),q(),s("success")}finally{m({confirmLoading:!1})}})}return{registerModal:d,registerForm:i,getTitle:y,handleSubmit:M}}});function K(t,s,e,i,r,u){const l=_("BasicForm"),n=_("BasicModal");return T(),j(n,U(t.$attrs,{onRegister:t.registerModal,title:t.getTitle,onOk:t.handleSubmit}),{default:E(()=>[L(l,{onRegister:t.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}const X=Q(J,[["render",K]]),ue=Object.freeze(Object.defineProperty({__proto__:null,default:X},Symbol.toStringTag,{value:"Module"}));export{X as P,ue as a,de as c,ce as s};
