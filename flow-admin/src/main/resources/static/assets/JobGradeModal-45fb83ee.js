var B=Object.defineProperty;var b=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var w=(o,t,e)=>t in o?B(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e,_=(o,t)=>{for(var e in t||(t={}))F.call(t,e)&&w(o,e,t[e]);if(b)for(var e of b(t))N.call(t,e)&&w(o,e,t[e]);return o};var p=(o,t,e)=>new Promise((d,n)=>{var c=r=>{try{a(e.next(r))}catch(l){n(l)}},i=r=>{try{a(e.throw(r))}catch(l){n(l)}},a=r=>r.done?d(r.value):Promise.resolve(r.value).then(c,i);a((e=e.apply(o,t)).next())});import{B as q,a as v}from"./index-6bb63bf0.js";import{_ as S}from"./BasicForm.vue_vue_type_script_setup_true_lang-b5fd2c2d.js";import"./BasicForm.vue_vue_type_style_index_0_lang-1d0165cd.js";import{u as x}from"./useForm-d2875f1c.js";import{c as R,s as $}from"./jobGrade-6d36c665.js";import{F as k}from"./constantEnum-c819fa5f.js";import{d as O,f as V,u as g,c as j,a6 as I,Z as C,a7 as D,a8 as E,l as G,ab as J}from"./vue-f7f38239.js";import{c as L}from"./index.js";const te=[{title:"名称",dataIndex:"name",align:"left"},{title:"编码",dataIndex:"code",align:"left"},{title:"排序号",dataIndex:"orderNo",width:100,align:"left"}],se=[{field:"keyword",label:"关键字",component:"Input",componentProps:{placeholder:"请输入名称/编码"},labelWidth:60,colProps:{span:6,lg:{span:6,offset:0},sm:{span:10,offset:0},xs:{span:16,offset:0}}}],T=[{field:"id",label:"ID",required:!1,component:"Input",show:!1},{field:"name",label:"名称",required:!0,component:"Input",show:!0,rules:[{required:!0,whitespace:!0,message:"名称不能为空！"},{max:80,message:"字符长度不能大于80！"}],colProps:{span:24}},{field:"code",label:"编码",required:!0,component:"Input",show:!0,colProps:{span:24}},{field:"typeId",label:"类型ID",required:!1,component:"Input",show:!1},{field:"typeCode",label:"类别编码",required:!1,component:"Input",show:!1},{field:"orderNo",label:"排序号",required:!1,component:"InputNumber",show:!0}],U=O({name:"JobGradeModal",components:{BasicModal:q,BasicForm:S},emits:["success","register"],setup(o,{emit:t}){const e=V(!0),[d,{resetFields:n,updateSchema:c,setFieldsValue:i,validate:a}]=x({labelWidth:100,schemas:T,showActionButtonGroup:!1}),r=s=>[{trigger:"blur",validator:(u,h)=>h?R({id:s.id,field:s.field,fieldValue:h,fieldName:s.fieldName}).then(f=>f?Promise.resolve():Promise.reject(s.fieldName+"已存在，请修改！")).catch(f=>Promise.reject(f)):Promise.resolve()}],[l,{setModalProps:m,closeModal:y}]=v(s=>p(this,null,function*(){yield n(),m({confirmLoading:!1}),e.value=!!(s!=null&&s.isUpdate);let u=s.record;yield c([{field:"code",dynamicRules:()=>[{required:!0,whitespace:!0,message:"标识不能为空！"},{pattern:new RegExp(k.SN),type:"string",message:"请输入英文或数字！"},{max:40,message:"字符长度不能大于40！"},...r({id:g(e)&&u&&u.id||"",field:"code",fieldValue:"",fieldName:"标识"})]}]),g(e)&&i(_({},s.record))})),M=j(()=>g(e)?"修改":"新增");function P(){return p(this,null,function*(){try{m({confirmLoading:!0});const s=yield a();yield $(s),y(),t("success")}finally{m({confirmLoading:!1})}})}return{registerModal:l,registerForm:d,getTitle:M,handleSubmit:P}}});function W(o,t,e,d,n,c){const i=I("BasicForm"),a=I("BasicModal");return C(),D(a,J(o.$attrs,{onRegister:o.registerModal,title:o.getTitle,onOk:o.handleSubmit}),{default:E(()=>[G(i,{onRegister:o.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}const z=L(U,[["render",W]]),re=Object.freeze(Object.defineProperty({__proto__:null,default:z},Symbol.toStringTag,{value:"Module"}));export{z as J,re as a,te as c,se as s};
