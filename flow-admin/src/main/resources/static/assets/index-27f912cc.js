var uw=Object.defineProperty,sw=Object.defineProperties;var cw=Object.getOwnPropertyDescriptors;var pg=Object.getOwnPropertySymbols;var lw=Object.prototype.hasOwnProperty,fw=Object.prototype.propertyIsEnumerable;var dg=(v,h,s)=>h in v?uw(v,h,{enumerable:!0,configurable:!0,writable:!0,value:s}):v[h]=s,af=(v,h)=>{for(var s in h||(h={}))lw.call(h,s)&&dg(v,s,h[s]);if(pg)for(var s of pg(h))fw.call(h,s)&&dg(v,s,h[s]);return v},hg=(v,h)=>sw(v,cw(h));var Ou=(v,h,s)=>new Promise((f,i)=>{var l=m=>{try{b(s.next(m))}catch(E){i(E)}},c=m=>{try{b(s.throw(m))}catch(E){i(E)}},b=m=>m.done?f(m.value):Promise.resolve(m.value).then(l,c);b((s=s.apply(v,h)).next())});import{y as pw,f as dw,aE as hw,w as yw}from"./index.js";import{p as gw,e as vw,d as yf,f as _u,h as bw,u as Mt,x as uf,b as mw,Z as Hr,_ as ji,F as yg,a9 as Ow,l as Ti,a8 as ju,E as _w,a0 as ww,a1 as wu,aa as sf,ab as xw,a7 as gf,c as Ew,w as gg,o as Sw,$ as jw}from"./vue-f7f38239.js";import{T as Pw,a5 as Aw,b as kw}from"./antd-bebda08e.js";import{I as Gg}from"./index.esm-46106237.js";import{b as Tw,B as Mw}from"./index-6bb63bf0.js";import{J as Dw}from"./index-59aab1ab.js";import{P as Nw}from"./index-5a8cda67.js";import"./useWindowSizeFn-01ffbee2.js";import"./useContentViewHeight-4f74c208.js";import"./onMountedOrActivated-a837e8fb.js";const Xg=Symbol("flow-chart");function Cw(v){gw(Xg,v)}function Rw(){return vw(Xg)}var tn=(v=>(v.ZOOM_IN="zoomIn",v.ZOOM_OUT="zoomOut",v.RESET_ZOOM="resetZoom",v.UNDO="undo",v.REDO="redo",v.SNAPSHOT="snapshot",v.VIEW_DATA="viewData",v))(tn||{});const Iw=["onClick"],Lw=yf({name:"FlowChartToolbar",__name:"FlowChartToolbar",props:{prefixCls:String},emits:["view-data"],setup(v,{emit:h}){const s=_u([{type:tn.ZOOM_IN,icon:"codicon:zoom-out",tooltip:"缩小"},{type:tn.ZOOM_OUT,icon:"codicon:zoom-in",tooltip:"放大"},{type:tn.RESET_ZOOM,icon:"codicon:screen-normal",tooltip:"重置比例"},{separate:!0},{type:tn.UNDO,icon:"ion:arrow-undo-outline",tooltip:"后退",disabled:!0},{type:tn.REDO,icon:"ion:arrow-redo-outline",tooltip:"前进",disabled:!0},{separate:!0},{type:tn.SNAPSHOT,icon:"ion:download-outline",tooltip:"下载"},{type:tn.VIEW_DATA,icon:"carbon:document-view",tooltip:"查看数据"}]),{logicFlow:f}=Rw();function i({data:{undoAble:c,redoAble:b}}){const m=Mt(s),E=m.findIndex(P=>P.type===tn.UNDO),w=m.findIndex(P=>P.type===tn.REDO);E!==-1&&(Mt(s)[E].disabled=!c),w!==-1&&(Mt(s)[w].disabled=!b)}const l=c=>{const b=Mt(f);if(b)switch(c.type){case tn.ZOOM_IN:b.zoom();break;case tn.ZOOM_OUT:b.zoom(!0);break;case tn.RESET_ZOOM:b.resetZoom();break;case tn.UNDO:b.undo();break;case tn.REDO:b.redo();break;case tn.SNAPSHOT:b.getSnapshot();break;case tn.VIEW_DATA:h("view-data");break}};return bw(()=>Ou(this,null,function*(){var c;Mt(f)&&(yield uf(),(c=Mt(f))==null||c.on("history:change",i))})),mw(()=>{var c;(c=Mt(f))==null||c.off("history:change",i)}),(c,b)=>(Hr(),ji("div",{class:wu([`${v.prefixCls}-toolbar`,"flex items-center px-2 py-1"])},[(Hr(!0),ji(yg,null,Ow(s.value,m=>(Hr(),ji(yg,{key:m.type},[Ti(Mt(Pw),xw({placement:"bottom"},m.disabled?{visible:!1}:{}),{title:ju(()=>[_w(ww(m.tooltip),1)]),default:ju(()=>[m.icon?(Hr(),ji("span",{key:0,class:wu(`${v.prefixCls}-toolbar__icon`),onClick:E=>l(m)},[Ti(pw,{icon:m.icon,class:wu(m.disabled?"cursor-not-allowed disabled":"cursor-pointer")},null,8,["icon","class"])],10,Iw)):sf("",!0)]),_:2},1040),m.separate?(Hr(),gf(Mt(Aw),{key:0,type:"vertical"})):sf("",!0)],64))),128))],2))}});var cf={exports:{}};(function(v,h){(function(s,f){v.exports=f()})(window,function(){return function(s){var f={};function i(l){if(f[l])return f[l].exports;var c=f[l]={i:l,l:!1,exports:{}};return s[l].call(c.exports,c,c.exports,i),c.l=!0,c.exports}return i.m=s,i.c=f,i.d=function(l,c,b){i.o(l,c)||Object.defineProperty(l,c,{enumerable:!0,get:b})},i.r=function(l){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},i.t=function(l,c){if(1&c&&(l=i(l)),8&c||4&c&&typeof l=="object"&&l&&l.__esModule)return l;var b=Object.create(null);if(i.r(b),Object.defineProperty(b,"default",{enumerable:!0,value:l}),2&c&&typeof l!="string")for(var m in l)i.d(b,m,function(E){return l[E]}.bind(null,m));return b},i.n=function(l){var c=l&&l.__esModule?function(){return l.default}:function(){return l};return i.d(c,"a",c),c},i.o=function(l,c){return Object.prototype.hasOwnProperty.call(l,c)},i.p="",i(i.s=215)}([function(s,f,i){i.d(f,"a",function(){return J}),i.d(f,"b",function(){return ie}),i.d(f,"c",function(){return Ce}),i.d(f,"d",function(){return Ze}),i.d(f,"e",function(){return B}),i.d(f,"f",function(){return ee}),i.d(f,"g",function(){return B}),i.d(f,"h",function(){return Pe}),i.d(f,"i",function(){return c}),i.d(f,"j",function(){return Ke}),i.d(f,"k",function(){return F});var l,c,b,m,E,w,P,A={},j=[],M=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function N(q,K){for(var ae in K)q[ae]=K[ae];return q}function I(q){var K=q.parentNode;K&&K.removeChild(q)}function B(q,K,ae){var _e,Ae,we,qe={};for(we in K)we=="key"?_e=K[we]:we=="ref"?Ae=K[we]:qe[we]=K[we];if(arguments.length>2&&(qe.children=arguments.length>3?l.call(arguments,2):ae),typeof q=="function"&&q.defaultProps!=null)for(we in q.defaultProps)qe[we]===void 0&&(qe[we]=q.defaultProps[we]);return H(q,qe,_e,Ae,null)}function H(q,K,ae,_e,Ae){var we={type:q,props:K,key:ae,ref:_e,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:Ae==null?++b:Ae};return Ae==null&&c.vnode!=null&&c.vnode(we),we}function ee(){return{current:null}}function ie(q){return q.children}function J(q,K){this.props=q,this.context=K}function V(q,K){if(K==null)return q.__?V(q.__,q.__.__k.indexOf(q)+1):null;for(var ae;K<q.__k.length;K++)if((ae=q.__k[K])!=null&&ae.__e!=null)return ae.__e;return typeof q.type=="function"?V(q):null}function Z(q){var K,ae;if((q=q.__)!=null&&q.__c!=null){for(q.__e=q.__c.base=null,K=0;K<q.__k.length;K++)if((ae=q.__k[K])!=null&&ae.__e!=null){q.__e=q.__c.base=ae.__e;break}return Z(q)}}function z(q){(!q.__d&&(q.__d=!0)&&m.push(q)&&!D.__r++||w!==c.debounceRendering)&&((w=c.debounceRendering)||E)(D)}function D(){for(var q;D.__r=m.length;)q=m.sort(function(K,ae){return K.__v.__b-ae.__v.__b}),m=[],q.some(function(K){var ae,_e,Ae,we,qe,nt;K.__d&&(qe=(we=(ae=K).__v).__e,(nt=ae.__P)&&(_e=[],(Ae=N({},we)).__v=we.__v+1,ge(nt,we,Ae,ae.__n,nt.ownerSVGElement!==void 0,we.__h!=null?[qe]:null,_e,qe==null?V(we):qe,we.__h),ue(_e,we),we.__e!=qe&&Z(we)))})}function L(q,K,ae,_e,Ae,we,qe,nt,$e,Ye){var ve,Ue,te,Le,ut,vt,it,yt=_e&&_e.__k||j,St=yt.length;for(ae.__k=[],ve=0;ve<K.length;ve++)if((Le=ae.__k[ve]=(Le=K[ve])==null||typeof Le=="boolean"?null:typeof Le=="string"||typeof Le=="number"||typeof Le=="bigint"?H(null,Le,null,null,Le):Array.isArray(Le)?H(ie,{children:Le},null,null,null):Le.__b>0?H(Le.type,Le.props,Le.key,null,Le.__v):Le)!=null){if(Le.__=ae,Le.__b=ae.__b+1,(te=yt[ve])===null||te&&Le.key==te.key&&Le.type===te.type)yt[ve]=void 0;else for(Ue=0;Ue<St;Ue++){if((te=yt[Ue])&&Le.key==te.key&&Le.type===te.type){yt[Ue]=void 0;break}te=null}ge(q,Le,te=te||A,Ae,we,qe,nt,$e,Ye),ut=Le.__e,(Ue=Le.ref)&&te.ref!=Ue&&(it||(it=[]),te.ref&&it.push(te.ref,null,Le),it.push(Ue,Le.__c||ut,Le)),ut!=null?(vt==null&&(vt=ut),typeof Le.type=="function"&&Le.__k===te.__k?Le.__d=$e=C(Le,$e,q):$e=$(q,Le,te,yt,ut,$e),typeof ae.type=="function"&&(ae.__d=$e)):$e&&te.__e==$e&&$e.parentNode!=q&&($e=V(te))}for(ae.__e=vt,ve=St;ve--;)yt[ve]!=null&&(typeof ae.type=="function"&&yt[ve].__e!=null&&yt[ve].__e==ae.__d&&(ae.__d=V(_e,ve+1)),Se(yt[ve],yt[ve]));if(it)for(ve=0;ve<it.length;ve++)be(it[ve],it[++ve],it[++ve])}function C(q,K,ae){for(var _e,Ae=q.__k,we=0;Ae&&we<Ae.length;we++)(_e=Ae[we])&&(_e.__=q,K=typeof _e.type=="function"?C(_e,K,ae):$(ae,_e,_e,Ae,_e.__e,K));return K}function F(q,K){return K=K||[],q==null||typeof q=="boolean"||(Array.isArray(q)?q.some(function(ae){F(ae,K)}):K.push(q)),K}function $(q,K,ae,_e,Ae,we){var qe,nt,$e;if(K.__d!==void 0)qe=K.__d,K.__d=void 0;else if(ae==null||Ae!=we||Ae.parentNode==null)e:if(we==null||we.parentNode!==q)q.appendChild(Ae),qe=null;else{for(nt=we,$e=0;(nt=nt.nextSibling)&&$e<_e.length;$e+=2)if(nt==Ae)break e;q.insertBefore(Ae,we),qe=we}return qe!==void 0?qe:Ae.nextSibling}function le(q,K,ae){K[0]==="-"?q.setProperty(K,ae):q[K]=ae==null?"":typeof ae!="number"||M.test(K)?ae:ae+"px"}function ce(q,K,ae,_e,Ae){var we;e:if(K==="style")if(typeof ae=="string")q.style.cssText=ae;else{if(typeof _e=="string"&&(q.style.cssText=_e=""),_e)for(K in _e)ae&&K in ae||le(q.style,K,"");if(ae)for(K in ae)_e&&ae[K]===_e[K]||le(q.style,K,ae[K])}else if(K[0]==="o"&&K[1]==="n")we=K!==(K=K.replace(/Capture$/,"")),K=K.toLowerCase()in q?K.toLowerCase().slice(2):K.slice(2),q.l||(q.l={}),q.l[K+we]=ae,ae?_e||q.addEventListener(K,we?xe:ye,we):q.removeEventListener(K,we?xe:ye,we);else if(K!=="dangerouslySetInnerHTML"){if(Ae)K=K.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if(K!=="href"&&K!=="list"&&K!=="form"&&K!=="tabIndex"&&K!=="download"&&K in q)try{q[K]=ae==null?"":ae;break e}catch(qe){}typeof ae=="function"||(ae!=null&&(ae!==!1||K[0]==="a"&&K[1]==="r")?q.setAttribute(K,ae):q.removeAttribute(K))}}function ye(q){this.l[q.type+!1](c.event?c.event(q):q)}function xe(q){this.l[q.type+!0](c.event?c.event(q):q)}function ge(q,K,ae,_e,Ae,we,qe,nt,$e){var Ye,ve,Ue,te,Le,ut,vt,it,yt,St,Pt,at=K.type;if(K.constructor!==void 0)return null;ae.__h!=null&&($e=ae.__h,nt=K.__e=ae.__e,K.__h=null,we=[nt]),(Ye=c.__b)&&Ye(K);try{e:if(typeof at=="function"){if(it=K.props,yt=(Ye=at.contextType)&&_e[Ye.__c],St=Ye?yt?yt.props.value:Ye.__:_e,ae.__c?vt=(ve=K.__c=ae.__c).__=ve.__E:("prototype"in at&&at.prototype.render?K.__c=ve=new at(it,St):(K.__c=ve=new J(it,St),ve.constructor=at,ve.render=Ie),yt&&yt.sub(ve),ve.props=it,ve.state||(ve.state={}),ve.context=St,ve.__n=_e,Ue=ve.__d=!0,ve.__h=[]),ve.__s==null&&(ve.__s=ve.state),at.getDerivedStateFromProps!=null&&(ve.__s==ve.state&&(ve.__s=N({},ve.__s)),N(ve.__s,at.getDerivedStateFromProps(it,ve.__s))),te=ve.props,Le=ve.state,Ue)at.getDerivedStateFromProps==null&&ve.componentWillMount!=null&&ve.componentWillMount(),ve.componentDidMount!=null&&ve.__h.push(ve.componentDidMount);else{if(at.getDerivedStateFromProps==null&&it!==te&&ve.componentWillReceiveProps!=null&&ve.componentWillReceiveProps(it,St),!ve.__e&&ve.shouldComponentUpdate!=null&&ve.shouldComponentUpdate(it,ve.__s,St)===!1||K.__v===ae.__v){ve.props=it,ve.state=ve.__s,K.__v!==ae.__v&&(ve.__d=!1),ve.__v=K,K.__e=ae.__e,K.__k=ae.__k,K.__k.forEach(function(Ct){Ct&&(Ct.__=K)}),ve.__h.length&&qe.push(ve);break e}ve.componentWillUpdate!=null&&ve.componentWillUpdate(it,ve.__s,St),ve.componentDidUpdate!=null&&ve.__h.push(function(){ve.componentDidUpdate(te,Le,ut)})}ve.context=St,ve.props=it,ve.state=ve.__s,(Ye=c.__r)&&Ye(K),ve.__d=!1,ve.__v=K,ve.__P=q,Ye=ve.render(ve.props,ve.state,ve.context),ve.state=ve.__s,ve.getChildContext!=null&&(_e=N(N({},_e),ve.getChildContext())),Ue||ve.getSnapshotBeforeUpdate==null||(ut=ve.getSnapshotBeforeUpdate(te,Le)),Pt=Ye!=null&&Ye.type===ie&&Ye.key==null?Ye.props.children:Ye,L(q,Array.isArray(Pt)?Pt:[Pt],K,ae,_e,Ae,we,qe,nt,$e),ve.base=K.__e,K.__h=null,ve.__h.length&&qe.push(ve),vt&&(ve.__E=ve.__=null),ve.__e=!1}else we==null&&K.__v===ae.__v?(K.__k=ae.__k,K.__e=ae.__e):K.__e=he(ae.__e,K,ae,_e,Ae,we,qe,$e);(Ye=c.diffed)&&Ye(K)}catch(Ct){K.__v=null,($e||we!=null)&&(K.__e=nt,K.__h=!!$e,we[we.indexOf(nt)]=null),c.__e(Ct,K,ae)}}function ue(q,K){c.__c&&c.__c(K,q),q.some(function(ae){try{q=ae.__h,ae.__h=[],q.some(function(_e){_e.call(ae)})}catch(_e){c.__e(_e,ae.__v)}})}function he(q,K,ae,_e,Ae,we,qe,nt){var $e,Ye,ve,Ue=ae.props,te=K.props,Le=K.type,ut=0;if(Le==="svg"&&(Ae=!0),we!=null){for(;ut<we.length;ut++)if(($e=we[ut])&&"setAttribute"in $e==!!Le&&(Le?$e.localName===Le:$e.nodeType===3)){q=$e,we[ut]=null;break}}if(q==null){if(Le===null)return document.createTextNode(te);q=Ae?document.createElementNS("http://www.w3.org/2000/svg",Le):document.createElement(Le,te.is&&te),we=null,nt=!1}if(Le===null)Ue===te||nt&&q.data===te||(q.data=te);else{if(we=we&&l.call(q.childNodes),Ye=(Ue=ae.props||A).dangerouslySetInnerHTML,ve=te.dangerouslySetInnerHTML,!nt){if(we!=null)for(Ue={},ut=0;ut<q.attributes.length;ut++)Ue[q.attributes[ut].name]=q.attributes[ut].value;(ve||Ye)&&(ve&&(Ye&&ve.__html==Ye.__html||ve.__html===q.innerHTML)||(q.innerHTML=ve&&ve.__html||""))}if(function(vt,it,yt,St,Pt){var at;for(at in yt)at==="children"||at==="key"||at in it||ce(vt,at,null,yt[at],St);for(at in it)Pt&&typeof it[at]!="function"||at==="children"||at==="key"||at==="value"||at==="checked"||yt[at]===it[at]||ce(vt,at,it[at],yt[at],St)}(q,te,Ue,Ae,nt),ve)K.__k=[];else if(ut=K.props.children,L(q,Array.isArray(ut)?ut:[ut],K,ae,_e,Ae&&Le!=="foreignObject",we,qe,we?we[0]:ae.__k&&V(ae,0),nt),we!=null)for(ut=we.length;ut--;)we[ut]!=null&&I(we[ut]);nt||("value"in te&&(ut=te.value)!==void 0&&(ut!==Ue.value||ut!==q.value||Le==="progress"&&!ut)&&ce(q,"value",ut,Ue.value,!1),"checked"in te&&(ut=te.checked)!==void 0&&ut!==q.checked&&ce(q,"checked",ut,Ue.checked,!1))}return q}function be(q,K,ae){try{typeof q=="function"?q(K):q.current=K}catch(_e){c.__e(_e,ae)}}function Se(q,K,ae){var _e,Ae;if(c.unmount&&c.unmount(q),(_e=q.ref)&&(_e.current&&_e.current!==q.__e||be(_e,null,K)),(_e=q.__c)!=null){if(_e.componentWillUnmount)try{_e.componentWillUnmount()}catch(we){c.__e(we,K)}_e.base=_e.__P=null}if(_e=q.__k)for(Ae=0;Ae<_e.length;Ae++)_e[Ae]&&Se(_e[Ae],K,typeof q.type!="function");ae||q.__e==null||I(q.__e),q.__e=q.__d=void 0}function Ie(q,K,ae){return this.constructor(q,ae)}function Ke(q,K,ae){var _e,Ae,we;c.__&&c.__(q,K),Ae=(_e=typeof ae=="function")?null:ae&&ae.__k||K.__k,we=[],ge(K,q=(!_e&&ae||K).__k=B(ie,null,[q]),Ae||A,A,K.ownerSVGElement!==void 0,!_e&&ae?[ae]:Ae?null:K.firstChild?l.call(K.childNodes):null,we,!_e&&ae?ae:Ae?Ae.__e:K.firstChild,_e),ue(we,q)}function Pe(q,K){Ke(q,K,Pe)}function Ce(q,K,ae){var _e,Ae,we,qe=N({},q.props);for(we in K)we=="key"?_e=K[we]:we=="ref"?Ae=K[we]:qe[we]=K[we];return arguments.length>2&&(qe.children=arguments.length>3?l.call(arguments,2):ae),H(q.type,qe,_e||q.key,Ae||q.ref,null)}function Ze(q,K){var ae={__c:K="__cC"+P++,__:q,Consumer:function(_e,Ae){return _e.children(Ae)},Provider:function(_e){var Ae,we;return this.getChildContext||(Ae=[],(we={})[K]=this,this.getChildContext=function(){return we},this.shouldComponentUpdate=function(qe){this.props.value!==qe.value&&Ae.some(z)},this.sub=function(qe){Ae.push(qe);var nt=qe.componentWillUnmount;qe.componentWillUnmount=function(){Ae.splice(Ae.indexOf(qe),1),nt&&nt.call(qe)}}),_e.children}};return ae.Provider.__=ae.Consumer.contextType=ae}l=j.slice,c={__e:function(q,K){for(var ae,_e,Ae;K=K.__;)if((ae=K.__c)&&!ae.__)try{if((_e=ae.constructor)&&_e.getDerivedStateFromError!=null&&(ae.setState(_e.getDerivedStateFromError(q)),Ae=ae.__d),ae.componentDidCatch!=null&&(ae.componentDidCatch(q),Ae=ae.__d),Ae)return ae.__E=ae}catch(we){q=we}throw q}},b=0,J.prototype.setState=function(q,K){var ae;ae=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=N({},this.state),typeof q=="function"&&(q=q(N({},ae),this.props)),q&&N(ae,q),q!=null&&this.__v&&(K&&this.__h.push(K),z(this))},J.prototype.forceUpdate=function(q){this.__v&&(this.__e=!0,q&&this.__h.push(q),z(this))},J.prototype.render=ie,m=[],E=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,D.__r=0,P=0},function(s,f,i){(function(l,c){i.d(f,"a",function(){return z}),i.d(f,"b",function(){return Ko}),i.d(f,"c",function(){return zn}),i.d(f,"d",function(){return et}),i.d(f,"e",function(){return De}),i.d(f,"f",function(){return Me}),i.d(f,"g",function(){return Ve}),i.d(f,"h",function(){return Tr}),i.d(f,"i",function(){return Pt}),i.d(f,"j",function(){return ze}),i.d(f,"k",function(){return Wn}),i.d(f,"l",function(){return Yo}),i.d(f,"m",function(){return vt}),i.d(f,"n",function(){return Ar}),i.d(f,"o",function(){return C}),i.d(f,"p",function(){return Ki}),i.d(f,"q",function(){return Kn}),i.d(f,"r",function(){return Yi}),i.d(f,"s",function(){return xn}),i.d(f,"t",function(){return Vr}),i.d(f,"u",function(){return so}),i.d(f,"v",function(){return Yu}),i.d(f,"w",function(){return Wi}),i.d(f,"x",function(){return Kr}),i.d(f,"y",function(){return Nn}),i.d(f,"z",function(){return Lt}),i.d(f,"A",function(){return gn}),i.d(f,"B",function(){return Zn}),i.d(f,"C",function(){return Ye}),i.d(f,"D",function(){return qi}),i.d(f,"E",function(){return Pr}),i.d(f,"F",function(){return jr}),i.d(f,"G",function(){return Hu}),i.d(f,"H",function(){return Li}),i.d(f,"I",function(){return Wu}),i.d(f,"J",function(){return _n}),i.d(f,"K",function(){return ne}),i.d(f,"L",function(){return $t}),i.d(f,"M",function(){return Ji});var b=[];Object.freeze(b);var m={};function E(){return++Ge.mobxGuid}function w(y){throw P(!1,y),"X"}function P(y,g){if(!y)throw new Error("[mobx] "+(g||"An invariant failed, however the error is obfuscated because this is a production build."))}Object.freeze(m);function A(y){var g=!1;return function(){if(!g)return g=!0,y.apply(this,arguments)}}var j=function(){};function M(y){return y!==null&&typeof y=="object"}function N(y){if(y===null||typeof y!="object")return!1;var g=Object.getPrototypeOf(y);return g===Object.prototype||g===null}function I(y,g,x){Object.defineProperty(y,g,{enumerable:!1,writable:!0,configurable:!0,value:x})}function B(y,g){var x="isMobX"+y;return g.prototype[x]=!0,function(T){return M(T)&&T[x]===!0}}function H(y){return y instanceof Map}function ee(y){return y instanceof Set}function ie(y){var g=new Set;for(var x in y)g.add(x);return Object.getOwnPropertySymbols(y).forEach(function(T){Object.getOwnPropertyDescriptor(y,T).enumerable&&g.add(T)}),Array.from(g)}function J(y){return y&&y.toString?y.toString():new String(y).toString()}function V(y){return y===null?null:typeof y=="object"?""+y:y}var Z=typeof Reflect!="undefined"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols?function(y){return Object.getOwnPropertyNames(y).concat(Object.getOwnPropertySymbols(y))}:Object.getOwnPropertyNames,z=Symbol("mobx administration"),D=function(){function y(g){g===void 0&&(g="Atom@"+E()),this.name=g,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=new Set,this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=Ue.NOT_TRACKING}return y.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(g){return g()})},y.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(g){return g()})},y.prototype.reportObserved=function(){return Ri(this)},y.prototype.reportChanged=function(){mn(),function(g){g.lowestObserverState!==Ue.STALE&&(g.lowestObserverState=Ue.STALE,g.observers.forEach(function(x){x.dependenciesState===Ue.UP_TO_DATE&&(x.isTracing!==te.NONE&&Vn(x,g),x.onBecomeStale()),x.dependenciesState=Ue.STALE}))}(this),On()},y.prototype.toString=function(){return this.name},y}(),L=B("Atom",D);function C(y,g,x){g===void 0&&(g=j),x===void 0&&(x=j);var T,U=new D(y);return g!==j&&Fi("onBecomeObserved",U,g,T),x!==j&&Pr(U,x),U}var F={identity:function(y,g){return y===g},structural:function(y,g){return qo(y,g)},default:function(y,g){return Object.is(y,g)},shallow:function(y,g){return qo(y,g,1)}},$=function(y,g){return $=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,T){x.__proto__=T}||function(x,T){for(var U in T)T.hasOwnProperty(U)&&(x[U]=T[U])},$(y,g)};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation. All rights reserved.
	Licensed under the Apache License, Version 2.0 (the "License"); you may not use
	this file except in compliance with the License. You may obtain a copy of the
	License at http://www.apache.org/licenses/LICENSE-2.0

	THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
	KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
	WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
	MERCHANTABLITY OR NON-INFRINGEMENT.

	See the Apache Version 2.0 License for specific language governing permissions
	and limitations under the License.
	***************************************************************************** */var le=function(){return le=Object.assign||function(y){for(var g,x=1,T=arguments.length;x<T;x++)for(var U in g=arguments[x])Object.prototype.hasOwnProperty.call(g,U)&&(y[U]=g[U]);return y},le.apply(this,arguments)};function ce(y){var g=typeof Symbol=="function"&&y[Symbol.iterator],x=0;return g?g.call(y):{next:function(){return y&&x>=y.length&&(y=void 0),{value:y&&y[x++],done:!y}}}}function ye(y,g){var x=typeof Symbol=="function"&&y[Symbol.iterator];if(!x)return y;var T,U,Q=x.call(y),pe=[];try{for(;(g===void 0||g-- >0)&&!(T=Q.next()).done;)pe.push(T.value)}catch(je){U={error:je}}finally{try{T&&!T.done&&(x=Q.return)&&x.call(Q)}finally{if(U)throw U.error}}return pe}function xe(){for(var y=[],g=0;g<arguments.length;g++)y=y.concat(ye(arguments[g]));return y}var ge=Symbol("mobx did run lazy initializers"),ue=Symbol("mobx pending decorators"),he={},be={};function Se(y,g){var x=g?he:be;return x[y]||(x[y]={configurable:!0,enumerable:g,get:function(){return Ie(this),this[y]},set:function(T){Ie(this),this[y]=T}})}function Ie(y){var g,x;if(y[ge]!==!0){var T=y[ue];if(T){I(y,ge,!0);var U=xe(Object.getOwnPropertySymbols(T),Object.keys(T));try{for(var Q=ce(U),pe=Q.next();!pe.done;pe=Q.next()){var je=T[pe.value];je.propertyCreator(y,je.prop,je.descriptor,je.decoratorTarget,je.decoratorArguments)}}catch(Fe){g={error:Fe}}finally{try{pe&&!pe.done&&(x=Q.return)&&x.call(Q)}finally{if(g)throw g.error}}}}}function Ke(y,g){return function(){var x,T=function(U,Q,pe,je){if(je===!0)return g(U,Q,pe,U,x),null;if(!Object.prototype.hasOwnProperty.call(U,ue)){var Fe=U[ue];I(U,ue,le({},Fe))}return U[ue][Q]={prop:Q,propertyCreator:g,descriptor:pe,decoratorTarget:U,decoratorArguments:x},Se(Q,y)};return Pe(arguments)?(x=b,T.apply(null,arguments)):(x=Array.prototype.slice.call(arguments),T)}}function Pe(y){return(y.length===2||y.length===3)&&(typeof y[1]=="string"||typeof y[1]=="symbol")||y.length===4&&y[3]===!0}function Ce(y,g,x){return Kr(y)?y:Array.isArray(y)?Ye.array(y,{name:x}):N(y)?Ye.object(y,void 0,{name:x}):H(y)?Ye.map(y,{name:x}):ee(y)?Ye.set(y,{name:x}):y}function Ze(y){return y}function q(y){P(y);var g=Ke(!0,function(T,U,Q,pe,je){var Fe=Q?Q.initializer?Q.initializer.call(T):Q.value:void 0;qr(T).addObservableProp(U,Fe,y)}),x=(l!==void 0&&l.env,g);return x.enhancer=y,x}var K={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function ae(y){return y==null?K:typeof y=="string"?{name:y,deep:!0,proxy:!0}:y}Object.freeze(K);var _e=q(Ce),Ae=q(function(y,g,x){return y==null||gn(y)||Nn(y)||Lt(y)||yn(y)?y:Array.isArray(y)?Ye.array(y,{name:x,deep:!1}):N(y)?Ye.object(y,void 0,{name:x,deep:!1}):H(y)?Ye.map(y,{name:x,deep:!1}):ee(y)?Ye.set(y,{name:x,deep:!1}):w(!1)}),we=q(Ze),qe=q(function(y,g,x){return qo(y,g)?g:y});function nt(y){return y.defaultDecorator?y.defaultDecorator.enhancer:y.deep===!1?Ze:Ce}var $e={box:function(y,g){arguments.length>2&&ve("box");var x=ae(g);return new Dt(y,nt(x),x.name,!0,x.equals)},array:function(y,g){arguments.length>2&&ve("array");var x=ae(g);return Wo(y,nt(x),x.name)},map:function(y,g){arguments.length>2&&ve("map");var x=ae(g);return new Ko(y,nt(x),x.name)},set:function(y,g){arguments.length>2&&ve("set");var x=ae(g);return new fo(y,nt(x),x.name)},object:function(y,g,x){typeof arguments[1]=="string"&&ve("object");var T=ae(x);if(T.proxy===!1)return Kn({},y,g,T);var U=Ui(T),Q=Kn({},void 0,void 0,T),pe=Zu(Q);return Hi(pe,y,g,U),pe},ref:we,shallow:Ae,deep:_e,struct:qe},Ye=function(y,g,x){if(typeof arguments[1]=="string"||typeof arguments[1]=="symbol")return _e.apply(null,arguments);if(Kr(y))return y;var T=N(y)?Ye.object(y,g,x):Array.isArray(y)?Ye.array(y,g):H(y)?Ye.map(y,g):ee(y)?Ye.set(y,g):y;if(T!==y)return T;w(!1)};function ve(y){w("Expected one or two arguments to observable."+y+". Did you accidentally try to use observable."+y+" as decorator?")}Object.keys($e).forEach(function(y){return Ye[y]=$e[y]});var Ue,te,Le=Ke(!1,function(y,g,x,T,U){var Q=x.get,pe=x.set,je=U[0]||{};qr(y).addComputedProp(y,g,le({get:Q,set:pe,context:y},je))}),ut=Le({equals:F.structural}),vt=function(y,g,x){if(typeof g=="string"||y!==null&&typeof y=="object"&&arguments.length===1)return Le.apply(null,arguments);var T=typeof g=="object"?g:{};return T.get=y,T.set=typeof g=="function"?g:T.set,T.name=T.name||y.name||"",new Xn(T)};vt.struct=ut,function(y){y[y.NOT_TRACKING=-1]="NOT_TRACKING",y[y.UP_TO_DATE=0]="UP_TO_DATE",y[y.POSSIBLY_STALE=1]="POSSIBLY_STALE",y[y.STALE=2]="STALE"}(Ue||(Ue={})),function(y){y[y.NONE=0]="NONE",y[y.LOG=1]="LOG",y[y.BREAK=2]="BREAK"}(te||(te={}));var it=function(y){this.cause=y};function yt(y){return y instanceof it}function St(y){switch(y.dependenciesState){case Ue.UP_TO_DATE:return!1;case Ue.NOT_TRACKING:case Ue.STALE:return!0;case Ue.POSSIBLY_STALE:for(var g=Me(!0),x=Y(),T=y.observing,U=T.length,Q=0;Q<U;Q++){var pe=T[Q];if(Yn(pe)){if(Ge.disableErrorBoundaries)pe.get();else try{pe.get()}catch(je){return se(x),De(g),!0}if(y.dependenciesState===Ue.STALE)return se(x),De(g),!0}}return Xe(y),se(x),De(g),!1}}function Pt(){return Ge.trackingDerivation!==null}function at(y){var g=y.observers.size>0;Ge.computationDepth>0&&g&&w(!1),Ge.allowStateChanges||!g&&Ge.enforceActions!=="strict"||w(!1)}function Ct(y,g,x){var T=Me(!0);Xe(y),y.newObserving=new Array(y.observing.length+100),y.unboundDepsCount=0,y.runId=++Ge.runId;var U,Q=Ge.trackingDerivation;if(Ge.trackingDerivation=y,Ge.disableErrorBoundaries===!0)U=g.call(x);else try{U=g.call(x)}catch(pe){U=new it(pe)}return Ge.trackingDerivation=Q,function(pe){for(var je=pe.observing,Fe=pe.observing=pe.newObserving,dt=Ue.UP_TO_DATE,ot=0,xt=pe.unboundDepsCount,ct=0;ct<xt;ct++)(Ot=Fe[ct]).diffValue===0&&(Ot.diffValue=1,ot!==ct&&(Fe[ot]=Ot),ot++),Ot.dependenciesState>dt&&(dt=Ot.dependenciesState);for(Fe.length=ot,pe.newObserving=null,xt=je.length;xt--;)(Ot=je[xt]).diffValue===0&&Ni(Ot,pe),Ot.diffValue=0;for(;ot--;){var Ot;(Ot=Fe[ot]).diffValue===1&&(Ot.diffValue=0,zu(Ot,pe))}dt!==Ue.UP_TO_DATE&&(pe.dependenciesState=dt,pe.onBecomeStale())}(y),De(T),U}function G(y){var g=y.observing;y.observing=[];for(var x=g.length;x--;)Ni(g[x],y);y.dependenciesState=Ue.NOT_TRACKING}function ne(y){var g=Y();try{return y()}finally{se(g)}}function Y(){var y=Ge.trackingDerivation;return Ge.trackingDerivation=null,y}function se(y){Ge.trackingDerivation=y}function Me(y){var g=Ge.allowStateReads;return Ge.allowStateReads=y,g}function De(y){Ge.allowStateReads=y}function Xe(y){if(y.dependenciesState!==Ue.UP_TO_DATE){y.dependenciesState=Ue.UP_TO_DATE;for(var g=y.observing,x=g.length;x--;)g[x].lowestObserverState=Ue.UP_TO_DATE}}var ft=0,Ht=1,Zt=Object.getOwnPropertyDescriptor(function(){},"name");Zt&&Zt.configurable;function Rt(y,g,x){var T=function(){return It(y,g,x||this,arguments)};return T.isMobxAction=!0,T}function It(y,g,x,T){var U=ze();try{return g.apply(x,T)}catch(Q){throw U.error=Q,Q}finally{Ve(U)}}function ze(y,g,x){var T=0,U=Y();mn();var Q={prevDerivation:U,prevAllowStateChanges:rt(!0),prevAllowStateReads:Me(!0),notifySpy:!1,startTime:T,actionId:Ht++,parentActionId:ft};return ft=Q.actionId,Q}function Ve(y){ft!==y.actionId&&w("invalid action stack. did you forget to finish an action?"),ft=y.parentActionId,y.error!==void 0&&(Ge.suppressReactionErrors=!0),wt(y.prevAllowStateChanges),De(y.prevAllowStateReads),On(),se(y.prevDerivation),y.notifySpy,Ge.suppressReactionErrors=!1}function et(y,g){var x,T=rt(y);try{x=g()}finally{wt(T)}return x}function rt(y){var g=Ge.allowStateChanges;return Ge.allowStateChanges=y,g}function wt(y){Ge.allowStateChanges=y}var Dt=function(y){function g(x,T,U,Q,pe){U===void 0&&(U="ObservableValue@"+E()),pe===void 0&&(pe=F.default);var je=y.call(this,U)||this;return je.enhancer=T,je.name=U,je.equals=pe,je.hasUnreportedChange=!1,je.value=T(x,void 0,U),je}return function(x,T){function U(){this.constructor=x}$(x,T),x.prototype=T===null?Object.create(T):(U.prototype=T.prototype,new U)}(g,y),g.prototype.dehanceValue=function(x){return this.dehancer!==void 0?this.dehancer(x):x},g.prototype.set=function(x){this.value,(x=this.prepareNewValue(x))!==Ge.UNCHANGED&&this.setNewValue(x)},g.prototype.prepareNewValue=function(x){if(at(this),an(this)){var T=gt(this,{object:this,type:"update",newValue:x});if(!T)return Ge.UNCHANGED;x=T.newValue}return x=this.enhancer(x,this.value,this.name),this.equals(this.value,x)?Ge.UNCHANGED:x},g.prototype.setNewValue=function(x){var T=this.value;this.value=x,this.reportChanged(),wn(this)&&qt(this,{type:"update",object:this,newValue:x,oldValue:T})},g.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},g.prototype.intercept=function(x){return fr(this,x)},g.prototype.observe=function(x,T){return T&&x({object:this,type:"update",newValue:this.value,oldValue:void 0}),pr(this,x)},g.prototype.toJSON=function(){return this.get()},g.prototype.toString=function(){return this.name+"["+this.value+"]"},g.prototype.valueOf=function(){return V(this.get())},g.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},g}(D),sr=B("ObservableValue",Dt),Xn=function(){function y(g){this.dependenciesState=Ue.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=new Set,this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=Ue.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+E(),this.value=new it(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=te.NONE,P(g.get,"missing option for computed: get"),this.derivation=g.get,this.name=g.name||"ComputedValue@"+E(),g.set&&(this.setter=Rt(this.name+"-setter",g.set)),this.equals=g.equals||(g.compareStructural||g.struct?F.structural:F.default),this.scope=g.context,this.requiresReaction=!!g.requiresReaction,this.keepAlive=!!g.keepAlive}return y.prototype.onBecomeStale=function(){(function(g){g.lowestObserverState===Ue.UP_TO_DATE&&(g.lowestObserverState=Ue.POSSIBLY_STALE,g.observers.forEach(function(x){x.dependenciesState===Ue.UP_TO_DATE&&(x.dependenciesState=Ue.POSSIBLY_STALE,x.isTracing!==te.NONE&&Vn(x,g),x.onBecomeStale())}))})(this)},y.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(g){return g()})},y.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(g){return g()})},y.prototype.get=function(){this.isComputing&&w("Cycle detected in computation "+this.name+": "+this.derivation),Ge.inBatch!==0||this.observers.size!==0||this.keepAlive?(Ri(this),St(this)&&this.trackAndCompute()&&function(x){x.lowestObserverState!==Ue.STALE&&(x.lowestObserverState=Ue.STALE,x.observers.forEach(function(T){T.dependenciesState===Ue.POSSIBLY_STALE?T.dependenciesState=Ue.STALE:T.dependenciesState===Ue.UP_TO_DATE&&(x.lowestObserverState=Ue.UP_TO_DATE)}))}(this)):St(this)&&(this.warnAboutUntrackedRead(),mn(),this.value=this.computeValue(!1),On());var g=this.value;if(yt(g))throw g.cause;return g},y.prototype.peek=function(){var g=this.computeValue(!1);if(yt(g))throw g.cause;return g},y.prototype.set=function(g){if(this.setter){P(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,g)}finally{this.isRunningSetter=!1}}else P(!1,!1)},y.prototype.trackAndCompute=function(){var g=this.value,x=this.dependenciesState===Ue.NOT_TRACKING,T=this.computeValue(!0),U=x||yt(g)||yt(T)||!this.equals(g,T);return U&&(this.value=T),U},y.prototype.computeValue=function(g){var x;if(this.isComputing=!0,Ge.computationDepth++,g)x=Ct(this,this.derivation,this.scope);else if(Ge.disableErrorBoundaries===!0)x=this.derivation.call(this.scope);else try{x=this.derivation.call(this.scope)}catch(T){x=new it(T)}return Ge.computationDepth--,this.isComputing=!1,x},y.prototype.suspend=function(){this.keepAlive||(G(this),this.value=void 0)},y.prototype.observe=function(g,x){var T=this,U=!0,Q=void 0;return Yo(function(){var pe=T.get();if(!U||x){var je=Y();g({type:"update",object:T,newValue:pe,oldValue:Q}),se(je)}U=!1,Q=pe})},y.prototype.warnAboutUntrackedRead=function(){},y.prototype.toJSON=function(){return this.get()},y.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},y.prototype.valueOf=function(){return V(this.get())},y.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},y}(),Yn=B("ComputedValue",Xn),Yr=function(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.allowStateReads=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1},Lu={};function Ho(){return typeof window!="undefined"?window:c!==void 0?c:typeof self!="undefined"?self:Lu}var kn=!0,Di=!1,Ge=function(){var y=Ho();return y.__mobxInstanceCount>0&&!y.__mobxGlobals&&(kn=!1),y.__mobxGlobals&&y.__mobxGlobals.version!==new Yr().version&&(kn=!1),kn?y.__mobxGlobals?(y.__mobxInstanceCount+=1,y.__mobxGlobals.UNCHANGED||(y.__mobxGlobals.UNCHANGED={}),y.__mobxGlobals):(y.__mobxInstanceCount=1,y.__mobxGlobals=new Yr):(setTimeout(function(){Di||w("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")},1),new Yr)}();function zu(y,g){y.observers.add(g),y.lowestObserverState>g.dependenciesState&&(y.lowestObserverState=g.dependenciesState)}function Ni(y,g){y.observers.delete(g),y.observers.size===0&&Ci(y)}function Ci(y){y.isPendingUnobservation===!1&&(y.isPendingUnobservation=!0,Ge.pendingUnobservations.push(y))}function mn(){Ge.inBatch++}function On(){if(--Ge.inBatch==0){Ii();for(var y=Ge.pendingUnobservations,g=0;g<y.length;g++){var x=y[g];x.isPendingUnobservation=!1,x.observers.size===0&&(x.isBeingObserved&&(x.isBeingObserved=!1,x.onBecomeUnobserved()),x instanceof Xn&&x.suspend())}Ge.pendingUnobservations=[]}}function Ri(y){var g=Ge.trackingDerivation;return g!==null?(g.runId!==y.lastAccessedBy&&(y.lastAccessedBy=g.runId,g.newObserving[g.unboundDepsCount++]=y,y.isBeingObserved||(y.isBeingObserved=!0,y.onBecomeObserved())),!0):(y.observers.size===0&&Ge.inBatch>0&&Ci(y),!1)}function Vn(y,g){if(y.isTracing===te.BREAK){var x=[];Sr(Vr(y),x,1),new Function(`debugger;
/*
Tracing '`+y.name+`'

You are entering this break point because derivation '`+y.name+"' is being traced and '"+g.name+`' is now forcing it to update.
Just follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update
The stackframe you are looking for is at least ~6-8 stack-frames up.

`+(y instanceof Xn?y.derivation.toString().replace(/[*]\//g,"/"):"")+`

The dependencies for this derivation are:

`+x.join(`
`)+`
*/
    `)()}}function Sr(y,g,x){g.length>=1e3?g.push("(and many more)"):(g.push(""+new Array(x).join("	")+y.name),y.dependencies&&y.dependencies.forEach(function(T){return Sr(T,g,x+1)}))}var zn=function(){function y(g,x,T,U){g===void 0&&(g="Reaction@"+E()),U===void 0&&(U=!1),this.name=g,this.onInvalidate=x,this.errorHandler=T,this.requiresObservable=U,this.observing=[],this.newObserving=[],this.dependenciesState=Ue.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+E(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=te.NONE}return y.prototype.onBecomeStale=function(){this.schedule()},y.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,Ge.pendingReactions.push(this),Ii())},y.prototype.isScheduled=function(){return this._isScheduled},y.prototype.runReaction=function(){if(!this.isDisposed){if(mn(),this._isScheduled=!1,St(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending}catch(g){this.reportExceptionInDerivation(g)}}On()}},y.prototype.track=function(g){if(!this.isDisposed){mn(),this._isRunning=!0;var x=Ct(this,g,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&G(this),yt(x)&&this.reportExceptionInDerivation(x.cause),On()}},y.prototype.reportExceptionInDerivation=function(g){var x=this;if(this.errorHandler)this.errorHandler(g,this);else{if(Ge.disableErrorBoundaries)throw g;Ge.suppressReactionErrors,Ge.globalReactionErrorHandlers.forEach(function(T){return T(g,x)})}},y.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(mn(),G(this),On()))},y.prototype.getDisposer=function(){var g=this.dispose.bind(this);return g[z]=this,g},y.prototype.toString=function(){return"Reaction["+this.name+"]"},y.prototype.trace=function(g){g===void 0&&(g=!1),function(){for(var x=[],T=0;T<arguments.length;T++)x[T]=arguments[T];var U=!1;typeof x[x.length-1]=="boolean"&&(U=x.pop());var Q=Mn(x);if(!Q)return w(!1);Q.isTracing,te.NONE,Q.isTracing=U?te.BREAK:te.LOG}(this,g)},y}(),Go=function(y){return y()};function Ii(){Ge.inBatch>0||Ge.isRunningReactions||Go(Bu)}function Bu(){Ge.isRunningReactions=!0;for(var y=Ge.pendingReactions,g=0;y.length>0;){++g==100&&y.splice(0);for(var x=y.splice(0),T=0,U=x.length;T<U;T++)x[T].runReaction()}Ge.isRunningReactions=!1}var uo=B("Reaction",zn);function Fu(y){var g=Go;Go=function(x){return y(function(){return g(x)})}}function Li(y){return function(){}}function Uu(){w(!1)}function cr(y){return function(g,x,T){if(T){if(T.value)return{value:Rt(y,T.value),enumerable:!1,configurable:!0,writable:!0};var U=T.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return Rt(y,U.call(this))}}}return zi(y).apply(this,arguments)}}function zi(y){return function(g,x,T){Object.defineProperty(g,x,{configurable:!0,enumerable:!1,get:function(){},set:function(U){I(this,x,Wn(y,U))}})}}var Wn=function(y,g,x,T){return arguments.length===1&&typeof y=="function"?Rt(y.name||"<unnamed action>",y):arguments.length===2&&typeof g=="function"?Rt(y,g):arguments.length===1&&typeof y=="string"?cr(y):T!==!0?cr(g).apply(null,arguments):void I(y,g,Rt(y.name||g,x.value,this))};function Hu(y,g){return It(typeof y=="string"?y:y.name||"<unnamed action>",typeof y=="function"?y:g,this,void 0)}function so(y){return typeof y=="function"&&y.isMobxAction===!0}function Xo(y,g,x){I(y,g,Rt(g,x.bind(y)))}function Yo(y,g){g===void 0&&(g=m);var x,T=g&&g.name||y.name||"Autorun@"+E();if(!g.scheduler&&!g.delay)x=new zn(T,function(){this.track(pe)},g.onError,g.requiresObservable);else{var U=Bi(g),Q=!1;x=new zn(T,function(){Q||(Q=!0,U(function(){Q=!1,x.isDisposed||x.track(pe)}))},g.onError,g.requiresObservable)}function pe(){y(x)}return x.schedule(),x.getDisposer()}Wn.bound=function(y,g,x,T){return T===!0?(Xo(y,g,x.value),null):x?{configurable:!0,enumerable:!1,get:function(){return Xo(this,g,x.value||x.initializer.call(this)),this[g]},set:Uu}:{enumerable:!1,configurable:!0,set:function(U){Xo(this,g,U)},get:function(){}}};var Gu=function(y){return y()};function Bi(y){return y.scheduler?y.scheduler:y.delay?function(g){return setTimeout(g,y.delay)}:Gu}function jr(y,g,x){x===void 0&&(x=m);var T,U,Q,pe=x.name||"Reaction@"+E(),je=Wn(pe,x.onError?(T=x.onError,U=g,function(){try{return U.apply(this,arguments)}catch(kt){T.call(this,kt)}}):g),Fe=!x.scheduler&&!x.delay,dt=Bi(x),ot=!0,xt=!1,ct=x.compareStructural?F.structural:x.equals||F.default,Ot=new zn(pe,function(){ot||Fe?En():xt||(xt=!0,dt(En))},x.onError,x.requiresObservable);function En(){if(xt=!1,!Ot.isDisposed){var kt=!1;Ot.track(function(){var un=y(Ot);kt=ot||!ct(Q,un),Q=un}),ot&&x.fireImmediately&&je(Q,Ot),ot||kt!==!0||je(Q,Ot),ot&&(ot=!1)}}return Ot.schedule(),Ot.getDisposer()}function Pr(y,g,x){return Fi("onBecomeUnobserved",y,g,x)}function Fi(y,g,x,T){var U=typeof T=="function"?xn(g,x):xn(g),Q=typeof T=="function"?T:x,pe=y+"Listeners";return U[pe]?U[pe].add(Q):U[pe]=new Set([Q]),typeof U[y]!="function"?w(!1):function(){var je=U[pe];je&&(je.delete(Q),je.size===0&&delete U[pe])}}function Ar(y){var g=y.enforceActions,x=y.computedRequiresReaction,T=y.computedConfigurable,U=y.disableErrorBoundaries,Q=y.reactionScheduler,pe=y.reactionRequiresObservable,je=y.observableRequiresReaction;if(y.isolateGlobalState===!0&&((Ge.pendingReactions.length||Ge.inBatch||Ge.isRunningReactions)&&w("isolateGlobalState should be called before MobX is running any reactions"),Di=!0,kn&&(--Ho().__mobxInstanceCount==0&&(Ho().__mobxGlobals=void 0),Ge=new Yr)),g!==void 0){var Fe=void 0;switch(g){case!0:case"observed":Fe=!0;break;case!1:case"never":Fe=!1;break;case"strict":case"always":Fe="strict";break;default:w("Invalid value for 'enforceActions': '"+g+"', expected 'never', 'always' or 'observed'")}Ge.enforceActions=Fe,Ge.allowStateChanges=Fe!==!0&&Fe!=="strict"}x!==void 0&&(Ge.computedRequiresReaction=!!x),pe!==void 0&&(Ge.reactionRequiresObservable=!!pe),je!==void 0&&(Ge.observableRequiresReaction=!!je,Ge.allowStateReads=!Ge.observableRequiresReaction),T!==void 0&&(Ge.computedConfigurable=!!T),U!==void 0&&(Ge.disableErrorBoundaries=!!U),Q&&Fu(Q)}function Kn(y,g,x,T){var U=Ui(T=ae(T));return Ie(y),qr(y,T.name,U.enhancer),g&&Hi(y,g,x,U),y}function Ui(y){return y.defaultDecorator||(y.deep===!1?we:_e)}function Hi(y,g,x,T){var U,Q;mn();try{var pe=Z(g);try{for(var je=ce(pe),Fe=je.next();!Fe.done;Fe=je.next()){var dt=Fe.value,ot=Object.getOwnPropertyDescriptor(g,dt),xt=(x&&dt in x?x[dt]:ot.get?Le:T)(y,dt,ot,!0);xt&&Object.defineProperty(y,dt,xt)}}catch(ct){U={error:ct}}finally{try{Fe&&!Fe.done&&(Q=je.return)&&Q.call(je)}finally{if(U)throw U.error}}}finally{On()}}function Vr(y,g){return Gi(xn(y,g))}function Gi(y){var g,x,T={name:y.name};return y.observing&&y.observing.length>0&&(T.dependencies=(g=y.observing,x=[],g.forEach(function(U){x.indexOf(U)===-1&&x.push(U)}),x).map(Gi)),T}var Xu=0;function Xi(){this.message="FLOW_CANCELLED"}function Yi(y){arguments.length!==1&&w("Flow expects 1 argument and cannot be used as decorator");var g=y.name||"<unnamed flow>";return function(){var x,T=this,U=arguments,Q=++Xu,pe=Wn(g+" - runid: "+Q+" - init",y).apply(T,U),je=void 0,Fe=new Promise(function(dt,ot){var xt=0;function ct(kt){var un;je=void 0;try{un=Wn(g+" - runid: "+Q+" - yield "+xt++,pe.next).call(pe,kt)}catch(Jr){return ot(Jr)}En(un)}function Ot(kt){var un;je=void 0;try{un=Wn(g+" - runid: "+Q+" - yield "+xt++,pe.throw).call(pe,kt)}catch(Jr){return ot(Jr)}En(un)}function En(kt){if(!kt||typeof kt.then!="function")return kt.done?dt(kt.value):(je=Promise.resolve(kt.value)).then(ct,Ot);kt.then(En,ot)}x=ot,ct(void 0)});return Fe.cancel=Wn(g+" - runid: "+Q+" - cancel",function(){try{je&&Wr(je);var dt=pe.return(void 0),ot=Promise.resolve(dt.value);ot.then(j,j),Wr(ot),x(new Xi)}catch(xt){x(xt)}}),Fe}}function Wr(y){typeof y.cancel=="function"&&y.cancel()}function Vi(y,g){if(y==null)return!1;if(g!==void 0){if(gn(y)===!1||!y[z].values.has(g))return!1;var x=xn(y,g);return Yn(x)}return Yn(y)}function Yu(y){return arguments.length>1?w(!1):Vi(y)}function Wi(y,g){return typeof g!="string"?w(!1):Vi(y,g)}function Vo(y,g){return y!=null&&(g!==void 0?!!gn(y)&&y[z].values.has(g):gn(y)||!!y[z]||L(y)||uo(y)||Yn(y))}function Kr(y){return arguments.length!==1&&w(!1),Vo(y)}function Zn(y){return gn(y)?y[z].getKeys():Lt(y)||yn(y)?Array.from(y.keys()):Nn(y)?y.map(function(g,x){return x}):w(!1)}function $t(y){return gn(y)?Zn(y).map(function(g){return y[g]}):Lt(y)?Zn(y).map(function(g){return y.get(g)}):yn(y)?Array.from(y.values()):Nn(y)?y.slice():w(!1)}function Ki(y){return gn(y)?Zn(y).map(function(g){return[g,y[g]]}):Lt(y)?Zn(y).map(function(g){return[g,y.get(g)]}):yn(y)?Array.from(y.entries()):Nn(y)?y.map(function(g,x){return[x,g]}):w(!1)}function Zi(y,g,x){if(arguments.length!==2||yn(y))if(gn(y)){var T=y[z],U=T.values.get(g);U?T.write(g,x):T.addObservableProp(g,x,T.defaultEnhancer)}else if(Lt(y))y.set(g,x);else if(yn(y))y.add(g);else{if(!Nn(y))return w(!1);typeof g!="number"&&(g=parseInt(g,10)),P(g>=0,"Not a valid index: '"+g+"'"),mn(),g>=y.length&&(y.length=g+1),y[g]=x,On()}else{mn();var Q=g;try{for(var pe in Q)Zi(y,pe,Q[pe])}finally{On()}}}function qi(y,g,x,T){return typeof x=="function"?function(U,Q,pe,je){return Tr(U,Q).observe(pe,je)}(y,g,x,T):function(U,Q,pe){return Tr(U).observe(Q,pe)}(y,g,x)}Xi.prototype=Object.create(Error.prototype);var Vu={detectCycles:!0,exportMapsAsObjects:!0,recurseEverything:!1};function lr(y,g,x,T){return T.detectCycles&&y.set(g,x),x}function Tn(y,g,x){if(!g.recurseEverything&&!Kr(y)||typeof y!="object")return y;if(y===null)return null;if(y instanceof Date)return y;if(sr(y))return Tn(y.get(),g,x);if(Kr(y)&&Zn(y),g.detectCycles===!0&&y!==null&&x.has(y))return x.get(y);if(Nn(y)||Array.isArray(y)){var T=lr(x,y,[],g),U=y.map(function(ct){return Tn(ct,g,x)});T.length=U.length;for(var Q=0,pe=U.length;Q<pe;Q++)T[Q]=U[Q];return T}if(yn(y)||Object.getPrototypeOf(y)===Set.prototype){if(g.exportMapsAsObjects===!1){var je=lr(x,y,new Set,g);return y.forEach(function(ct){je.add(Tn(ct,g,x))}),je}var Fe=lr(x,y,[],g);return y.forEach(function(ct){Fe.push(Tn(ct,g,x))}),Fe}if(Lt(y)||Object.getPrototypeOf(y)===Map.prototype){if(g.exportMapsAsObjects===!1){var dt=lr(x,y,new Map,g);return y.forEach(function(ct,Ot){dt.set(Ot,Tn(ct,g,x))}),dt}var ot=lr(x,y,{},g);return y.forEach(function(ct,Ot){ot[Ot]=Tn(ct,g,x)}),ot}var xt=lr(x,y,{},g);return ie(y).forEach(function(ct){xt[ct]=Tn(y[ct],g,x)}),xt}function Wu(y,g){var x;return typeof g=="boolean"&&(g={detectCycles:g}),g||(g=Vu),g.detectCycles=g.detectCycles===void 0?g.recurseEverything===!0:g.detectCycles===!0,g.detectCycles&&(x=new Map),Tn(y,g,x)}function Mn(y){switch(y.length){case 0:return Ge.trackingDerivation;case 1:return xn(y[0]);case 2:return xn(y[0],y[1])}}function _n(y,g){g===void 0&&(g=void 0),mn();try{return y.apply(g)}finally{On()}}function Ji(y,g,x){return arguments.length===1||g&&typeof g=="object"?Ku(y,g):$i(y,g,x||{})}function $i(y,g,x){var T;typeof x.timeout=="number"&&(T=setTimeout(function(){if(!Q[z].isDisposed){Q();var pe=new Error("WHEN_TIMEOUT");if(!x.onError)throw pe;x.onError(pe)}},x.timeout)),x.name=x.name||"When@"+E();var U=Rt(x.name+"-effect",g),Q=Yo(function(pe){y()&&(pe.dispose(),T&&clearTimeout(T),U())},x);return Q}function Ku(y,g){var x,T=new Promise(function(U,Q){var pe=$i(y,U,le(le({},g),{onError:Q}));x=function(){pe(),Q("WHEN_CANCELLED")}});return T.cancel=x,T}function co(y){return y[z]}function qn(y){return typeof y=="string"||typeof y=="number"||typeof y=="symbol"}var Zr={has:function(y,g){if(g===z||g==="constructor"||g===ge)return!0;var x=co(y);return qn(g)?x.has(g):g in y},get:function(y,g){if(g===z||g==="constructor"||g===ge)return y[g];var x=co(y),T=x.values.get(g);if(T instanceof D){var U=T.get();return U===void 0&&x.has(g),U}return qn(g)&&x.has(g),y[g]},set:function(y,g,x){return!!qn(g)&&(Zi(y,g,x),!0)},deleteProperty:function(y,g){return!!qn(g)&&(co(y).remove(g),!0)},ownKeys:function(y){return co(y).keysAtom.reportObserved(),Reflect.ownKeys(y)},preventExtensions:function(y){return w("Dynamic observable objects cannot be frozen"),!1}};function Zu(y){var g=new Proxy(y,Zr);return y[z].proxy=g,g}function an(y){return y.interceptors!==void 0&&y.interceptors.length>0}function fr(y,g){var x=y.interceptors||(y.interceptors=[]);return x.push(g),A(function(){var T=x.indexOf(g);T!==-1&&x.splice(T,1)})}function gt(y,g){var x=Y();try{for(var T=xe(y.interceptors||[]),U=0,Q=T.length;U<Q&&(P(!(g=T[U](g))||g.type,"Intercept handlers should return nothing or a change object"),g);U++);return g}finally{se(x)}}function wn(y){return y.changeListeners!==void 0&&y.changeListeners.length>0}function pr(y,g){var x=y.changeListeners||(y.changeListeners=[]);return x.push(g),A(function(){var T=x.indexOf(g);T!==-1&&x.splice(T,1)})}function qt(y,g){var x=Y(),T=y.changeListeners;if(T){for(var U=0,Q=(T=T.slice()).length;U<Q;U++)T[U](g);se(x)}}var Qi={get:function(y,g){return g===z?y[z]:g==="length"?y[z].getArrayLength():typeof g=="number"?Dn.get.call(y,g):typeof g!="string"||isNaN(g)?Dn.hasOwnProperty(g)?Dn[g]:y[g]:Dn.get.call(y,parseInt(g))},set:function(y,g,x){return g==="length"&&y[z].setArrayLength(x),typeof g=="number"&&Dn.set.call(y,g,x),typeof g=="symbol"||isNaN(g)?y[g]=x:Dn.set.call(y,parseInt(g),x),!0},preventExtensions:function(y){return w("Observable arrays cannot be frozen"),!1}};function Wo(y,g,x,T){x===void 0&&(x="ObservableArray@"+E()),T===void 0&&(T=!1);var U,Q,pe,je=new ea(x,g,T);U=je.values,Q=z,pe=je,Object.defineProperty(U,Q,{enumerable:!1,writable:!1,configurable:!0,value:pe});var Fe=new Proxy(je.values,Qi);if(je.proxy=Fe,y&&y.length){var dt=rt(!0);je.spliceWithArray(0,0,y),wt(dt)}return Fe}var ea=function(){function y(g,x,T){this.owned=T,this.values=[],this.proxy=void 0,this.lastKnownLength=0,this.atom=new D(g||"ObservableArray@"+E()),this.enhancer=function(U,Q){return x(U,Q,g+"[..]")}}return y.prototype.dehanceValue=function(g){return this.dehancer!==void 0?this.dehancer(g):g},y.prototype.dehanceValues=function(g){return this.dehancer!==void 0&&g.length>0?g.map(this.dehancer):g},y.prototype.intercept=function(g){return fr(this,g)},y.prototype.observe=function(g,x){return x===void 0&&(x=!1),x&&g({object:this.proxy,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),pr(this,g)},y.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},y.prototype.setArrayLength=function(g){if(typeof g!="number"||g<0)throw new Error("[mobx.array] Out of range: "+g);var x=this.values.length;if(g!==x)if(g>x){for(var T=new Array(g-x),U=0;U<g-x;U++)T[U]=void 0;this.spliceWithArray(x,0,T)}else this.spliceWithArray(g,x-g)},y.prototype.updateArrayLength=function(g,x){if(g!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed.");this.lastKnownLength+=x},y.prototype.spliceWithArray=function(g,x,T){var U=this;at(this.atom);var Q=this.values.length;if(g===void 0?g=0:g>Q?g=Q:g<0&&(g=Math.max(0,Q+g)),x=arguments.length===1?Q-g:x==null?0:Math.max(0,Math.min(x,Q-g)),T===void 0&&(T=b),an(this)){var pe=gt(this,{object:this.proxy,type:"splice",index:g,removedCount:x,added:T});if(!pe)return b;x=pe.removedCount,T=pe.added}T=T.length===0?T:T.map(function(Fe){return U.enhancer(Fe,void 0)});var je=this.spliceItemsIntoValues(g,x,T);return x===0&&T.length===0||this.notifyArraySplice(g,T,je),this.dehanceValues(je)},y.prototype.spliceItemsIntoValues=function(g,x,T){var U;if(T.length<1e4)return(U=this.values).splice.apply(U,xe([g,x],T));var Q=this.values.slice(g,g+x);return this.values=this.values.slice(0,g).concat(T,this.values.slice(g+x)),Q},y.prototype.notifyArrayChildUpdate=function(g,x,T){var U=!this.owned&&!1,Q=wn(this),pe=Q||U?{object:this.proxy,type:"update",index:g,newValue:x,oldValue:T}:null;this.atom.reportChanged(),Q&&qt(this,pe)},y.prototype.notifyArraySplice=function(g,x,T){var U=!this.owned&&!1,Q=wn(this),pe=Q||U?{object:this.proxy,type:"splice",index:g,removed:T,added:x,removedCount:T.length,addedCount:x.length}:null;this.atom.reportChanged(),Q&&qt(this,pe)},y}(),Dn={intercept:function(y){return this[z].intercept(y)},observe:function(y,g){return g===void 0&&(g=!1),this[z].observe(y,g)},clear:function(){return this.splice(0)},replace:function(y){var g=this[z];return g.spliceWithArray(0,g.values.length,y)},toJS:function(){return this.slice()},toJSON:function(){return this.toJS()},splice:function(y,g){for(var x=[],T=2;T<arguments.length;T++)x[T-2]=arguments[T];var U=this[z];switch(arguments.length){case 0:return[];case 1:return U.spliceWithArray(y);case 2:return U.spliceWithArray(y,g)}return U.spliceWithArray(y,g,x)},spliceWithArray:function(y,g,x){return this[z].spliceWithArray(y,g,x)},push:function(){for(var y=[],g=0;g<arguments.length;g++)y[g]=arguments[g];var x=this[z];return x.spliceWithArray(x.values.length,0,y),x.values.length},pop:function(){return this.splice(Math.max(this[z].values.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var y=[],g=0;g<arguments.length;g++)y[g]=arguments[g];var x=this[z];return x.spliceWithArray(0,0,y),x.values.length},reverse:function(){var y=this.slice();return y.reverse.apply(y,arguments)},sort:function(y){var g=this.slice();return g.sort.apply(g,arguments)},remove:function(y){var g=this[z],x=g.dehanceValues(g.values).indexOf(y);return x>-1&&(this.splice(x,1),!0)},get:function(y){var g=this[z];if(g&&y<g.values.length)return g.atom.reportObserved(),g.dehanceValue(g.values[y])},set:function(y,g){var x=this[z],T=x.values;if(y<T.length){at(x.atom);var U=T[y];if(an(x)){var Q=gt(x,{type:"update",object:x.proxy,index:y,newValue:g});if(!Q)return;g=Q.newValue}(g=x.enhancer(g,U))!==U&&(T[y]=g,x.notifyArrayChildUpdate(y,g,U))}else{if(y!==T.length)throw new Error("[mobx.array] Index out of bounds, "+y+" is larger than "+T.length);x.spliceWithArray(y,0,[g])}}};["concat","flat","includes","indexOf","join","lastIndexOf","slice","toString","toLocaleString"].forEach(function(y){typeof Array.prototype[y]=="function"&&(Dn[y]=function(){var g=this[z];g.atom.reportObserved();var x=g.dehanceValues(g.values);return x[y].apply(x,arguments)})}),["every","filter","find","findIndex","flatMap","forEach","map","some"].forEach(function(y){typeof Array.prototype[y]=="function"&&(Dn[y]=function(g,x){var T=this,U=this[z];return U.atom.reportObserved(),U.dehanceValues(U.values)[y](function(Q,pe){return g.call(x,Q,pe,T)},x)})}),["reduce","reduceRight"].forEach(function(y){Dn[y]=function(){var g=this,x=this[z];x.atom.reportObserved();var T=arguments[0];return arguments[0]=function(U,Q,pe){return Q=x.dehanceValue(Q),T(U,Q,pe,g)},x.values[y].apply(x.values,arguments)}});var ta,lo=B("ObservableArrayAdministration",ea);function Nn(y){return M(y)&&lo(y[z])}var na,qu={},Ko=function(){function y(g,x,T){if(x===void 0&&(x=Ce),T===void 0&&(T="ObservableMap@"+E()),this.enhancer=x,this.name=T,this[ta]=qu,this._keysAtom=C(this.name+".keys()"),this[Symbol.toStringTag]="Map",typeof Map!="function")throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(g)}return y.prototype._has=function(g){return this._data.has(g)},y.prototype.has=function(g){var x=this;if(!Ge.trackingDerivation)return this._has(g);var T=this._hasMap.get(g);if(!T){var U=T=new Dt(this._has(g),Ze,this.name+"."+J(g)+"?",!1);this._hasMap.set(g,U),Pr(U,function(){return x._hasMap.delete(g)})}return T.get()},y.prototype.set=function(g,x){var T=this._has(g);if(an(this)){var U=gt(this,{type:T?"update":"add",object:this,newValue:x,name:g});if(!U)return this;x=U.newValue}return T?this._updateValue(g,x):this._addValue(g,x),this},y.prototype.delete=function(g){var x=this;if(at(this._keysAtom),an(this)&&!(U=gt(this,{type:"delete",object:this,name:g})))return!1;if(this._has(g)){var T=wn(this),U=T?{type:"delete",object:this,oldValue:this._data.get(g).value,name:g}:null;return _n(function(){x._keysAtom.reportChanged(),x._updateHasMapEntry(g,!1),x._data.get(g).setNewValue(void 0),x._data.delete(g)}),T&&qt(this,U),!0}return!1},y.prototype._updateHasMapEntry=function(g,x){var T=this._hasMap.get(g);T&&T.setNewValue(x)},y.prototype._updateValue=function(g,x){var T=this._data.get(g);if((x=T.prepareNewValue(x))!==Ge.UNCHANGED){var U=wn(this),Q=U?{type:"update",object:this,oldValue:T.value,name:g,newValue:x}:null;T.setNewValue(x),U&&qt(this,Q)}},y.prototype._addValue=function(g,x){var T=this;at(this._keysAtom),_n(function(){var pe=new Dt(x,T.enhancer,T.name+"."+J(g),!1);T._data.set(g,pe),x=pe.value,T._updateHasMapEntry(g,!0),T._keysAtom.reportChanged()});var U=wn(this),Q=U?{type:"add",object:this,name:g,newValue:x}:null;U&&qt(this,Q)},y.prototype.get=function(g){return this.has(g)?this.dehanceValue(this._data.get(g).get()):this.dehanceValue(void 0)},y.prototype.dehanceValue=function(g){return this.dehancer!==void 0?this.dehancer(g):g},y.prototype.keys=function(){return this._keysAtom.reportObserved(),this._data.keys()},y.prototype.values=function(){var g=this,x=this.keys();return go({next:function(){var T=x.next(),U=T.done,Q=T.value;return{done:U,value:U?void 0:g.get(Q)}}})},y.prototype.entries=function(){var g=this,x=this.keys();return go({next:function(){var T=x.next(),U=T.done,Q=T.value;return{done:U,value:U?void 0:[Q,g.get(Q)]}}})},y.prototype[ta=z,Symbol.iterator]=function(){return this.entries()},y.prototype.forEach=function(g,x){var T,U;try{for(var Q=ce(this),pe=Q.next();!pe.done;pe=Q.next()){var je=ye(pe.value,2),Fe=je[0],dt=je[1];g.call(x,dt,Fe,this)}}catch(ot){T={error:ot}}finally{try{pe&&!pe.done&&(U=Q.return)&&U.call(Q)}finally{if(T)throw T.error}}},y.prototype.merge=function(g){var x=this;return Lt(g)&&(g=g.toJS()),_n(function(){var T=rt(!0);try{N(g)?ie(g).forEach(function(U){return x.set(U,g[U])}):Array.isArray(g)?g.forEach(function(U){var Q=ye(U,2),pe=Q[0],je=Q[1];return x.set(pe,je)}):H(g)?(g.constructor!==Map&&w("Cannot initialize from classes that inherit from Map: "+g.constructor.name),g.forEach(function(U,Q){return x.set(Q,U)})):g!=null&&w("Cannot initialize map from "+g)}finally{wt(T)}}),this},y.prototype.clear=function(){var g=this;_n(function(){ne(function(){var x,T;try{for(var U=ce(g.keys()),Q=U.next();!Q.done;Q=U.next()){var pe=Q.value;g.delete(pe)}}catch(je){x={error:je}}finally{try{Q&&!Q.done&&(T=U.return)&&T.call(U)}finally{if(x)throw x.error}}})})},y.prototype.replace=function(g){var x=this;return _n(function(){var T,U,Q,pe,je=function(sn){if(H(sn)||Lt(sn))return sn;if(Array.isArray(sn))return new Map(sn);if(N(sn)){var sa=new Map;for(var $r in sn)sa.set($r,sn[$r]);return sa}return w("Cannot convert to map from '"+sn+"'")}(g),Fe=new Map,dt=!1;try{for(var ot=ce(x._data.keys()),xt=ot.next();!xt.done;xt=ot.next()){var ct=xt.value;if(!je.has(ct))if(x.delete(ct))dt=!0;else{var Ot=x._data.get(ct);Fe.set(ct,Ot)}}}catch(sn){T={error:sn}}finally{try{xt&&!xt.done&&(U=ot.return)&&U.call(ot)}finally{if(T)throw T.error}}try{for(var En=ce(je.entries()),kt=En.next();!kt.done;kt=En.next()){var un=ye(kt.value,2),Jr=(ct=un[0],Ot=un[1],x._data.has(ct));if(x.set(ct,Ot),x._data.has(ct)){var $u=x._data.get(ct);Fe.set(ct,$u),Jr||(dt=!0)}}}catch(sn){Q={error:sn}}finally{try{kt&&!kt.done&&(pe=En.return)&&pe.call(En)}finally{if(Q)throw Q.error}}if(!dt)if(x._data.size!==Fe.size)x._keysAtom.reportChanged();else for(var aa=x._data.keys(),ua=Fe.keys(),vo=aa.next(),$o=ua.next();!vo.done;){if(vo.value!==$o.value){x._keysAtom.reportChanged();break}vo=aa.next(),$o=ua.next()}x._data=Fe}),this},Object.defineProperty(y.prototype,"size",{get:function(){return this._keysAtom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),y.prototype.toPOJO=function(){var g,x,T={};try{for(var U=ce(this),Q=U.next();!Q.done;Q=U.next()){var pe=ye(Q.value,2),je=pe[0],Fe=pe[1];T[typeof je=="symbol"?je:J(je)]=Fe}}catch(dt){g={error:dt}}finally{try{Q&&!Q.done&&(x=U.return)&&x.call(U)}finally{if(g)throw g.error}}return T},y.prototype.toJS=function(){return new Map(this)},y.prototype.toJSON=function(){return this.toPOJO()},y.prototype.toString=function(){var g=this;return this.name+"[{ "+Array.from(this.keys()).map(function(x){return J(x)+": "+g.get(x)}).join(", ")+" }]"},y.prototype.observe=function(g,x){return pr(this,g)},y.prototype.intercept=function(g){return fr(this,g)},y}(),Lt=B("ObservableMap",Ko),kr={},fo=function(){function y(g,x,T){if(x===void 0&&(x=Ce),T===void 0&&(T="ObservableSet@"+E()),this.name=T,this[na]=kr,this._data=new Set,this._atom=C(this.name),this[Symbol.toStringTag]="Set",typeof Set!="function")throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");this.enhancer=function(U,Q){return x(U,Q,T)},g&&this.replace(g)}return y.prototype.dehanceValue=function(g){return this.dehancer!==void 0?this.dehancer(g):g},y.prototype.clear=function(){var g=this;_n(function(){ne(function(){var x,T;try{for(var U=ce(g._data.values()),Q=U.next();!Q.done;Q=U.next()){var pe=Q.value;g.delete(pe)}}catch(je){x={error:je}}finally{try{Q&&!Q.done&&(T=U.return)&&T.call(U)}finally{if(x)throw x.error}}})})},y.prototype.forEach=function(g,x){var T,U;try{for(var Q=ce(this),pe=Q.next();!pe.done;pe=Q.next()){var je=pe.value;g.call(x,je,je,this)}}catch(Fe){T={error:Fe}}finally{try{pe&&!pe.done&&(U=Q.return)&&U.call(Q)}finally{if(T)throw T.error}}},Object.defineProperty(y.prototype,"size",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),y.prototype.add=function(g){var x=this;if(at(this._atom),an(this)&&!(U=gt(this,{type:"add",object:this,newValue:g})))return this;if(!this.has(g)){_n(function(){x._data.add(x.enhancer(g,void 0)),x._atom.reportChanged()});var T=wn(this),U=T?{type:"add",object:this,newValue:g}:null;T&&qt(this,U)}return this},y.prototype.delete=function(g){var x=this;if(an(this)&&!(U=gt(this,{type:"delete",object:this,oldValue:g})))return!1;if(this.has(g)){var T=wn(this),U=T?{type:"delete",object:this,oldValue:g}:null;return _n(function(){x._atom.reportChanged(),x._data.delete(g)}),T&&qt(this,U),!0}return!1},y.prototype.has=function(g){return this._atom.reportObserved(),this._data.has(this.dehanceValue(g))},y.prototype.entries=function(){var g=0,x=Array.from(this.keys()),T=Array.from(this.values());return go({next:function(){var U=g;return g+=1,U<T.length?{value:[x[U],T[U]],done:!1}:{done:!0}}})},y.prototype.keys=function(){return this.values()},y.prototype.values=function(){this._atom.reportObserved();var g=this,x=0,T=Array.from(this._data.values());return go({next:function(){return x<T.length?{value:g.dehanceValue(T[x++]),done:!1}:{done:!0}}})},y.prototype.replace=function(g){var x=this;return yn(g)&&(g=g.toJS()),_n(function(){var T=rt(!0);try{Array.isArray(g)||ee(g)?(x.clear(),g.forEach(function(U){return x.add(U)})):g!=null&&w("Cannot initialize set from "+g)}finally{wt(T)}}),this},y.prototype.observe=function(g,x){return pr(this,g)},y.prototype.intercept=function(g){return fr(this,g)},y.prototype.toJS=function(){return new Set(this)},y.prototype.toString=function(){return this.name+"[ "+Array.from(this).join(", ")+" ]"},y.prototype[na=z,Symbol.iterator]=function(){return this.values()},y}(),yn=B("ObservableSet",fo),ra=function(){function y(g,x,T,U){x===void 0&&(x=new Map),this.target=g,this.values=x,this.name=T,this.defaultEnhancer=U,this.keysAtom=new D(T+".keys")}return y.prototype.read=function(g){return this.values.get(g).get()},y.prototype.write=function(g,x){var T=this.target,U=this.values.get(g);if(U instanceof Xn)U.set(x);else{if(an(this)){if(!(pe=gt(this,{type:"update",object:this.proxy||T,name:g,newValue:x})))return;x=pe.newValue}if((x=U.prepareNewValue(x))!==Ge.UNCHANGED){var Q=wn(this),pe=Q?{type:"update",object:this.proxy||T,oldValue:U.value,name:g,newValue:x}:null;U.setNewValue(x),Q&&qt(this,pe)}}},y.prototype.has=function(g){var x=this.pendingKeys||(this.pendingKeys=new Map),T=x.get(g);if(T)return T.get();var U=!!this.values.get(g);return T=new Dt(U,Ze,this.name+"."+J(g)+"?",!1),x.set(g,T),T.get()},y.prototype.addObservableProp=function(g,x,T){T===void 0&&(T=this.defaultEnhancer);var U=this.target;if(an(this)){var Q=gt(this,{object:this.proxy||U,name:g,type:"add",newValue:x});if(!Q)return;x=Q.newValue}var pe=new Dt(x,T,this.name+"."+J(g),!1);this.values.set(g,pe),x=pe.value,Object.defineProperty(U,g,function(je){return po[je]||(po[je]={configurable:!0,enumerable:!0,get:function(){return this[z].read(je)},set:function(Fe){this[z].write(je,Fe)}})}(g)),this.notifyPropertyAddition(g,x)},y.prototype.addComputedProp=function(g,x,T){var U,Q,pe,je=this.target;T.name=T.name||this.name+"."+J(x),this.values.set(x,new Xn(T)),(g===je||(U=g,Q=x,!(pe=Object.getOwnPropertyDescriptor(U,Q))||pe.configurable!==!1&&pe.writable!==!1))&&Object.defineProperty(g,x,function(Fe){return ho[Fe]||(ho[Fe]={configurable:Ge.computedConfigurable,enumerable:!1,get:function(){return yo(this).read(Fe)},set:function(dt){yo(this).write(Fe,dt)}})}(x))},y.prototype.remove=function(g){if(this.values.has(g)){var x=this.target;if(an(this)&&!(Fe=gt(this,{object:this.proxy||x,name:g,type:"remove"})))return;try{mn();var T=wn(this),U=!1,Q=this.values.get(g),pe=Q&&Q.get();if(Q&&Q.set(void 0),this.keysAtom.reportChanged(),this.values.delete(g),this.pendingKeys){var je=this.pendingKeys.get(g);je&&je.set(!1)}delete this.target[g];var Fe=T?{type:"remove",object:this.proxy||x,oldValue:pe,name:g}:null;T&&qt(this,Fe)}finally{On()}}},y.prototype.illegalAccess=function(g,x){},y.prototype.observe=function(g,x){return pr(this,g)},y.prototype.intercept=function(g){return fr(this,g)},y.prototype.notifyPropertyAddition=function(g,x){var T=wn(this),U=T?{type:"add",object:this.proxy||this.target,name:g,newValue:x}:null;if(T&&qt(this,U),this.pendingKeys){var Q=this.pendingKeys.get(g);Q&&Q.set(!0)}this.keysAtom.reportChanged()},y.prototype.getKeys=function(){var g,x;this.keysAtom.reportObserved();var T=[];try{for(var U=ce(this.values),Q=U.next();!Q.done;Q=U.next()){var pe=ye(Q.value,2),je=pe[0];pe[1]instanceof Dt&&T.push(je)}}catch(Fe){g={error:Fe}}finally{try{Q&&!Q.done&&(x=U.return)&&x.call(U)}finally{if(g)throw g.error}}return T},y}();function qr(y,g,x){if(g===void 0&&(g=""),x===void 0&&(x=Ce),Object.prototype.hasOwnProperty.call(y,z))return y[z];N(y)||(g=(y.constructor.name||"ObservableObject")+"@"+E()),g||(g="ObservableObject@"+E());var T=new ra(y,new Map,J(g),x);return I(y,z,T),T}var po=Object.create(null),ho=Object.create(null);function yo(y){var g=y[z];return g||(Ie(y),y[z])}var oa=B("ObservableObjectAdministration",ra);function gn(y){return!!M(y)&&(Ie(y),oa(y[z]))}function xn(y,g){if(typeof y=="object"&&y!==null){if(Nn(y))return g!==void 0&&w(!1),y[z].atom;if(yn(y))return y[z];if(Lt(y)){var x=y;return g===void 0?x._keysAtom:((T=x._data.get(g)||x._hasMap.get(g))||w(!1),T)}var T;if(Ie(y),g&&!y[z]&&y[g],gn(y))return g?((T=y[z].values.get(g))||w(!1),T):w(!1);if(L(y)||Yn(y)||uo(y))return y}else if(typeof y=="function"&&uo(y[z]))return y[z];return w(!1)}function Tr(y,g){return y||w("Expecting some object"),g!==void 0?Tr(xn(y,g)):L(y)||Yn(y)||uo(y)||Lt(y)||yn(y)?y:(Ie(y),y[z]?y[z]:void w(!1))}var Zo=Object.prototype.toString;function qo(y,g,x){return x===void 0&&(x=-1),Jo(y,g,x)}function Jo(y,g,x,T,U){if(y===g)return y!==0||1/y==1/g;if(y==null||g==null)return!1;if(y!=y)return g!=g;var Q=typeof y;if(Q!=="function"&&Q!=="object"&&typeof g!="object")return!1;var pe=Zo.call(y);if(pe!==Zo.call(g))return!1;switch(pe){case"[object RegExp]":case"[object String]":return""+y==""+g;case"[object Number]":return+y!=+y?+g!=+g:+y==0?1/+y==1/g:+y==+g;case"[object Date]":case"[object Boolean]":return+y==+g;case"[object Symbol]":return typeof Symbol!="undefined"&&Symbol.valueOf.call(y)===Symbol.valueOf.call(g);case"[object Map]":case"[object Set]":x>=0&&x++}y=ia(y),g=ia(g);var je=pe==="[object Array]";if(!je){if(typeof y!="object"||typeof g!="object")return!1;var Fe=y.constructor,dt=g.constructor;if(Fe!==dt&&!(typeof Fe=="function"&&Fe instanceof Fe&&typeof dt=="function"&&dt instanceof dt)&&"constructor"in y&&"constructor"in g)return!1}if(x===0)return!1;x<0&&(x=-1),U=U||[];for(var ot=(T=T||[]).length;ot--;)if(T[ot]===y)return U[ot]===g;if(T.push(y),U.push(g),je){if((ot=y.length)!==g.length)return!1;for(;ot--;)if(!Jo(y[ot],g[ot],x-1,T,U))return!1}else{var xt=Object.keys(y),ct=void 0;if(ot=xt.length,Object.keys(g).length!==ot)return!1;for(;ot--;)if(!Ju(g,ct=xt[ot])||!Jo(y[ct],g[ct],x-1,T,U))return!1}return T.pop(),U.pop(),!0}function ia(y){return Nn(y)?y.slice():H(y)||Lt(y)||ee(y)||yn(y)?Array.from(y.entries()):y}function Ju(y,g){return Object.prototype.hasOwnProperty.call(y,g)}function go(y){return y[Symbol.iterator]=dr,y}function dr(){return this}if(typeof Proxy=="undefined"||typeof Symbol=="undefined")throw new Error("[mobx] MobX 5+ requires Proxy and Symbol objects. If your environment doesn't support Symbol or Proxy objects, please downgrade to MobX 4. For React Native Android, consider upgrading JSCore.");typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:Li,extras:{getDebugName:function(y,g){return(g!==void 0?xn(y,g):gn(y)||Lt(y)||yn(y)?Tr(y):xn(y)).name}},$mobx:z})}).call(this,i(155),i(82))},function(s,f,i){var l=i(116),c=i(44),b=i(179);l||c(Object.prototype,"toString",b,{unsafe:!0})},function(s,f,i){var l=i(40),c=i(83),b=i(70),m=i(56),E=i(111),w="Array Iterator",P=m.set,A=m.getterFor(w);s.exports=E(Array,"Array",function(j,M){P(this,{type:w,target:l(j),index:0,kind:M})},function(){var j=A(this),M=j.target,N=j.kind,I=j.index++;return!M||I>=M.length?(j.target=void 0,{value:void 0,done:!0}):N=="keys"?{value:I,done:!1}:N=="values"?{value:M[I],done:!1}:{value:[I,M[I]],done:!1}},"values"),b.Arguments=b.Array,c("keys"),c("values"),c("entries")},function(s,f,i){var l=i(7),c=i(147),b=i(148),m=i(3),E=i(57),w=i(27),P=w("iterator"),A=w("toStringTag"),j=m.values,M=function(I,B){if(I){if(I[P]!==j)try{E(I,P,j)}catch(ee){I[P]=j}if(I[A]||E(I,A,B),c[B]){for(var H in m)if(I[H]!==m[H])try{E(I,H,m[H])}catch(ee){I[H]=m[H]}}}};for(var N in c)M(l[N]&&l[N].prototype,N);M(b,"DOMTokenList")},function(s,f,i){var l=i(17),c=i(7),b=i(46),m=i(76),E=i(35),w=i(15),P=i(64),A=i(36),j=i(109),M=i(19),N=i(34),I=i(99),B=i(28),H=i(33),ee=i(58),ie=i(88),J=i(32),V=i(38),Z=i(40),z=i(87),D=i(41),L=i(71),C=i(54),F=i(66),$=i(72),le=i(139),ce=i(112),ye=i(51),xe=i(37),ge=i(93),ue=i(101),he=i(44),be=i(84),Se=i(91),Ie=i(69),Ke=i(85),Pe=i(27),Ce=i(149),Ze=i(150),q=i(73),K=i(56),ae=i(74).forEach,_e=Se("hidden"),Ae="Symbol",we=Pe("toPrimitive"),qe=K.set,nt=K.getterFor(Ae),$e=Object.prototype,Ye=c.Symbol,ve=Ye&&Ye.prototype,Ue=c.TypeError,te=c.QObject,Le=b("JSON","stringify"),ut=ye.f,vt=xe.f,it=le.f,yt=ge.f,St=w([].push),Pt=be("symbols"),at=be("op-symbols"),Ct=be("string-to-symbol-registry"),G=be("symbol-to-string-registry"),ne=be("wks"),Y=!te||!te.prototype||!te.prototype.findChild,se=A&&M(function(){return C(vt({},"a",{get:function(){return vt(this,"a",{value:7}).a}})).a!=7})?function(ze,Ve,et){var rt=ut($e,Ve);rt&&delete $e[Ve],vt(ze,Ve,et),rt&&ze!==$e&&vt($e,Ve,rt)}:vt,Me=function(ze,Ve){var et=Pt[ze]=C(ve);return qe(et,{type:Ae,tag:ze,description:Ve}),A||(et.description=Ve),et},De=function(ze,Ve,et){ze===$e&&De(at,Ve,et),J(ze);var rt=z(Ve);return J(et),N(Pt,rt)?(et.enumerable?(N(ze,_e)&&ze[_e][rt]&&(ze[_e][rt]=!1),et=C(et,{enumerable:L(0,!1)})):(N(ze,_e)||vt(ze,_e,L(1,{})),ze[_e][rt]=!0),se(ze,rt,et)):vt(ze,rt,et)},Xe=function(ze,Ve){J(ze);var et=Z(Ve),rt=F(et).concat(Rt(et));return ae(rt,function(wt){A&&!E(ft,et,wt)||De(ze,wt,et[wt])}),ze},ft=function(ze){var Ve=z(ze),et=E(yt,this,Ve);return!(this===$e&&N(Pt,Ve)&&!N(at,Ve))&&(!(et||!N(this,Ve)||!N(Pt,Ve)||N(this,_e)&&this[_e][Ve])||et)},Ht=function(ze,Ve){var et=Z(ze),rt=z(Ve);if(et!==$e||!N(Pt,rt)||N(at,rt)){var wt=ut(et,rt);return!wt||!N(Pt,rt)||N(et,_e)&&et[_e][rt]||(wt.enumerable=!0),wt}},Zt=function(ze){var Ve=it(Z(ze)),et=[];return ae(Ve,function(rt){N(Pt,rt)||N(Ie,rt)||St(et,rt)}),et},Rt=function(ze){var Ve=ze===$e,et=it(Ve?at:Z(ze)),rt=[];return ae(et,function(wt){!N(Pt,wt)||Ve&&!N($e,wt)||St(rt,Pt[wt])}),rt};if(j||(Ye=function(){if(ee(ve,this))throw Ue("Symbol is not a constructor");var ze=arguments.length&&arguments[0]!==void 0?D(arguments[0]):void 0,Ve=Ke(ze),et=function(rt){this===$e&&E(et,at,rt),N(this,_e)&&N(this[_e],Ve)&&(this[_e][Ve]=!1),se(this,Ve,L(1,rt))};return A&&Y&&se($e,Ve,{configurable:!0,set:et}),Me(Ve,ze)},he(ve=Ye.prototype,"toString",function(){return nt(this).tag}),he(Ye,"withoutSetter",function(ze){return Me(Ke(ze),ze)}),ge.f=ft,xe.f=De,ye.f=Ht,$.f=le.f=Zt,ce.f=Rt,Ce.f=function(ze){return Me(Pe(ze),ze)},A&&(vt(ve,"description",{configurable:!0,get:function(){return nt(this).description}}),P||he($e,"propertyIsEnumerable",ft,{unsafe:!0}))),l({global:!0,wrap:!0,forced:!j,sham:!j},{Symbol:Ye}),ae(F(ne),function(ze){Ze(ze)}),l({target:Ae,stat:!0,forced:!j},{for:function(ze){var Ve=D(ze);if(N(Ct,Ve))return Ct[Ve];var et=Ye(Ve);return Ct[Ve]=et,G[et]=Ve,et},keyFor:function(ze){if(!ie(ze))throw Ue(ze+" is not a symbol");if(N(G,ze))return G[ze]},useSetter:function(){Y=!0},useSimple:function(){Y=!1}}),l({target:"Object",stat:!0,forced:!j,sham:!A},{create:function(ze,Ve){return Ve===void 0?C(ze):Xe(C(ze),Ve)},defineProperty:De,defineProperties:Xe,getOwnPropertyDescriptor:Ht}),l({target:"Object",stat:!0,forced:!j},{getOwnPropertyNames:Zt,getOwnPropertySymbols:Rt}),l({target:"Object",stat:!0,forced:M(function(){ce.f(1)})},{getOwnPropertySymbols:function(ze){return ce.f(V(ze))}}),Le&&l({target:"JSON",stat:!0,forced:!j||M(function(){var ze=Ye();return Le([ze])!="[null]"||Le({a:ze})!="{}"||Le(Object(ze))!="{}"})},{stringify:function(ze,Ve,et){var rt=ue(arguments),wt=Ve;if((H(Ve)||ze!==void 0)&&!ie(ze))return I(Ve)||(Ve=function(Dt,sr){if(B(wt)&&(sr=E(wt,this,Dt,sr)),!ie(sr))return sr}),rt[1]=Ve,m(Le,null,rt)}}),!ve[we]){var It=ve.valueOf;he(ve,we,function(ze){return E(It,this)})}q(Ye,Ae),Ie[_e]=!0},function(s,f,i){var l=i(146).charAt,c=i(41),b=i(56),m=i(111),E="String Iterator",w=b.set,P=b.getterFor(E);m(String,"String",function(A){w(this,{type:E,string:c(A),index:0})},function(){var A,j=P(this),M=j.string,N=j.index;return N>=M.length?{value:void 0,done:!0}:(A=l(M,N),j.index+=A.length,{value:A,done:!1})})},function(s,f,i){(function(l){var c=function(b){return b&&b.Math==Math&&b};s.exports=c(typeof globalThis=="object"&&globalThis)||c(typeof window=="object"&&window)||c(typeof self=="object"&&self)||c(typeof l=="object"&&l)||function(){return this}()||Function("return this")()}).call(this,i(82))},function(s,f,i){var l=i(17),c=i(36),b=i(7),m=i(15),E=i(34),w=i(28),P=i(58),A=i(41),j=i(37).f,M=i(134),N=b.Symbol,I=N&&N.prototype;if(c&&w(N)&&(!("description"in I)||N().description!==void 0)){var B={},H=function(){var D=arguments.length<1||arguments[0]===void 0?void 0:A(arguments[0]),L=P(I,this)?new N(D):D===void 0?N():N(D);return D===""&&(B[L]=!0),L};M(H,N),H.prototype=I,I.constructor=H;var ee=String(N("test"))=="Symbol(test)",ie=m(I.toString),J=m(I.valueOf),V=/^Symbol\((.*)\)[^)]+$/,Z=m("".replace),z=m("".slice);j(I,"description",{configurable:!0,get:function(){var D=J(this),L=ie(D);if(E(B,D))return"";var C=ee?z(L,7,-1):Z(L,V,"$1");return C===""?void 0:C}}),l({global:!0,forced:!0},{Symbol:H})}},function(s,f,i){i(150)("iterator")},function(s,f,i){i.d(f,"a",function(){return m.a}),i.d(f,"c",function(){return m.e}),i.d(f,"h",function(){return V}),i.d(f,"i",function(){return ee}),i.d(f,"j",function(){return B}),i.d(f,"b",function(){return ye}),i.d(f,"e",function(){return he}),i.d(f,"f",function(){return xe}),i.d(f,"g",function(){return Pt});var l,c,b,m=i(0),E=0,w=[],P=m.i.__b,A=m.i.__r,j=m.i.diffed,M=m.i.__c,N=m.i.unmount;function I(G,ne){m.i.__h&&m.i.__h(c,G,E||ne),E=0;var Y=c.__H||(c.__H={__:[],__h:[]});return G>=Y.__.length&&Y.__.push({}),Y.__[G]}function B(G){return E=1,H($,G)}function H(G,ne,Y){var se=I(l++,2);return se.t=G,se.__c||(se.__=[Y?Y(ne):$(void 0,ne),function(Me){var De=se.t(se.__[0],Me);se.__[0]!==De&&(se.__=[De,se.__[1]],se.__c.setState({}))}],se.__c=c),se.__}function ee(G,ne){var Y=I(l++,3);!m.i.__s&&F(Y.__H,ne)&&(Y.__=G,Y.__H=ne,c.__H.__h.push(Y))}function ie(G,ne){var Y=I(l++,4);!m.i.__s&&F(Y.__H,ne)&&(Y.__=G,Y.__H=ne,c.__h.push(Y))}function J(G,ne){var Y=I(l++,7);return F(Y.__H,ne)&&(Y.__=G(),Y.__H=ne,Y.__h=G),Y.__}function V(G,ne){return E=8,J(function(){return G},ne)}function Z(){var G;for(w.sort(function(ne,Y){return ne.__v.__b-Y.__v.__b});G=w.pop();)if(G.__P)try{G.__H.__h.forEach(L),G.__H.__h.forEach(C),G.__H.__h=[]}catch(ne){G.__H.__h=[],m.i.__e(ne,G.__v)}}m.i.__b=function(G){c=null,P&&P(G)},m.i.__r=function(G){A&&A(G),l=0;var ne=(c=G.__c).__H;ne&&(ne.__h.forEach(L),ne.__h.forEach(C),ne.__h=[])},m.i.diffed=function(G){j&&j(G);var ne=G.__c;ne&&ne.__H&&ne.__H.__h.length&&(w.push(ne)!==1&&b===m.i.requestAnimationFrame||((b=m.i.requestAnimationFrame)||D)(Z)),c=null},m.i.__c=function(G,ne){ne.some(function(Y){try{Y.__h.forEach(L),Y.__h=Y.__h.filter(function(se){return!se.__||C(se)})}catch(se){ne.some(function(Me){Me.__h&&(Me.__h=[])}),ne=[],m.i.__e(se,Y.__v)}}),M&&M(G,ne)},m.i.unmount=function(G){N&&N(G);var ne,Y=G.__c;Y&&Y.__H&&(Y.__H.__.forEach(function(se){try{L(se)}catch(Me){ne=Me}}),ne&&m.i.__e(ne,Y.__v))};var z=typeof requestAnimationFrame=="function";function D(G){var ne,Y=function(){clearTimeout(se),z&&cancelAnimationFrame(ne),setTimeout(G)},se=setTimeout(Y,100);z&&(ne=requestAnimationFrame(Y))}function L(G){var ne=c,Y=G.__c;typeof Y=="function"&&(G.__c=void 0,Y()),c=ne}function C(G){var ne=c;G.__c=G.__(),c=ne}function F(G,ne){return!G||G.length!==ne.length||ne.some(function(Y,se){return Y!==G[se]})}function $(G,ne){return typeof ne=="function"?ne(G):ne}function le(G,ne){for(var Y in ne)G[Y]=ne[Y];return G}function ce(G,ne){for(var Y in G)if(Y!=="__source"&&!(Y in ne))return!0;for(var se in ne)if(se!=="__source"&&G[se]!==ne[se])return!0;return!1}function ye(G){this.props=G}function xe(G,ne){function Y(Me){var De=this.props.ref,Xe=De==Me.ref;return!Xe&&De&&(De.call?De(null):De.current=null),ne?!ne(this.props,Me)||!Xe:ce(this.props,Me)}function se(Me){return this.shouldComponentUpdate=Y,Object(m.e)(G,Me)}return se.displayName="Memo("+(G.displayName||G.name)+")",se.prototype.isReactComponent=!0,se.__f=!0,se}(ye.prototype=new m.a).isPureReactComponent=!0,ye.prototype.shouldComponentUpdate=function(G,ne){return ce(this.props,G)||ce(this.state,ne)};var ge=m.i.__b;m.i.__b=function(G){G.type&&G.type.__f&&G.ref&&(G.props.ref=G.ref,G.ref=null),ge&&ge(G)};var ue=typeof Symbol!="undefined"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function he(G){function ne(Y,se){var Me=le({},Y);return delete Me.ref,G(Me,!(se=Y.ref||se)||typeof se=="object"&&!("current"in se)?null:se)}return ne.$$typeof=ue,ne.render=ne,ne.prototype.isReactComponent=ne.__f=!0,ne.displayName="ForwardRef("+(G.displayName||G.name)+")",ne}var be=function(G,ne){return G==null?null:Object(m.k)(Object(m.k)(G).map(ne))},Se={map:be,forEach:be,count:function(G){return G?Object(m.k)(G).length:0},only:function(G){var ne=Object(m.k)(G);if(ne.length!==1)throw"Children.only";return ne[0]},toArray:m.k},Ie=m.i.__e;m.i.__e=function(G,ne,Y){if(G.then){for(var se,Me=ne;Me=Me.__;)if((se=Me.__c)&&se.__c)return ne.__e==null&&(ne.__e=Y.__e,ne.__k=Y.__k),se.__c(G,ne)}Ie(G,ne,Y)};var Ke=m.i.unmount;function Pe(G,ne,Y){return G&&(G.__c&&G.__c.__H&&(G.__c.__H.__.forEach(function(se){typeof se.__c=="function"&&se.__c()}),G.__c.__H=null),(G=le({},G)).__c!=null&&(G.__c.__P===Y&&(G.__c.__P=ne),G.__c=null),G.__k=G.__k&&G.__k.map(function(se){return Pe(se,ne,Y)})),G}function Ce(G,ne,Y){return G&&(G.__v=null,G.__k=G.__k&&G.__k.map(function(se){return Ce(se,ne,Y)}),G.__c&&G.__c.__P===ne&&(G.__e&&Y.insertBefore(G.__e,G.__d),G.__c.__e=!0,G.__c.__P=Y)),G}function Ze(){this.__u=0,this.t=null,this.__b=null}function q(G){var ne=G.__.__c;return ne&&ne.__e&&ne.__e(G)}function K(){this.u=null,this.o=null}m.i.unmount=function(G){var ne=G.__c;ne&&ne.__R&&ne.__R(),ne&&G.__h===!0&&(G.type=null),Ke&&Ke(G)},(Ze.prototype=new m.a).__c=function(G,ne){var Y=ne.__c,se=this;se.t==null&&(se.t=[]),se.t.push(Y);var Me=q(se.__v),De=!1,Xe=function(){De||(De=!0,Y.__R=null,Me?Me(ft):ft())};Y.__R=Xe;var ft=function(){if(!--se.__u){if(se.state.__e){var Zt=se.state.__e;se.__v.__k[0]=Ce(Zt,Zt.__c.__P,Zt.__c.__O)}var Rt;for(se.setState({__e:se.__b=null});Rt=se.t.pop();)Rt.forceUpdate()}},Ht=ne.__h===!0;se.__u++||Ht||se.setState({__e:se.__b=se.__v.__k[0]}),G.then(Xe,Xe)},Ze.prototype.componentWillUnmount=function(){this.t=[]},Ze.prototype.render=function(G,ne){if(this.__b){if(this.__v.__k){var Y=document.createElement("div"),se=this.__v.__k[0].__c;this.__v.__k[0]=Pe(this.__b,Y,se.__O=se.__P)}this.__b=null}var Me=ne.__e&&Object(m.e)(m.b,null,G.fallback);return Me&&(Me.__h=null),[Object(m.e)(m.b,null,ne.__e?null:G.children),Me]};var ae=function(G,ne,Y){if(++Y[1]===Y[0]&&G.o.delete(ne),G.props.revealOrder&&(G.props.revealOrder[0]!=="t"||!G.o.size))for(Y=G.u;Y;){for(;Y.length>3;)Y.pop()();if(Y[1]<Y[0])break;G.u=Y=Y[2]}};function _e(G){return this.getChildContext=function(){return G.context},G.children}function Ae(G){var ne=this,Y=G.i;ne.componentWillUnmount=function(){Object(m.j)(null,ne.l),ne.l=null,ne.i=null},ne.i&&ne.i!==Y&&ne.componentWillUnmount(),G.__v?(ne.l||(ne.i=Y,ne.l={nodeType:1,parentNode:Y,childNodes:[],appendChild:function(se){this.childNodes.push(se),ne.i.appendChild(se)},insertBefore:function(se,Me){this.childNodes.push(se),ne.i.appendChild(se)},removeChild:function(se){this.childNodes.splice(this.childNodes.indexOf(se)>>>1,1),ne.i.removeChild(se)}}),Object(m.j)(Object(m.e)(_e,{context:ne.context},G.__v),ne.l)):ne.l&&ne.componentWillUnmount()}(K.prototype=new m.a).__e=function(G){var ne=this,Y=q(ne.__v),se=ne.o.get(G);return se[0]++,function(Me){var De=function(){ne.props.revealOrder?(se.push(Me),ae(ne,G,se)):Me()};Y?Y(De):De()}},K.prototype.render=function(G){this.u=null,this.o=new Map;var ne=Object(m.k)(G.children);G.revealOrder&&G.revealOrder[0]==="b"&&ne.reverse();for(var Y=ne.length;Y--;)this.o.set(ne[Y],this.u=[1,0,this.u]);return G.children},K.prototype.componentDidUpdate=K.prototype.componentDidMount=function(){var G=this;this.o.forEach(function(ne,Y){ae(G,Y,ne)})};var we=typeof Symbol!="undefined"&&Symbol.for&&Symbol.for("react.element")||60103,qe=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,nt=typeof document!="undefined",$e=function(G){return(typeof Symbol!="undefined"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(G)};m.a.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(G){Object.defineProperty(m.a.prototype,G,{configurable:!0,get:function(){return this["UNSAFE_"+G]},set:function(ne){Object.defineProperty(this,G,{configurable:!0,writable:!0,value:ne})}})});var Ye=m.i.event;function ve(){}function Ue(){return this.cancelBubble}function te(){return this.defaultPrevented}m.i.event=function(G){return Ye&&(G=Ye(G)),G.persist=ve,G.isPropagationStopped=Ue,G.isDefaultPrevented=te,G.nativeEvent=G};var Le,ut={configurable:!0,get:function(){return this.class}},vt=m.i.vnode;m.i.vnode=function(G){var ne=G.type,Y=G.props,se=Y;if(typeof ne=="string"){var Me=ne.indexOf("-")===-1;for(var De in se={},Y){var Xe=Y[De];nt&&De==="children"&&ne==="noscript"||De==="value"&&"defaultValue"in Y&&Xe==null||(De==="defaultValue"&&"value"in Y&&Y.value==null?De="value":De==="download"&&Xe===!0?Xe="":/ondoubleclick/i.test(De)?De="ondblclick":/^onchange(textarea|input)/i.test(De+ne)&&!$e(Y.type)?De="oninput":/^onfocus$/i.test(De)?De="onfocusin":/^onblur$/i.test(De)?De="onfocusout":/^on(Ani|Tra|Tou|BeforeInp)/.test(De)?De=De.toLowerCase():Me&&qe.test(De)?De=De.replace(/[A-Z0-9]/,"-$&").toLowerCase():Xe===null&&(Xe=void 0),se[De]=Xe)}ne=="select"&&se.multiple&&Array.isArray(se.value)&&(se.value=Object(m.k)(Y.children).forEach(function(ft){ft.props.selected=se.value.indexOf(ft.props.value)!=-1})),ne=="select"&&se.defaultValue!=null&&(se.value=Object(m.k)(Y.children).forEach(function(ft){ft.props.selected=se.multiple?se.defaultValue.indexOf(ft.props.value)!=-1:se.defaultValue==ft.props.value})),G.props=se,Y.class!=Y.className&&(ut.enumerable="className"in Y,Y.className!=null&&(se.class=Y.className),Object.defineProperty(se,"className",ut))}G.$$typeof=we,vt&&vt(G)};var it=m.i.__r;m.i.__r=function(G){it&&it(G),Le=G.__c};var yt={ReactCurrentDispatcher:{current:{readContext:function(G){return Le.__n[G.__c].props.value}}}};function St(G){return!!G&&G.$$typeof===we}var Pt=function(G,ne){return G(ne)},at=m.b,Ct={useState:B,useReducer:H,useEffect:ee,useLayoutEffect:ie,useRef:function(G){return E=5,J(function(){return{current:G}},[])},useImperativeHandle:function(G,ne,Y){E=6,ie(function(){typeof G=="function"?G(ne()):G&&(G.current=ne())},Y==null?Y:Y.concat(G))},useMemo:J,useCallback:V,useContext:function(G){var ne=c.context[G.__c],Y=I(l++,9);return Y.c=G,ne?(Y.__==null&&(Y.__=!0,ne.sub(c)),ne.props.value):G.__},useDebugValue:function(G,ne){m.i.useDebugValue&&m.i.useDebugValue(ne?ne(G):G)},version:"17.0.2",Children:Se,render:function(G,ne,Y){return ne.__k==null&&(ne.textContent=""),Object(m.j)(G,ne),typeof Y=="function"&&Y(),G?G.__c:null},hydrate:function(G,ne,Y){return Object(m.h)(G,ne),typeof Y=="function"&&Y(),G?G.__c:null},unmountComponentAtNode:function(G){return!!G.__k&&(Object(m.j)(null,G),!0)},createPortal:function(G,ne){return Object(m.e)(Ae,{__v:G,i:ne})},createElement:m.e,createContext:m.d,createFactory:function(G){return m.e.bind(null,G)},cloneElement:function(G){return St(G)?m.c.apply(null,arguments):G},createRef:m.f,Fragment:m.b,isValidElement:St,findDOMNode:function(G){return G&&(G.base||G.nodeType===1&&G)||null},Component:m.a,PureComponent:ye,memo:xe,forwardRef:he,flushSync:function(G,ne){return G(ne)},unstable_batchedUpdates:Pt,StrictMode:at,Suspense:Ze,SuspenseList:K,lazy:function(G){var ne,Y,se;function Me(De){if(ne||(ne=G()).then(function(Xe){Y=Xe.default||Xe},function(Xe){se=Xe}),se)throw se;if(!Y)throw ne;return Object(m.e)(Y,De)}return Me.displayName="Lazy",Me.__f=!0,Me},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:yt};f.d=Ct},function(s,f,i){var l=i(7),c=i(147),b=i(148),m=i(180),E=i(57),w=function(A){if(A&&A.forEach!==m)try{E(A,"forEach",m)}catch(j){A.forEach=m}};for(var P in c)c[P]&&w(l[P]&&l[P].prototype);w(b)},function(s,f,i){i(17)({target:"Object",stat:!0},{setPrototypeOf:i(97)})},function(s,f,i){var l=i(17),c=i(19),b=i(38),m=i(96),E=i(137);l({target:"Object",stat:!0,forced:c(function(){m(1)}),sham:!E},{getPrototypeOf:function(w){return m(b(w))}})},function(s,f,i){var l=i(17),c=i(46),b=i(76),m=i(200),E=i(157),w=i(32),P=i(33),A=i(54),j=i(19),M=c("Reflect","construct"),N=Object.prototype,I=[].push,B=j(function(){function ie(){}return!(M(function(){},[],ie)instanceof ie)}),H=!j(function(){M(function(){})}),ee=B||H;l({target:"Reflect",stat:!0,forced:ee,sham:ee},{construct:function(ie,J){E(ie),w(J);var V=arguments.length<3?ie:E(arguments[2]);if(H&&!B)return M(ie,J,V);if(ie==V){switch(J.length){case 0:return new ie;case 1:return new ie(J[0]);case 2:return new ie(J[0],J[1]);case 3:return new ie(J[0],J[1],J[2]);case 4:return new ie(J[0],J[1],J[2],J[3])}var Z=[null];return b(I,Z,J),new(b(m,ie,Z))}var z=V.prototype,D=A(P(z)?z:N),L=b(ie,D,J);return P(L)?L:D}})},function(s,f){var i=Function.prototype,l=i.bind,c=i.call,b=l&&l.bind(c);s.exports=l?function(m){return m&&b(c,m)}:function(m){return m&&function(){return c.apply(m,arguments)}}},function(s,f,i){var l=i(17),c=i(7),b=i(99),m=i(100),E=i(33),w=i(67),P=i(43),A=i(40),j=i(61),M=i(27),N=i(75),I=i(101),B=N("slice"),H=M("species"),ee=c.Array,ie=Math.max;l({target:"Array",proto:!0,forced:!B},{slice:function(J,V){var Z,z,D,L=A(this),C=P(L),F=w(J,C),$=w(V===void 0?C:V,C);if(b(L)&&(Z=L.constructor,(m(Z)&&(Z===ee||b(Z.prototype))||E(Z)&&(Z=Z[H])===null)&&(Z=void 0),Z===ee||Z===void 0))return I(L,F,$);for(z=new(Z===void 0?ee:Z)(ie($-F,0)),D=0;F<$;F++,D++)F in L&&j(z,D,L[F]);return z.length=D,z}})},function(s,f,i){var l=i(7),c=i(51).f,b=i(57),m=i(44),E=i(108),w=i(134),P=i(95);s.exports=function(A,j){var M,N,I,B,H,ee=A.target,ie=A.global,J=A.stat;if(M=ie?l:J?l[ee]||E(ee,{}):(l[ee]||{}).prototype)for(N in j){if(B=j[N],I=A.noTargetGet?(H=c(M,N))&&H.value:M[N],!P(ie?N:ee+(J?".":"#")+N,A.forced)&&I!==void 0){if(typeof B==typeof I)continue;w(B,I)}(A.sham||I&&I.sham)&&b(B,"sham",!0),m(M,N,B,A)}}},function(s,f,i){var l=i(17),c=i(102);l({target:"RegExp",proto:!0,forced:/./.exec!==c},{exec:c})},function(s,f){s.exports=function(i){try{return!!i()}catch(l){return!0}}},function(s,f,i){var l=i(17),c=i(38),b=i(66);l({target:"Object",stat:!0,forced:i(19)(function(){b(1)})},{keys:function(m){return b(c(m))}})},function(s,f,i){var l=i(17),c=i(19),b=i(40),m=i(51).f,E=i(36),w=c(function(){m(1)});l({target:"Object",stat:!0,forced:!E||w,sham:!E},{getOwnPropertyDescriptor:function(P,A){return m(b(P),A)}})},function(s,f,i){var l=i(36),c=i(94).EXISTS,b=i(15),m=i(37).f,E=Function.prototype,w=b(E.toString),P=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,A=b(P.exec);l&&!c&&m(E,"name",{configurable:!0,get:function(){try{return A(P,w(this))[1]}catch(j){return""}}})},function(s,f,i){var l=i(17),c=i(74).filter;l({target:"Array",proto:!0,forced:!i(75)("filter")},{filter:function(b){return c(this,b,arguments.length>1?arguments[1]:void 0)}})},function(s,f,i){var l=i(17),c=i(183);l({target:"Array",stat:!0,forced:!i(118)(function(b){Array.from(b)})},{from:c})},function(s,f,i){var l=i(17),c=i(36),b=i(135),m=i(40),E=i(51),w=i(61);l({target:"Object",stat:!0,sham:!c},{getOwnPropertyDescriptors:function(P){for(var A,j,M=m(P),N=E.f,I=b(M),B={},H=0;I.length>H;)(j=N(M,A=I[H++]))!==void 0&&w(B,A,j);return B}})},,function(s,f,i){var l=i(7),c=i(84),b=i(34),m=i(85),E=i(109),w=i(128),P=c("wks"),A=l.Symbol,j=A&&A.for,M=w?A:A&&A.withoutSetter||m;s.exports=function(N){if(!b(P,N)||!E&&typeof P[N]!="string"){var I="Symbol."+N;E&&b(A,N)?P[N]=A[N]:P[N]=w&&j?j(I):M(I)}return P[N]}},function(s,f){s.exports=function(i){return typeof i=="function"}},function(s,f,i){var l=i(17),c=i(7),b=i(19),m=i(99),E=i(33),w=i(38),P=i(43),A=i(61),j=i(119),M=i(75),N=i(27),I=i(65),B=N("isConcatSpreadable"),H=9007199254740991,ee="Maximum allowed index exceeded",ie=c.TypeError,J=I>=51||!b(function(){var z=[];return z[B]=!1,z.concat()[0]!==z}),V=M("concat"),Z=function(z){if(!E(z))return!1;var D=z[B];return D!==void 0?!!D:m(z)};l({target:"Array",proto:!0,forced:!J||!V},{concat:function(z){var D,L,C,F,$,le=w(this),ce=j(le,0),ye=0;for(D=-1,C=arguments.length;D<C;D++)if(Z($=D===-1?le:arguments[D])){if(ye+(F=P($))>H)throw ie(ee);for(L=0;L<F;L++,ye++)L in $&&A(ce,ye,$[L])}else{if(ye>=H)throw ie(ee);A(ce,ye++,$)}return ce.length=ye,ce}})},function(s,f,i){var l=i(17),c=i(199);l({target:"Object",stat:!0,forced:Object.assign!==c},{assign:c})},function(s,f,i){var l=i(105),c=typeof self=="object"&&self&&self.Object===Object&&self,b=l.a||c||Function("return this")();f.a=b},function(s,f,i){var l=i(7),c=i(33),b=l.String,m=l.TypeError;s.exports=function(E){if(c(E))return E;throw m(b(E)+" is not an object")}},function(s,f,i){var l=i(28);s.exports=function(c){return typeof c=="object"?c!==null:l(c)}},function(s,f,i){var l=i(15),c=i(38),b=l({}.hasOwnProperty);s.exports=Object.hasOwn||function(m,E){return b(c(m),E)}},function(s,f){var i=Function.prototype.call;s.exports=i.bind?i.bind(i):function(){return i.apply(i,arguments)}},function(s,f,i){var l=i(19);s.exports=!l(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},function(s,f,i){var l=i(7),c=i(36),b=i(129),m=i(32),E=i(87),w=l.TypeError,P=Object.defineProperty;f.f=c?P:function(A,j,M){if(m(A),j=E(j),m(M),b)try{return P(A,j,M)}catch(N){}if("get"in M||"set"in M)throw w("Accessors not supported");return"value"in M&&(A[j]=M.value),A}},function(s,f,i){var l=i(7),c=i(45),b=l.Object;s.exports=function(m){return b(c(m))}},function(s,f,i){var l=i(17),c=i(74).map;l({target:"Array",proto:!0,forced:!i(75)("map")},{map:function(b){return c(this,b,arguments.length>1?arguments[1]:void 0)}})},function(s,f,i){var l=i(81),c=i(45);s.exports=function(b){return l(c(b))}},function(s,f,i){var l=i(7),c=i(98),b=l.String;s.exports=function(m){if(c(m)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return b(m)}},function(s,f,i){(function(l){i.d(f,"d",function(){return m}),i.d(f,"c",function(){return E}),i.d(f,"b",function(){return w}),i.d(f,"a",function(){return A});var c=i(10),b=function(j,M){var N=typeof Symbol=="function"&&j[Symbol.iterator];if(!N)return j;var I,B,H=N.call(j),ee=[];try{for(;(M===void 0||M-- >0)&&!(I=H.next()).done;)ee.push(I.value)}catch(ie){B={error:ie}}finally{try{I&&!I.done&&(N=H.return)&&N.call(H)}finally{if(B)throw B.error}}return ee};function m(){var j=b(Object(c.j)(0),2)[1];return Object(c.h)(function(){j(function(M){return M+1})},[])}function E(j){if(!j||typeof j!="object")return!1;var M=Object.getPrototypeOf(j);return!M||M===Object.prototype}function w(j){return typeof Symbol=="function"?Symbol.for(j):"__$mobx-react "+j+"__"}var P={};function A(){return typeof window!="undefined"?window:l!==void 0?l:typeof self!="undefined"?self:P}}).call(this,i(82))},function(s,f,i){var l=i(90);s.exports=function(c){return l(c.length)}},function(s,f,i){var l=i(7),c=i(28),b=i(34),m=i(57),E=i(108),w=i(92),P=i(56),A=i(94).CONFIGURABLE,j=P.get,M=P.enforce,N=String(String).split("String");(s.exports=function(I,B,H,ee){var ie,J=!!ee&&!!ee.unsafe,V=!!ee&&!!ee.enumerable,Z=!!ee&&!!ee.noTargetGet,z=ee&&ee.name!==void 0?ee.name:B;c(H)&&(String(z).slice(0,7)==="Symbol("&&(z="["+String(z).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!b(H,"name")||A&&H.name!==z)&&m(H,"name",z),(ie=M(H)).source||(ie.source=N.join(typeof z=="string"?z:""))),I!==l?(J?!Z&&I[B]&&(V=!0):delete I[B],V?I[B]=H:m(I,B,H)):V?I[B]=H:E(B,H)})(Function.prototype,"toString",function(){return c(this)&&j(this).source||w(this)})},function(s,f,i){var l=i(7).TypeError;s.exports=function(c){if(c==null)throw l("Can't call method on "+c);return c}},function(s,f,i){var l=i(7),c=i(28),b=function(m){return c(m)?m:void 0};s.exports=function(m,E){return arguments.length<2?b(l[m]):l[m]&&l[m][E]}},function(s,f,i){var l=i(17),c=i(35),b=i(33),m=i(32),E=i(201),w=i(51),P=i(96);l({target:"Reflect",stat:!0},{get:function A(j,M){var N,I,B=arguments.length<3?j:arguments[2];return m(j)===B?j[M]:(N=w.f(j,M))?E(N)?N.value:N.get===void 0?void 0:c(N.get,B):b(I=P(j))?A(I,M,B):void 0}})},function(s,f,i){(function(l){var c=i(31),b=i(166),m=h&&!h.nodeType&&h,E=m&&typeof l=="object"&&l&&!l.nodeType&&l,w=E&&E.exports===m?c.a.Buffer:void 0,P=(w?w.isBuffer:void 0)||b.a;f.a=P}).call(this,i(121)(s))},function(s,f,i){(function(l){var c=i(105),b=h&&!h.nodeType&&h,m=b&&typeof l=="object"&&l&&!l.nodeType&&l,E=m&&m.exports===b&&c.a.process,w=function(){try{var P=m&&m.require&&m.require("util").types;return P||E&&E.binding&&E.binding("util")}catch(A){}}();f.a=w}).call(this,i(121)(s))},function(s,f,i){var l=i(15),c=l({}.toString),b=l("".slice);s.exports=function(m){return b(c(m),8,-1)}},function(s,f,i){var l=i(36),c=i(35),b=i(93),m=i(71),E=i(40),w=i(87),P=i(34),A=i(129),j=Object.getOwnPropertyDescriptor;f.f=l?j:function(M,N){if(M=E(M),N=w(N),A)try{return j(M,N)}catch(I){}if(P(M,N))return m(!c(b.f,M,N),M[N])}},function(s,f,i){var l=i(17),c=i(213).entries;l({target:"Object",stat:!0},{entries:function(b){return c(b)}})},function(s,f,i){var l=i(46);s.exports=l("navigator","userAgent")||""},function(s,f,i){var l,c=i(32),b=i(169),m=i(110),E=i(69),w=i(133),P=i(86),A=i(91),j=A("IE_PROTO"),M=function(){},N=function(H){return"<script>"+H+"<\/script>"},I=function(H){H.write(N("")),H.close();var ee=H.parentWindow.Object;return H=null,ee},B=function(){try{l=new ActiveXObject("htmlfile")}catch(J){}var H,ee;B=typeof document!="undefined"?document.domain&&l?I(l):((ee=P("iframe")).style.display="none",w.appendChild(ee),ee.src="javascript:",(H=ee.contentWindow.document).open(),H.write(N("document.F=Object")),H.close(),H.F):I(l);for(var ie=m.length;ie--;)delete B.prototype[m[ie]];return B()};E[j]=!0,s.exports=Object.create||function(H,ee){var ie;return H!==null?(M.prototype=c(H),ie=new M,M.prototype=null,ie[j]=H):ie=B(),ee===void 0?ie:b(ie,ee)}},function(s,f,i){var l=i(7),c=i(28),b=i(89),m=l.TypeError;s.exports=function(E){if(c(E))return E;throw m(b(E)+" is not a function")}},function(s,f,i){var l,c,b,m=i(171),E=i(7),w=i(15),P=i(33),A=i(57),j=i(34),M=i(107),N=i(91),I=i(69),B="Object already initialized",H=E.TypeError,ee=E.WeakMap;if(m||M.state){var ie=M.state||(M.state=new ee),J=w(ie.get),V=w(ie.has),Z=w(ie.set);l=function(D,L){if(V(ie,D))throw new H(B);return L.facade=D,Z(ie,D,L),L},c=function(D){return J(ie,D)||{}},b=function(D){return V(ie,D)}}else{var z=N("state");I[z]=!0,l=function(D,L){if(j(D,z))throw new H(B);return L.facade=D,A(D,z,L),L},c=function(D){return j(D,z)?D[z]:{}},b=function(D){return j(D,z)}}s.exports={set:l,get:c,has:b,enforce:function(D){return b(D)?c(D):l(D,{})},getterFor:function(D){return function(L){var C;if(!P(L)||(C=c(L)).type!==D)throw H("Incompatible receiver, "+D+" required");return C}}}},function(s,f,i){var l=i(36),c=i(37),b=i(71);s.exports=l?function(m,E,w){return c.f(m,E,b(1,w))}:function(m,E,w){return m[E]=w,m}},function(s,f,i){var l=i(15);s.exports=l({}.isPrototypeOf)},function(s,f,i){var l=i(55);s.exports=function(c,b){var m=c[b];return m==null?void 0:l(m)}},function(s,f,i){i(174)("Map",function(l){return function(){return l(this,arguments.length?arguments[0]:void 0)}},i(178))},function(s,f,i){var l=i(87),c=i(37),b=i(71);s.exports=function(m,E,w){var P=l(E);P in m?c.f(m,P,b(0,w)):m[P]=w}},function(s,f,i){var l=i(15),c=i(55),b=l(l.bind);s.exports=function(m,E){return c(m),E===void 0?m:b?b(m,E):function(){return m.apply(E,arguments)}}},function(s,f,i){var l=i(17),c=i(15),b=i(81),m=i(40),E=i(120),w=c([].join),P=b!=Object,A=E("join",",");l({target:"Array",proto:!0,forced:P||!A},{join:function(j){return w(m(this),j===void 0?",":j)}})},function(s,f){s.exports=!1},function(s,f,i){var l,c,b=i(7),m=i(53),E=b.process,w=b.Deno,P=E&&E.versions||w&&w.version,A=P&&P.v8;A&&(c=(l=A.split("."))[0]>0&&l[0]<4?1:+(l[0]+l[1])),!c&&m&&(!(l=m.match(/Edge\/(\d+)/))||l[1]>=74)&&(l=m.match(/Chrome\/(\d+)/))&&(c=+l[1]),s.exports=c},function(s,f,i){var l=i(131),c=i(110);s.exports=Object.keys||function(b){return l(b,c)}},function(s,f,i){var l=i(68),c=Math.max,b=Math.min;s.exports=function(m,E){var w=l(m);return w<0?c(w+E,0):b(w,E)}},function(s,f){var i=Math.ceil,l=Math.floor;s.exports=function(c){var b=+c;return b!=b||b===0?0:(b>0?l:i)(b)}},function(s,f){s.exports={}},function(s,f){s.exports={}},function(s,f){s.exports=function(i,l){return{enumerable:!(1&i),configurable:!(2&i),writable:!(4&i),value:l}}},function(s,f,i){var l=i(131),c=i(110).concat("length","prototype");f.f=Object.getOwnPropertyNames||function(b){return l(b,c)}},function(s,f,i){var l=i(37).f,c=i(34),b=i(27)("toStringTag");s.exports=function(m,E,w){m&&!c(m=w?m:m.prototype,b)&&l(m,b,{configurable:!0,value:E})}},function(s,f,i){var l=i(62),c=i(15),b=i(81),m=i(38),E=i(43),w=i(119),P=c([].push),A=function(j){var M=j==1,N=j==2,I=j==3,B=j==4,H=j==6,ee=j==7,ie=j==5||H;return function(J,V,Z,z){for(var D,L,C=m(J),F=b(C),$=l(V,Z),le=E(F),ce=0,ye=z||w,xe=M?ye(J,le):N||ee?ye(J,0):void 0;le>ce;ce++)if((ie||ce in F)&&(L=$(D=F[ce],ce,C),j))if(M)xe[ce]=L;else if(L)switch(j){case 3:return!0;case 5:return D;case 6:return ce;case 2:P(xe,D)}else switch(j){case 4:return!1;case 7:P(xe,D)}return H?-1:I||B?B:xe}};s.exports={forEach:A(0),map:A(1),filter:A(2),some:A(3),every:A(4),find:A(5),findIndex:A(6),filterReject:A(7)}},function(s,f,i){var l=i(19),c=i(27),b=i(65),m=c("species");s.exports=function(E){return b>=51||!l(function(){var w=[];return(w.constructor={})[m]=function(){return{foo:1}},w[E](Boolean).foo!==1})}},function(s,f){var i=Function.prototype,l=i.apply,c=i.bind,b=i.call;s.exports=typeof Reflect=="object"&&Reflect.apply||(c?b.bind(l):function(){return b.apply(l,arguments)})},function(s,f,i){var l=i(76),c=i(35),b=i(15),m=i(122),E=i(154),w=i(32),P=i(45),A=i(156),j=i(123),M=i(90),N=i(41),I=i(59),B=i(113),H=i(124),ee=i(102),ie=i(151),J=i(19),V=ie.UNSUPPORTED_Y,Z=4294967295,z=Math.min,D=[].push,L=b(/./.exec),C=b(D),F=b("".slice),$=!J(function(){var le=/(?:)/,ce=le.exec;le.exec=function(){return ce.apply(this,arguments)};var ye="ab".split(le);return ye.length!==2||ye[0]!=="a"||ye[1]!=="b"});m("split",function(le,ce,ye){var xe;return xe="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||".".split(/()()/).length>1||"".split(/.?/).length?function(ge,ue){var he=N(P(this)),be=ue===void 0?Z:ue>>>0;if(be===0)return[];if(ge===void 0)return[he];if(!E(ge))return c(ce,he,ge,be);for(var Se,Ie,Ke,Pe=[],Ce=(ge.ignoreCase?"i":"")+(ge.multiline?"m":"")+(ge.unicode?"u":"")+(ge.sticky?"y":""),Ze=0,q=new RegExp(ge.source,Ce+"g");(Se=c(ee,q,he))&&!((Ie=q.lastIndex)>Ze&&(C(Pe,F(he,Ze,Se.index)),Se.length>1&&Se.index<he.length&&l(D,Pe,B(Se,1)),Ke=Se[0].length,Ze=Ie,Pe.length>=be));)q.lastIndex===Se.index&&q.lastIndex++;return Ze===he.length?!Ke&&L(q,"")||C(Pe,""):C(Pe,F(he,Ze)),Pe.length>be?B(Pe,0,be):Pe}:"0".split(void 0,0).length?function(ge,ue){return ge===void 0&&ue===0?[]:c(ce,this,ge,ue)}:ce,[function(ge,ue){var he=P(this),be=ge==null?void 0:I(ge,le);return be?c(be,ge,he,ue):c(xe,N(he),ge,ue)},function(ge,ue){var he=w(this),be=N(ge),Se=ye(xe,he,be,ue,xe!==ce);if(Se.done)return Se.value;var Ie=A(he,RegExp),Ke=he.unicode,Pe=(he.ignoreCase?"i":"")+(he.multiline?"m":"")+(he.unicode?"u":"")+(V?"g":"y"),Ce=new Ie(V?"^(?:"+he.source+")":he,Pe),Ze=ue===void 0?Z:ue>>>0;if(Ze===0)return[];if(be.length===0)return H(Ce,be)===null?[be]:[];for(var q=0,K=0,ae=[];K<be.length;){Ce.lastIndex=V?0:K;var _e,Ae=H(Ce,V?F(be,K):be);if(Ae===null||(_e=z(M(Ce.lastIndex+(V?K:0)),be.length))===q)K=j(be,K,Ke);else{if(C(ae,F(be,q,K)),ae.length===Ze)return ae;for(var we=1;we<=Ae.length-1;we++)if(C(ae,Ae[we]),ae.length===Ze)return ae;K=q=_e}}return C(ae,F(be,q)),ae}]},!$,V)},function(s,f,i){var l=i(36),c=i(7),b=i(15),m=i(95),E=i(44),w=i(34),P=i(143),A=i(58),j=i(88),M=i(130),N=i(19),I=i(72).f,B=i(51).f,H=i(37).f,ee=i(197),ie=i(159).trim,J="Number",V=c.Number,Z=V.prototype,z=c.TypeError,D=b("".slice),L=b("".charCodeAt),C=function(xe){var ge=M(xe,"number");return typeof ge=="bigint"?ge:F(ge)},F=function(xe){var ge,ue,he,be,Se,Ie,Ke,Pe,Ce=M(xe,"number");if(j(Ce))throw z("Cannot convert a Symbol value to a number");if(typeof Ce=="string"&&Ce.length>2){if(Ce=ie(Ce),(ge=L(Ce,0))===43||ge===45){if((ue=L(Ce,2))===88||ue===120)return NaN}else if(ge===48){switch(L(Ce,1)){case 66:case 98:he=2,be=49;break;case 79:case 111:he=8,be=55;break;default:return+Ce}for(Ie=(Se=D(Ce,2)).length,Ke=0;Ke<Ie;Ke++)if((Pe=L(Se,Ke))<48||Pe>be)return NaN;return parseInt(Se,he)}}return+Ce};if(m(J,!V(" 0o1")||!V("0b1")||V("+0x1"))){for(var $,le=function(xe){var ge=arguments.length<1?0:V(C(xe)),ue=this;return A(Z,ue)&&N(function(){ee(ue)})?P(Object(ge),ue,le):ge},ce=l?I(V):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),ye=0;ce.length>ye;ye++)w(V,$=ce[ye])&&!w(le,$)&&H(le,$,B(V,$));le.prototype=Z,Z.constructor=le,E(c,J,le)}},function(s,f,i){i(17)({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})},function(s,f,i){var l=i(17),c=i(214),b=i(83);l({target:"Array",proto:!0},{fill:c}),b("fill")},function(s,f,i){var l=i(7),c=i(15),b=i(19),m=i(50),E=l.Object,w=c("".split);s.exports=b(function(){return!E("z").propertyIsEnumerable(0)})?function(P){return m(P)=="String"?w(P,""):E(P)}:E},function(s,f){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(l){typeof window=="object"&&(i=window)}s.exports=i},function(s,f,i){var l=i(27),c=i(54),b=i(37),m=l("unscopables"),E=Array.prototype;E[m]==null&&b.f(E,m,{configurable:!0,value:c(null)}),s.exports=function(w){E[m][w]=!0}},function(s,f,i){var l=i(64),c=i(107);(s.exports=function(b,m){return c[b]||(c[b]=m!==void 0?m:{})})("versions",[]).push({version:"3.19.3",mode:l?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},function(s,f,i){var l=i(15),c=0,b=Math.random(),m=l(1 .toString);s.exports=function(E){return"Symbol("+(E===void 0?"":E)+")_"+m(++c+b,36)}},function(s,f,i){var l=i(7),c=i(33),b=l.document,m=c(b)&&c(b.createElement);s.exports=function(E){return m?b.createElement(E):{}}},function(s,f,i){var l=i(130),c=i(88);s.exports=function(b){var m=l(b,"string");return c(m)?m:m+""}},function(s,f,i){var l=i(7),c=i(46),b=i(28),m=i(58),E=i(128),w=l.Object;s.exports=E?function(P){return typeof P=="symbol"}:function(P){var A=c("Symbol");return b(A)&&m(A.prototype,w(P))}},function(s,f,i){var l=i(7).String;s.exports=function(c){try{return l(c)}catch(b){return"Object"}}},function(s,f,i){var l=i(68),c=Math.min;s.exports=function(b){return b>0?c(l(b),9007199254740991):0}},function(s,f,i){var l=i(84),c=i(85),b=l("keys");s.exports=function(m){return b[m]||(b[m]=c(m))}},function(s,f,i){var l=i(15),c=i(28),b=i(107),m=l(Function.toString);c(b.inspectSource)||(b.inspectSource=function(E){return m(E)}),s.exports=b.inspectSource},function(s,f,i){var l={}.propertyIsEnumerable,c=Object.getOwnPropertyDescriptor,b=c&&!l.call({1:2},1);f.f=b?function(m){var E=c(this,m);return!!E&&E.enumerable}:l},function(s,f,i){var l=i(36),c=i(34),b=Function.prototype,m=l&&Object.getOwnPropertyDescriptor,E=c(b,"name"),w=E&&function(){}.name==="something",P=E&&(!l||l&&m(b,"name").configurable);s.exports={EXISTS:E,PROPER:w,CONFIGURABLE:P}},function(s,f,i){var l=i(19),c=i(28),b=/#|\.prototype\./,m=function(j,M){var N=w[E(j)];return N==A||N!=P&&(c(M)?l(M):!!M)},E=m.normalize=function(j){return String(j).replace(b,".").toLowerCase()},w=m.data={},P=m.NATIVE="N",A=m.POLYFILL="P";s.exports=m},function(s,f,i){var l=i(7),c=i(34),b=i(28),m=i(38),E=i(91),w=i(137),P=E("IE_PROTO"),A=l.Object,j=A.prototype;s.exports=w?A.getPrototypeOf:function(M){var N=m(M);if(c(N,P))return N[P];var I=N.constructor;return b(I)&&N instanceof I?I.prototype:N instanceof A?j:null}},function(s,f,i){var l=i(15),c=i(32),b=i(173);s.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var m,E=!1,w={};try{(m=l(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(w,[]),E=w instanceof Array}catch(P){}return function(P,A){return c(P),b(A),E?m(P,A):P.__proto__=A,P}}():void 0)},function(s,f,i){var l=i(7),c=i(116),b=i(28),m=i(50),E=i(27)("toStringTag"),w=l.Object,P=m(function(){return arguments}())=="Arguments";s.exports=c?m:function(A){var j,M,N;return A===void 0?"Undefined":A===null?"Null":typeof(M=function(I,B){try{return I[B]}catch(H){}}(j=w(A),E))=="string"?M:P?m(j):(N=m(j))=="Object"&&b(j.callee)?"Arguments":N}},function(s,f,i){var l=i(50);s.exports=Array.isArray||function(c){return l(c)=="Array"}},function(s,f,i){var l=i(15),c=i(19),b=i(28),m=i(98),E=i(46),w=i(92),P=function(){},A=[],j=E("Reflect","construct"),M=/^\s*(?:class|function)\b/,N=l(M.exec),I=!M.exec(P),B=function(H){if(!b(H))return!1;try{return j(P,A,H),!0}catch(ee){return!1}};s.exports=!j||c(function(){var H;return B(B.call)||!B(Object)||!B(function(){H=!0})||H})?function(H){if(!b(H))return!1;switch(m(H)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return I||!!N(M,w(H))}:B},function(s,f,i){var l=i(15);s.exports=l([].slice)},function(s,f,i){var l,c,b=i(35),m=i(15),E=i(41),w=i(185),P=i(151),A=i(84),j=i(54),M=i(56).get,N=i(186),I=i(187),B=A("native-string-replace",String.prototype.replace),H=RegExp.prototype.exec,ee=H,ie=m("".charAt),J=m("".indexOf),V=m("".replace),Z=m("".slice),z=(c=/b*/g,b(H,l=/a/,"a"),b(H,c,"a"),l.lastIndex!==0||c.lastIndex!==0),D=P.BROKEN_CARET,L=/()??/.exec("")[1]!==void 0;(z||L||D||N||I)&&(ee=function(C){var F,$,le,ce,ye,xe,ge,ue=this,he=M(ue),be=E(C),Se=he.raw;if(Se)return Se.lastIndex=ue.lastIndex,F=b(ee,Se,be),ue.lastIndex=Se.lastIndex,F;var Ie=he.groups,Ke=D&&ue.sticky,Pe=b(w,ue),Ce=ue.source,Ze=0,q=be;if(Ke&&(Pe=V(Pe,"y",""),J(Pe,"g")===-1&&(Pe+="g"),q=Z(be,ue.lastIndex),ue.lastIndex>0&&(!ue.multiline||ue.multiline&&ie(be,ue.lastIndex-1)!==`
`)&&(Ce="(?: "+Ce+")",q=" "+q,Ze++),$=new RegExp("^(?:"+Ce+")",Pe)),L&&($=new RegExp("^"+Ce+"$(?!\\s)",Pe)),z&&(le=ue.lastIndex),ce=b(H,Ke?$:ue,q),Ke?ce?(ce.input=Z(ce.input,Ze),ce[0]=Z(ce[0],Ze),ce.index=ue.lastIndex,ue.lastIndex+=ce[0].length):ue.lastIndex=0:z&&ce&&(ue.lastIndex=ue.global?ce.index+ce[0].length:le),L&&ce&&ce.length>1&&b(B,ce[0],$,function(){for(ye=1;ye<arguments.length-2;ye++)arguments[ye]===void 0&&(ce[ye]=void 0)}),ce&&Ie)for(ce.groups=xe=j(null),ye=0;ye<Ie.length;ye++)xe[(ge=Ie[ye])[0]]=ce[ge[1]];return ce}),s.exports=ee},function(s,f,i){var l=i(17),c=i(7),b=i(67),m=i(68),E=i(43),w=i(38),P=i(119),A=i(61),j=i(75)("splice"),M=c.TypeError,N=Math.max,I=Math.min,B=9007199254740991,H="Maximum allowed length exceeded";l({target:"Array",proto:!0,forced:!j},{splice:function(ee,ie){var J,V,Z,z,D,L,C=w(this),F=E(C),$=b(ee,F),le=arguments.length;if(le===0?J=V=0:le===1?(J=0,V=F-$):(J=le-2,V=I(N(m(ie),0),F-$)),F+J-V>B)throw M(H);for(Z=P(C,V),z=0;z<V;z++)(D=$+z)in C&&A(Z,z,C[D]);if(Z.length=V,J<V){for(z=$;z<F-V;z++)L=z+J,(D=z+V)in C?C[L]=C[D]:delete C[L];for(z=F;z>F-V+J;z--)delete C[z-1]}else if(J>V)for(z=F-V;z>$;z--)L=z+J-1,(D=z+V-1)in C?C[L]=C[D]:delete C[L];for(z=0;z<J;z++)C[z+$]=arguments[z+2];return C.length=F-V+J,Z}})},function(s,f,i){var l=i(17),c=i(202);l({target:"String",proto:!0,forced:i(203)("anchor")},{anchor:function(b){return c(this,"a","name",b)}})},function(s,f,i){(function(l){var c=typeof l=="object"&&l&&l.Object===Object&&l;f.a=c}).call(this,i(82))},function(s,f,i){(function(l){var c=i(31),b=h&&!h.nodeType&&h,m=b&&typeof l=="object"&&l&&!l.nodeType&&l,E=m&&m.exports===b?c.a.Buffer:void 0,w=E?E.allocUnsafe:void 0;f.a=function(P,A){if(A)return P.slice();var j=P.length,M=w?w(j):new P.constructor(j);return P.copy(M),M}}).call(this,i(121)(s))},function(s,f,i){var l=i(7),c=i(108),b="__core-js_shared__",m=l[b]||c(b,{});s.exports=m},function(s,f,i){var l=i(7),c=Object.defineProperty;s.exports=function(b,m){try{c(l,b,{value:m,configurable:!0,writable:!0})}catch(E){l[b]=m}return m}},function(s,f,i){var l=i(65),c=i(19);s.exports=!!Object.getOwnPropertySymbols&&!c(function(){var b=Symbol();return!String(b)||!(Object(b)instanceof Symbol)||!Symbol.sham&&l&&l<41})},function(s,f){s.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(s,f,i){var l=i(17),c=i(35),b=i(64),m=i(94),E=i(28),w=i(172),P=i(96),A=i(97),j=i(73),M=i(57),N=i(44),I=i(27),B=i(70),H=i(136),ee=m.PROPER,ie=m.CONFIGURABLE,J=H.IteratorPrototype,V=H.BUGGY_SAFARI_ITERATORS,Z=I("iterator"),z="keys",D="values",L="entries",C=function(){return this};s.exports=function(F,$,le,ce,ye,xe,ge){w(le,$,ce);var ue,he,be,Se=function(K){if(K===ye&&Ze)return Ze;if(!V&&K in Pe)return Pe[K];switch(K){case z:case D:case L:return function(){return new le(this,K)}}return function(){return new le(this)}},Ie=$+" Iterator",Ke=!1,Pe=F.prototype,Ce=Pe[Z]||Pe["@@iterator"]||ye&&Pe[ye],Ze=!V&&Ce||Se(ye),q=$=="Array"&&Pe.entries||Ce;if(q&&(ue=P(q.call(new F)))!==Object.prototype&&ue.next&&(b||P(ue)===J||(A?A(ue,J):E(ue[Z])||N(ue,Z,C)),j(ue,Ie,!0,!0),b&&(B[Ie]=C)),ee&&ye==D&&Ce&&Ce.name!==D&&(!b&&ie?M(Pe,"name",D):(Ke=!0,Ze=function(){return c(Ce,this)})),ye)if(he={values:Se(D),keys:xe?Ze:Se(z),entries:Se(L)},ge)for(be in he)(V||Ke||!(be in Pe))&&N(Pe,be,he[be]);else l({target:$,proto:!0,forced:V||Ke},he);return b&&!ge||Pe[Z]===Ze||N(Pe,Z,Ze,{name:ye}),B[$]=Ze,he}},function(s,f){f.f=Object.getOwnPropertySymbols},function(s,f,i){var l=i(7),c=i(67),b=i(43),m=i(61),E=l.Array,w=Math.max;s.exports=function(P,A,j){for(var M=b(P),N=c(A,M),I=c(j===void 0?M:j,M),B=E(w(I-N,0)),H=0;N<I;N++,H++)m(B,H,P[N]);return B.length=H,B}},function(s,f,i){var l=i(7),c=i(62),b=i(35),m=i(32),E=i(89),w=i(140),P=i(43),A=i(58),j=i(141),M=i(115),N=i(142),I=l.TypeError,B=function(ee,ie){this.stopped=ee,this.result=ie},H=B.prototype;s.exports=function(ee,ie,J){var V,Z,z,D,L,C,F,$=J&&J.that,le=!(!J||!J.AS_ENTRIES),ce=!(!J||!J.IS_ITERATOR),ye=!(!J||!J.INTERRUPTED),xe=c(ie,$),ge=function(he){return V&&N(V,"normal",he),new B(!0,he)},ue=function(he){return le?(m(he),ye?xe(he[0],he[1],ge):xe(he[0],he[1])):ye?xe(he,ge):xe(he)};if(ce)V=ee;else{if(!(Z=M(ee)))throw I(E(ee)+" is not iterable");if(w(Z)){for(z=0,D=P(ee);D>z;z++)if((L=ue(ee[z]))&&A(H,L))return L;return new B(!1)}V=j(ee,Z)}for(C=V.next;!(F=b(C,V)).done;){try{L=ue(F.value)}catch(he){N(V,"throw",he)}if(typeof L=="object"&&L&&A(H,L))return L}return new B(!1)}},function(s,f,i){var l=i(98),c=i(59),b=i(70),m=i(27)("iterator");s.exports=function(E){if(E!=null)return c(E,m)||c(E,"@@iterator")||b[l(E)]}},function(s,f,i){var l={};l[i(27)("toStringTag")]="z",s.exports=String(l)==="[object z]"},function(s,f,i){var l=i(7),c=i(58),b=l.TypeError;s.exports=function(m,E){if(c(E,m))return m;throw b("Incorrect invocation")}},function(s,f,i){var l=i(27)("iterator"),c=!1;try{var b=0,m={next:function(){return{done:!!b++}},return:function(){c=!0}};m[l]=function(){return this},Array.from(m,function(){throw 2})}catch(E){}s.exports=function(E,w){if(!w&&!c)return!1;var P=!1;try{var A={};A[l]=function(){return{next:function(){return{done:P=!0}}}},E(A)}catch(j){}return P}},function(s,f,i){var l=i(181);s.exports=function(c,b){return new(l(c))(b===0?0:b)}},function(s,f,i){var l=i(19);s.exports=function(c,b){var m=[][c];return!!m&&l(function(){m.call(null,b||function(){throw 1},1)})}},function(s,f){s.exports=function(i){if(!i.webpackPolyfill){var l=Object.create(i);l.children||(l.children=[]),Object.defineProperty(l,"loaded",{enumerable:!0,get:function(){return l.l}}),Object.defineProperty(l,"id",{enumerable:!0,get:function(){return l.i}}),Object.defineProperty(l,"exports",{enumerable:!0}),l.webpackPolyfill=1}return l}},function(s,f,i){i(18);var l=i(15),c=i(44),b=i(102),m=i(19),E=i(27),w=i(57),P=E("species"),A=RegExp.prototype;s.exports=function(j,M,N,I){var B=E(j),H=!m(function(){var V={};return V[B]=function(){return 7},""[j](V)!=7}),ee=H&&!m(function(){var V=!1,Z=/a/;return j==="split"&&((Z={}).constructor={},Z.constructor[P]=function(){return Z},Z.flags="",Z[B]=/./[B]),Z.exec=function(){return V=!0,null},Z[B](""),!V});if(!H||!ee||N){var ie=l(/./[B]),J=M(B,""[j],function(V,Z,z,D,L){var C=l(V),F=Z.exec;return F===b||F===A.exec?H&&!L?{done:!0,value:ie(Z,z,D)}:{done:!0,value:C(z,Z,D)}:{done:!1}});c(String.prototype,j,J[0]),c(A,B,J[1])}I&&w(A[B],"sham",!0)}},function(s,f,i){var l=i(146).charAt;s.exports=function(c,b,m){return b+(m?l(c,b).length:1)}},function(s,f,i){var l=i(7),c=i(35),b=i(32),m=i(28),E=i(50),w=i(102),P=l.TypeError;s.exports=function(A,j){var M=A.exec;if(m(M)){var N=c(M,A,j);return N!==null&&b(N),N}if(E(A)==="RegExp")return c(w,A,j);throw P("RegExp#exec called on incompatible receiver")}},function(s,f,i){var l=i(76),c=i(35),b=i(15),m=i(122),E=i(19),w=i(32),P=i(28),A=i(68),j=i(90),M=i(41),N=i(45),I=i(123),B=i(59),H=i(198),ee=i(124),ie=i(27)("replace"),J=Math.max,V=Math.min,Z=b([].concat),z=b([].push),D=b("".indexOf),L=b("".slice),C="a".replace(/./,"$0")==="$0",F=!!/./[ie]&&/./[ie]("a","$0")==="";m("replace",function($,le,ce){var ye=F?"$":"$0";return[function(xe,ge){var ue=N(this),he=xe==null?void 0:B(xe,ie);return he?c(he,xe,ue,ge):c(le,M(ue),xe,ge)},function(xe,ge){var ue=w(this),he=M(xe);if(typeof ge=="string"&&D(ge,ye)===-1&&D(ge,"$<")===-1){var be=ce(le,ue,he,ge);if(be.done)return be.value}var Se=P(ge);Se||(ge=M(ge));var Ie=ue.global;if(Ie){var Ke=ue.unicode;ue.lastIndex=0}for(var Pe=[];;){var Ce=ee(ue,he);if(Ce===null||(z(Pe,Ce),!Ie))break;M(Ce[0])===""&&(ue.lastIndex=I(he,j(ue.lastIndex),Ke))}for(var Ze,q="",K=0,ae=0;ae<Pe.length;ae++){for(var _e=M((Ce=Pe[ae])[0]),Ae=J(V(A(Ce.index),he.length),0),we=[],qe=1;qe<Ce.length;qe++)z(we,(Ze=Ce[qe])===void 0?Ze:String(Ze));var nt=Ce.groups;if(Se){var $e=Z([_e],we,Ae,he);nt!==void 0&&z($e,nt);var Ye=M(l(ge,void 0,$e))}else Ye=H(_e,he,Ae,we,nt,ge);Ae>=K&&(q+=L(he,K,Ae)+Ye,K=Ae+_e.length)}return q+L(he,K)}]},!!E(function(){var $=/./;return $.exec=function(){var le=[];return le.groups={a:"7"},le},"".replace($,"$<a>")!=="7"})||!C||F)},function(s,f,i){var l=i(50),c=i(7);s.exports=l(c.process)=="process"},function(s,f,i){i(17)({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991})},function(s,f,i){var l=i(109);s.exports=l&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},function(s,f,i){var l=i(36),c=i(19),b=i(86);s.exports=!l&&!c(function(){return Object.defineProperty(b("div"),"a",{get:function(){return 7}}).a!=7})},function(s,f,i){var l=i(7),c=i(35),b=i(33),m=i(88),E=i(59),w=i(170),P=i(27),A=l.TypeError,j=P("toPrimitive");s.exports=function(M,N){if(!b(M)||m(M))return M;var I,B=E(M,j);if(B){if(N===void 0&&(N="default"),I=c(B,M,N),!b(I)||m(I))return I;throw A("Can't convert object to primitive value")}return N===void 0&&(N="number"),w(M,N)}},function(s,f,i){var l=i(15),c=i(34),b=i(40),m=i(132).indexOf,E=i(69),w=l([].push);s.exports=function(P,A){var j,M=b(P),N=0,I=[];for(j in M)!c(E,j)&&c(M,j)&&w(I,j);for(;A.length>N;)c(M,j=A[N++])&&(~m(I,j)||w(I,j));return I}},function(s,f,i){var l=i(40),c=i(67),b=i(43),m=function(E){return function(w,P,A){var j,M=l(w),N=b(M),I=c(A,N);if(E&&P!=P){for(;N>I;)if((j=M[I++])!=j)return!0}else for(;N>I;I++)if((E||I in M)&&M[I]===P)return E||I||0;return!E&&-1}};s.exports={includes:m(!0),indexOf:m(!1)}},function(s,f,i){var l=i(46);s.exports=l("document","documentElement")},function(s,f,i){var l=i(34),c=i(135),b=i(51),m=i(37);s.exports=function(E,w){for(var P=c(w),A=m.f,j=b.f,M=0;M<P.length;M++){var N=P[M];l(E,N)||A(E,N,j(w,N))}}},function(s,f,i){var l=i(46),c=i(15),b=i(72),m=i(112),E=i(32),w=c([].concat);s.exports=l("Reflect","ownKeys")||function(P){var A=b.f(E(P)),j=m.f;return j?w(A,j(P)):A}},function(s,f,i){var l,c,b,m=i(19),E=i(28),w=i(54),P=i(96),A=i(44),j=i(27),M=i(64),N=j("iterator"),I=!1;[].keys&&("next"in(b=[].keys())?(c=P(P(b)))!==Object.prototype&&(l=c):I=!0),l==null||m(function(){var B={};return l[N].call(B)!==B})?l={}:M&&(l=w(l)),E(l[N])||A(l,N,function(){return this}),s.exports={IteratorPrototype:l,BUGGY_SAFARI_ITERATORS:I}},function(s,f,i){var l=i(19);s.exports=!l(function(){function c(){}return c.prototype.constructor=null,Object.getPrototypeOf(new c)!==c.prototype})},function(s,f,i){var l=i(17),c=i(15),b=i(69),m=i(33),E=i(34),w=i(37).f,P=i(72),A=i(139),j=i(175),M=i(85),N=i(177),I=!1,B=M("meta"),H=0,ee=function(J){w(J,B,{value:{objectID:"O"+H++,weakData:{}}})},ie=s.exports={enable:function(){ie.enable=function(){},I=!0;var J=P.f,V=c([].splice),Z={};Z[B]=1,J(Z).length&&(P.f=function(z){for(var D=J(z),L=0,C=D.length;L<C;L++)if(D[L]===B){V(D,L,1);break}return D},l({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:A.f}))},fastKey:function(J,V){if(!m(J))return typeof J=="symbol"?J:(typeof J=="string"?"S":"P")+J;if(!E(J,B)){if(!j(J))return"F";if(!V)return"E";ee(J)}return J[B].objectID},getWeakData:function(J,V){if(!E(J,B)){if(!j(J))return!0;if(!V)return!1;ee(J)}return J[B].weakData},onFreeze:function(J){return N&&I&&j(J)&&!E(J,B)&&ee(J),J}};b[B]=!0},function(s,f,i){var l=i(50),c=i(40),b=i(72).f,m=i(113),E=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];s.exports.f=function(w){return E&&l(w)=="Window"?function(P){try{return b(P)}catch(A){return m(E)}}(w):b(c(w))}},function(s,f,i){var l=i(27),c=i(70),b=l("iterator"),m=Array.prototype;s.exports=function(E){return E!==void 0&&(c.Array===E||m[b]===E)}},function(s,f,i){var l=i(7),c=i(35),b=i(55),m=i(32),E=i(89),w=i(115),P=l.TypeError;s.exports=function(A,j){var M=arguments.length<2?w(A):j;if(b(M))return m(c(M,A));throw P(E(A)+" is not iterable")}},function(s,f,i){var l=i(35),c=i(32),b=i(59);s.exports=function(m,E,w){var P,A;c(m);try{if(!(P=b(m,"return"))){if(E==="throw")throw w;return w}P=l(P,m)}catch(j){A=!0,P=j}if(E==="throw")throw w;if(A)throw P;return c(P),w}},function(s,f,i){var l=i(28),c=i(33),b=i(97);s.exports=function(m,E,w){var P,A;return b&&l(P=E.constructor)&&P!==w&&c(A=P.prototype)&&A!==w.prototype&&b(m,A),m}},function(s,f,i){var l=i(44);s.exports=function(c,b,m){for(var E in b)l(c,E,b[E],m);return c}},function(s,f,i){var l=i(46),c=i(37),b=i(27),m=i(36),E=b("species");s.exports=function(w){var P=l(w),A=c.f;m&&P&&!P[E]&&A(P,E,{configurable:!0,get:function(){return this}})}},function(s,f,i){var l=i(15),c=i(68),b=i(41),m=i(45),E=l("".charAt),w=l("".charCodeAt),P=l("".slice),A=function(j){return function(M,N){var I,B,H=b(m(M)),ee=c(N),ie=H.length;return ee<0||ee>=ie?j?"":void 0:(I=w(H,ee))<55296||I>56319||ee+1===ie||(B=w(H,ee+1))<56320||B>57343?j?E(H,ee):I:j?P(H,ee,ee+2):B-56320+(I-55296<<10)+65536}};s.exports={codeAt:A(!1),charAt:A(!0)}},function(s,f){s.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(s,f,i){var l=i(86)("span").classList,c=l&&l.constructor&&l.constructor.prototype;s.exports=c===Object.prototype?void 0:c},function(s,f,i){var l=i(27);f.f=l},function(s,f,i){var l=i(182),c=i(34),b=i(149),m=i(37).f;s.exports=function(E){var w=l.Symbol||(l.Symbol={});c(w,E)||m(w,E,{value:b.f(E)})}},function(s,f,i){var l=i(19),c=i(7).RegExp,b=l(function(){var w=c("a","y");return w.lastIndex=2,w.exec("abcd")!=null}),m=b||l(function(){return!c("a","y").sticky}),E=b||l(function(){var w=c("^r","gy");return w.lastIndex=2,w.exec("str")!=null});s.exports={BROKEN_CARET:E,MISSED_STICKY:m,UNSUPPORTED_Y:b}},function(s,f,i){var l=i(17),c=i(132).includes,b=i(83);l({target:"Array",proto:!0},{includes:function(m){return c(this,m,arguments.length>1?arguments[1]:void 0)}}),b("includes")},function(s,f,i){var l=i(17),c=i(15),b=i(194),m=i(45),E=i(41),w=i(195),P=c("".indexOf);l({target:"String",proto:!0,forced:!w("includes")},{includes:function(A){return!!~P(E(m(this)),E(b(A)),arguments.length>1?arguments[1]:void 0)}})},function(s,f,i){var l=i(33),c=i(50),b=i(27)("match");s.exports=function(m){var E;return l(m)&&((E=m[b])!==void 0?!!E:c(m)=="RegExp")}},function(s,f){var i,l,c=s.exports={};function b(){throw new Error("setTimeout has not been defined")}function m(){throw new Error("clearTimeout has not been defined")}function E(H){if(i===setTimeout)return setTimeout(H,0);if((i===b||!i)&&setTimeout)return i=setTimeout,setTimeout(H,0);try{return i(H,0)}catch(ee){try{return i.call(null,H,0)}catch(ie){return i.call(this,H,0)}}}(function(){try{i=typeof setTimeout=="function"?setTimeout:b}catch(H){i=b}try{l=typeof clearTimeout=="function"?clearTimeout:m}catch(H){l=m}})();var w,P=[],A=!1,j=-1;function M(){A&&w&&(A=!1,w.length?P=w.concat(P):j=-1,P.length&&N())}function N(){if(!A){var H=E(M);A=!0;for(var ee=P.length;ee;){for(w=P,P=[];++j<ee;)w&&w[j].run();j=-1,ee=P.length}w=null,A=!1,function(ie){if(l===clearTimeout)return clearTimeout(ie);if((l===m||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(ie);try{l(ie)}catch(J){try{return l.call(null,ie)}catch(V){return l.call(this,ie)}}}(H)}}function I(H,ee){this.fun=H,this.array=ee}function B(){}c.nextTick=function(H){var ee=new Array(arguments.length-1);if(arguments.length>1)for(var ie=1;ie<arguments.length;ie++)ee[ie-1]=arguments[ie];P.push(new I(H,ee)),P.length!==1||A||E(N)},I.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=B,c.addListener=B,c.once=B,c.off=B,c.removeListener=B,c.removeAllListeners=B,c.emit=B,c.prependListener=B,c.prependOnceListener=B,c.listeners=function(H){return[]},c.binding=function(H){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(H){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},function(s,f,i){var l=i(32),c=i(157),b=i(27)("species");s.exports=function(m,E){var w,P=l(m).constructor;return P===void 0||(w=l(P)[b])==null?E:c(w)}},function(s,f,i){var l=i(7),c=i(100),b=i(89),m=l.TypeError;s.exports=function(E){if(c(E))return E;throw m(b(E)+" is not a constructor")}},function(s,f,i){var l=i(17),c=i(159).trim;l({target:"String",proto:!0,forced:i(196)("trim")},{trim:function(){return c(this)}})},function(s,f,i){var l=i(15),c=i(45),b=i(41),m=i(160),E=l("".replace),w="["+m+"]",P=RegExp("^"+w+w+"*"),A=RegExp(w+w+"*$"),j=function(M){return function(N){var I=b(c(N));return 1&M&&(I=E(I,P,"")),2&M&&(I=E(I,A,"")),I}};s.exports={start:j(1),end:j(2),trim:j(3)}},function(s,f){s.exports=`	
\v\f\r                　\u2028\u2029\uFEFF`},function(s,f,i){var l=i(35),c=i(122),b=i(32),m=i(90),E=i(41),w=i(45),P=i(59),A=i(123),j=i(124);c("match",function(M,N,I){return[function(B){var H=w(this),ee=B==null?void 0:P(B,M);return ee?l(ee,B,H):new RegExp(B)[M](E(H))},function(B){var H=b(this),ee=E(B),ie=I(N,H,ee);if(ie.done)return ie.value;if(!H.global)return j(H,ee);var J=H.unicode;H.lastIndex=0;for(var V,Z=[],z=0;(V=j(H,ee))!==null;){var D=E(V[0]);Z[z]=D,D===""&&(H.lastIndex=A(ee,m(H.lastIndex),J)),z++}return z===0?null:Z}]})},function(s,f,i){var l=i(17),c=Math.hypot,b=Math.abs,m=Math.sqrt;l({target:"Math",stat:!0,forced:!!c&&c(1/0,NaN)!==1/0},{hypot:function(E,w){for(var P,A,j=0,M=0,N=arguments.length,I=0;M<N;)I<(P=b(arguments[M++]))?(j=j*(A=I/P)*A+1,I=P):j+=P>0?(A=P/I)*A:P;return I===1/0?1/0:I*m(j)}})},function(s,f,i){var l,c,b,m,E=i(7),w=i(76),P=i(62),A=i(28),j=i(34),M=i(19),N=i(133),I=i(101),B=i(86),H=i(164),ee=i(126),ie=E.setImmediate,J=E.clearImmediate,V=E.process,Z=E.Dispatch,z=E.Function,D=E.MessageChannel,L=E.String,C=0,F={},$="onreadystatechange";try{l=E.location}catch(ge){}var le=function(ge){if(j(F,ge)){var ue=F[ge];delete F[ge],ue()}},ce=function(ge){return function(){le(ge)}},ye=function(ge){le(ge.data)},xe=function(ge){E.postMessage(L(ge),l.protocol+"//"+l.host)};ie&&J||(ie=function(ge){var ue=I(arguments,1);return F[++C]=function(){w(A(ge)?ge:z(ge),void 0,ue)},c(C),C},J=function(ge){delete F[ge]},ee?c=function(ge){V.nextTick(ce(ge))}:Z&&Z.now?c=function(ge){Z.now(ce(ge))}:D&&!H?(m=(b=new D).port2,b.port1.onmessage=ye,c=P(m.postMessage,m)):E.addEventListener&&A(E.postMessage)&&!E.importScripts&&l&&l.protocol!=="file:"&&!M(xe)?(c=xe,E.addEventListener("message",ye,!1)):c=$ in B("script")?function(ge){N.appendChild(B("script")).onreadystatechange=function(){N.removeChild(this),le(ge)}}:function(ge){setTimeout(ce(ge),0)}),s.exports={set:ie,clear:J}},function(s,f,i){var l=i(53);s.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(l)},function(s,f,i){var l=i(55),c=function(b){var m,E;this.promise=new b(function(w,P){if(m!==void 0||E!==void 0)throw TypeError("Bad Promise constructor");m=w,E=P}),this.resolve=l(m),this.reject=l(E)};s.exports.f=function(b){return new c(b)}},function(s,f,i){f.a=function(){return!1}},function(s,f,i){(function(l){i.d(f,"a",function(){return V});var c=i(1);function b(D){throw new Error("[mobx-utils] "+D)}function m(D,L){L===void 0&&(L="Illegal state"),D||b(L)}var E=function(D){return D&&D!==Object.prototype&&Object.getOwnPropertyNames(D).concat(E(Object.getPrototypeOf(D))||[])},w=function(D){return function(L){var C=E(L);return C.filter(function(F,$){return C.indexOf(F)===$})}(D).filter(function(L){return L!=="constructor"&&!~L.indexOf("__")})},P="pending",A="fulfilled",j="rejected";function M(D){switch(this.state){case P:return D.pending&&D.pending(this.value);case j:return D.rejected&&D.rejected(this.value);case A:return D.fulfilled?D.fulfilled(this.value):this.value}}function N(D,L){if(m(arguments.length<=2,"fromPromise expects up to two arguments"),m(typeof D=="function"||typeof D=="object"&&D&&typeof D.then=="function","Please pass a promise or function to fromPromise"),D.isPromiseBasedObservable===!0)return D;typeof D=="function"&&(D=new Promise(D));var C=D;D.then(Object(c.k)("observableFromPromise-resolve",function($){C.value=$,C.state=A}),Object(c.k)("observableFromPromise-reject",function($){C.value=$,C.state=j})),C.isPromiseBasedObservable=!0,C.case=M;var F=L&&L.state===A?L.value:void 0;return Object(c.q)(C,{value:F,state:P},{},{deep:!1}),C}(function(D){D.reject=Object(c.k)("fromPromise.reject",function(L){var C=D(Promise.reject(L));return C.state=j,C.value=L,C}),D.resolve=Object(c.k)("fromPromise.resolve",function(L){L===void 0&&(L=void 0);var C=D(Promise.resolve(L));return C.state=A,C.value=L,C})})(N||(N={}));var I=function(D,L,C,F){var $,le=arguments.length,ce=le<3?L:F===null?F=Object.getOwnPropertyDescriptor(L,C):F;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ce=Reflect.decorate(D,L,C,F);else for(var ye=D.length-1;ye>=0;ye--)($=D[ye])&&(ce=(le<3?$(ce):le>3?$(L,C,ce):$(L,C))||ce);return le>3&&ce&&Object.defineProperty(L,C,ce),ce};(function(){function D(L,C){var F=this;Object(c.G)(function(){F.current=C,F.subscription=L.subscribe(F)})}D.prototype.dispose=function(){this.subscription&&this.subscription.unsubscribe()},D.prototype.next=function(L){this.current=L},D.prototype.complete=function(){this.dispose()},D.prototype.error=function(L){this.current=L,this.dispose()},I([c.C.ref],D.prototype,"current",void 0),I([c.k.bound],D.prototype,"next",null),I([c.k.bound],D.prototype,"complete",null),I([c.k.bound],D.prototype,"error",null)})();var B=function(){return B=Object.assign||function(D){for(var L,C=1,F=arguments.length;C<F;C++)for(var $ in L=arguments[C])Object.prototype.hasOwnProperty.call(L,$)&&(D[$]=L[$]);return D},B.apply(this,arguments)},H=function(D,L,C,F){var $,le=arguments.length,ce=le<3?L:F===null?F=Object.getOwnPropertyDescriptor(L,C):F;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ce=Reflect.decorate(D,L,C,F);else for(var ye=D.length-1;ye>=0;ye--)($=D[ye])&&(ce=(le<3?$(ce):le>3?$(L,C,ce):$(L,C))||ce);return le>3&&ce&&Object.defineProperty(L,C,ce),ce},ee=["model","reset","submit","isDirty","isPropertyDirty","resetProperty"];(function(){function D(L){var C=this;this.model=L,this.localValues=c.C.map({}),this.localComputedValues=c.C.map({}),this.isPropertyDirty=function(F){return C.localValues.has(F)},m(Object(c.A)(L),"createViewModel expects an observable object"),w(L).forEach(function(F){if(F!==c.a&&F!=="__mobxDidRunLazyInitializers"){if(m(ee.indexOf(F)===-1,"The propertyname "+F+" is reserved and cannot be used with viewModels"),Object(c.w)(L,F)){var $=Object(c.h)(L,F).derivation;C.localComputedValues.set(F,Object(c.m)($.bind(C)))}var le=Object.getOwnPropertyDescriptor(L,F),ce=le?{enumerable:le.enumerable}:{};Object.defineProperty(C,F,B(B({},ce),{configurable:!0,get:function(){return Object(c.w)(L,F)?C.localComputedValues.get(F).get():C.isPropertyDirty(F)?C.localValues.get(F):C.model[F]},set:Object(c.k)(function(ye){ye!==C.model[F]?C.localValues.set(F,ye):C.localValues.delete(F)})}))}})}Object.defineProperty(D.prototype,"isDirty",{get:function(){return this.localValues.size>0},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"changedValues",{get:function(){return this.localValues.toJS()},enumerable:!1,configurable:!0}),D.prototype.submit=function(){var L=this;Object(c.B)(this.localValues).forEach(function(C){var F=L.localValues.get(C),$=L.model[C];Object(c.y)($)?$.replace(F):Object(c.z)($)?($.clear(),$.merge(F)):Object(c.v)(F)||(L.model[C]=F)}),this.localValues.clear()},D.prototype.reset=function(){this.localValues.clear()},D.prototype.resetProperty=function(L){this.localValues.delete(L)},H([c.m],D.prototype,"isDirty",null),H([c.m],D.prototype,"changedValues",null),H([c.k.bound],D.prototype,"submit",null),H([c.k.bound],D.prototype,"reset",null),H([c.k.bound],D.prototype,"resetProperty",null)})();function ie(D){if(!D)return"ROOT";for(var L=[];D.parent;)L.push(D.path),D=D.parent;return L.reverse().join("/")}function J(D){return Object(c.A)(D)||Object(c.y)(D)||Object(c.z)(D)}function V(D,L){var C=new WeakMap;function F(ce){var ye=C.get(ce.object);(function(xe,ge){switch(xe.type){case"add":$(xe.newValue,ge,xe.name);break;case"update":le(xe.oldValue),$(xe.newValue,ge,xe.name||""+xe.index);break;case"remove":case"delete":le(xe.oldValue);break;case"splice":xe.removed.map(le),xe.added.forEach(function(be,Se){return $(be,ge,""+(xe.index+Se))});for(var ue=xe.index+xe.addedCount;ue<xe.object.length;ue++)if(J(xe.object[ue])){var he=C.get(xe.object[ue]);he&&(he.path=""+ue)}}})(ce,ye),L(ce,ie(ye),D)}function $(ce,ye,xe){if(J(ce)){var ge=C.get(ce);if(ge){if(ge.parent!==ye||ge.path!==xe)throw new Error("The same observable object cannot appear twice in the same tree, trying to assign it to '"+ie(ye)+"/"+xe+"', but it already exists at '"+ie(ge.parent)+"/"+ge.path+"'")}else{var ue={parent:ye,path:xe,dispose:Object(c.D)(ce,F)};C.set(ce,ue),Object(c.p)(ce).forEach(function(he){var be=he[0];return $(he[1],ue,be)})}}}function le(ce){if(J(ce)){var ye=C.get(ce);if(!ye)return;C.delete(ce),ye.dispose(),Object(c.L)(ce).forEach(le)}}return $(D,void 0,""),function(){le(D)}}var Z,z=(Z=function(D,L){return Z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,F){C.__proto__=F}||function(C,F){for(var $ in F)F.hasOwnProperty($)&&(C[$]=F[$])},Z(D,L)},function(D,L){function C(){this.constructor=D}Z(D,L),D.prototype=L===null?Object.create(L):(C.prototype=L.prototype,new C)});(function(D){function L(C,F,$){var le=$===void 0?{}:$,ce=le.name,ye=ce===void 0?"ogm"+(1e3*Math.random()|0):ce,xe=le.keyToName,ge=xe===void 0?function(be){return""+be}:xe,ue=D.call(this)||this;ue._keyToName=ge,ue._groupBy=F,ue._ogmInfoKey=Symbol("ogmInfo"+ye),ue._base=C;for(var he=0;he<C.length;he++)ue._addItem(C[he]);return ue._disposeBaseObserver=Object(c.D)(ue._base,function(be){if(be.type==="splice")Object(c.J)(function(){for(var Se=0,Ie=be.removed;Se<Ie.length;Se++){var Ke=Ie[Se];ue._removeItem(Ke)}for(var Pe=0,Ce=be.added;Pe<Ce.length;Pe++){var Ze=Ce[Pe];ue._addItem(Ze)}});else{if(be.type!=="update")throw new Error("illegal state");Object(c.J)(function(){ue._removeItem(be.oldValue),ue._addItem(be.newValue)})}}),ue}z(L,D),L.prototype.clear=function(){throw new Error("not supported")},L.prototype.delete=function(C){throw new Error("not supported")},L.prototype.set=function(C,F){throw new Error("not supported")},L.prototype.dispose=function(){this._disposeBaseObserver();for(var C=0;C<this._base.length;C++){var F=this._base[C];F[this._ogmInfoKey].reaction(),delete F[this._ogmInfoKey]}},L.prototype._getGroupArr=function(C){var F=D.prototype.get.call(this,C);return F===void 0&&(F=Object(c.C)([],{name:"GroupArray["+this._keyToName(C)+"]",deep:!1}),D.prototype.set.call(this,C,F)),F},L.prototype._removeFromGroupArr=function(C,F){var $=D.prototype.get.call(this,C);$.length===1?D.prototype.delete.call(this,C):(F===$.length-1||($[F]=$[$.length-1],$[F][this._ogmInfoKey].groupArrIndex=F),$.length--)},L.prototype._addItem=function(C){var F=this,$=this._groupBy(C),le=this._getGroupArr($),ce={groupByValue:$,groupArrIndex:le.length,reaction:Object(c.F)(function(){return F._groupBy(C)},function(ye,xe){var ge=C[F._ogmInfoKey];F._removeFromGroupArr(ge.groupByValue,ge.groupArrIndex);var ue=F._getGroupArr(ye),he=ue.length;ue.push(C),ge.groupByValue=ye,ge.groupArrIndex=he})};Object.defineProperty(C,this._ogmInfoKey,{configurable:!0,enumerable:!1,value:ce}),le.push(C)},L.prototype._removeItem=function(C){var F=C[this._ogmInfoKey];this._removeFromGroupArr(F.groupByValue,F.groupArrIndex),F.reaction(),delete C[this._ogmInfoKey]}})(c.b),function(){function D(L,C){this.base=L,this.args=C,this.closestIdx=0,this.isDisposed=!1;for(var F=this.closest=this.root=L,$=0;$<this.args.length-1&&(F=F.get(C[$]));$++)this.closest=F;this.closestIdx=$}return D.prototype.exists=function(){this.assertNotDisposed();var L=this.args.length;return this.closestIdx>=L-1&&this.closest.has(this.args[L-1])},D.prototype.get=function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");return this.closest.get(this.args[this.args.length-1])},D.prototype.set=function(L){this.assertNotDisposed();for(var C=this.args.length,F=this.closest,$=this.closestIdx;$<C-1;$++){var le=new Map;F.set(this.args[$],le),F=le}this.closestIdx=C-1,this.closest=F,F.set(this.args[C-1],L)},D.prototype.delete=function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");var L=this.args.length;this.closest.delete(this.args[L-1]);for(var C=this.root,F=[C],$=0;$<L-1;$++)C=C.get(this.args[$]),F.push(C);for($=F.length-1;$>0;$--)F[$].size===0&&F[$-1].delete(this.args[$-1]);this.isDisposed=!0},D.prototype.assertNotDisposed=function(){if(this.isDisposed)throw new Error("Concurrent modification exception")},D}(),Promise.resolve(),typeof queueMicrotask!="undefined"||l!==void 0&&l.nextTick}).call(this,i(155))},function(s,f,i){var l;(function(c,b,m){if(c){for(var E,w={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},P={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},A={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},j={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},M=1;M<20;++M)w[111+M]="f"+M;for(M=0;M<=9;++M)w[M+96]=M.toString();J.prototype.bind=function(V,Z,z){var D=this;return V=V instanceof Array?V:[V],D._bindMultiple.call(D,V,Z,z),D},J.prototype.unbind=function(V,Z){return this.bind.call(this,V,function(){},Z)},J.prototype.trigger=function(V,Z){var z=this;return z._directMap[V+":"+Z]&&z._directMap[V+":"+Z]({},V),z},J.prototype.reset=function(){var V=this;return V._callbacks={},V._directMap={},V},J.prototype.stopCallback=function(V,Z){if((" "+Z.className+" ").indexOf(" mousetrap ")>-1||ie(Z,this.target))return!1;if("composedPath"in V&&typeof V.composedPath=="function"){var z=V.composedPath()[0];z!==V.target&&(Z=z)}return Z.tagName=="INPUT"||Z.tagName=="SELECT"||Z.tagName=="TEXTAREA"||Z.isContentEditable},J.prototype.handleKey=function(){var V=this;return V._handleKey.apply(V,arguments)},J.addKeycodes=function(V){for(var Z in V)V.hasOwnProperty(Z)&&(w[Z]=V[Z]);E=null},J.init=function(){var V=J(b);for(var Z in V)Z.charAt(0)!=="_"&&(J[Z]=function(z){return function(){return V[z].apply(V,arguments)}}(Z))},J.init(),c.Mousetrap=J,s.exports&&(s.exports=J),(l=function(){return J}.call(f,i,f,s))===void 0||(s.exports=l)}function N(V,Z,z){V.addEventListener?V.addEventListener(Z,z,!1):V.attachEvent("on"+Z,z)}function I(V){if(V.type=="keypress"){var Z=String.fromCharCode(V.which);return V.shiftKey||(Z=Z.toLowerCase()),Z}return w[V.which]?w[V.which]:P[V.which]?P[V.which]:String.fromCharCode(V.which).toLowerCase()}function B(V){return V=="shift"||V=="ctrl"||V=="alt"||V=="meta"}function H(V,Z,z){return z||(z=function(){if(!E)for(var D in E={},w)D>95&&D<112||w.hasOwnProperty(D)&&(E[w[D]]=D);return E}()[V]?"keydown":"keypress"),z=="keypress"&&Z.length&&(z="keydown"),z}function ee(V,Z){var z,D,L,C=[];for(z=function(F){return F==="+"?["+"]:(F=F.replace(/\+{2}/g,"+plus")).split("+")}(V),L=0;L<z.length;++L)D=z[L],j[D]&&(D=j[D]),Z&&Z!="keypress"&&A[D]&&(D=A[D],C.push("shift")),B(D)&&C.push(D);return{key:D,modifiers:C,action:Z=H(D,C,Z)}}function ie(V,Z){return V!==null&&V!==b&&(V===Z||ie(V.parentNode,Z))}function J(V){var Z=this;if(V=V||b,!(Z instanceof J))return new J(V);Z.target=V,Z._callbacks={},Z._directMap={};var z,D={},L=!1,C=!1,F=!1;function $(ue){ue=ue||{};var he,be=!1;for(he in D)ue[he]?be=!0:D[he]=0;be||(F=!1)}function le(ue,he,be,Se,Ie,Ke){var Pe,Ce,Ze,q,K=[],ae=be.type;if(!Z._callbacks[ue])return[];for(ae=="keyup"&&B(ue)&&(he=[ue]),Pe=0;Pe<Z._callbacks[ue].length;++Pe)if(Ce=Z._callbacks[ue][Pe],(Se||!Ce.seq||D[Ce.seq]==Ce.level)&&ae==Ce.action&&(ae=="keypress"&&!be.metaKey&&!be.ctrlKey||(Ze=he,q=Ce.modifiers,Ze.sort().join(",")===q.sort().join(",")))){var _e=!Se&&Ce.combo==Ie,Ae=Se&&Ce.seq==Se&&Ce.level==Ke;(_e||Ae)&&Z._callbacks[ue].splice(Pe,1),K.push(Ce)}return K}function ce(ue,he,be,Se){Z.stopCallback(he,he.target||he.srcElement,be,Se)||ue(he,be)===!1&&(function(Ie){Ie.preventDefault?Ie.preventDefault():Ie.returnValue=!1}(he),function(Ie){Ie.stopPropagation?Ie.stopPropagation():Ie.cancelBubble=!0}(he))}function ye(ue){typeof ue.which!="number"&&(ue.which=ue.keyCode);var he=I(ue);he&&(ue.type!="keyup"||L!==he?Z.handleKey(he,function(be){var Se=[];return be.shiftKey&&Se.push("shift"),be.altKey&&Se.push("alt"),be.ctrlKey&&Se.push("ctrl"),be.metaKey&&Se.push("meta"),Se}(ue),ue):L=!1)}function xe(ue,he,be,Se){function Ie(Ze){return function(){F=Ze,++D[ue],clearTimeout(z),z=setTimeout($,1e3)}}function Ke(Ze){ce(be,Ze,ue),Se!=="keyup"&&(L=I(Ze)),setTimeout($,10)}D[ue]=0;for(var Pe=0;Pe<he.length;++Pe){var Ce=Pe+1===he.length?Ke:Ie(Se||ee(he[Pe+1]).action);ge(he[Pe],Ce,Se,ue,Pe)}}function ge(ue,he,be,Se,Ie){Z._directMap[ue+":"+be]=he;var Ke,Pe=(ue=ue.replace(/\s+/g," ")).split(" ");Pe.length>1?xe(ue,Pe,he,be):(Ke=ee(ue,be),Z._callbacks[Ke.key]=Z._callbacks[Ke.key]||[],le(Ke.key,Ke.modifiers,{type:Ke.action},Se,ue,Ie),Z._callbacks[Ke.key][Se?"unshift":"push"]({callback:he,modifiers:Ke.modifiers,action:Ke.action,seq:Se,level:Ie,combo:ue}))}Z._handleKey=function(ue,he,be){var Se,Ie=le(ue,he,be),Ke={},Pe=0,Ce=!1;for(Se=0;Se<Ie.length;++Se)Ie[Se].seq&&(Pe=Math.max(Pe,Ie[Se].level));for(Se=0;Se<Ie.length;++Se)if(Ie[Se].seq){if(Ie[Se].level!=Pe)continue;Ce=!0,Ke[Ie[Se].seq]=1,ce(Ie[Se].callback,be,Ie[Se].combo,Ie[Se].seq)}else Ce||ce(Ie[Se].callback,be,Ie[Se].combo);var Ze=be.type=="keypress"&&C;be.type!=F||B(ue)||Ze||$(Ke),C=Ce&&be.type=="keydown"},Z._bindMultiple=function(ue,he,be){for(var Se=0;Se<ue.length;++Se)ge(ue[Se],he,be)},N(V,"keypress",ye),N(V,"keydown",ye),N(V,"keyup",ye)}})(typeof window!="undefined"?window:null,typeof window!="undefined"?document:null)},function(s,f,i){var l=i(36),c=i(37),b=i(32),m=i(40),E=i(66);s.exports=l?Object.defineProperties:function(w,P){b(w);for(var A,j=m(P),M=E(P),N=M.length,I=0;N>I;)c.f(w,A=M[I++],j[A]);return w}},function(s,f,i){var l=i(7),c=i(35),b=i(28),m=i(33),E=l.TypeError;s.exports=function(w,P){var A,j;if(P==="string"&&b(A=w.toString)&&!m(j=c(A,w))||b(A=w.valueOf)&&!m(j=c(A,w))||P!=="string"&&b(A=w.toString)&&!m(j=c(A,w)))return j;throw E("Can't convert object to primitive value")}},function(s,f,i){var l=i(7),c=i(28),b=i(92),m=l.WeakMap;s.exports=c(m)&&/native code/.test(b(m))},function(s,f,i){var l=i(136).IteratorPrototype,c=i(54),b=i(71),m=i(73),E=i(70),w=function(){return this};s.exports=function(P,A,j,M){var N=A+" Iterator";return P.prototype=c(l,{next:b(+!M,j)}),m(P,N,!1,!0),E[N]=w,P}},function(s,f,i){var l=i(7),c=i(28),b=l.String,m=l.TypeError;s.exports=function(E){if(typeof E=="object"||c(E))return E;throw m("Can't set "+b(E)+" as a prototype")}},function(s,f,i){var l=i(17),c=i(7),b=i(15),m=i(95),E=i(44),w=i(138),P=i(114),A=i(117),j=i(28),M=i(33),N=i(19),I=i(118),B=i(73),H=i(143);s.exports=function(ee,ie,J){var V=ee.indexOf("Map")!==-1,Z=ee.indexOf("Weak")!==-1,z=V?"set":"add",D=c[ee],L=D&&D.prototype,C=D,F={},$=function(ue){var he=b(L[ue]);E(L,ue,ue=="add"?function(be){return he(this,be===0?0:be),this}:ue=="delete"?function(be){return!(Z&&!M(be))&&he(this,be===0?0:be)}:ue=="get"?function(be){return Z&&!M(be)?void 0:he(this,be===0?0:be)}:ue=="has"?function(be){return!(Z&&!M(be))&&he(this,be===0?0:be)}:function(be,Se){return he(this,be===0?0:be,Se),this})};if(m(ee,!j(D)||!(Z||L.forEach&&!N(function(){new D().entries().next()}))))C=J.getConstructor(ie,ee,V,z),w.enable();else if(m(ee,!0)){var le=new C,ce=le[z](Z?{}:-0,1)!=le,ye=N(function(){le.has(1)}),xe=I(function(ue){new D(ue)}),ge=!Z&&N(function(){for(var ue=new D,he=5;he--;)ue[z](he,he);return!ue.has(-0)});xe||((C=ie(function(ue,he){A(ue,L);var be=H(new D,ue,C);return he!=null&&P(he,be[z],{that:be,AS_ENTRIES:V}),be})).prototype=L,L.constructor=C),(ye||ge)&&($("delete"),$("has"),V&&$("get")),(ge||ce)&&$(z),Z&&L.clear&&delete L.clear}return F[ee]=C,l({global:!0,forced:C!=D},F),B(C,ee),Z||J.setStrong(C,ee,V),C}},function(s,f,i){var l=i(19),c=i(33),b=i(50),m=i(176),E=Object.isExtensible,w=l(function(){});s.exports=w||m?function(P){return!!c(P)&&(!m||b(P)!="ArrayBuffer")&&(!E||E(P))}:E},function(s,f,i){var l=i(19);s.exports=l(function(){if(typeof ArrayBuffer=="function"){var c=new ArrayBuffer(8);Object.isExtensible(c)&&Object.defineProperty(c,"a",{value:8})}})},function(s,f,i){var l=i(19);s.exports=!l(function(){return Object.isExtensible(Object.preventExtensions({}))})},function(s,f,i){var l=i(37).f,c=i(54),b=i(144),m=i(62),E=i(117),w=i(114),P=i(111),A=i(145),j=i(36),M=i(138).fastKey,N=i(56),I=N.set,B=N.getterFor;s.exports={getConstructor:function(H,ee,ie,J){var V=H(function(C,F){E(C,Z),I(C,{type:ee,index:c(null),first:void 0,last:void 0,size:0}),j||(C.size=0),F!=null&&w(F,C[J],{that:C,AS_ENTRIES:ie})}),Z=V.prototype,z=B(ee),D=function(C,F,$){var le,ce,ye=z(C),xe=L(C,F);return xe?xe.value=$:(ye.last=xe={index:ce=M(F,!0),key:F,value:$,previous:le=ye.last,next:void 0,removed:!1},ye.first||(ye.first=xe),le&&(le.next=xe),j?ye.size++:C.size++,ce!=="F"&&(ye.index[ce]=xe)),C},L=function(C,F){var $,le=z(C),ce=M(F);if(ce!=="F")return le.index[ce];for($=le.first;$;$=$.next)if($.key==F)return $};return b(Z,{clear:function(){for(var C=z(this),F=C.index,$=C.first;$;)$.removed=!0,$.previous&&($.previous=$.previous.next=void 0),delete F[$.index],$=$.next;C.first=C.last=void 0,j?C.size=0:this.size=0},delete:function(C){var F=this,$=z(F),le=L(F,C);if(le){var ce=le.next,ye=le.previous;delete $.index[le.index],le.removed=!0,ye&&(ye.next=ce),ce&&(ce.previous=ye),$.first==le&&($.first=ce),$.last==le&&($.last=ye),j?$.size--:F.size--}return!!le},forEach:function(C){for(var F,$=z(this),le=m(C,arguments.length>1?arguments[1]:void 0);F=F?F.next:$.first;)for(le(F.value,F.key,this);F&&F.removed;)F=F.previous},has:function(C){return!!L(this,C)}}),b(Z,ie?{get:function(C){var F=L(this,C);return F&&F.value},set:function(C,F){return D(this,C===0?0:C,F)}}:{add:function(C){return D(this,C=C===0?0:C,C)}}),j&&l(Z,"size",{get:function(){return z(this).size}}),V},setStrong:function(H,ee,ie){var J=ee+" Iterator",V=B(ee),Z=B(J);P(H,ee,function(z,D){I(this,{type:J,target:z,state:V(z),kind:D,last:void 0})},function(){for(var z=Z(this),D=z.kind,L=z.last;L&&L.removed;)L=L.previous;return z.target&&(z.last=L=L?L.next:z.state.first)?D=="keys"?{value:L.key,done:!1}:D=="values"?{value:L.value,done:!1}:{value:[L.key,L.value],done:!1}:(z.target=void 0,{value:void 0,done:!0})},ie?"entries":"values",!ie,!0),A(ee)}}},function(s,f,i){var l=i(116),c=i(98);s.exports=l?{}.toString:function(){return"[object "+c(this)+"]"}},function(s,f,i){var l=i(74).forEach,c=i(120)("forEach");s.exports=c?[].forEach:function(b){return l(this,b,arguments.length>1?arguments[1]:void 0)}},function(s,f,i){var l=i(7),c=i(99),b=i(100),m=i(33),E=i(27)("species"),w=l.Array;s.exports=function(P){var A;return c(P)&&(A=P.constructor,(b(A)&&(A===w||c(A.prototype))||m(A)&&(A=A[E])===null)&&(A=void 0)),A===void 0?w:A}},function(s,f,i){var l=i(7);s.exports=l},function(s,f,i){var l=i(7),c=i(62),b=i(35),m=i(38),E=i(184),w=i(140),P=i(100),A=i(43),j=i(61),M=i(141),N=i(115),I=l.Array;s.exports=function(B){var H=m(B),ee=P(this),ie=arguments.length,J=ie>1?arguments[1]:void 0,V=J!==void 0;V&&(J=c(J,ie>2?arguments[2]:void 0));var Z,z,D,L,C,F,$=N(H),le=0;if(!$||this==I&&w($))for(Z=A(H),z=ee?new this(Z):I(Z);Z>le;le++)F=V?J(H[le],le):H[le],j(z,le,F);else for(C=(L=M(H,$)).next,z=ee?new this:[];!(D=b(C,L)).done;le++)F=V?E(L,J,[D.value,le],!0):D.value,j(z,le,F);return z.length=le,z}},function(s,f,i){var l=i(32),c=i(142);s.exports=function(b,m,E,w){try{return w?m(l(E)[0],E[1]):m(E)}catch(P){c(b,"throw",P)}}},function(s,f,i){var l=i(32);s.exports=function(){var c=l(this),b="";return c.global&&(b+="g"),c.ignoreCase&&(b+="i"),c.multiline&&(b+="m"),c.dotAll&&(b+="s"),c.unicode&&(b+="u"),c.sticky&&(b+="y"),b}},function(s,f,i){var l=i(19),c=i(7).RegExp;s.exports=l(function(){var b=c(".","s");return!(b.dotAll&&b.exec(`
`)&&b.flags==="s")})},function(s,f,i){var l=i(19),c=i(7).RegExp;s.exports=l(function(){var b=c("(?<a>b)","g");return b.exec("b").groups.a!=="b"||"b".replace(b,"$<a>c")!=="bc"})},function(s,f,i){var l=i(17),c=i(15),b=i(55),m=i(38),E=i(43),w=i(41),P=i(19),A=i(189),j=i(120),M=i(190),N=i(191),I=i(65),B=i(192),H=[],ee=c(H.sort),ie=c(H.push),J=P(function(){H.sort(void 0)}),V=P(function(){H.sort(null)}),Z=j("sort"),z=!P(function(){if(I)return I<70;if(!(M&&M>3)){if(N)return!0;if(B)return B<603;var D,L,C,F,$="";for(D=65;D<76;D++){switch(L=String.fromCharCode(D),D){case 66:case 69:case 70:case 72:C=3;break;case 68:case 71:C=4;break;default:C=2}for(F=0;F<47;F++)H.push({k:L+F,v:C})}for(H.sort(function(le,ce){return ce.v-le.v}),F=0;F<H.length;F++)L=H[F].k.charAt(0),$.charAt($.length-1)!==L&&($+=L);return $!=="DGBEFHACIJK"}});l({target:"Array",proto:!0,forced:J||!V||!Z||!z},{sort:function(D){D!==void 0&&b(D);var L=m(this);if(z)return D===void 0?ee(L):ee(L,D);var C,F,$=[],le=E(L);for(F=0;F<le;F++)F in L&&ie($,L[F]);for(A($,function(ce){return function(ye,xe){return xe===void 0?-1:ye===void 0?1:ce!==void 0?+ce(ye,xe)||0:w(ye)>w(xe)?1:-1}}(D)),C=$.length,F=0;F<C;)L[F]=$[F++];for(;F<le;)delete L[F++];return L}})},function(s,f,i){var l=i(113),c=Math.floor,b=function(w,P){var A=w.length,j=c(A/2);return A<8?m(w,P):E(w,b(l(w,0,j),P),b(l(w,j),P),P)},m=function(w,P){for(var A,j,M=w.length,N=1;N<M;){for(j=N,A=w[N];j&&P(w[j-1],A)>0;)w[j]=w[--j];j!==N++&&(w[j]=A)}return w},E=function(w,P,A,j){for(var M=P.length,N=A.length,I=0,B=0;I<M||B<N;)w[I+B]=I<M&&B<N?j(P[I],A[B])<=0?P[I++]:A[B++]:I<M?P[I++]:A[B++];return w};s.exports=b},function(s,f,i){var l=i(53).match(/firefox\/(\d+)/i);s.exports=!!l&&+l[1]},function(s,f,i){var l=i(53);s.exports=/MSIE|Trident/.test(l)},function(s,f,i){var l=i(53).match(/AppleWebKit\/(\d+)\./);s.exports=!!l&&+l[1]},function(s,f,i){var l=i(17),c=i(74).find,b=i(83),m="find",E=!0;m in[]&&Array(1).find(function(){E=!1}),l({target:"Array",proto:!0,forced:E},{find:function(w){return c(this,w,arguments.length>1?arguments[1]:void 0)}}),b(m)},function(s,f,i){var l=i(7),c=i(154),b=l.TypeError;s.exports=function(m){if(c(m))throw b("The method doesn't accept regular expressions");return m}},function(s,f,i){var l=i(27)("match");s.exports=function(c){var b=/./;try{"/./"[c](b)}catch(m){try{return b[l]=!1,"/./"[c](b)}catch(E){}}return!1}},function(s,f,i){var l=i(94).PROPER,c=i(19),b=i(160);s.exports=function(m){return c(function(){return!!b[m]()||"​᠎"[m]()!=="​᠎"||l&&b[m].name!==m})}},function(s,f,i){var l=i(15);s.exports=l(1 .valueOf)},function(s,f,i){var l=i(15),c=i(38),b=Math.floor,m=l("".charAt),E=l("".replace),w=l("".slice),P=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,A=/\$([$&'`]|\d{1,2})/g;s.exports=function(j,M,N,I,B,H){var ee=N+j.length,ie=I.length,J=A;return B!==void 0&&(B=c(B),J=P),E(H,J,function(V,Z){var z;switch(m(Z,0)){case"$":return"$";case"&":return j;case"`":return w(M,0,N);case"'":return w(M,ee);case"<":z=B[w(Z,1,-1)];break;default:var D=+Z;if(D===0)return V;if(D>ie){var L=b(D/10);return L===0?V:L<=ie?I[L-1]===void 0?m(Z,1):I[L-1]+m(Z,1):V}z=I[D-1]}return z===void 0?"":z})}},function(s,f,i){var l=i(36),c=i(15),b=i(35),m=i(19),E=i(66),w=i(112),P=i(93),A=i(38),j=i(81),M=Object.assign,N=Object.defineProperty,I=c([].concat);s.exports=!M||m(function(){if(l&&M({b:1},M(N({},"a",{enumerable:!0,get:function(){N(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var B={},H={},ee=Symbol(),ie="abcdefghijklmnopqrst";return B[ee]=7,ie.split("").forEach(function(J){H[J]=J}),M({},B)[ee]!=7||E(M({},H)).join("")!=ie})?function(B,H){for(var ee=A(B),ie=arguments.length,J=1,V=w.f,Z=P.f;ie>J;)for(var z,D=j(arguments[J++]),L=V?I(E(D),V(D)):E(D),C=L.length,F=0;C>F;)z=L[F++],l&&!b(Z,D,z)||(ee[z]=D[z]);return ee}:M},function(s,f,i){var l=i(7),c=i(15),b=i(55),m=i(33),E=i(34),w=i(101),P=l.Function,A=c([].concat),j=c([].join),M={},N=function(I,B,H){if(!E(M,B)){for(var ee=[],ie=0;ie<B;ie++)ee[ie]="a["+ie+"]";M[B]=P("C,a","return new C("+j(ee,",")+")")}return M[B](I,H)};s.exports=P.bind||function(I){var B=b(this),H=B.prototype,ee=w(arguments,1),ie=function(){var J=A(ee,w(arguments));return this instanceof ie?N(B,J.length,J):B.apply(I,J)};return m(H)&&(ie.prototype=H),ie}},function(s,f,i){var l=i(34);s.exports=function(c){return c!==void 0&&(l(c,"value")||l(c,"writable"))}},function(s,f,i){var l=i(15),c=i(45),b=i(41),m=/"/g,E=l("".replace);s.exports=function(w,P,A,j){var M=b(c(w)),N="<"+P;return A!==""&&(N+=" "+A+'="'+E(b(j),m,"&quot;")+'"'),N+">"+M+"</"+P+">"}},function(s,f,i){var l=i(19);s.exports=function(c){return l(function(){var b=""[c]('"');return b!==b.toLowerCase()||b.split('"').length>3})}},function(s,f,i){var l,c,b,m,E=i(17),w=i(64),P=i(7),A=i(46),j=i(35),M=i(205),N=i(44),I=i(144),B=i(97),H=i(73),ee=i(145),ie=i(55),J=i(28),V=i(33),Z=i(117),z=i(92),D=i(114),L=i(118),C=i(156),F=i(163).set,$=i(206),le=i(209),ce=i(210),ye=i(165),xe=i(211),ge=i(56),ue=i(95),he=i(27),be=i(212),Se=i(126),Ie=i(65),Ke=he("species"),Pe="Promise",Ce=ge.getterFor(Pe),Ze=ge.set,q=ge.getterFor(Pe),K=M&&M.prototype,ae=M,_e=K,Ae=P.TypeError,we=P.document,qe=P.process,nt=ye.f,$e=nt,Ye=!!(we&&we.createEvent&&P.dispatchEvent),ve=J(P.PromiseRejectionEvent),Ue="unhandledrejection",te=!1,Le=ue(Pe,function(){var Y=z(ae),se=Y!==String(ae);if(!se&&Ie===66||w&&!_e.finally)return!0;if(Ie>=51&&/native code/.test(Y))return!1;var Me=new ae(function(Xe){Xe(1)}),De=function(Xe){Xe(function(){},function(){})};return(Me.constructor={})[Ke]=De,!(te=Me.then(function(){})instanceof De)||!se&&be&&!ve}),ut=Le||!L(function(Y){ae.all(Y).catch(function(){})}),vt=function(Y){var se;return!(!V(Y)||!J(se=Y.then))&&se},it=function(Y,se){if(!Y.notified){Y.notified=!0;var Me=Y.reactions;$(function(){for(var De=Y.value,Xe=Y.state==1,ft=0;Me.length>ft;){var Ht,Zt,Rt,It=Me[ft++],ze=Xe?It.ok:It.fail,Ve=It.resolve,et=It.reject,rt=It.domain;try{ze?(Xe||(Y.rejection===2&&at(Y),Y.rejection=1),ze===!0?Ht=De:(rt&&rt.enter(),Ht=ze(De),rt&&(rt.exit(),Rt=!0)),Ht===It.promise?et(Ae("Promise-chain cycle")):(Zt=vt(Ht))?j(Zt,Ht,Ve,et):Ve(Ht)):et(De)}catch(wt){rt&&!Rt&&rt.exit(),et(wt)}}Y.reactions=[],Y.notified=!1,se&&!Y.rejection&&St(Y)})}},yt=function(Y,se,Me){var De,Xe;Ye?((De=we.createEvent("Event")).promise=se,De.reason=Me,De.initEvent(Y,!1,!0),P.dispatchEvent(De)):De={promise:se,reason:Me},!ve&&(Xe=P["on"+Y])?Xe(De):Y===Ue&&ce("Unhandled promise rejection",Me)},St=function(Y){j(F,P,function(){var se,Me=Y.facade,De=Y.value;if(Pt(Y)&&(se=xe(function(){Se?qe.emit("unhandledRejection",De,Me):yt(Ue,Me,De)}),Y.rejection=Se||Pt(Y)?2:1,se.error))throw se.value})},Pt=function(Y){return Y.rejection!==1&&!Y.parent},at=function(Y){j(F,P,function(){var se=Y.facade;Se?qe.emit("rejectionHandled",se):yt("rejectionhandled",se,Y.value)})},Ct=function(Y,se,Me){return function(De){Y(se,De,Me)}},G=function(Y,se,Me){Y.done||(Y.done=!0,Me&&(Y=Me),Y.value=se,Y.state=2,it(Y,!0))},ne=function(Y,se,Me){if(!Y.done){Y.done=!0,Me&&(Y=Me);try{if(Y.facade===se)throw Ae("Promise can't be resolved itself");var De=vt(se);De?$(function(){var Xe={done:!1};try{j(De,se,Ct(ne,Xe,Y),Ct(G,Xe,Y))}catch(ft){G(Xe,ft,Y)}}):(Y.value=se,Y.state=1,it(Y,!1))}catch(Xe){G({done:!1},Xe,Y)}}};if(Le&&(_e=(ae=function(Y){Z(this,_e),ie(Y),j(l,this);var se=Ce(this);try{Y(Ct(ne,se),Ct(G,se))}catch(Me){G(se,Me)}}).prototype,(l=function(Y){Ze(this,{type:Pe,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=I(_e,{then:function(Y,se){var Me=q(this),De=Me.reactions,Xe=nt(C(this,ae));return Xe.ok=!J(Y)||Y,Xe.fail=J(se)&&se,Xe.domain=Se?qe.domain:void 0,Me.parent=!0,De[De.length]=Xe,Me.state!=0&&it(Me,!1),Xe.promise},catch:function(Y){return this.then(void 0,Y)}}),c=function(){var Y=new l,se=Ce(Y);this.promise=Y,this.resolve=Ct(ne,se),this.reject=Ct(G,se)},ye.f=nt=function(Y){return Y===ae||Y===b?new c(Y):$e(Y)},!w&&J(M)&&K!==Object.prototype)){m=K.then,te||(N(K,"then",function(Y,se){var Me=this;return new ae(function(De,Xe){j(m,Me,De,Xe)}).then(Y,se)},{unsafe:!0}),N(K,"catch",_e.catch,{unsafe:!0}));try{delete K.constructor}catch(Y){}B&&B(K,_e)}E({global:!0,wrap:!0,forced:Le},{Promise:ae}),H(ae,Pe,!1,!0),ee(Pe),b=A(Pe),E({target:Pe,stat:!0,forced:Le},{reject:function(Y){var se=nt(this);return j(se.reject,void 0,Y),se.promise}}),E({target:Pe,stat:!0,forced:w||Le},{resolve:function(Y){return le(w&&this===b?ae:this,Y)}}),E({target:Pe,stat:!0,forced:ut},{all:function(Y){var se=this,Me=nt(se),De=Me.resolve,Xe=Me.reject,ft=xe(function(){var Ht=ie(se.resolve),Zt=[],Rt=0,It=1;D(Y,function(ze){var Ve=Rt++,et=!1;It++,j(Ht,se,ze).then(function(rt){et||(et=!0,Zt[Ve]=rt,--It||De(Zt))},Xe)}),--It||De(Zt)});return ft.error&&Xe(ft.value),Me.promise},race:function(Y){var se=this,Me=nt(se),De=Me.reject,Xe=xe(function(){var ft=ie(se.resolve);D(Y,function(Ht){j(ft,se,Ht).then(Me.resolve,De)})});return Xe.error&&De(Xe.value),Me.promise}})},function(s,f,i){var l=i(7);s.exports=l.Promise},function(s,f,i){var l,c,b,m,E,w,P,A,j=i(7),M=i(62),N=i(51).f,I=i(163).set,B=i(164),H=i(207),ee=i(208),ie=i(126),J=j.MutationObserver||j.WebKitMutationObserver,V=j.document,Z=j.process,z=j.Promise,D=N(j,"queueMicrotask"),L=D&&D.value;L||(l=function(){var C,F;for(ie&&(C=Z.domain)&&C.exit();c;){F=c.fn,c=c.next;try{F()}catch($){throw c?m():b=void 0,$}}b=void 0,C&&C.enter()},B||ie||ee||!J||!V?!H&&z&&z.resolve?((P=z.resolve(void 0)).constructor=z,A=M(P.then,P),m=function(){A(l)}):ie?m=function(){Z.nextTick(l)}:(I=M(I,j),m=function(){I(l)}):(E=!0,w=V.createTextNode(""),new J(l).observe(w,{characterData:!0}),m=function(){w.data=E=!E})),s.exports=L||function(C){var F={fn:C,next:void 0};b&&(b.next=F),c||(c=F,m()),b=F}},function(s,f,i){var l=i(53),c=i(7);s.exports=/ipad|iphone|ipod/i.test(l)&&c.Pebble!==void 0},function(s,f,i){var l=i(53);s.exports=/web0s(?!.*chrome)/i.test(l)},function(s,f,i){var l=i(32),c=i(33),b=i(165);s.exports=function(m,E){if(l(m),c(E)&&E.constructor===m)return E;var w=b.f(m);return(0,w.resolve)(E),w.promise}},function(s,f,i){var l=i(7);s.exports=function(c,b){var m=l.console;m&&m.error&&(arguments.length==1?m.error(c):m.error(c,b))}},function(s,f){s.exports=function(i){try{return{error:!1,value:i()}}catch(l){return{error:!0,value:l}}}},function(s,f){s.exports=typeof window=="object"},function(s,f,i){var l=i(36),c=i(15),b=i(66),m=i(40),E=c(i(93).f),w=c([].push),P=function(A){return function(j){for(var M,N=m(j),I=b(N),B=I.length,H=0,ee=[];B>H;)M=I[H++],l&&!E(N,M)||w(ee,A?[M,N[M]]:N[M]);return ee}};s.exports={entries:P(!0),values:P(!1)}},function(s,f,i){var l=i(38),c=i(67),b=i(43);s.exports=function(m){for(var E=l(this),w=b(E),P=arguments.length,A=c(P>1?arguments[1]:void 0,w),j=P>2?arguments[2]:void 0,M=j===void 0?w:c(j,w);M>A;)E[A++]=m;return E}},function(s,f,i){i.r(f),i.d(f,"observer",function(){return Gn}),i.d(f,"LogicFlow",function(){return of}),i.d(f,"h",function(){return te.g}),i.d(f,"LogicFlowUtil",function(){return l}),i.d(f,"BaseNode",function(){return mr}),i.d(f,"RectNode",function(){return Jc}),i.d(f,"CircleNode",function(){return tl}),i.d(f,"PolygonNode",function(){return al}),i.d(f,"DiamondNode",function(){return ll}),i.d(f,"EllipseNode",function(){return yl}),i.d(f,"TextNode",function(){return bl}),i.d(f,"HtmlNode",function(){return wl}),i.d(f,"BaseEdge",function(){return bi}),i.d(f,"LineEdge",function(){return Il}),i.d(f,"PolylineEdge",function(){return Ul}),i.d(f,"BezierEdge",function(){return Yl}),i.d(f,"Arrow",function(){return k_}),i.d(f,"BaseEdgeModel",function(){return bs}),i.d(f,"BezierEdgeModel",function(){return ac}),i.d(f,"LineEdgeModel",function(){return xs}),i.d(f,"PolylineEdgeModel",function(){return Ps}),i.d(f,"BaseNodeModel",function(){return br}),i.d(f,"CircleNodeModel",function(){return pc}),i.d(f,"DiamondNodeModel",function(){return vc}),i.d(f,"EllipseNodeModel",function(){return _c}),i.d(f,"PolygonNodeModel",function(){return Pc}),i.d(f,"RectNodeModel",function(){return Mc}),i.d(f,"TextNodeModel",function(){return Rc}),i.d(f,"HtmlNodeModel",function(){return zc}),i.d(f,"EditConfigModel",function(){return Kf}),i.d(f,"GraphModel",function(){return Bd}),i.d(f,"SnaplineModel",function(){return my}),i.d(f,"Keyboard",function(){return ig}),i.d(f,"get",function(){return ch}),i.d(f,"defaults",function(){return fh}),i.d(f,"ElementState",function(){return _t}),i.d(f,"ModelType",function(){return ht}),i.d(f,"ElementType",function(){return Gt}),i.d(f,"EventType",function(){return tt}),i.d(f,"formateAnchorConnectValidateData",function(){return ri});var l={};i.r(l),i.d(l,"createUuid",function(){return Dr}),i.d(l,"refreshGraphId",function(){return Nb}),i.d(l,"createDrag",function(){return sm}),i.d(l,"StepDrag",function(){return hr});var c=i(1),b=i(10);if(!b.j)throw new Error("mobx-react-lite requires React with Hooks support");if(!c.H)throw new Error("mobx-react-lite requires mobx at least version 4 to be available");var m=i(42),E=Object(m.b)("observerBatching");function w(e){e()}var P=!1;function A(){return P}function j(e){return Object(c.t)(e)}var M,N=1e4,I=new Set;function B(){M===void 0&&(M=setTimeout(H,1e4))}function H(){M=void 0;var e=Date.now();I.forEach(function(t){var n=t.current;n&&e>=n.cleanAt&&(n.reaction.dispose(),t.current=null,I.delete(t))}),I.size>0&&B()}var ee=!1,ie=[],J={};function V(e){return"observer"+e}function Z(e,t,n){t===void 0&&(t="observed"),n===void 0&&(n=J),A();var r,a=function(O){return function(){ee?ie.push(O):O()}}((n.useForceUpdate||m.d)()),o=b.d.useRef(null);if(!o.current){var u=new c.c(V(t),function(){p.mounted?a():(u.dispose(),o.current=null)}),p=function(O){return{cleanAt:Date.now()+N,reaction:O}}(u);o.current=p,r=o,I.add(r),B()}var d=o.current.reaction;return b.d.useDebugValue(d,j),b.d.useEffect(function(){var O;return O=o,I.delete(O),o.current?o.current.mounted=!0:(o.current={reaction:new c.c(V(t),function(){a()}),cleanAt:1/0},a()),function(){o.current.reaction.dispose(),o.current=null}},[]),function(O){ee=!0,ie=[];try{var _=O();ee=!1;var S=ie.length>0?ie:void 0;return b.d.useLayoutEffect(function(){S&&S.forEach(function(k){return k()})},[S]),_}finally{ee=!1}}(function(){var O,_;if(d.track(function(){try{O=e()}catch(S){_=S}}),_)throw _;return O})}var z=function(){return z=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},z.apply(this,arguments)};function D(e,t){var n,r,a,o=z({forwardRef:!1},t),u=e.displayName||e.name,p=function(d,O){return Z(function(){return e(d,O)},u)};return p.displayName=u,n=o.forwardRef?Object(b.f)(Object(b.e)(p)):Object(b.f)(p),r=e,a=n,Object.keys(r).forEach(function(d){L[d]||Object.defineProperty(a,d,Object.getOwnPropertyDescriptor(r,d))}),n.displayName=u,n}var L={$$typeof:!0,render:!0,compare:!0,type:!0};function C(e){var t=e.children,n=e.render,r=t||n;return typeof r!="function"?null:Z(r)}function F(e,t,n,r,a){var o=t==="children"?"render":"children",u=typeof e[t]=="function",p=typeof e[o]=="function";return u&&p?new Error("MobX Observer: Do not use children and render in the same time in`"+n):u||p?null:new Error("Invalid prop `"+a+"` of type `"+typeof e[t]+"` supplied to `"+n+"`, expected `function`.")}C.propTypes={children:F,render:F},C.displayName="Observer";var $;($=b.g)||($=w),Object(c.n)({reactionScheduler:$}),Object(m.a)()[E]=!0;var le=0,ce={};function ye(e){return ce[e]||(ce[e]=function(t){if(typeof Symbol=="function")return Symbol(t);var n="__$mobx-react "+t+" ("+le+")";return le++,n}(e)),ce[e]}function xe(e,t){if(ge(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var a=0;a<n.length;a++)if(!Object.hasOwnProperty.call(t,n[a])||!ge(e[n[a]],t[n[a]]))return!1;return!0}function ge(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function ue(e,t,n){Object.hasOwnProperty.call(e,t)?e[t]=n:Object.defineProperty(e,t,{enumerable:!1,configurable:!0,writable:!0,value:n})}var he=ye("patchMixins"),be=ye("patchedDefinition");function Se(e,t){for(var n=this,r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];t.locks++;try{var u;return e!=null&&(u=e.apply(this,a)),u}finally{t.locks--,t.locks===0&&t.methods.forEach(function(p){p.apply(n,a)})}}function Ie(e,t){return function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];Se.call.apply(Se,[this,e,t].concat(r))}}function Ke(e,t,n){var r=function(p,d){var O=p[he]=p[he]||{},_=O[d]=O[d]||{};return _.locks=_.locks||0,_.methods=_.methods||[],_}(e,t);r.methods.indexOf(n)<0&&r.methods.push(n);var a=Object.getOwnPropertyDescriptor(e,t);if(!a||!a[be]){var o=e[t],u=Pe(e,t,a?a.enumerable:void 0,r,o);Object.defineProperty(e,t,u)}}function Pe(e,t,n,r,a){var o,u=Ie(a,r);return(o={})[be]=!0,o.get=function(){return u},o.set=function(p){if(this===e)u=Ie(p,r);else{var d=Pe(this,t,n,r,p);Object.defineProperty(this,t,d)}},o.configurable=!0,o.enumerable=n,o}var Ce=c.a||"$mobx",Ze=ye("isMobXReactObserver"),q=ye("isUnmounted"),K=ye("skipRender"),ae=ye("isForcingUpdate");function _e(e){var t=e.prototype;if(e[Ze]?Ae(t):e[Ze]=!0,t.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(e.__proto__!==b.b)if(t.shouldComponentUpdate){if(t.shouldComponentUpdate!==qe)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}else t.shouldComponentUpdate=qe;nt(t,"props"),nt(t,"state");var n=t.render;return t.render=function(){return we.call(this,n)},Ke(t,"componentWillUnmount",function(){var r;(r=this.render[Ce])===null||r===void 0||r.dispose(),this[q]=!0,!this.render[Ce]&&Ae(this)}),e}function Ae(e){return e.displayName||e.name||e.constructor&&(e.constructor.displayName||e.constructor.name)||"<component>"}function we(e){var t=this;ue(this,K,!1),ue(this,ae,!1);var n=Ae(this),r=e.bind(this),a=!1,o=new c.c(n+".render()",function(){if(!a&&(a=!0,t[q]!==!0)){var p=!0;try{ue(t,ae,!0),t[K]||b.a.prototype.forceUpdate.call(t),p=!1}finally{ue(t,ae,!1),p&&o.dispose()}}});function u(){a=!1;var p=void 0,d=void 0;if(o.track(function(){try{d=Object(c.d)(!1,r)}catch(O){p=O}}),p)throw p;return d}return o.reactComponent=this,u[Ce]=o,this.render=u,u.call(this)}function qe(e,t){return this.state!==t||!xe(this.props,e)}function nt(e,t){var n=ye("reactProp_"+t+"_valueHolder"),r=ye("reactProp_"+t+"_atomHolder");function a(){return this[r]||ue(this,r,Object(c.o)("reactive "+t)),this[r]}Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){var o=!1;return c.f&&c.e&&(o=Object(c.f)(!0)),a.call(this).reportObserved(),c.f&&c.e&&Object(c.e)(o),this[n]},set:function(o){this[ae]||xe(this[n],o)?ue(this,n,o):(ue(this,n,o),ue(this,K,!0),a.call(this).reportChanged(),ue(this,K,!1))}})}var $e=typeof Symbol=="function"&&Symbol.for,Ye=$e?Symbol.for("react.forward_ref"):typeof b.e=="function"&&Object(b.e)(function(e){return null}).$$typeof,ve=$e?Symbol.for("react.memo"):typeof b.f=="function"&&Object(b.f)(function(e){return null}).$$typeof;function Ue(e){if(e.isMobxInjector,ve&&e.$$typeof===ve)throw new Error("Mobx observer: You are trying to use 'observer' on a function component wrapped in either another observer or 'React.memo'. The observer already applies 'React.memo' for you.");if(Ye&&e.$$typeof===Ye){var t=e.render;if(typeof t!="function")throw new Error("render property of ForwardRef was not a function");return Object(b.e)(function(){var n=arguments;return Object(b.c)(C,null,function(){return t.apply(void 0,n)})})}return typeof e!="function"||e.prototype&&e.prototype.render||e.isReactClass||Object.prototype.isPrototypeOf.call(b.a,e)?_e(e):D(e)}if(!b.a)throw new Error("mobx-react requires React to be available");if(!c.C)throw new Error("mobx-react requires mobx to be available");var te=i(0);i(3),i(60),i(2),i(6),i(4),i(11),i(39),i(29),i(22),i(20),i(5),i(23),i(21),i(25),i(8),i(9),i(16),i(24),i(18),i(188),i(193),i(103),i(152),i(153);var Le=function(e,t){for(var n=-1,r=e==null?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a},ut=function(){this.__data__=[],this.size=0},vt=function(e,t){return e===t||e!=e&&t!=t},it=function(e,t){for(var n=e.length;n--;)if(vt(e[n][0],t))return n;return-1},yt=Array.prototype.splice,St=function(e){var t=this.__data__,n=it(t,e);return!(n<0)&&(n==t.length-1?t.pop():yt.call(t,n,1),--this.size,!0)},Pt=function(e){var t=this.__data__,n=it(t,e);return n<0?void 0:t[n][1]},at=function(e){return it(this.__data__,e)>-1},Ct=function(e,t){var n=this.__data__,r=it(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function G(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}G.prototype.clear=ut,G.prototype.delete=St,G.prototype.get=Pt,G.prototype.has=at,G.prototype.set=Ct;var ne=G,Y=function(){this.__data__=new ne,this.size=0},se=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Me=function(e){return this.__data__.get(e)},De=function(e){return this.__data__.has(e)},Xe=i(31),ft=Xe.a.Symbol,Ht=Object.prototype,Zt=Ht.hasOwnProperty,Rt=Ht.toString,It=ft?ft.toStringTag:void 0,ze=function(e){var t=Zt.call(e,It),n=e[It];try{e[It]=void 0;var r=!0}catch(o){}var a=Rt.call(e);return r&&(t?e[It]=n:delete e[It]),a},Ve=Object.prototype.toString,et=function(e){return Ve.call(e)},rt=ft?ft.toStringTag:void 0,wt=function(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":rt&&rt in Object(e)?ze(e):et(e)},Dt=function(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")},sr,Xn=function(e){if(!Dt(e))return!1;var t=wt(e);return t=="[object Function]"||t=="[object GeneratorFunction]"||t=="[object AsyncFunction]"||t=="[object Proxy]"},Yn=Xe.a["__core-js_shared__"],Yr=(sr=/[^.]+$/.exec(Yn&&Yn.keys&&Yn.keys.IE_PROTO||""))?"Symbol(src)_1."+sr:"",Lu=function(e){return!!Yr&&Yr in e},Ho=Function.prototype.toString,kn=function(e){if(e!=null){try{return Ho.call(e)}catch(t){}try{return e+""}catch(t){}}return""},Di=/^\[object .+?Constructor\]$/,Ge=Function.prototype,zu=Object.prototype,Ni=Ge.toString,Ci=zu.hasOwnProperty,mn=RegExp("^"+Ni.call(Ci).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),On=function(e){return!(!Dt(e)||Lu(e))&&(Xn(e)?mn:Di).test(kn(e))},Ri=function(e,t){return e==null?void 0:e[t]},Vn=function(e,t){var n=Ri(e,t);return On(n)?n:void 0},Sr=Vn(Xe.a,"Map"),zn=Vn(Object,"create"),Go=function(){this.__data__=zn?zn(null):{},this.size=0},Ii=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Bu=Object.prototype.hasOwnProperty,uo=function(e){var t=this.__data__;if(zn){var n=t[e];return n==="__lodash_hash_undefined__"?void 0:n}return Bu.call(t,e)?t[e]:void 0},Fu=Object.prototype.hasOwnProperty,Li=function(e){var t=this.__data__;return zn?t[e]!==void 0:Fu.call(t,e)},Uu=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=zn&&t===void 0?"__lodash_hash_undefined__":t,this};function cr(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}cr.prototype.clear=Go,cr.prototype.delete=Ii,cr.prototype.get=uo,cr.prototype.has=Li,cr.prototype.set=Uu;var zi=cr,Wn=function(){this.size=0,this.__data__={hash:new zi,map:new(Sr||ne),string:new zi}},Hu=function(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null},so=function(e,t){var n=e.__data__;return Hu(t)?n[typeof t=="string"?"string":"hash"]:n.map},Xo=function(e){var t=so(this,e).delete(e);return this.size-=t?1:0,t},Yo=function(e){return so(this,e).get(e)},Gu=function(e){return so(this,e).has(e)},Bi=function(e,t){var n=so(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function jr(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}jr.prototype.clear=Wn,jr.prototype.delete=Xo,jr.prototype.get=Yo,jr.prototype.has=Gu,jr.prototype.set=Bi;var Pr=jr,Fi=function(e,t){var n=this.__data__;if(n instanceof ne){var r=n.__data__;if(!Sr||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Pr(r)}return n.set(e,t),this.size=n.size,this};function Ar(e){var t=this.__data__=new ne(e);this.size=t.size}Ar.prototype.clear=Y,Ar.prototype.delete=se,Ar.prototype.get=Me,Ar.prototype.has=De,Ar.prototype.set=Fi;var Kn=Ar,Ui=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Hi=function(e){return this.__data__.has(e)};function Vr(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Pr;++t<n;)this.add(e[t])}Vr.prototype.add=Vr.prototype.push=Ui,Vr.prototype.has=Hi;var Gi=Vr,Xu=function(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1},Xi=function(e,t){return e.has(t)},Yi=function(e,t,n,r,a,o){var u=1&n,p=e.length,d=t.length;if(p!=d&&!(u&&d>p))return!1;var O=o.get(e),_=o.get(t);if(O&&_)return O==t&&_==e;var S=-1,k=!0,R=2&n?new Gi:void 0;for(o.set(e,t),o.set(t,e);++S<p;){var X=e[S],W=t[S];if(r)var oe=u?r(W,X,S,t,e,o):r(X,W,S,e,t,o);if(oe!==void 0){if(oe)continue;k=!1;break}if(R){if(!Xu(t,function(re,de){if(!Xi(R,de)&&(X===re||a(X,re,n,r,o)))return R.push(de)})){k=!1;break}}else if(X!==W&&!a(X,W,n,r,o)){k=!1;break}}return o.delete(e),o.delete(t),k},Wr=Xe.a.Uint8Array,Vi=function(e){var t=-1,n=Array(e.size);return e.forEach(function(r,a){n[++t]=[a,r]}),n},Yu=function(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n},Wi=ft?ft.prototype:void 0,Vo=Wi?Wi.valueOf:void 0,Kr=function(e,t,n,r,a,o,u){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!o(new Wr(e),new Wr(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return vt(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var p=Vi;case"[object Set]":var d=1&r;if(p||(p=Yu),e.size!=t.size&&!d)return!1;var O=u.get(e);if(O)return O==t;r|=2,u.set(e,t);var _=Yi(p(e),p(t),r,a,o,u);return u.delete(e),_;case"[object Symbol]":if(Vo)return Vo.call(e)==Vo.call(t)}return!1},Zn=function(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e},$t=Array.isArray,Ki=function(e,t,n){var r=t(e);return $t(e)?r:Zn(r,n(e))},Zi=function(e,t){for(var n=-1,r=e==null?0:e.length,a=0,o=[];++n<r;){var u=e[n];t(u,n,e)&&(o[a++]=u)}return o},qi=function(){return[]},Vu=Object.prototype.propertyIsEnumerable,lr=Object.getOwnPropertySymbols,Tn=lr?function(e){return e==null?[]:(e=Object(e),Zi(lr(e),function(t){return Vu.call(e,t)}))}:qi,Wu=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r},Mn=function(e){return e!=null&&typeof e=="object"},_n=function(e){return Mn(e)&&wt(e)=="[object Arguments]"},Ji=Object.prototype,$i=Ji.hasOwnProperty,Ku=Ji.propertyIsEnumerable,co=_n(function(){return arguments}())?_n:function(e){return Mn(e)&&$i.call(e,"callee")&&!Ku.call(e,"callee")},qn=co,Zr=i(48),Zu=/^(?:0|[1-9]\d*)$/,an=function(e,t){var n=typeof e;return!!(t=t==null?9007199254740991:t)&&(n=="number"||n!="symbol"&&Zu.test(e))&&e>-1&&e%1==0&&e<t},fr=function(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=9007199254740991},gt={};gt["[object Float32Array]"]=gt["[object Float64Array]"]=gt["[object Int8Array]"]=gt["[object Int16Array]"]=gt["[object Int32Array]"]=gt["[object Uint8Array]"]=gt["[object Uint8ClampedArray]"]=gt["[object Uint16Array]"]=gt["[object Uint32Array]"]=!0,gt["[object Arguments]"]=gt["[object Array]"]=gt["[object ArrayBuffer]"]=gt["[object Boolean]"]=gt["[object DataView]"]=gt["[object Date]"]=gt["[object Error]"]=gt["[object Function]"]=gt["[object Map]"]=gt["[object Number]"]=gt["[object Object]"]=gt["[object RegExp]"]=gt["[object Set]"]=gt["[object String]"]=gt["[object WeakMap]"]=!1;var wn=function(e){return Mn(e)&&fr(e.length)&&!!gt[wt(e)]},pr=function(e){return function(t){return e(t)}},qt=i(49),Qi=qt.a&&qt.a.isTypedArray,Wo=Qi?pr(Qi):wn,ea=Object.prototype.hasOwnProperty,Dn=function(e,t){var n=$t(e),r=!n&&qn(e),a=!n&&!r&&Object(Zr.a)(e),o=!n&&!r&&!a&&Wo(e),u=n||r||a||o,p=u?Wu(e.length,String):[],d=p.length;for(var O in e)!t&&!ea.call(e,O)||u&&(O=="length"||a&&(O=="offset"||O=="parent")||o&&(O=="buffer"||O=="byteLength"||O=="byteOffset")||an(O,d))||p.push(O);return p},ta=Object.prototype,lo=function(e){var t=e&&e.constructor;return e===(typeof t=="function"&&t.prototype||ta)},Nn=function(e,t){return function(n){return e(t(n))}},na=Nn(Object.keys,Object),qu=Object.prototype.hasOwnProperty,Ko=function(e){if(!lo(e))return na(e);var t=[];for(var n in Object(e))qu.call(e,n)&&n!="constructor"&&t.push(n);return t},Lt=function(e){return e!=null&&fr(e.length)&&!Xn(e)},kr=function(e){return Lt(e)?Dn(e):Ko(e)},fo=function(e){return Ki(e,kr,Tn)},yn=Object.prototype.hasOwnProperty,ra=function(e,t,n,r,a,o){var u=1&n,p=fo(e),d=p.length;if(d!=fo(t).length&&!u)return!1;for(var O=d;O--;){var _=p[O];if(!(u?_ in t:yn.call(t,_)))return!1}var S=o.get(e),k=o.get(t);if(S&&k)return S==t&&k==e;var R=!0;o.set(e,t),o.set(t,e);for(var X=u;++O<d;){var W=e[_=p[O]],oe=t[_];if(r)var re=u?r(oe,W,_,t,e,o):r(W,oe,_,e,t,o);if(!(re===void 0?W===oe||a(W,oe,n,r,o):re)){R=!1;break}X||(X=_=="constructor")}if(R&&!X){var de=e.constructor,me=t.constructor;de==me||!("constructor"in e)||!("constructor"in t)||typeof de=="function"&&de instanceof de&&typeof me=="function"&&me instanceof me||(R=!1)}return o.delete(e),o.delete(t),R},qr=Vn(Xe.a,"DataView"),po=Vn(Xe.a,"Promise"),ho=Vn(Xe.a,"Set"),yo=Vn(Xe.a,"WeakMap"),oa="[object Map]",gn="[object Promise]",xn="[object Set]",Tr="[object WeakMap]",Zo="[object DataView]",qo=kn(qr),Jo=kn(Sr),ia=kn(po),Ju=kn(ho),go=kn(yo),dr=wt;(qr&&dr(new qr(new ArrayBuffer(1)))!=Zo||Sr&&dr(new Sr)!=oa||po&&dr(po.resolve())!=gn||ho&&dr(new ho)!=xn||yo&&dr(new yo)!=Tr)&&(dr=function(e){var t=wt(e),n=t=="[object Object]"?e.constructor:void 0,r=n?kn(n):"";if(r)switch(r){case qo:return Zo;case Jo:return oa;case ia:return gn;case Ju:return xn;case go:return Tr}return t});var y=dr,g="[object Arguments]",x="[object Array]",T="[object Object]",U=Object.prototype.hasOwnProperty,Q=function(e,t,n,r,a,o){var u=$t(e),p=$t(t),d=u?x:y(e),O=p?x:y(t),_=(d=d==g?T:d)==T,S=(O=O==g?T:O)==T,k=d==O;if(k&&Object(Zr.a)(e)){if(!Object(Zr.a)(t))return!1;u=!0,_=!1}if(k&&!_)return o||(o=new Kn),u||Wo(e)?Yi(e,t,n,r,a,o):Kr(e,t,d,n,r,a,o);if(!(1&n)){var R=_&&U.call(e,"__wrapped__"),X=S&&U.call(t,"__wrapped__");if(R||X){var W=R?e.value():e,oe=X?t.value():t;return o||(o=new Kn),a(W,oe,n,r,o)}}return!!k&&(o||(o=new Kn),ra(e,t,n,r,a,o))},pe=function e(t,n,r,a,o){return t===n||(t==null||n==null||!Mn(t)&&!Mn(n)?t!=t&&n!=n:Q(t,n,r,a,e,o))},je=function(e,t,n,r){var a=n.length,o=a,u=!r;if(e==null)return!o;for(e=Object(e);a--;){var p=n[a];if(u&&p[2]?p[1]!==e[p[0]]:!(p[0]in e))return!1}for(;++a<o;){var d=(p=n[a])[0],O=e[d],_=p[1];if(u&&p[2]){if(O===void 0&&!(d in e))return!1}else{var S=new Kn;if(r)var k=r(O,_,d,e,t,S);if(!(k===void 0?pe(_,O,3,r,S):k))return!1}}return!0},Fe=function(e){return e==e&&!Dt(e)},dt=function(e){for(var t=kr(e),n=t.length;n--;){var r=t[n],a=e[r];t[n]=[r,a,Fe(a)]}return t},ot=function(e,t){return function(n){return n!=null&&n[e]===t&&(t!==void 0||e in Object(n))}},xt=function(e){var t=dt(e);return t.length==1&&t[0][2]?ot(t[0][0],t[0][1]):function(n){return n===e||je(n,e,t)}},ct=function(e){return typeof e=="symbol"||Mn(e)&&wt(e)=="[object Symbol]"},Ot=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,En=/^\w*$/,kt=function(e,t){if($t(e))return!1;var n=typeof e;return!(n!="number"&&n!="symbol"&&n!="boolean"&&e!=null&&!ct(e))||En.test(e)||!Ot.test(e)||t!=null&&e in Object(t)};function un(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError("Expected a function");var n=function(){var r=arguments,a=t?t.apply(this,r):r[0],o=n.cache;if(o.has(a))return o.get(a);var u=e.apply(this,r);return n.cache=o.set(a,u)||o,u};return n.cache=new(un.Cache||Pr),n}un.Cache=Pr;var Jr=un,$u=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,aa=/\\(\\)?/g,ua=function(e){var t=Jr(e,function(r){return n.size===500&&n.clear(),r}),n=t.cache;return t}(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace($u,function(n,r,a,o){t.push(a?o.replace(aa,"$1"):r||n)}),t}),vo=ft?ft.prototype:void 0,$o=vo?vo.toString:void 0,sn=function e(t){if(typeof t=="string")return t;if($t(t))return Le(t,e)+"";if(ct(t))return $o?$o.call(t):"";var n=t+"";return n=="0"&&1/t==-1/0?"-0":n},sa=function(e){return e==null?"":sn(e)},$r=function(e,t){return $t(e)?e:kt(e,t)?[e]:ua(sa(e))},Qo=function(e){if(typeof e=="string"||ct(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t},Qu=function(e,t){for(var n=0,r=(t=$r(t,e)).length;e!=null&&n<r;)e=e[Qo(t[n++])];return n&&n==r?e:void 0},_f=function(e,t,n){var r=e==null?void 0:Qu(e,t);return r===void 0?n:r},mv=function(e,t){return e!=null&&t in Object(e)},Ov=function(e,t,n){for(var r=-1,a=(t=$r(t,e)).length,o=!1;++r<a;){var u=Qo(t[r]);if(!(o=e!=null&&n(e,u)))break;e=e[u]}return o||++r!=a?o:!!(a=e==null?0:e.length)&&fr(a)&&an(u,a)&&($t(e)||qn(e))},wf=function(e,t){return e!=null&&Ov(e,t,mv)},_v=function(e,t){return kt(e)&&Fe(t)?ot(Qo(e),t):function(n){var r=_f(n,e);return r===void 0&&r===t?wf(n,e):pe(t,r,3)}},es=function(e){return e},wv=function(e){return function(t){return t==null?void 0:t[e]}},xv=function(e){return function(t){return Qu(t,e)}},Ev=function(e){return kt(e)?wv(Qo(e)):xv(e)},Sv=function(e){return typeof e=="function"?e:e==null?es:typeof e=="object"?$t(e)?_v(e[0],e[1]):xt(e):Ev(e)},xf=function(e){return function(t,n,r){for(var a=-1,o=Object(t),u=r(t),p=u.length;p--;){var d=u[e?p:++a];if(n(o[d],d,o)===!1)break}return t}}(),jv=function(e,t){return function(n,r){if(n==null)return n;if(!Lt(n))return e(n,r);for(var a=n.length,o=t?a:-1,u=Object(n);(t?o--:++o<a)&&r(u[o],o,u)!==!1;);return n}}(function(e,t){return e&&xf(e,t,kr)}),Pv=function(e,t){var n=-1,r=Lt(e)?Array(e.length):[];return jv(e,function(a,o,u){r[++n]=t(a,o,u)}),r},ca=function(e,t){return($t(e)?Le:Pv)(e,Sv(t))};Object(c.n)({isolateGlobalState:!0});var la=function(){try{var e=Vn(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),ts=function(e,t,n){t=="__proto__"&&la?la(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},Av=Object.prototype.hasOwnProperty,fa=function(e,t,n){var r=e[t];Av.call(e,t)&&vt(r,n)&&(n!==void 0||t in e)||ts(e,t,n)},bo=function(e,t,n,r){var a=!n;n||(n={});for(var o=-1,u=t.length;++o<u;){var p=t[o],d=r?r(n[p],e[p],p,n,e):void 0;d===void 0&&(d=e[p]),a?ts(n,p,d):fa(n,p,d)}return n},kv=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},Ef=Math.max,Sf=function(e,t,n){return t=Ef(t===void 0?e.length-1:t,0),function(){for(var r=arguments,a=-1,o=Ef(r.length-t,0),u=Array(o);++a<o;)u[a]=r[t+a];a=-1;for(var p=Array(t+1);++a<t;)p[a]=r[a];return p[t]=n(u),kv(e,this,p)}},Tv=function(e){return function(){return e}},Mv=la?function(e,t){return la(e,"toString",{configurable:!0,enumerable:!1,value:Tv(t),writable:!0})}:es,Dv=Date.now,Nv=function(e){var t=0,n=0;return function(){var r=Dv(),a=16-(r-n);if(n=r,a>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}},jf=Nv(Mv),Cv=function(e,t){return jf(Sf(e,t,es),e+"")},Rv=function(e,t,n){if(!Dt(n))return!1;var r=typeof t;return!!(r=="number"?Lt(n)&&an(t,n.length):r=="string"&&t in n)&&vt(n[t],e)},Pf=function(e){return Cv(function(t,n){var r=-1,a=n.length,o=a>1?n[a-1]:void 0,u=a>2?n[2]:void 0;for(o=e.length>3&&typeof o=="function"?(a--,o):void 0,u&&Rv(n[0],n[1],u)&&(o=a<3?void 0:o,a=1),t=Object(t);++r<a;){var p=n[r];p&&e(t,p,r,o)}return t})},Iv=Object.prototype.hasOwnProperty,cn=Pf(function(e,t){if(lo(t)||Lt(t))bo(t,kr(t),e);else for(var n in t)Iv.call(t,n)&&fa(e,n,t[n])}),Lv=function(e,t,n,r){if(!Dt(e))return e;for(var a=-1,o=(t=$r(t,e)).length,u=o-1,p=e;p!=null&&++a<o;){var d=Qo(t[a]),O=n;if(d==="__proto__"||d==="constructor"||d==="prototype")return e;if(a!=u){var _=p[d];(O=r?r(_,d,p):void 0)===void 0&&(O=Dt(_)?_:an(t[a+1])?[]:{})}fa(p,d,O),p=p[d]}return e},zv=function(e,t,n){for(var r=-1,a=t.length,o={};++r<a;){var u=t[r],p=Qu(e,u);n(p,u)&&Lv(o,$r(u,e),p)}return o},Bv=function(e,t){return zv(e,t,function(n,r){return wf(e,r)})},Af=ft?ft.isConcatSpreadable:void 0,Fv=function(e){return $t(e)||qn(e)||!!(Af&&e&&e[Af])},Uv=function e(t,n,r,a,o){var u=-1,p=t.length;for(r||(r=Fv),o||(o=[]);++u<p;){var d=t[u];n>0&&r(d)?n>1?e(d,n-1,r,a,o):Zn(o,d):a||(o[o.length]=d)}return o},Hv=function(e){return e!=null&&e.length?Uv(e,1):[]},zt,kf,Tf,Mf,Df,Nf,Cf,Rf,If,Lf,zf,Bf,Ff,Uf,Hf,Gf,Xf,Yf,ei=function(e){return jf(Sf(e,void 0,Hv),e+"")}(function(e,t){return e==null?{}:Bv(e,t)});function Qt(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function Gv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jt(e,t,n,r,a){var o={};return Object.keys(r).forEach(function(u){o[u]=r[u]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(u,p){return p(e,t,u)||u},o),a&&o.initializer!==void 0&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),o.initializer===void 0&&(Object.defineProperty(e,t,o),o=null),o}var _t,Wf,ht,Gt,tt,Tt,Xv={stopZoomGraph:!1,stopScrollGraph:!1,stopMoveGraph:!1,adjustEdge:!1,adjustEdgeStartAndEnd:!1,adjustNodePosition:!1,hideAnchors:!0,nodeSelectedOutline:!0,nodeTextEdit:!1,edgeTextEdit:!1,nodeTextDraggable:!1,edgeTextDraggable:!1},ns=["isSilentMode","stopZoomGraph","stopScrollGraph","stopMoveGraph","adjustEdge","adjustEdgeMiddle","adjustEdgeStartAndEnd","adjustNodePosition","hideAnchors","hoverOutline","nodeSelectedOutline","edgeSelectedOutline","nodeTextEdit","edgeTextEdit","nodeTextDraggable","edgeTextDraggable","multipleSelectKey","autoExpand"],Kf=(kf=Jt((zt=function(){function e(r){(function(a,o){if(!(a instanceof o))throw new TypeError("Cannot call a class as a function")})(this,e),Qt(this,"isSilentMode",kf,this),Qt(this,"stopZoomGraph",Tf,this),Qt(this,"stopScrollGraph",Mf,this),Qt(this,"stopMoveGraph",Df,this),Qt(this,"adjustEdge",Nf,this),Qt(this,"adjustEdgeMiddle",Cf,this),Qt(this,"adjustEdgeStartAndEnd",Rf,this),Qt(this,"adjustNodePosition",If,this),Qt(this,"hideAnchors",Lf,this),Qt(this,"hoverOutline",zf,this),Qt(this,"nodeSelectedOutline",Bf,this),Qt(this,"edgeSelectedOutline",Ff,this),Qt(this,"nodeTextEdit",Uf,this),Qt(this,"edgeTextEdit",Hf,this),Qt(this,"nodeTextDraggable",Gf,this),Qt(this,"edgeTextDraggable",Xf,this),Qt(this,"autoExpand",Yf,this),Vf(this,"multipleSelectKey",""),Vf(this,"defaultConfig",{}),cn(this,this.getConfigDetail(r))}var t,n;return t=e,(n=[{key:"updateEditConfig",value:function(r){var a=this.getConfigDetail(r);cn(this,a)}},{key:"getConfigDetail",value:function(r){var a=r.isSilentMode,o=r.textEdit,u={};if(a===!1&&cn(u,this.defaultConfig),a===!0&&a!==this.isSilentMode){var p=ei(Xv,ns);this.defaultConfig={stopZoomGraph:this.stopZoomGraph,stopScrollGraph:this.stopScrollGraph,stopMoveGraph:this.stopMoveGraph,adjustEdge:this.adjustEdge,adjustEdgeMiddle:this.adjustEdgeMiddle,adjustEdgeStartAndEnd:this.adjustEdgeStartAndEnd,adjustNodePosition:this.adjustNodePosition,hideAnchors:this.hideAnchors,hoverOutline:this.hoverOutline,nodeSelectedOutline:this.nodeSelectedOutline,edgeSelectedOutline:this.edgeSelectedOutline,nodeTextEdit:this.nodeTextEdit,edgeTextEdit:this.edgeTextEdit,nodeTextDraggable:this.nodeTextDraggable,edgeTextDraggable:this.edgeTextDraggable,autoExpand:this.autoExpand},cn(u,p)}o===!1&&cn(u,{nodeTextEdit:!1,edgeTextEdit:!1});var d=ei(r,ns);return cn(u,d)}},{key:"getConfig",value:function(){return ei(this,ns)}}])&&Gv(t.prototype,n),e}()).prototype,"isSilentMode",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Tf=Jt(zt.prototype,"stopZoomGraph",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Mf=Jt(zt.prototype,"stopScrollGraph",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Df=Jt(zt.prototype,"stopMoveGraph",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Nf=Jt(zt.prototype,"adjustEdge",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Cf=Jt(zt.prototype,"adjustEdgeMiddle",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Rf=Jt(zt.prototype,"adjustEdgeStartAndEnd",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),If=Jt(zt.prototype,"adjustNodePosition",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Lf=Jt(zt.prototype,"hideAnchors",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),zf=Jt(zt.prototype,"hoverOutline",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Bf=Jt(zt.prototype,"nodeSelectedOutline",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ff=Jt(zt.prototype,"edgeSelectedOutline",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Uf=Jt(zt.prototype,"nodeTextEdit",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Hf=Jt(zt.prototype,"edgeTextEdit",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Gf=Jt(zt.prototype,"nodeTextDraggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Xf=Jt(zt.prototype,"edgeTextDraggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Yf=Jt(zt.prototype,"autoExpand",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Jt(zt.prototype,"updateEditConfig",[c.k],Object.getOwnPropertyDescriptor(zt.prototype,"updateEditConfig"),zt.prototype),zt);i(63),function(e){e[e.DEFAULT=1]="DEFAULT",e[e.TEXT_EDIT=2]="TEXT_EDIT",e[e.SHOW_MENU=3]="SHOW_MENU",e[e.ALLOW_CONNECT=4]="ALLOW_CONNECT",e[e.NOT_ALLOW_CONNECT=5]="NOT_ALLOW_CONNECT"}(_t||(_t={})),function(e){e.KEY="logic-flow",e.NODE_NAME="lf-node",e.EDGE_NAME="lf-edge"}(Wf||(Wf={})),function(e){e.NODE="node",e.CIRCLE_NODE="circle-node",e.POLYGON_NODE="polygon-node",e.RECT_NODE="rect-node",e.TEXT_NODE="text-node",e.ELLIPSE_NODE="ellipse-node",e.DIAMOND_NODE="diamond-node",e.HTML_NODE="html-node",e.EDGE="edge",e.LINE_EDGE="line-edge",e.POLYLINE_EDGE="polyline-edge",e.BEZIER_EDGE="bezier-edge",e.GRAPH="graph"}(ht||(ht={})),function(e){e.NODE="node",e.EDGE="edge",e.GRAPH="graph"}(Gt||(Gt={})),function(e){e.ELEMENT_CLICK="element:click",e.NODE_CLICK="node:click",e.NODE_DBCLICK="node:dbclick",e.NODE_DELETE="node:delete",e.NODE_ADD="node:add",e.NODE_DND_ADD="node:dnd-add",e.NODE_DND_DRAG="node:dnd-drag",e.NODE_MOUSEDOWN="node:mousedown",e.NODE_DRAGSTART="node:dragstart",e.NODE_DRAG="node:drag",e.NODE_DROP="node:drop",e.NODE_MOUSEUP="node:mouseup",e.NODE_MOUSEMOVE="node:mousemove",e.NODE_MOUSEENTER="node:mouseenter",e.NODE_MOUSELEAVE="node:mouseleave",e.NODE_CONTEXTMENU="node:contextmenu",e.EDGE_DELETE="edge:delete",e.EDGE_ADD="edge:add",e.EDGE_CLICK="edge:click",e.EDGE_DBCLICK="edge:dbclick",e.EDGE_MOUSEENTER="edge:mouseenter",e.EDGE_MOUSELEAVE="edge:mouseleave",e.EDGE_CONTEXTMENU="edge:contextmenu",e.EDGE_ADJUST="edge:adjust",e.EDGE_EXCHANGE_NODE="edge:exchange-node",e.ANCHOR_DRAGSTART="anchor:dragstart",e.ANCHOR_DRAG="anchor:drag",e.ANCHOR_DROP="anchor:drop",e.ANCHOR_DRAGEND="anchor:dragend",e.ADJUST_POINT_MOUSEDOWN="adjustPoint:mousedown",e.ADJUST_POINT_MOUSEUP="adjustPoint:mouseup",e.ADJUST_POINT_MOUSEMOVE="adjustPoint:mousemove",e.ADJUST_POINT_DRAGSTART="adjustPoint:dragstart",e.ADJUST_POINT_DRAG="adjustPoint:drag",e.ADJUST_POINT_DROP="adjustPoint:drop",e.ADJUST_POINT_DRAGEND="adjustPoint:dragend",e.BLANK_MOUSEDOWN="blank:mousedown",e.BLANK_DRAGSTART="blank:dragstart",e.BLANK_DRAG="blank:drag",e.BLANK_DROP="blank:drop",e.BLANK_MOUSEMOVE="blank:mousemove",e.BLANK_MOUSEUP="blank:mouseup",e.BLANK_CLICK="blank:click",e.BLANK_CONTEXTMENU="blank:contextmenu",e.SELECTION_MOUSEDOWN="selection:mousedown",e.SELECTION_DRAGSTART="selection:dragstart",e.SELECTION_DRAG="selection:drag",e.SELECTION_DROP="selection:drop",e.SELECTION_MOUSEMOVE="selection:mousemove",e.SELECTION_MOUSEUP="selection:mouseup",e.SELECTION_CONTEXTMENU="selection:contextmenu",e.CONNECTION_NOT_ALLOWED="connection:not-allowed",e.HISTORY_CHANGE="history:change",e.TEXT_UPDATE="text:update",e.GRAPH_TRANSFORM="graph:transform",e.GRAPH_RENDERED="graph:rendered"}(tt||(tt={})),function(e){e.HORIZONTAL="horizontal",e.VERTICAL="vertical"}(Tt||(Tt={}));var Sn,Bt,Zf,qf,Jf,$f,Qf,ep,tp;function pa(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var o,u,p=[],d=!0,O=!1;try{for(a=a.call(n);!(d=(o=a.next()).done)&&(p.push(o.value),!r||p.length!==r);d=!0);}catch(_){O=!0,u=_}finally{try{d||a.return==null||a.return()}finally{if(O)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return np(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return np(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function np(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Qr(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function Yv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bn(e,t,n,r,a){var o={};return Object.keys(r).forEach(function(u){o[u]=r[u]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(u,p){return p(e,t,u)||u},o),a&&o.initializer!==void 0&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),o.initializer===void 0&&(Object.defineProperty(e,t,o),o=null),o}(function(e){e[e.DEFAULT=0]="DEFAULT",e[e.INCREASE=1]="INCREASE"})(Sn||(Sn={}));var Vv=(Bt=function(){function e(r){(function(a,o){if(!(a instanceof o))throw new TypeError("Cannot call a class as a function")})(this,e),rs(this,"MINI_SCALE_SIZE",.2),rs(this,"MAX_SCALE_SIZE",16),Qr(this,"SCALE_X",Zf,this),Qr(this,"SKEW_Y",qf,this),Qr(this,"SKEW_X",Jf,this),Qr(this,"SCALE_Y",$f,this),Qr(this,"TRANSLATE_X",Qf,this),Qr(this,"TRANSLATE_Y",ep,this),Qr(this,"ZOOM_SIZE",tp,this),rs(this,"eventCenter",void 0),this.eventCenter=r}var t,n;return t=e,n=[{key:"setZoomMiniSize",value:function(r){this.MINI_SCALE_SIZE=r}},{key:"setZoomMaxSize",value:function(r){this.MAX_SCALE_SIZE=r}},{key:"HtmlPointToCanvasPoint",value:function(r){var a=pa(r,2),o=a[0],u=a[1];return[(o-this.TRANSLATE_X)/this.SCALE_X,(u-this.TRANSLATE_Y)/this.SCALE_Y]}},{key:"CanvasPointToHtmlPoint",value:function(r){var a=pa(r,2),o=a[0],u=a[1];return[o*this.SCALE_X+this.TRANSLATE_X,u*this.SCALE_Y+this.TRANSLATE_Y]}},{key:"moveCanvasPointByHtml",value:function(r,a,o){var u=pa(r,2),p=u[0],d=u[1];return[p+a/this.SCALE_X,d+o/this.SCALE_Y]}},{key:"fixDeltaXY",value:function(r,a){return[r/this.SCALE_X,a/this.SCALE_Y]}},{key:"getTransformStyle",value:function(){var r=[this.SCALE_X,this.SKEW_Y,this.SKEW_X,this.SCALE_Y,this.TRANSLATE_X,this.TRANSLATE_Y].join(",");return{transform:"matrix(".concat(r,")")}}},{key:"zoom",value:function(){var r=arguments.length>0&&arguments[0]!==void 0&&arguments[0],a=arguments.length>1?arguments[1]:void 0,o=this.SCALE_X,u=this.SCALE_Y;return r===!0?(o+=this.ZOOM_SIZE,u+=this.ZOOM_SIZE):r===!1?(o-=this.ZOOM_SIZE,u-=this.ZOOM_SIZE):typeof r=="number"&&(o=r,u=r),o<this.MINI_SCALE_SIZE||o>this.MAX_SCALE_SIZE||(a&&(this.TRANSLATE_X-=(o-this.SCALE_X)*a[0],this.TRANSLATE_Y-=(u-this.SCALE_Y)*a[1]),this.SCALE_X=o,this.SCALE_Y=u,this.emitGraphTransform("zoom")),"".concat(100*this.SCALE_X,"%")}},{key:"emitGraphTransform",value:function(r){this.eventCenter.emit(tt.GRAPH_TRANSFORM,{type:r,transform:{SCALE_X:this.SCALE_X,SKEW_Y:this.SKEW_Y,SKEW_X:this.SKEW_X,SCALE_Y:this.SCALE_Y,TRANSLATE_X:this.TRANSLATE_X,TRANSLATE_Y:this.TRANSLATE_Y}})}},{key:"resetZoom",value:function(){this.SCALE_X=1,this.SCALE_Y=1,this.emitGraphTransform("resetZoom")}},{key:"translate",value:function(r,a){this.TRANSLATE_X+=r,this.TRANSLATE_Y+=a,this.emitGraphTransform("translate")}},{key:"focusOn",value:function(r,a,o,u){var p=pa(this.CanvasPointToHtmlPoint([r,a]),2),d=o/2-p[0],O=u/2-p[1];this.TRANSLATE_X+=d,this.TRANSLATE_Y+=O,this.emitGraphTransform("focusOn")}}],n&&Yv(t.prototype,n),e}(),Zf=Bn(Bt.prototype,"SCALE_X",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),qf=Bn(Bt.prototype,"SKEW_Y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Jf=Bn(Bt.prototype,"SKEW_X",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),$f=Bn(Bt.prototype,"SCALE_Y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Qf=Bn(Bt.prototype,"TRANSLATE_X",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ep=Bn(Bt.prototype,"TRANSLATE_Y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),tp=Bn(Bt.prototype,"ZOOM_SIZE",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return .04}}),Bn(Bt.prototype,"zoom",[c.k],Object.getOwnPropertyDescriptor(Bt.prototype,"zoom"),Bt.prototype),Bn(Bt.prototype,"resetZoom",[c.k],Object.getOwnPropertyDescriptor(Bt.prototype,"resetZoom"),Bt.prototype),Bn(Bt.prototype,"translate",[c.k],Object.getOwnPropertyDescriptor(Bt.prototype,"translate"),Bt.prototype),Bn(Bt.prototype,"focusOn",[c.k],Object.getOwnPropertyDescriptor(Bt.prototype,"focusOn"),Bt.prototype),Bt),Wv=function(e,t){for(var n=-1,r=e==null?0:e.length;++n<r&&t(e[n],n,e)!==!1;);return e},Kv=function(e,t){return e&&bo(t,kr(t),e)},Zv=function(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t},qv=Object.prototype.hasOwnProperty,Jv=function(e){if(!Dt(e))return Zv(e);var t=lo(e),n=[];for(var r in e)(r!="constructor"||!t&&qv.call(e,r))&&n.push(r);return n},ti=function(e){return Lt(e)?Dn(e,!0):Jv(e)},$v=function(e,t){return e&&bo(t,ti(t),e)},rp=i(106),op=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t},Qv=function(e,t){return bo(e,Tn(e),t)},os=Nn(Object.getPrototypeOf,Object),ip=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Zn(t,Tn(e)),e=os(e);return t}:qi,eb=function(e,t){return bo(e,ip(e),t)},tb=function(e){return Ki(e,ti,ip)},nb=Object.prototype.hasOwnProperty,rb=function(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&nb.call(e,"index")&&(n.index=e.index,n.input=e.input),n},is=function(e){var t=new e.constructor(e.byteLength);return new Wr(t).set(new Wr(e)),t},ob=function(e,t){var n=t?is(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)},ib=/\w*$/,ab=function(e){var t=new e.constructor(e.source,ib.exec(e));return t.lastIndex=e.lastIndex,t},ap=ft?ft.prototype:void 0,up=ap?ap.valueOf:void 0,ub=function(e){return up?Object(up.call(e)):{}},sp=function(e,t){var n=t?is(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)},sb=function(e,t,n){var r=e.constructor;switch(t){case"[object ArrayBuffer]":return is(e);case"[object Boolean]":case"[object Date]":return new r(+e);case"[object DataView]":return ob(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return sp(e,n);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(e);case"[object RegExp]":return ab(e);case"[object Symbol]":return ub(e)}},cp=Object.create,cb=function(){function e(){}return function(t){if(!Dt(t))return{};if(cp)return cp(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),lp=function(e){return typeof e.constructor!="function"||lo(e)?{}:cb(os(e))},lb=function(e){return Mn(e)&&y(e)=="[object Map]"},fp=qt.a&&qt.a.isMap,fb=fp?pr(fp):lb,pb=function(e){return Mn(e)&&y(e)=="[object Set]"},pp=qt.a&&qt.a.isSet,db=pp?pr(pp):pb,dp="[object Arguments]",hp="[object Function]",hb="[object Object]",At={};At[dp]=At["[object Array]"]=At["[object ArrayBuffer]"]=At["[object DataView]"]=At["[object Boolean]"]=At["[object Date]"]=At["[object Float32Array]"]=At["[object Float64Array]"]=At["[object Int8Array]"]=At["[object Int16Array]"]=At["[object Int32Array]"]=At["[object Map]"]=At["[object Number]"]=At["[object Object]"]=At["[object RegExp]"]=At["[object Set]"]=At["[object String]"]=At["[object Symbol]"]=At["[object Uint8Array]"]=At["[object Uint8ClampedArray]"]=At["[object Uint16Array]"]=At["[object Uint32Array]"]=!0,At["[object Error]"]=At[hp]=At["[object WeakMap]"]=!1;var yb=function e(t,n,r,a,o,u){var p,d=1&n,O=2&n,_=4&n;if(r&&(p=o?r(t,a,o,u):r(t)),p!==void 0)return p;if(!Dt(t))return t;var S=$t(t);if(S){if(p=rb(t),!d)return op(t,p)}else{var k=y(t),R=k==hp||k=="[object GeneratorFunction]";if(Object(Zr.a)(t))return Object(rp.a)(t,d);if(k==hb||k==dp||R&&!o){if(p=O||R?{}:lp(t),!d)return O?eb(t,$v(p,t)):Qv(t,Kv(p,t))}else{if(!At[k])return o?t:{};p=sb(t,k,d)}}u||(u=new Kn);var X=u.get(t);if(X)return X;u.set(t,p),db(t)?t.forEach(function(oe){p.add(e(oe,n,r,oe,t,u))}):fb(t)&&t.forEach(function(oe,re){p.set(re,e(oe,n,r,re,t,u))});var W=S?void 0:(_?O?tb:fo:O?ti:kr)(t);return Wv(W||t,function(oe,re){W&&(oe=t[re=oe]),fa(p,re,e(oe,n,r,re,t,u))}),p},Nt=function(e){return yb(e,5)},as=function(e,t,n){(n!==void 0&&!vt(e[t],n)||n===void 0&&!(t in e))&&ts(e,t,n)},gb=function(e){return Mn(e)&&Lt(e)},vb=Function.prototype,bb=Object.prototype,yp=vb.toString,mb=bb.hasOwnProperty,Ob=yp.call(Object),_b=function(e){if(!Mn(e)||wt(e)!="[object Object]")return!1;var t=os(e);if(t===null)return!0;var n=mb.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&yp.call(n)==Ob},us=function(e,t){if((t!=="constructor"||typeof e[t]!="function")&&t!="__proto__")return e[t]},wb=function(e){return bo(e,ti(e))},xb=function(e,t,n,r,a,o,u){var p=us(e,n),d=us(t,n),O=u.get(d);if(O)as(e,n,O);else{var _=o?o(p,d,n+"",e,t,u):void 0,S=_===void 0;if(S){var k=$t(d),R=!k&&Object(Zr.a)(d),X=!k&&!R&&Wo(d);_=d,k||R||X?$t(p)?_=p:gb(p)?_=op(p):R?(S=!1,_=Object(rp.a)(d,!0)):X?(S=!1,_=sp(d,!0)):_=[]:_b(d)||qn(d)?(_=p,qn(p)?_=wb(p):Dt(p)&&!Xn(p)||(_=lp(d))):S=!1}S&&(u.set(d,_),a(_,d,r,o,u),u.delete(d)),as(e,n,_)}},Eb=function e(t,n,r,a,o){t!==n&&xf(n,function(u,p){if(o||(o=new Kn),Dt(u))xb(t,n,p,r,e,a,o);else{var d=a?a(us(t,p),u,p+"",t,n,o):void 0;d===void 0&&(d=u),as(t,p,d)}},ti)},gp=Pf(function(e,t,n){Eb(e,t,n)}),Sb={baseNode:{fill:"#FFFFFF",stroke:"#000000",strokeWidth:2},baseEdge:{stroke:"#000000",strokeWidth:2},rect:{},circle:{},diamond:{},ellipse:{},polygon:{},text:{color:"#000000",stroke:"none",fontSize:12,background:{fill:"transparent"}},anchor:{stroke:"#000000",fill:"#FFFFFF",r:4,hover:{fill:"#949494",fillOpacity:.5,stroke:"#949494",r:10}},nodeText:{color:"#000000",overflowMode:"default",lineHeight:1.2,fontSize:12},edgeText:{textWidth:100,overflowMode:"default",fontSize:12,background:{fill:"#FFFFFF"}},line:{},polyline:{},bezier:{fill:"none",adjustLine:{stroke:"#949494"},adjustAnchor:{r:4,fill:"#949494",stroke:"#949494",fillOpacity:1}},arrow:{offset:10,verticalLength:5},anchorLine:{stroke:"#000000",strokeWidth:2,strokeDasharray:"3,2"},snapline:{stroke:"#949494",strokeWidth:1},edgeAdjust:{r:4,fill:"#FFFFFF",stroke:"#949494",strokeWidth:2},outline:{fill:"transparent",stroke:"#949494",strokeDasharray:"3,3",hover:{stroke:"#949494"}},edgeAnimation:{stroke:"red",strokeDasharray:"10 10",strokeDashoffset:"100%",animationName:"lf_animate_dash",animationDuration:"20s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"normal"}},vp=function(e){var t=Nt(Sb);return e&&(t=gp(t,e)),t};i(77),i(158);function jb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Pb=function(){function e(){var r,a,o;(function(u,p){if(!(u instanceof p))throw new TypeError("Cannot call a class as a function")})(this,e),o={},(a="_events")in(r=this)?Object.defineProperty(r,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[a]=o}var t,n;return t=e,(n=[{key:"on",value:function(r,a,o){var u=this;return r==null||r.split(",").forEach(function(p){p=p.trim(),u._events[p]||(u._events[p]=[]),u._events[p].push({callback:a,once:!!o})}),this}},{key:"once",value:function(r,a){var o=this;r==null||r.split(",").forEach(function(u){return u=u.trim(),o.on(u,a,!0)})}},{key:"emit",value:function(r,a){var o=this;r==null||r.split(",").forEach(function(u){var p=o._events[u]||[],d=o._events["*"]||[],O=function(_){for(var S=_.length,k=0;k<S;k++)if(_[k]){var R=_[k],X=R.callback;R.once&&(_.splice(k,1),_.length===0&&delete o._events[u],S--,k--),X.apply(o,[a])}};O(p),O(d)})}},{key:"off",value:function(r,a){var o=this;return r||(this._events={}),r.split(",").forEach(function(u){if(a){for(var p=o._events[u]||[],d=p.length,O=0;O<d;O++)p[O].callback===a&&(p.splice(O,1),d--,O--);p.length===0&&delete o._events[u]}else delete o._events[u]}),this}},{key:"getEvents",value:function(){return this._events}}])&&jb(t.prototype,n),e}();function Mr(e,t){return t*Math.round(e/t)||e}function bp(e,t){return e%t}function ss(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var o,u,p=[],d=!0,O=!1;try{for(a=a.call(n);!(d=(o=a.next()).done)&&(p.push(o.value),!r||p.length!==r);d=!0);}catch(_){O=!0,u=_}finally{try{d||a.return==null||a.return()}finally{if(O)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return mp(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return mp(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function mp(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var cs,ls=function(e,t,n){var r=ss(e,2),a=r[0],o=r[1],u=ss(t,2),p=u[0],d=u[1],O=ss(n,2),_=O[0],S=O[1];return a>p&&a<_&&o>d&&o<S},Op=function(e,t){var n=!1;switch(t.multipleSelectKey){case"meta":n=e.metaKey;break;case"alt":n=e.altKey;break;case"shift":n=e.shiftKey;break;case"ctrl":n=e.ctrlKey;break;default:n=!1}return n},Ab=(i(78),i(161),i(125),i(79),i(30),i(12),i(13),i(14),i(47),new Uint8Array(16));function kb(){if(!cs&&!(cs=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return cs(Ab)}for(var Tb=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Mb=function(e){return typeof e=="string"&&Tb.test(e)},en=[],fs=0;fs<256;++fs)en.push((fs+256).toString(16).substr(1));var Db=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(en[e[t+0]]+en[e[t+1]]+en[e[t+2]]+en[e[t+3]]+"-"+en[e[t+4]]+en[e[t+5]]+"-"+en[e[t+6]]+en[e[t+7]]+"-"+en[e[t+8]]+en[e[t+9]]+"-"+en[e[t+10]]+en[e[t+11]]+en[e[t+12]]+en[e[t+13]]+en[e[t+14]]+en[e[t+15]]).toLowerCase();if(!Mb(n))throw TypeError("Stringified UUID is invalid");return n},ps=function(e,t,n){var r=(e=e||{}).random||(e.rng||kb)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var a=0;a<16;++a)t[n+a]=r[a];return t}return Db(r)},Dr=function(){return ps()},Nb=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",n=e.nodes.reduce(function(r,a){return r[a.id]=t+ps(),a.id=r[a.id],r},{});return e.edges.forEach(function(r){r.id=t+ps(),r.sourceNodeId=n[r.sourceNodeId],r.targetNodeId=n[r.targetNodeId]}),e},ni=(i(104),i(162),function(e,t,n){var r=e.x,a=e.y;return(r-t.x)*(r-n.x)<=0&&(a-t.y)*(a-n.y)<=0});function ds(e){return ds=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ds(e)}function _p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function wp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_p(Object(n),!0).forEach(function(r){Cb(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_p(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Cb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Oe,xp,Ep,Sp,jp,Pp,Ap,kp,Tp,Mp,Dp,Np,Cp,Rp,Ip,Lp,zp,Bp,Fp,Up,Hp,hs=function(e){return e.anchors},da=function(e,t){for(var n,r=t.nodes,a=r.length-1;a>=0;a--){var o=r[a];if(Ib(e,o)){var u=o.getTargetAnchor(e);if(u){var p={node:o,anchorIndex:u.index,anchor:u.anchor};n&&!Rb(o,n.node,t)||(n=p)}}}return n},Rb=function(e,t,n){return e.zIndex>t.zIndex||n.nodesMap[e.id].index>n.nodesMap[t.id].index},Jn=function(e,t,n,r){return Math.hypot(e-n,t-r)},Nr=function(e,t){var n=!1,r=jn(t);return e.x>=r.minX-0&&e.x<=r.maxX+0&&e.y>=r.minY-0&&e.y<=r.maxY+0&&(n=!0),n},Ib=function(e,t){var n=!1,r=jn(t);return e.x>=r.minX-5&&e.x<=r.maxX+5&&e.y>=r.minY-5&&e.y<=r.maxY+5&&(n=!0),n},jn=function(e){var t=e.x,n=e.y,r=e.width,a=e.height;return{minX:t-r/2,minY:n-a/2,maxX:t+r/2,maxY:n+a/2,x:t,y:n,width:r,height:a,centerX:t,centerY:n}},Gp=function(e,t,n){var r,a=function(u){var p=u,d=p.x,O=p.y,_=p.width,S=p.height,k=p.radius;return[{x:d-_/2+k,y:O-S/2+k,r:k},{x:d+_/2-k,y:O-S/2+k,r:k},{x:d-_/2+k,y:O+S/2-k,r:k},{x:d+_/2-k,y:O+S/2-k,r:k}]}(n),o=Number.MAX_SAFE_INTEGER;return a.forEach(function(u){var p=Jn(e.x,e.y,u.x,u.y);p<o&&(o=p,r=u)}),ys(e,t,r)},ys=function(e,t,n){var r,a=n,o=a.x,u=a.y,p=a.r;if(t===Tt.HORIZONTAL){var d=o-Math.sqrt(p*p-(e.y-u)*(e.y-u)),O=o+Math.sqrt(p*p-(e.y-u)*(e.y-u));r={x:Math.abs(d-e.x)<Math.abs(O-e.x)?d:O,y:e.y}}else if(t===Tt.VERTICAL){var _=u-Math.sqrt(p*p-(e.x-o)*(e.x-o)),S=u+Math.sqrt(p*p-(e.x-o)*(e.x-o)),k=Math.abs(_-e.y)<Math.abs(S-e.y)?_:S;r={x:e.x,y:k}}return r},Xp=function(e,t){var n=t,r=!1,a=n.x-n.width/2+n.radius,o=n.x+n.width/2-n.radius,u=n.y-n.height/2+n.radius,p=n.y+n.height/2-n.radius,d=n.x,O=n.y,_=n.width,S=n.height;return e.y===O+S/2||e.y===O-S/2?r=e.x>a&&e.x<o:e.x!==d+_/2&&e.x!==d-_/2||(r=e.y>u&&e.y<p),r},Yp=function(e,t,n){var r,a=n,o=a.x,u=a.y,p=a.rx,d=a.ry;if(t===Tt.HORIZONTAL){var O=o-Math.sqrt(p*p-(e.y-u)*(e.y-u)*p*p/(d*d)),_=o+Math.sqrt(p*p-(e.y-u)*(e.y-u)*p*p/(d*d));r={x:Math.abs(O-e.x)<Math.abs(_-e.x)?O:_,y:e.y}}else if(t===Tt.VERTICAL){var S=u-Math.sqrt(d*d-(e.x-o)*(e.x-o)*d*d/(p*p)),k=u+Math.sqrt(d*d-(e.x-o)*(e.x-o)*d*d/(p*p)),R=Math.abs(S-e.y)<Math.abs(k-e.y)?S:k;r={x:e.x,y:R}}return r},Vp=function(e,t,n){for(var r,a=n.pointsPosition,o=Number.MAX_SAFE_INTEGER,u=[],p=0;p<a.length;p++)u.push({start:a[p],end:a[(p+1)%a.length]});return u.forEach(function(d){var O=d.start,_=d.end,S=O,k=_;O.x>_.x&&(S=_,k=O);var R={x:e.x,y:e.y};if(S.x===k.x&&t===Tt.HORIZONTAL&&(R={x:S.x,y:e.y}),S.y===k.y&&t===Tt.VERTICAL&&(R={x:e.x,y:S.y}),S.x!==k.x&&S.y!==k.y){var X=(k.y-S.y)/(k.x-S.x),W=(S.x*k.y-k.x*S.y)/(S.x-k.x);t===Tt.HORIZONTAL?R={x:(e.y-W)/X,y:e.y}:t===Tt.VERTICAL&&(R={x:e.x,y:X*e.x+W})}if(ni(R,O,_)){var oe=Jn(R.x,R.y,e.x,e.y);oe<o&&(o=oe,r=R)}}),r},Wp=function(e,t,n,r){var a=e.x,o=e.y;return t.x>e.x?a=e.x+n/2:t.x<e.x&&(a=e.x-n/2),t.y>e.y?o=e.y+r/2:t.y<e.y&&(o=e.y-r/2),{x:a,y:o}},Kp=function(e){var t=e.rows,n=e.style,r=e.rowsLength,a=e.className,o=document.createElement("div");o.style.fontSize=n.fontSize,o.style.width=n.width,o.className=a,o.style.lineHeight=n.lineHeight,o.style.padding=n.padding,n.fontFamily&&(o.style.fontFamily=n.fontFamily),r>1?t.forEach(function(p){var d=document.createElement("div");d.textContent=p,o.appendChild(d)}):o.textContent=t,document.body.appendChild(o);var u=o.clientHeight;return document.body.removeChild(o),u},gs=function(e){var t=e.rows,n=e.rowsLength,r=e.fontSize,a=0;return t&&t.forEach(function(o){var u=vd(o);a=u>a?u:a}),{width:Math.ceil(a/2)*r+r/4,height:n*(r+2)+r/4}},ri=function(e){return ds(e)!=="object"?{isAllPass:!!e,msg:e?"":"不允许连接"}:e},nn=function(e){try{return JSON.parse(JSON.stringify(e))}catch(t){return e}},Lb=1e3,zb=999,vs=function(){return++Lb};function Zp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function vn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Zp(Object(n),!0).forEach(function(r){Cn(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zp(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Xt(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function Bb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Cn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qe(e,t,n,r,a){var o={};return Object.keys(r).forEach(function(u){o[u]=r[u]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(u,p){return p(e,t,u)||u},o),a&&o.initializer!==void 0&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),o.initializer===void 0&&(Object.defineProperty(e,t,o),o=null),o}var bs=(Oe=function(){function e(r,a){(function(o,u){if(!(o instanceof u))throw new TypeError("Cannot call a class as a function")})(this,e),Cn(this,"id",""),Xt(this,"type",xp,this),Xt(this,"sourceNodeId",Ep,this),Xt(this,"targetNodeId",Sp,this),Xt(this,"startPoint",jp,this),Xt(this,"endPoint",Pp,this),Xt(this,"text",Ap,this),Xt(this,"properties",kp,this),Xt(this,"points",Tp,this),Xt(this,"pointsList",Mp,this),Xt(this,"isSelected",Dp,this),Xt(this,"isHovered",Np,this),Xt(this,"isHitable",Cp,this),Xt(this,"draggable",Rp,this),Xt(this,"visible",Ip,this),Cn(this,"virtual",!1),Xt(this,"isAnimation",Lp,this),Xt(this,"isShowAdjustPoint",zp,this),Cn(this,"graphModel",void 0),Xt(this,"zIndex",Bp,this),Cn(this,"BaseType",Gt.EDGE),Cn(this,"modelType",ht.EDGE),Xt(this,"state",Fp,this),Cn(this,"additionStateData",void 0),Cn(this,"sourceAnchorId",""),Cn(this,"targetAnchorId",""),Cn(this,"menu",void 0),Cn(this,"customTextPosition",!1),Xt(this,"style",Up,this),Xt(this,"arrowConfig",Hp,this),this.graphModel=a,this.initEdgeData(r),this.setAttributes()}var t,n;return t=e,n=[{key:"initEdgeData",value:function(r){if(r.properties||(r.properties={}),!r.id){var a=this.graphModel.idGenerator,o=a&&a(r.type),u=this.createId();r.id=u||o||Dr()}this.arrowConfig.markerEnd="url(#marker-end-".concat(r.id,")"),this.arrowConfig.markerStart="url(#marker-start-".concat(r.id,")");var p=this.graphModel.editConfigModel.adjustEdgeStartAndEnd;this.isShowAdjustPoint=p,cn(this,am(r)),this.graphModel.overlapMode===Sn.INCREASE&&(this.zIndex=r.zIndex||vs()),this.setAnchors(),this.initPoints(),this.formatText(r)}},{key:"setAttributes",value:function(){}},{key:"createId",value:function(){return null}},{key:"getEdgeStyle",value:function(){return vn(vn({},this.graphModel.theme.baseEdge),this.style)}},{key:"getAdjustPointStyle",value:function(){return vn({},this.graphModel.theme.edgeAdjust)}},{key:"getTextStyle",value:function(){var r=this.graphModel.theme.edgeText;return Nt(r)}},{key:"getEdgeAnimationStyle",value:function(){var r=this.graphModel.theme.edgeAnimation;return Nt(r)}},{key:"getArrowStyle",value:function(){var r=this.getEdgeStyle(),a=this.getEdgeAnimationStyle(),o=this.graphModel.theme.arrow,u=this.isAnimation?a.stroke:r.stroke;return vn(vn({},r),{},{fill:u,stroke:u},o)}},{key:"getOutlineStyle",value:function(){var r=this.graphModel.theme.outline;return Nt(r)}},{key:"getTextPosition",value:function(){return{x:0,y:0}}},{key:"sourceNode",get:function(){var r,a;return(r=this.graphModel)===null||r===void 0||(a=r.nodesMap[this.sourceNodeId])===null||a===void 0?void 0:a.model}},{key:"targetNode",get:function(){var r,a;return(r=this.graphModel)===null||r===void 0||(a=r.nodesMap[this.targetNodeId])===null||a===void 0?void 0:a.model}},{key:"textPosition",get:function(){return this.getTextPosition()}},{key:"getBeginAnchor",value:function(r,a){var o,u;return hs(r).forEach(function(p){var d=_d(p,a);(u===void 0||d<u)&&(u=d,o=p)}),o}},{key:"getEndAnchor",value:function(r){var a,o,u=this;return hs(r).forEach(function(p){var d=_d(p,u.startPoint);(o===void 0||d<o)&&(o=d,a=p)}),a}},{key:"getProperties",value:function(){return Object(c.I)(this.properties)}},{key:"getData",value:function(){var r=this.text,a=r.x,o=r.y,u=r.value,p={id:this.id,type:this.type,sourceNodeId:this.sourceNode.id,targetNodeId:this.targetNode.id,startPoint:Object.assign({},this.startPoint),endPoint:Object.assign({},this.endPoint),properties:Object(c.I)(this.properties)};return u&&(p.text={x:a,y:o,value:u}),this.graphModel.overlapMode===Sn.INCREASE&&(p.zIndex=this.zIndex),p}},{key:"getHistoryData",value:function(){return this.getData()}},{key:"setProperty",value:function(r,a){this.properties[r]=nn(a),this.setAttributes()}},{key:"deleteProperty",value:function(r){delete this.properties[r],this.setAttributes()}},{key:"setProperties",value:function(r){this.properties=vn(vn({},Object(c.I)(this.properties)),nn(r)),this.setAttributes()}},{key:"changeEdgeId",value:function(r){var a=this.arrowConfig,o=a.markerEnd,u=a.markerStart;u&&u==="url(#marker-start-".concat(this.id,")")&&(this.arrowConfig.markerStart="url(#marker-start-".concat(r,")")),o&&o==="url(#marker-end-".concat(this.id,")")&&(this.arrowConfig.markerEnd="url(#marker-end-".concat(r,")")),this.id=r}},{key:"setStyle",value:function(r,a){this.style=vn(vn({},this.style),{},Cn({},r,nn(a)))}},{key:"setStyles",value:function(r){this.style=vn(vn({},this.style),nn(r))}},{key:"updateStyles",value:function(r){this.style=vn({},nn(r))}},{key:"formatText",value:function(r){var a=this.textPosition,o=a.x,u=a.y;r.text&&typeof r.text!="string"?Object.prototype.toString.call(r.text)==="[object Object]"&&(this.text={x:r.text.x||o,y:r.text.y||u,value:r.text.value||"",draggable:this.text.draggable,editable:this.text.editable}):this.text={value:r.text||"",x:o,y:u,draggable:this.text.draggable,editable:this.text.editable}}},{key:"resetTextPosition",value:function(){var r=this.textPosition,a=r.x,o=r.y;this.text.x=a,this.text.y=o}},{key:"moveText",value:function(r,a){if(this.text){var o=this.text,u=o.x,p=o.y,d=o.value,O=o.draggable,_=o.editable;this.text={value:d,draggable:O,x:u+r,y:p+a,editable:_}}}},{key:"setText",value:function(r){r&&cn(this.text,r)}},{key:"updateText",value:function(r){this.text=vn(vn({},Object(c.I)(this.text)),{},{value:r})}},{key:"setAnchors",value:function(){if(!this.sourceAnchorId||!this.startPoint){var r=this.getBeginAnchor(this.sourceNode,this.targetNode);this.startPoint||(this.startPoint={x:r.x,y:r.y}),this.sourceAnchorId||(this.sourceAnchorId=r.id)}if(!this.targetAnchorId||!this.endPoint){var a=this.getEndAnchor(this.targetNode);this.endPoint||(this.endPoint={x:a.x,y:a.y}),this.targetAnchorId||(this.targetAnchorId=a.id)}}},{key:"setSelected",value:function(){var r=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isSelected=r}},{key:"setHovered",value:function(){var r=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHovered=r}},{key:"setHitable",value:function(){var r=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHitable=r}},{key:"openEdgeAnimation",value:function(){this.isAnimation=!0}},{key:"closeEdgeAnimation",value:function(){this.isAnimation=!1}},{key:"setElementState",value:function(r,a){this.state=r,this.additionStateData=a}},{key:"updateStartPoint",value:function(r){this.startPoint=r}},{key:"moveStartPoint",value:function(r,a){this.startPoint.x+=r,this.startPoint.y+=a}},{key:"updateEndPoint",value:function(r){this.endPoint=r}},{key:"moveEndPoint",value:function(r,a){this.endPoint.x+=r,this.endPoint.y+=a}},{key:"setZIndex",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.zIndex=r}},{key:"initPoints",value:function(){}},{key:"updateAttributes",value:function(r){cn(this,r)}},{key:"getAdjustStart",value:function(){return this.startPoint}},{key:"getAdjustEnd",value:function(){return this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(r){var a=r.startPoint,o=r.endPoint;this.updateStartPoint({x:a.x,y:a.y}),this.updateEndPoint({x:o.x,y:o.y})}}],n&&Bb(t.prototype,n),e}(),xp=Qe(Oe.prototype,"type",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ep=Qe(Oe.prototype,"sourceNodeId",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Sp=Qe(Oe.prototype,"targetNodeId",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),jp=Qe(Oe.prototype,"startPoint",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Pp=Qe(Oe.prototype,"endPoint",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ap=Qe(Oe.prototype,"text",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{value:"",x:0,y:0,draggable:!1,editable:!0}}}),kp=Qe(Oe.prototype,"properties",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Tp=Qe(Oe.prototype,"points",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Mp=Qe(Oe.prototype,"pointsList",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Dp=Qe(Oe.prototype,"isSelected",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Np=Qe(Oe.prototype,"isHovered",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Cp=Qe(Oe.prototype,"isHitable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Rp=Qe(Oe.prototype,"draggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ip=Qe(Oe.prototype,"visible",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Lp=Qe(Oe.prototype,"isAnimation",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),zp=Qe(Oe.prototype,"isShowAdjustPoint",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Bp=Qe(Oe.prototype,"zIndex",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Fp=Qe(Oe.prototype,"state",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Up=Qe(Oe.prototype,"style",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Hp=Qe(Oe.prototype,"arrowConfig",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{markerEnd:"url(#marker-end-".concat(this.id,")"),markerStart:"url(#marker-start-".concat(this.id,")")}}}),Qe(Oe.prototype,"sourceNode",[c.m],Object.getOwnPropertyDescriptor(Oe.prototype,"sourceNode"),Oe.prototype),Qe(Oe.prototype,"targetNode",[c.m],Object.getOwnPropertyDescriptor(Oe.prototype,"targetNode"),Oe.prototype),Qe(Oe.prototype,"textPosition",[c.m],Object.getOwnPropertyDescriptor(Oe.prototype,"textPosition"),Oe.prototype),Qe(Oe.prototype,"setProperty",[c.k],Object.getOwnPropertyDescriptor(Oe.prototype,"setProperty"),Oe.prototype),Qe(Oe.prototype,"deleteProperty",[c.k],Object.getOwnPropertyDescriptor(Oe.prototype,"deleteProperty"),Oe.prototype),Qe(Oe.prototype,"setProperties",[c.k],Object.getOwnPropertyDescriptor(Oe.prototype,"setProperties"),Oe.prototype),Qe(Oe.prototype,"changeEdgeId",[c.k],Object.getOwnPropertyDescriptor(Oe.prototype,"changeEdgeId"),Oe.prototype),Qe(Oe.prototype,"setStyle",[c.k],Object.getOwnPropertyDescriptor(Oe.prototype,"setStyle"),Oe.prototype),Qe(Oe.prototype,"setStyles",[c.k],Object.getOwnPropertyDescriptor(Oe.prototype,"setStyles"),Oe.prototype),Qe(Oe.prototype,"updateStyles",[c.k],Object.getOwnPropertyDescriptor(Oe.prototype,"updateStyles"),Oe.prototype),Qe(Oe.prototype,"formatText",[c.k],Object.getOwnPropertyDescriptor(Oe.prototype,"formatText"),Oe.prototype),Qe(Oe.prototype,"resetTextPosition",[c.k],Object.getOwnPropertyDescriptor(Oe.prototype,"resetTextPosition"),Oe.prototype),Qe(Oe.prototype,"moveText",[c.k],Object.getOwnPropertyDescriptor(Oe.prototype,"moveText"),Oe.prototype),Qe(Oe.prototype,"setText",[c.k],Object.getOwnPropertyDescriptor(Oe.prototype,"setText"),Oe.prototype),Qe(Oe.prototype,"updateText",[c.k],Object.getOwnPropertyDescriptor(Oe.prototype,"updateText"),Oe.prototype),Qe(Oe.prototype,"setAnchors",[c.k],Object.getOwnPropertyDescriptor(Oe.prototype,"setAnchors"),Oe.prototype),Qe(Oe.prototype,"setSelected",[c.k],Object.getOwnPropertyDescriptor(Oe.prototype,"setSelected"),Oe.prototype),Qe(Oe.prototype,"setHovered",[c.k],Object.getOwnPropertyDescriptor(Oe.prototype,"setHovered"),Oe.prototype),Qe(Oe.prototype,"setHitable",[c.k],Object.getOwnPropertyDescriptor(Oe.prototype,"setHitable"),Oe.prototype),Qe(Oe.prototype,"openEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(Oe.prototype,"openEdgeAnimation"),Oe.prototype),Qe(Oe.prototype,"closeEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(Oe.prototype,"closeEdgeAnimation"),Oe.prototype),Qe(Oe.prototype,"setElementState",[c.k],Object.getOwnPropertyDescriptor(Oe.prototype,"setElementState"),Oe.prototype),Qe(Oe.prototype,"updateStartPoint",[c.k],Object.getOwnPropertyDescriptor(Oe.prototype,"updateStartPoint"),Oe.prototype),Qe(Oe.prototype,"moveStartPoint",[c.k],Object.getOwnPropertyDescriptor(Oe.prototype,"moveStartPoint"),Oe.prototype),Qe(Oe.prototype,"updateEndPoint",[c.k],Object.getOwnPropertyDescriptor(Oe.prototype,"updateEndPoint"),Oe.prototype),Qe(Oe.prototype,"moveEndPoint",[c.k],Object.getOwnPropertyDescriptor(Oe.prototype,"moveEndPoint"),Oe.prototype),Qe(Oe.prototype,"setZIndex",[c.k],Object.getOwnPropertyDescriptor(Oe.prototype,"setZIndex"),Oe.prototype),Qe(Oe.prototype,"initPoints",[c.k],Object.getOwnPropertyDescriptor(Oe.prototype,"initPoints"),Oe.prototype),Qe(Oe.prototype,"updateAttributes",[c.k],Object.getOwnPropertyDescriptor(Oe.prototype,"updateAttributes"),Oe.prototype),Qe(Oe.prototype,"getAdjustStart",[c.k],Object.getOwnPropertyDescriptor(Oe.prototype,"getAdjustStart"),Oe.prototype),Qe(Oe.prototype,"getAdjustEnd",[c.k],Object.getOwnPropertyDescriptor(Oe.prototype,"getAdjustEnd"),Oe.prototype),Qe(Oe.prototype,"updateAfterAdjustStartAndEnd",[c.k],Object.getOwnPropertyDescriptor(Oe.prototype,"updateAfterAdjustStartAndEnd"),Oe.prototype),Oe),ms=bs;function Os(e){return Os=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Os(e)}function qp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Jp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qp(Object(n),!0).forEach(function(r){Qp(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qp(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Fb(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ub(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _s(){return _s=typeof Reflect!="undefined"&&Reflect.get?Reflect.get:function(e,t,n){var r=Hb(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},_s.apply(this,arguments)}function Hb(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=mo(e))!==null;);return e}function ws(e,t){return ws=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},ws(e,t)}function Gb(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=mo(e);if(t){var a=mo(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Xb(this,n)}}function Xb(e,t){if(t&&(Os(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $p(e)}function $p(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mo(e){return mo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},mo(e)}function Qp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var st,ed,xs=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&ws(o,u)})(a,e);var t,n,r=Gb(a);function a(){var o;Fb(this,a);for(var u=arguments.length,p=new Array(u),d=0;d<u;d++)p[d]=arguments[d];return Qp($p(o=r.call.apply(r,[this].concat(p))),"modelType",ht.LINE_EDGE),o}return t=a,(n=[{key:"getEdgeStyle",value:function(){var o=this.graphModel.theme.line;return Jp(Jp({},_s(mo(a.prototype),"getEdgeStyle",this).call(this)),Nt(o))}},{key:"getTextPosition",value:function(){return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}}}])&&Ub(t.prototype,n),a}(ms);function Es(e){return Es=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Es(e)}function Yb(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var o,u,p=[],d=!0,O=!1;try{for(a=a.call(n);!(d=(o=a.next()).done)&&(p.push(o.value),!r||p.length!==r);d=!0);}catch(_){O=!0,u=_}finally{try{d||a.return==null||a.return()}finally{if(O)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return td(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return td(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function td(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function nd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function rd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?nd(Object(n),!0).forEach(function(r){js(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Vb(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function Wb(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Kb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oi(){return oi=typeof Reflect!="undefined"&&Reflect.get?Reflect.get:function(e,t,n){var r=Zb(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},oi.apply(this,arguments)}function Zb(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Cr(e))!==null;);return e}function Ss(e,t){return Ss=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Ss(e,t)}function qb(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=Cr(e);if(t){var a=Cr(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Jb(this,n)}}function Jb(e,t){if(t&&(Es(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ii(e)}function ii(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Cr(e){return Cr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Cr(e)}function js(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ln(e,t,n,r,a){var o={};return Object.keys(r).forEach(function(u){o[u]=r[u]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(u,p){return p(e,t,u)||u},o),a&&o.initializer!==void 0&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),o.initializer===void 0&&(Object.defineProperty(e,t,o),o=null),o}var Ps=(st=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&Ss(o,u)})(a,e);var t,n,r=qb(a);function a(){var o;Wb(this,a);for(var u=arguments.length,p=new Array(u),d=0;d<u;d++)p[d]=arguments[d];return js(ii(o=r.call.apply(r,[this].concat(p))),"modelType",ht.POLYLINE_EDGE),js(ii(o),"draggingPointList",void 0),Vb(ii(o),"dbClickPosition",ed,ii(o)),o}return t=a,(n=[{key:"initEdgeData",value:function(o){this.offset=30,oi(Cr(a.prototype),"initEdgeData",this).call(this,o)}},{key:"getEdgeStyle",value:function(){var o=this.graphModel.theme.polyline;return rd(rd({},oi(Cr(a.prototype),"getEdgeStyle",this).call(this)),Nt(o))}},{key:"getTextPosition",value:function(){var o,u=(o=this.text)===null||o===void 0?void 0:o.value;if(this.dbClickPosition&&!u){var p=this.dbClickPosition;return{x:p.x,y:p.y}}var d=eo(this.points),O=Yb(om(d),2),_=O[0],S=O[1];return{x:(_.x+S.x)/2,y:(_.y+S.y)/2}}},{key:"getAfterAnchor",value:function(o,u,p){var d,O;return p.forEach(function(_){var S;o===Tt.HORIZONTAL?S=Math.abs(u.y-_.y):o===Tt.VERTICAL&&(S=Math.abs(u.x-_.x)),(!O||O>S)&&(O=S,d=_)}),d}},{key:"getCrossPoint",value:function(o,u,p){var d;return o===Tt.HORIZONTAL?d={x:p.x,y:u.y}:o===Tt.VERTICAL&&(d={x:u.x,y:p.y}),d}},{key:"removeCrossPoints",value:function(o,u,p){var d=p.map(function(re){return re});if(o===1){var O=d[o],_=d[u],S=d[o-1];if(dd(S,O,this.sourceNode)){if(hd(O,_,this.sourceNode)){var k=yd(O,_,this.sourceNode);k&&(d[o]=k,d.splice(o-1,1),o--,u--)}}else this.sourceNode.anchors.forEach(function(re){(re.x===S.x&&re.x===O.x||re.y===S.y&&re.y===O.y)&&Jn(re.x,re.y,O.x,O.y)<Jn(S.x,S.y,O.x,O.y)&&(d[o-1]=re)})}if(u===p.length-2){var R=d[o],X=d[u],W=d[u+1];if(dd(X,W,this.targetNode)){if(hd(R,X,this.targetNode)){var oe=yd(R,X,this.targetNode);oe&&(d[u]=oe,d.splice(u+1,1))}}else this.targetNode.anchors.forEach(function(re){(re.x===W.x&&re.x===X.x||re.y===W.y&&re.y===X.y)&&Jn(re.x,re.y,X.x,X.y)<Jn(W.x,W.y,X.x,X.y)&&(d[u+1]=re)})}return d}},{key:"getDraggingPoints",value:function(o,u,p,d,O){var _=O.map(function(R){return R}),S=this.getAfterAnchor(o,p,d),k=this.getCrossPoint(o,p,S);return u==="start"?(_.unshift(k),_.unshift(S)):(_.push(k),_.push(S)),_}},{key:"updateCrossPoints",value:function(o){var u=o.map(function(me){return me}),p=o[0],d=o[1],O=o[u.length-2],_=o[u.length-1],S=this.sourceNode,k=this.targetNode,R=S.modelType,X=k.modelType,W=Oa(p,d),oe=u[0];switch(R){case ht.RECT_NODE:S.radius!==0&&(Xp(p,S)||(oe=Gp(p,W,S)));break;case ht.CIRCLE_NODE:oe=ys(p,W,S);break;case ht.ELLIPSE_NODE:oe=Yp(p,W,S);break;case ht.DIAMOND_NODE:case ht.POLYGON_NODE:oe=Vp(p,W,S)}u[0]=oe;var re=Oa(O,_),de=u[u.length-1];switch(X){case ht.RECT_NODE:k.radius!==0&&(Xp(_,k)||(de=Gp(_,re,k)));break;case ht.CIRCLE_NODE:de=ys(_,re,k);break;case ht.ELLIPSE_NODE:de=Yp(_,re,k);break;case ht.DIAMOND_NODE:case ht.POLYGON_NODE:de=Vp(_,re,k)}return u[u.length-1]=de,u}},{key:"getData",value:function(){var o=oi(Cr(a.prototype),"getData",this).call(this),u=this.pointsList.map(function(p){return{x:p.x,y:p.y}});return Object.assign({},o,{pointsList:u})}},{key:"initPoints",value:function(){this.pointsList.length>0?this.points=this.pointsList.map(function(o){return"".concat(o.x,",").concat(o.y)}).join(" "):this.updatePoints()}},{key:"updatePoints",value:function(){var o=pd({x:this.startPoint.x,y:this.startPoint.y},{x:this.endPoint.x,y:this.endPoint.y},this.sourceNode,this.targetNode,this.offset||0);this.pointsList=o,this.points=o.map(function(u){return"".concat(u.x,",").concat(u.y)}).join(" ")}},{key:"updateStartPoint",value:function(o){this.startPoint=o,this.updatePoints()}},{key:"moveStartPoint",value:function(o,u){this.startPoint.x+=o,this.startPoint.y+=u,this.updatePoints()}},{key:"updateEndPoint",value:function(o){this.endPoint=o,this.updatePoints()}},{key:"moveEndPoint",value:function(o,u){this.endPoint.x+=o,this.endPoint.y+=u,this.updatePoints()}},{key:"dragAppendStart",value:function(){this.draggingPointList=this.pointsList.map(function(o){return o})}},{key:"dragAppendSimple",value:function(o,u){this.isDragging=!0;var p=o.start,d=o.end,O=o.startIndex,_=o.endIndex,S=o.direction,k=this.pointsList,R=k;return S===Tt.HORIZONTAL?(k[O]={x:p.x,y:p.y+u.y},k[_]={x:d.x,y:d.y+u.y},R=this.pointsList.map(function(X){return X})):S===Tt.VERTICAL&&(k[O]={x:p.x+u.x,y:p.y},k[_]={x:d.x+u.x,y:d.y},R=this.pointsList.map(function(X){return X})),this.updatePointsAfterDrag(R),this.draggingPointList=R,this.setText(Object.assign({},this.text,this.textPosition)),{start:Object.assign({},k[O]),end:Object.assign({},k[_]),startIndex:O,endIndex:_,direction:S}}},{key:"dragAppend",value:function(o,u){this.isDragging=!0;var p=o.start,d=o.end,O=o.startIndex,_=o.endIndex,S=o.direction,k=this.pointsList;if(S===Tt.HORIZONTAL){k[O]={x:p.x,y:p.y+u.y},k[_]={x:d.x,y:d.y+u.y};var R=this.pointsList.map(function(Te){return Te});if(O!==0&&_!==this.pointsList.length-1&&(R=this.removeCrossPoints(O,_,R)),O===0){var X={x:p.x,y:p.y+u.y};if(!Nr(X,this.sourceNode)){var W=this.sourceNode.anchors;R=this.getDraggingPoints(S,"start",X,W,R)}}if(_===this.pointsList.length-1){var oe={x:d.x,y:d.y+u.y};if(!Nr(oe,this.targetNode)){var re=this.targetNode.anchors;R=this.getDraggingPoints(S,"end",oe,re,R)}}this.updatePointsAfterDrag(R),this.draggingPointList=R}else if(S===Tt.VERTICAL){k[O]={x:p.x+u.x,y:p.y},k[_]={x:d.x+u.x,y:d.y};var de=this.pointsList.map(function(Te){return Te});if(O!==0&&_!==this.pointsList.length-1&&(de=this.removeCrossPoints(O,_,de)),O===0){var me={x:p.x+u.x,y:p.y};if(!Nr(me,this.sourceNode)){var ke=this.sourceNode.anchors;de=this.getDraggingPoints(S,"start",me,ke,de)}}if(_===this.pointsList.length-1){var Ee={x:d.x+u.x,y:d.y};if(!Nr(Ee,this.targetNode)){var He=this.targetNode.anchors;de=this.getDraggingPoints(S,"end",Ee,He,de)}}this.updatePointsAfterDrag(de),this.draggingPointList=de}return this.setText(Object.assign({},this.text,this.textPosition)),{start:Object.assign({},k[O]),end:Object.assign({},k[_]),startIndex:O,endIndex:_,direction:S}}},{key:"dragAppendEnd",value:function(){if(this.draggingPointList){var o=fd(eo(this.points));this.pointsList=o.map(function(d){return d}),this.draggingPointList=[];var u=o[0];this.startPoint=Object.assign({},u);var p=o[o.length-1];this.endPoint=Object.assign({},p)}this.isDragging=!1}},{key:"updatePointsAfterDrag",value:function(o){var u=this.updateCrossPoints(o);this.points=u.map(function(p){return"".concat(p.x,",").concat(p.y)}).join(" ")}},{key:"getAdjustStart",value:function(){return this.pointsList[0]||this.startPoint}},{key:"getAdjustEnd",value:function(){var o=this.pointsList;return o[o.length-1]||this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(o){var u=o.startPoint,p=o.endPoint,d=o.sourceNode,O=o.targetNode,_=pd({x:u.x,y:u.y},{x:p.x,y:p.y},d,O,this.offset||0);this.pointsList=_,this.initPoints()}}])&&Kb(t.prototype,n),a}(ms),ed=ln(st.prototype,"dbClickPosition",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ln(st.prototype,"initPoints",[c.k],Object.getOwnPropertyDescriptor(st.prototype,"initPoints"),st.prototype),ln(st.prototype,"updatePoints",[c.k],Object.getOwnPropertyDescriptor(st.prototype,"updatePoints"),st.prototype),ln(st.prototype,"updateStartPoint",[c.k],Object.getOwnPropertyDescriptor(st.prototype,"updateStartPoint"),st.prototype),ln(st.prototype,"moveStartPoint",[c.k],Object.getOwnPropertyDescriptor(st.prototype,"moveStartPoint"),st.prototype),ln(st.prototype,"updateEndPoint",[c.k],Object.getOwnPropertyDescriptor(st.prototype,"updateEndPoint"),st.prototype),ln(st.prototype,"moveEndPoint",[c.k],Object.getOwnPropertyDescriptor(st.prototype,"moveEndPoint"),st.prototype),ln(st.prototype,"dragAppendStart",[c.k],Object.getOwnPropertyDescriptor(st.prototype,"dragAppendStart"),st.prototype),ln(st.prototype,"dragAppendSimple",[c.k],Object.getOwnPropertyDescriptor(st.prototype,"dragAppendSimple"),st.prototype),ln(st.prototype,"dragAppend",[c.k],Object.getOwnPropertyDescriptor(st.prototype,"dragAppend"),st.prototype),ln(st.prototype,"dragAppendEnd",[c.k],Object.getOwnPropertyDescriptor(st.prototype,"dragAppendEnd"),st.prototype),ln(st.prototype,"updatePointsAfterDrag",[c.k],Object.getOwnPropertyDescriptor(st.prototype,"updatePointsAfterDrag"),st.prototype),ln(st.prototype,"getAdjustStart",[c.k],Object.getOwnPropertyDescriptor(st.prototype,"getAdjustStart"),st.prototype),ln(st.prototype,"getAdjustEnd",[c.k],Object.getOwnPropertyDescriptor(st.prototype,"getAdjustEnd"),st.prototype),ln(st.prototype,"updateAfterAdjustStartAndEnd",[c.k],Object.getOwnPropertyDescriptor(st.prototype,"updateAfterAdjustStartAndEnd"),st.prototype),st),ai=function(e){var t=e.start,n=e.end,r=e.offset,a=e.verticalLength,o=e.type,u={leftX:0,leftY:0,rightX:0,rightY:0},p=Math.atan((n.y-t.y)/(n.x-t.x)),d=Math.atan(r/a),O=Math.sqrt(a*a+r*r);return o==="start"?n.x>=t.x?(u.leftX=t.x+O*Math.sin(p+d),u.leftY=t.y-O*Math.cos(p+d),u.rightX=t.x-O*Math.sin(p-d),u.rightY=t.y+O*Math.cos(p-d)):(u.leftX=t.x-O*Math.sin(p+d),u.leftY=t.y+O*Math.cos(p+d),u.rightX=t.x+O*Math.sin(p-d),u.rightY=t.y-O*Math.cos(p-d)):o==="end"&&(n.x>=t.x?(u.leftX=n.x+O*Math.sin(p-d),u.leftY=n.y-O*Math.cos(p-d),u.rightX=n.x-O*Math.sin(p+d),u.rightY=n.y+O*Math.cos(p+d)):(u.leftX=n.x-O*Math.sin(p-d),u.leftY=n.y+O*Math.cos(p-d),u.rightX=n.x+O*Math.sin(p+d),u.rightY=n.y-O*Math.cos(p+d))),u},$b={x:1,y:0,z:0};function od(e){var t=Math.hypot(e.x,e.y);return{x:e.x/t,y:e.y/t,z:0}}function Qb(e){return r=function(o,u){return o.x*u.y-o.y*u.x}(t=$b,n=e),a=Math.acos(function(o,u){var p=[o.x,o.y,o.z];return[u.x,u.y,u.z].reduce(function(d,O,_){return d+O*p[_]})}(od(t),od(n))),r>=0?a:-a;var t,n,r,a}function id(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function ha(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?id(Object(n),!0).forEach(function(r){em(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):id(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function em(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tm(e){return function(t){if(Array.isArray(t))return ks(t)}(e)||function(t){if(typeof Symbol!="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||ad(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function As(e){return As=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},As(e)}function ya(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var o,u,p=[],d=!0,O=!1;try{for(a=a.call(n);!(d=(o=a.next()).done)&&(p.push(o.value),!r||p.length!==r);d=!0);}catch(_){O=!0,u=_}finally{try{d||a.return==null||a.return()}finally{if(O)throw u}}return p}}(e,t)||ad(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ad(e,t){if(e){if(typeof e=="string")return ks(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ks(e,t):void 0}}function ks(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ts=function(e){var t=[],n={};return e.forEach(function(r){var a="".concat(r.x,"-").concat(r.y);r.id=a,n[a]=r}),Object.keys(n).forEach(function(r){t.push(n[r])}),t},ga=function(e,t){return e.width===0&&e.height===0?e:{centerX:e.centerX,centerY:e.centerY,minX:e.minX-t,minY:e.minY-t,maxX:e.maxX+t,maxY:e.maxY+t,height:e.height+2*t,width:e.width+2*t}},va=function(e,t,n){var r=function(a,o){var u=Math.abs(a.x-o.centerX),p=Math.abs(a.y-o.centerY);return u/o.width>p/o.height?Tt.HORIZONTAL:Tt.VERTICAL}(n,t);return r===Tt.HORIZONTAL?{x:n.x>e.centerX?e.maxX:e.minX,y:n.y}:{x:n.x,y:n.y>e.centerY?e.maxY:e.minY}},ud=function(e,t){var n=Math.min(e.minX,t.minX),r=Math.min(e.minY,t.minY),a=Math.max(e.maxX,t.maxX),o=Math.max(e.maxY,t.maxY);return{centerX:(n+a)/2,centerY:(r+o)/2,minX:n,minY:r,maxX:a,maxY:o,height:o-r,width:a-n}},ui=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=[],r=[];e.forEach(function(_){n.push(_.x),r.push(_.y)});var a=Math.min.apply(Math,n),o=Math.max.apply(Math,n),u=Math.min.apply(Math,r),p=Math.max.apply(Math,r),d=o-a,O=p-u;return t&&(d+=t,O+=t),{centerX:(a+o)/2,centerY:(u+p)/2,maxX:o,maxY:p,minX:a,minY:u,x:(a+o)/2,y:(u+p)/2,height:O,width:d}},ba=function(e){var t=e.minX,n=e.minY,r=e.maxX,a=e.maxY;return[{x:t,y:n},{x:r,y:n},{x:r,y:a},{x:t,y:a}]},ma=function(e,t){var n=e.x,r=e.y;return n<t.minX||n>t.maxX||r<t.minY||r>t.maxY},Ms=function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},sd=function(e,t,n,r,a){return Ms(e,t)+Ms(e,n)+function(o,u){var p=0;return u.forEach(function(d){d&&(o.x===d.x&&(p+=-2),o.y===d.y&&(p+=-2))}),p}(e,[t,n,r,a])},nm=function e(t,n,r,a,o){o||(o=0),t.unshift(n[a]),r[a]&&r[a]!==a&&o<=100&&e(t,n,r,r[a],o+1)},si=function(e,t,n,r){var a=t.x-e.x,o=t.y-e.y,u=r.x-n.x,p=r.y-n.y,d=(-o*(e.x-n.x)+a*(e.y-n.y))/(-u*o+a*p),O=(u*(e.y-n.y)-p*(e.x-n.x))/(-u*o+a*p);return d>=0&&d<=1&&O>=0&&O<=1},cd=function(e,t,n){if(n.width===0&&n.height===0)return!1;var r=ya(ba(n),4),a=r[0],o=r[1],u=r[2],p=r[3];return si(e,t,a,o)||si(e,t,a,p)||si(e,t,o,u)||si(e,t,u,p)},rm=function(e,t,n,r,a,o,u){var p=[],d=[t],O={},_={},S={};_[t.id]=0,S[t.id]=sd(t,n,t);var k={};e.forEach(function(W){k[W.id]=W});for(var R=function(){var W,oe,re,de=void 0,me=1/0;if(d.forEach(function(Ee){S[Ee.id]<me&&(me=S[Ee.id],de=Ee)}),de===n){var ke=[];return nm(ke,k,O,n.id),{v:ke}}oe=de,(re=(W=d).indexOf(oe))>-1&&W.splice(re,1),p.push(de),function(Ee,He,Te,Be){var Re=[];return Ee.forEach(function(lt){lt!==He&&(lt.x!==He.x&&lt.y!==He.y||cd(lt,He,Te)||cd(lt,He,Be)||Re.push(lt))}),Ts(Re)}(e,de,r,a).forEach(function(Ee){if(p.indexOf(Ee)===-1){d.indexOf(Ee)===-1&&d.push(Ee);var He=S[de.id]+Ms(de,Ee);_[Ee.id]&&He>=_[Ee.id]||(O[Ee.id]=de.id,_[Ee.id]=He,S[Ee.id]=_[Ee.id]+sd(Ee,n,t,o,u))}})};d.length;){var X=R();if(As(X)==="object")return X.v}return[t,n]},ld=function(e){return jn(e)},fd=function(e){for(var t=1;t<e.length-1;){var n=e[t-1],r=e[t],a=e[t+1];n.x===r.x&&r.x===a.x||n.y===r.y&&r.y===a.y?e.splice(t,1):t++}return e},pd=function(e,t,n,r,a){var o,u,p=ld(n),d=ld(r),O=ga(p,a),_=ga(d,a),S=va(O,p,e),k=va(_,d,t);if(o=O,u=_,2*Math.abs(o.centerX-u.centerX)<o.width+u.width&&2*Math.abs(o.centerY-u.centerY)<o.height+u.height){var R=im(e,t,S,k);return[e,S].concat(tm(R),[k,t])}var X=ui([S,k]),W=ud(O,X),oe=ud(_,X),re=[];re=(re=re.concat(ba(W))).concat(ba(oe));var de={x:(e.x+t.x)/2,y:(e.y+t.y)/2};[X,W,oe].forEach(function(ke){re=re.concat(function(Ee,He){return function(Te,Be){return Be<Te.minX||Be>Te.maxX?[]:[{x:Be,y:Te.minY},{x:Be,y:Te.maxY}]}(Ee,He.x).concat(function(Te,Be){return Be<Te.minY||Be>Te.maxY?[]:[{x:Te.minX,y:Be},{x:Te.maxX,y:Be}]}(Ee,He.y))}(ke,de).filter(function(Ee){return ma(Ee,O)&&ma(Ee,_)}))}),[{x:S.x,y:k.y},{x:k.x,y:S.y}].forEach(function(ke){ma(ke,O)&&ma(ke,_)&&re.push(ke)}),re.unshift(S),re.push(k),re=Ts(re);var me=rm(re,S,k,p,d,e,t);return me.unshift(e),me.push(t),me.length>2&&(me=fd(me)),Ts(me)},om=function(e){var t;if(e.length===1)t=[e[0],e[0]];else if(e.length>=2){for(var n=e[0],r=e[1],a=Jn(n.x,n.y,r.x,r.y),o=1;o<e.length-1;o++){var u=e[o],p=e[o+1],d=Jn(u.x,u.y,p.x,p.y);d>a&&(a=d,n=u,r=p)}t=[n,r]}return t},dd=function(e,t,n){var r=Nr(e,n),a=Nr(t,n);return r&&a},hd=function(e,t,n){var r=Nr(e,n),a=Nr(t,n);return!(r&&a)&&(r||a)},yd=function(e,t,n){for(var r,a,o=jn(n),u=ba(o),p=0;p<u.length;p++)si(e,t,u[p],u[(p+1)%u.length])&&(a=[u[p],u[(p+1)%u.length]]);return a&&(r=function(d,O,_,S){var k=(O.y-d.y)*(S.x-_.x)-(d.x-O.x)*(_.y-S.y);if(k===0)return!1;var R=((O.x-d.x)*(S.x-_.x)*(_.y-d.y)+(O.y-d.y)*(S.x-_.x)*d.x-(S.y-_.y)*(O.x-d.x)*_.x)/k,X=-((O.y-d.y)*(S.y-_.y)*(_.x-d.x)+(O.x-d.x)*(S.y-_.y)*d.y-(S.x-_.x)*(O.y-d.y)*_.y)/k;return(R-d.x)*(R-O.x)<=0&&(X-d.y)*(X-O.y)<=0&&(R-_.x)*(R-S.x)<=0&&(X-_.y)*(X-S.y)<=0&&{x:R,y:X}}(e,t,a[0],a[1])),r},Oa=function(e,t){var n;return e.x===t.x?n=Tt.VERTICAL:e.y===t.y&&(n=Tt.HORIZONTAL),n},eo=function(e){var t=e.split(" "),n=[];return t&&t.forEach(function(r){var a=ya(r.split(","),2),o=a[0],u=a[1];n.push({x:Number(o),y:Number(u)})}),n},im=function(e,t,n,r){var a=[];if(Oa(e,n)===Oa(t,r))e.y===n.y?(a.push({x:n.x,y:(n.y+r.y)/2}),a.push({x:r.x,y:(n.y+r.y)/2})):(a.push({x:(n.x+r.x)/2,y:n.y}),a.push({x:(n.x+r.x)/2,y:r.y}));else{var o={x:n.x,y:r.y},u=ni(o,e,n),p=ni(o,t,r);if(u||p)o={x:r.x,y:n.y};else{var d=gd(o,e,n),O=gd(o,t,r);d&&O&&(o={x:r.x,y:n.y})}a.push(o)}return a},gd=function(e,t,n){return e.x===t.x&&e.x===n.x||e.y===t.y&&e.y===n.y},vd=function(e){if(!e)return 0;for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);e.match(/[A-Z]/)?t+=1.5:t+=r>=1&&r<=126||r>=65376&&r<=65439?1:2}return t},bd=function(e){var t=e.start,n=e.end,r=e.sourceNode,a=e.targetNode,o=e.offset,u=jn(r),p=jn(a),d=ga(u,o),O=ga(p,o);return{sNext:va(d,u,t),ePre:va(O,p,n)}},_a=function(e){var t=e.replace(/M/g,"").replace(/C/g,",").split(",");return[wa(t[0]),wa(t[1]),wa(t[2]),wa(t[3])]},wa=function(e){var t=ya(e.replace(/(^\s*)/g,"").split(" "),2);return{x:+t[0],y:+t[1]}},md=function(e){var t=_a(e),n=ya(t,4),r=function(a,o,u,p){return function(d){if(d<0||d>1)throw new RangeError('The value range of parameter "t" is [0,1]');return{x:a.x*Math.pow(1-d,3)+3*o.x*d*Math.pow(1-d,2)+3*u.x*Math.pow(d,2)*(1-d)+p.x*Math.pow(d,3),y:a.y*Math.pow(1-d,3)+3*o.y*d*Math.pow(1-d,2)+3*u.y*Math.pow(d,2)*(1-d)+p.y*Math.pow(d,3)}}(.95)}(n[0],n[1],n[2],n[3]);return[r,t[3]]},Od=function(e,t){for(var n,r=e.x,a=e.y,o=eo(t),u=Number.MAX_SAFE_INTEGER,p=[],d=0;d<o.length;d++)p.push({start:o[d],end:o[(d+1)%o.length]});if(p.forEach(function(k){var R=k.start,X=k.end;if(R.x===X.x){var W={x:R.x,y:a};if(ni(W,R,X)){var oe=Math.abs(R.x-r);oe<u&&(u=oe,n=W)}}else if(R.y===X.y){var re={x:r,y:R.y};if(ni(re,R,X)){var de=Math.abs(R.y-a);de<u&&(u=de,n=re)}}}),!n){var O=p[0],_=O.start,S=O.end;n={x:_.x+(S.x-_.x)/2,y:_.y+(S.y-_.y)/2}}return n},am=function(e){return ei(e,["id","type","sourceNodeId","sourceAnchorId","targetNodeId","targetAnchorId","pointsList","startPoint","endPoint","properties"])},_d=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))};i(204);var Oo=function(){};function um(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Yt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $n=window.document;function sm(e){var t=e.onDragStart,n=t===void 0?Oo:t,r=e.onDragging,a=r===void 0?Oo:r,o=e.onDragEnd,u=o===void 0?Oo:o,p=e.step,d=p===void 0?1:p,O=e.isStopPropagation,_=O===void 0||O,S=!1,k=!1,R=0,X=0,W=0,oe=0;function re(me){if(_&&me.stopPropagation(),k&&(S=!0,W+=me.clientX-R,oe+=me.clientY-X,R=me.clientX,X=me.clientY,Math.abs(W)>d||Math.abs(oe)>d)){var ke=W%d,Ee=oe%d,He=W-ke,Te=oe-Ee;W=ke,oe=Ee,a({deltaX:He,deltaY:Te,event:me})}}function de(me){if(_&&me.stopPropagation(),k=!1,$n.removeEventListener("mousemove",re,!1),$n.removeEventListener("mouseup",de,!1),S)return S=!1,u({event:me})}return function(me){if(me.button===0)return _&&me.stopPropagation(),k=!0,R=me.clientX,X=me.clientY,$n.addEventListener("mousemove",re,!1),$n.addEventListener("mouseup",de,!1),n({event:me})}}var fe,wd,xd,Ed,Sd,jd,Pd,Ad,kd,Td,Md,Dd,Nd,hr=function(){function e(r){var a=this,o=r.onDragStart,u=o===void 0?Oo:o,p=r.onDragging,d=p===void 0?Oo:p,O=r.onDragEnd,_=O===void 0?Oo:O,S=r.eventType,k=S===void 0?"":S,R=r.eventCenter,X=R===void 0?null:R,W=r.step,oe=W===void 0?1:W,re=r.isStopPropagation,de=re===void 0||re,me=r.model,ke=me===void 0?null:me,Ee=r.data,He=Ee===void 0?null:Ee;(function(Te,Be){if(!(Te instanceof Be))throw new TypeError("Cannot call a class as a function")})(this,e),Yt(this,"onDragStart",void 0),Yt(this,"onDragging",void 0),Yt(this,"onDragEnd",void 0),Yt(this,"step",void 0),Yt(this,"isStopPropagation",void 0),Yt(this,"isDragging",!1),Yt(this,"isStartDragging",!1),Yt(this,"startX",0),Yt(this,"startY",0),Yt(this,"sumDeltaX",0),Yt(this,"sumDeltaY",0),Yt(this,"eventType",void 0),Yt(this,"eventCenter",void 0),Yt(this,"model",void 0),Yt(this,"data",void 0),Yt(this,"startTime",void 0),Yt(this,"handleMouseDown",function(Te){var Be,Re;if(Te.button===0){a.isStopPropagation&&Te.stopPropagation(),a.isStartDragging=!0,a.startX=Te.clientX,a.startY=Te.clientY,$n.addEventListener("mousemove",a.handleMouseMove,!1),$n.addEventListener("mouseup",a.handleMouseUp,!1);var lt=(Be=a.model)===null||Be===void 0?void 0:Be.getData();(Re=a.eventCenter)===null||Re===void 0||Re.emit(tt["".concat(a.eventType,"_MOUSEDOWN")],{e:Te,data:a.data||lt}),a.startTime=new Date().getTime()}}),Yt(this,"handleMouseMove",function(Te){if(a.isStopPropagation&&Te.stopPropagation(),a.isStartDragging&&(a.sumDeltaX+=Te.clientX-a.startX,a.sumDeltaY+=Te.clientY-a.startY,a.startX=Te.clientX,a.startY=Te.clientY,a.step<=1||Math.abs(a.sumDeltaX)>a.step||Math.abs(a.sumDeltaY)>a.step)){var Be,Re=a.sumDeltaX%a.step,lt=a.sumDeltaY%a.step,Et=a.sumDeltaX-Re,mt=a.sumDeltaY-lt;a.sumDeltaX=Re,a.sumDeltaY=lt;var jt,Ut=(Be=a.model)===null||Be===void 0?void 0:Be.getData();a.isDragging||((jt=a.eventCenter)===null||jt===void 0||jt.emit(tt["".concat(a.eventType,"_DRAGSTART")],{e:Te,data:a.data||Ut}),a.onDragStart({event:Te})),a.isDragging=!0,Promise.resolve().then(function(){var Kt,dn;a.onDragging({deltaX:Et,deltaY:mt,event:Te}),(Kt=a.eventCenter)===null||Kt===void 0||Kt.emit(tt["".concat(a.eventType,"_MOUSEMOVE")],{e:Te,data:a.data||Ut}),(dn=a.eventCenter)===null||dn===void 0||dn.emit(tt["".concat(a.eventType,"_DRAG")],{e:Te,data:a.data||Ut})})}}),Yt(this,"handleMouseUp",function(Te){a.isStartDragging=!1,a.isStopPropagation&&Te.stopPropagation(),Promise.resolve().then(function(){var Be,Re,lt;$n.removeEventListener("mousemove",a.handleMouseMove,!1),$n.removeEventListener("mouseup",a.handleMouseUp,!1);var Et=(Be=a.model)===null||Be===void 0?void 0:Be.getData();(Re=a.eventCenter)===null||Re===void 0||Re.emit(tt["".concat(a.eventType,"_MOUSEUP")],{e:Te,data:a.data||Et}),a.isDragging&&(a.isDragging=!1,a.onDragEnd({event:Te}),(lt=a.eventCenter)===null||lt===void 0||lt.emit(tt["".concat(a.eventType,"_DROP")],{e:Te,data:a.data||Et}))})}),Yt(this,"cancelDrag",function(){$n.removeEventListener("mousemove",a.handleMouseMove,!1),$n.removeEventListener("mouseup",a.handleMouseUp,!1),a.onDragEnd({event:null}),a.isDragging=!1}),this.onDragStart=u,this.onDragging=d,this.onDragEnd=_,this.step=oe,this.isStopPropagation=de,this.eventType=k,this.eventCenter=X,this.model=ke,this.data=He}var t,n;return t=e,(n=[{key:"setStep",value:function(r){this.step=r}}])&&um(t.prototype,n),e}(),Cd={node:!1,edge:!1},cm={node:!0,edge:!0};function Rd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function xa(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Rd(Object(n),!0).forEach(function(r){Qn(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ci(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var o,u,p=[],d=!0,O=!1;try{for(a=a.call(n);!(d=(o=a.next()).done)&&(p.push(o.value),!r||p.length!==r);d=!0);}catch(_){O=!0,u=_}finally{try{d||a.return==null||a.return()}finally{if(O)throw u}}return p}}(e,t)||Id(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function _o(e){return function(t){if(Array.isArray(t))return Ds(t)}(e)||function(t){if(typeof Symbol!="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||Id(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Id(e,t){if(e){if(typeof e=="string")return Ds(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ds(e,t):void 0}}function Ds(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ea(e){return Ea=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ea(e)}function Rn(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function lm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function We(e,t,n,r,a){var o={};return Object.keys(r).forEach(function(u){o[u]=r[u]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(u,p){return p(e,t,u)||u},o),a&&o.initializer!==void 0&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),o.initializer===void 0&&(Object.defineProperty(e,t,o),o=null),o}var Ld,zd=200,Bd=(fe=function(){function e(r){(function(X,W){if(!(X instanceof W))throw new TypeError("Cannot call a class as a function")})(this,e),Qn(this,"rootEl",void 0),Rn(this,"width",wd,this),Rn(this,"height",xd,this),Qn(this,"theme",void 0),Qn(this,"eventCenter",void 0),Qn(this,"modelMap",new Map),Qn(this,"topElement",void 0),Qn(this,"animation",void 0),Qn(this,"idGenerator",void 0),Qn(this,"edgeGenerator",void 0),Qn(this,"nodeMoveRules",[]),Rn(this,"edgeType",Ed,this),Rn(this,"nodes",Sd,this),Rn(this,"edges",jd,this),Rn(this,"overlapMode",Pd,this),Rn(this,"background",Ad,this),Rn(this,"transformModel",kd,this),Rn(this,"editConfigModel",Td,this),Rn(this,"gridSize",Md,this),Rn(this,"partial",Dd,this),Rn(this,"fakerNode",Nd,this);var a,o,u,p=r.container,d=r.background,O=d===void 0?{}:d,_=r.grid,S=r.idGenerator,k=r.edgeGenerator,R=r.animation;this.background=O,Ea(_)==="object"&&(this.gridSize=_.size),this.rootEl=p,this.editConfigModel=new Kf(r),this.eventCenter=new Pb,this.transformModel=new Vv(this.eventCenter),this.theme=vp(r.style),this.edgeType=r.edgeType||"polyline",this.width=r.width,this.height=r.height,this.animation=(a=R)&&typeof a!="boolean"?gp(Nt(Cd),a):Nt(a===!0?cm:Cd),this.partial=r.partial,this.overlapMode=r.overlapMode||0,this.idGenerator=S,this.edgeGenerator=(o=this,typeof(u=k)!="function"?function(X,W,oe){return Object.assign({type:o.edgeType},oe)}:function(X,W,oe){var re=u(X,W,oe);return re?typeof re=="string"?Object.assign({},oe,{type:re}):Object.assign({type:re},oe):{type:o.edgeType}}),this.width=r.width||this.rootEl.getBoundingClientRect().width,this.height=r.height||this.rootEl.getBoundingClientRect().height,this.flowId=Dr()}var t,n;return t=e,n=[{key:"nodesMap",get:function(){return this.nodes.reduce(function(r,a,o){return r[a.id]={index:o,model:a},r},{})}},{key:"edgesMap",get:function(){return this.edges.reduce(function(r,a,o){return r[a.id]={index:o,model:a},r},{})}},{key:"modelsMap",get:function(){return[].concat(_o(this.nodes),_o(this.edges)).reduce(function(r,a){return r[a.id]=a,r},{})}},{key:"sortElements",get:function(){var r=[];this.nodes.forEach(function(O){return r.push(O)}),this.edges.forEach(function(O){return r.push(O)}),r=r.sort(function(O,_){return O.zIndex-_.zIndex});for(var a=[],o=[-200,-200],u=[this.width+zd,this.height+zd],p=0;p<r.length;p++){var d=r[p];d.visible&&(!this.partial||d.isSelected||this.isElementInArea(d,o,u,!1,!1))&&a.push(d)}return a}},{key:"textEditElement",get:function(){var r=this.nodes.find(function(o){return o.state===_t.TEXT_EDIT}),a=this.edges.find(function(o){return o.state===_t.TEXT_EDIT});return r||a}},{key:"selectElements",get:function(){var r=new Map;return this.nodes.forEach(function(a){a.isSelected&&r.set(a.id,a)}),this.edges.forEach(function(a){a.isSelected&&r.set(a.id,a)}),r}},{key:"selectNodes",get:function(){var r=[];return this.nodes.forEach(function(a){a.isSelected&&r.push(a)}),r}},{key:"getAreaElement",value:function(r,a){var o=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],u=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],p=arguments.length>4&&arguments[4]!==void 0&&arguments[4],d=[],O=[];this.nodes.forEach(function(k){return O.push(k)}),this.edges.forEach(function(k){return O.push(k)});for(var _=0;_<O.length;_++){var S=O[_];p&&!S.visible||!this.isElementInArea(S,r,a,o,u)||d.push(S)}return d}},{key:"getModel",value:function(r){return this.modelMap.get(r)}},{key:"getNodeModelById",value:function(r){var a;return this.fakerNode&&r===this.fakerNode.id?this.fakerNode:(a=this.nodesMap[r])===null||a===void 0?void 0:a.model}},{key:"getPointByClient",value:function(r){var a=r.x,o=r.y,u=this.rootEl.getBoundingClientRect(),p={x:a-u.left,y:o-u.top},d=ci(this.transformModel.HtmlPointToCanvasPoint([p.x,p.y]),2);return{domOverlayPosition:p,canvasOverlayPosition:{x:d[0],y:d[1]}}}},{key:"isElementInArea",value:function(r,a,o){var u=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],p=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];if(r.BaseType===Gt.NODE){for(var d=jn(r=r),O=d.minX,_=d.minY,S=d.maxX,k=d.maxY,R=[{x:O,y:_},{x:S,y:_},{x:S,y:k},{x:O,y:k}],X=p,W=0;W<R.length;W++){var oe=R[W],re=oe.x,de=oe.y,me=this.transformModel.CanvasPointToHtmlPoint([re,de]),ke=ci(me,2);if(re=ke[0],de=ke[1],ls([re,de],a,o)!==p){X=!p;break}}return X}if(r.BaseType===Gt.EDGE){var Ee=r=r,He=Ee.startPoint,Te=Ee.endPoint,Be=this.transformModel.CanvasPointToHtmlPoint([He.x,He.y]),Re=this.transformModel.CanvasPointToHtmlPoint([Te.x,Te.y]),lt=ls(Be,a,o),Et=ls(Re,a,o);return u?lt&&Et:lt||Et}return!1}},{key:"graphDataToModel",value:function(r){var a=this;if(this.width&&this.height||this.resize(),!r)return this.nodes=[],void(this.edges=[]);r.nodes?this.nodes=ca(r.nodes,function(o){var u=a.getModel(o.type);if(!u)throw new Error("找不到".concat(o.type,"对应的节点。"));var p=o.x,d=o.y;return p&&d&&(o.x=Mr(p,a.gridSize),o.y=Mr(d,a.gridSize),Ea(o.text)==="object"&&(o.text.x-=bp(p,a.gridSize),o.text.y-=bp(d,a.gridSize))),new u(o,a)}):this.nodes=[],r.edges?this.edges=ca(r.edges,function(o){var u=a.getModel(o.type);if(!u)throw new Error("找不到".concat(o.type,"对应的边。"));return new u(o,a)}):this.edges=[]}},{key:"modelToGraphData",value:function(){var r=[];this.edges.forEach(function(o){var u=o.getData();u&&!o.virtual&&r.push(u)});var a=[];return this.nodes.forEach(function(o){var u=o.getData();u&&!o.virtual&&a.push(u)}),{nodes:a,edges:r}}},{key:"modelToHistoryData",value:function(){for(var r=!1,a=[],o=0;o<this.nodes.length;o++){var u=this.nodes[o];if(u.isDragging){r=!0;break}a.push(u.getHistoryData())}if(r)return!1;for(var p=!1,d=[],O=0;O<this.edges.length;O++){var _=this.edges[O];if(_.isDragging){p=!0;break}d.push(_.getHistoryData())}return!p&&{nodes:a,edges:d}}},{key:"getEdgeModelById",value:function(r){var a;return(a=this.edgesMap[r])===null||a===void 0?void 0:a.model}},{key:"getElement",value:function(r){return this.modelsMap[r]}},{key:"getNodeEdges",value:function(r){for(var a=[],o=0;o<this.edges.length;o++){var u=this.edges[o],p=this.edges[o].sourceNodeId===r,d=this.edges[o].targetNodeId===r;(p||d)&&a.push(u)}return a}},{key:"getSelectElements",value:function(){var r=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],a=this.selectElements,o={nodes:[],edges:[]};return a.forEach(function(u){if(u.BaseType===Gt.NODE&&o.nodes.push(u.getData()),u.BaseType===Gt.EDGE){var p=u.getData(),d=a.get(p.sourceNodeId)&&a.get(p.targetNodeId);(r||d)&&o.edges.push(p)}}),o}},{key:"updateAttributes",value:function(r,a){this.getElement(r).updateAttributes(a)}},{key:"changeNodeId",value:function(r,a){return a||(a=Dr()),this.nodesMap[a]?"":this.nodesMap[r]?(this.edges.forEach(function(o){o.sourceNodeId===r&&(o.sourceNodeId=a),o.targetNodeId===r&&(o.targetNodeId=a)}),this.nodesMap[r].model.id=a,this.nodesMap[a]=this.nodesMap[r],a):""}},{key:"changeEdgeId",value:function(r,a){return a||(a=Dr()),this.edgesMap[a]?"":this.edgesMap[r]?(this.edges.forEach(function(o){o.id===r&&o.changeEdgeId(a)}),a):""}},{key:"setFakerNode",value:function(r){this.fakerNode=r}},{key:"removeFakerNode",value:function(){this.fakerNode=null}},{key:"setModel",value:function(r,a){return this.modelMap.set(r,a)}},{key:"toFront",value:function(r){var a,o,u,p=((a=this.nodesMap[r])===null||a===void 0?void 0:a.model)||((o=this.edgesMap[r])===null||o===void 0?void 0:o.model);p&&(this.overlapMode===Sn.DEFAULT&&((u=this.topElement)===null||u===void 0||u.setZIndex(),p.setZIndex(9999),this.topElement=p),this.overlapMode===Sn.INCREASE&&this.setElementZIndex(r,"top"))}},{key:"setElementZIndex",value:function(r,a){var o,u,p,d=((o=this.nodesMap[r])===null||o===void 0?void 0:o.model)||((u=this.edgesMap[r])===null||u===void 0?void 0:u.model);d&&(typeof a=="number"&&(p=a),a==="top"&&(p=vs()),a==="bottom"&&(p=--zb),d.setZIndex(p))}},{key:"deleteNode",value:function(r){var a=this.nodesMap[r].model.getData();this.deleteEdgeBySource(r),this.deleteEdgeByTarget(r),this.nodes.splice(this.nodesMap[r].index,1),this.eventCenter.emit(tt.NODE_DELETE,{data:a})}},{key:"addNode",value:function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:tt.NODE_ADD,o=arguments.length>2?arguments[2]:void 0,u=nn(r);u.id&&this.nodesMap[r.id]&&delete u.id;var p=this.getModel(u.type);if(!p)throw new Error("找不到".concat(u.type,"对应的节点，请确认是否已注册此类型节点。"));u.x=Mr(u.x,this.gridSize),u.y=Mr(u.y,this.gridSize);var d=new p(u,this);this.nodes.push(d);var O=d.getData(),_={data:O};return o&&(_.e=o),this.eventCenter.emit(a,_),d}},{key:"cloneNode",value:function(r){var a=this.getNodeModelById(r),o=a.getData();o.x+=30,o.y+=30,delete o.id,o.text&&(o.text.x+=30,o.text.y+=30);var u=this.addNode(o);return u.setSelected(!0),a.setSelected(!1),u.getData()}},{key:"moveNode",value:function(r,a,o){var u=arguments.length>3&&arguments[3]!==void 0&&arguments[3],p=this.nodesMap[r];if(p){var d=p.model,O=d.getMoveDistance(a,o,u),_=ci(O,2);a=_[0],o=_[1],this.moveEdge(r,a,o)}}},{key:"moveNode2Coordinate",value:function(r,a,o){var u=arguments.length>3&&arguments[3]!==void 0&&arguments[3],p=this.nodesMap[r];if(p){var d=p.model,O=d.x,_=d.y,S=a-O,k=o-_;this.moveNode(r,S,k,u)}}},{key:"editText",value:function(r){this.setElementStateById(r,_t.TEXT_EDIT)}},{key:"addEdge",value:function(r){var a=nn(r),o=a.type;o||(o=this.edgeType),a.id&&this.edgesMap[a.id]&&delete a.id;var u=this.getModel(o);if(!u)throw new Error("找不到".concat(o,"对应的边，请确认是否已注册此类型边。"));var p=new u(xa(xa({},a),{},{type:o}),this),d=p.getData();return this.edges.push(p),this.eventCenter.emit(tt.EDGE_ADD,{data:d}),p}},{key:"moveEdge",value:function(r,a,o){for(var u=0;u<this.edges.length;u++){var p=this.edges[u],d=p.textPosition,O=d.x,_=d.y,S=this.edges[u].sourceNodeId===r,k=this.edges[u].targetNodeId===r;S&&p.moveStartPoint(a,o),k&&p.moveEndPoint(a,o),(S||k)&&this.handleEdgeTextMove(p,O,_)}}},{key:"handleEdgeTextMove",value:function(r,a,o){var u;if(r.customTextPosition===!0)r.resetTextPosition();else if(r.modelType===ht.POLYLINE_EDGE&&(u=r.text)!==null&&u!==void 0&&u.value){var p=r.text,d=Od(p,r.points);r.moveText(d.x-p.x,d.y-p.y)}else{var O=r.textPosition,_=O.x,S=O.y;r.moveText(_-a,S-o)}}},{key:"deleteEdgeBySourceAndTarget",value:function(r,a){for(var o=0;o<this.edges.length;o++)if(this.edges[o].sourceNodeId===r&&this.edges[o].targetNodeId===a){var u=this.edges[o].getData();this.edges.splice(o,1),o--,this.eventCenter.emit(tt.EDGE_DELETE,{data:u})}}},{key:"deleteEdgeById",value:function(r){if(this.edgesMap[r]){var a=this.edgesMap[r].index,o=this.edgesMap[r].model.getData();this.edges.splice(a,1),this.eventCenter.emit(tt.EDGE_DELETE,{data:o})}}},{key:"deleteEdgeBySource",value:function(r){for(var a=0;a<this.edges.length;a++)if(this.edges[a].sourceNodeId===r){var o=this.edges[a].getData();this.edges.splice(a,1),a--,this.eventCenter.emit(tt.EDGE_DELETE,{data:o})}}},{key:"deleteEdgeByTarget",value:function(r){for(var a=0;a<this.edges.length;a++)if(this.edges[a].targetNodeId===r){var o=this.edges[a].getData();this.edges.splice(a,1),a--,this.eventCenter.emit(tt.EDGE_DELETE,{data:o})}}},{key:"setElementStateById",value:function(r,a,o){this.nodes.forEach(function(u){u.id===r?u.setElementState(a,o):u.setElementState(_t.DEFAULT)}),this.edges.forEach(function(u){u.id===r?u.setElementState(a,o):u.setElementState(_t.DEFAULT)})}},{key:"updateText",value:function(r,a){this.nodes.forEach(function(o){o.id===r&&o.updateText(a)}),this.edges.forEach(function(o){o.id===r&&o.updateText(a)})}},{key:"selectNodeById",value:function(r){var a,o=arguments.length>1&&arguments[1]!==void 0&&arguments[1];o||this.clearSelectElements();var u=(a=this.nodesMap[r])===null||a===void 0?void 0:a.model;u==null||u.setSelected(!0)}},{key:"selectEdgeById",value:function(r){var a,o=arguments.length>1&&arguments[1]!==void 0&&arguments[1];o||this.clearSelectElements();var u=(a=this.edgesMap[r])===null||a===void 0?void 0:a.model;u==null||u.setSelected(!0)}},{key:"selectElementById",value:function(r){var a=arguments.length>1&&arguments[1]!==void 0&&arguments[1];a||this.clearSelectElements();var o=this.getElement(r);o==null||o.setSelected(!0)}},{key:"clearSelectElements",value:function(){var r;this.selectElements.forEach(function(a){a==null||a.setSelected(!1)}),this.selectElements.clear(),this.overlapMode===Sn.DEFAULT&&((r=this.topElement)===null||r===void 0||r.setZIndex())}},{key:"moveNodes",value:function(r,a,o){for(var u=this,p=arguments.length>3&&arguments[3]!==void 0&&arguments[3],d=r.reduce(function(ke,Ee){var He=u.nodesMap[Ee].model.getMoveDistance(a,o,p);return ke[Ee]=He,ke},{}),O=0;O<this.edges.length;O++){var _=this.edges[O],S=_.textPosition,k=S.x,R=S.y,X=d[_.sourceNodeId],W=void 0,oe=void 0;if(X){var re=ci(X,2);W=re[0],oe=re[1],_.moveStartPoint(W,oe)}var de=d[_.targetNodeId];if(de){var me=ci(de,2);W=me[0],oe=me[1],_.moveEndPoint(W,oe)}(X||de)&&this.handleEdgeTextMove(_,k,R)}}},{key:"addNodeMoveRules",value:function(r){this.nodeMoveRules.includes(r)||this.nodeMoveRules.push(r)}},{key:"setDefaultEdgeType",value:function(r){this.edgeType=r}},{key:"changeNodeType",value:function(r,a){var o=this.getNodeModelById(r);if(o){var u=o.getData();u.type=a;var p=this.getModel(a);if(!p)throw new Error("找不到".concat(a,"对应的节点，请确认是否已注册此类型节点。"));var d=new p(u,this);this.nodes.splice(this.nodesMap[r].index,1,d),this.getNodeEdges(r).forEach(function(O){if(O.sourceNodeId===r){var _=Wp(d,O.startPoint,d.width,d.height);O.updateStartPoint(_)}if(O.targetNodeId===r){var S=Wp(d,O.endPoint,d.width,d.height);O.updateEndPoint(S)}})}}},{key:"changeEdgeType",value:function(r,a){var o=this.getEdgeModelById(r);if(o&&o.type!==a){var u=o.getData();u.type=a;var p=this.getModel(a);if(!p)throw new Error("找不到".concat(a,"对应的节点，请确认是否已注册此类型节点。"));delete u.pointsList;var d=new p(u,this);this.edges.splice(this.edgesMap[r].index,1,d)}}},{key:"getNodeIncomingEdge",value:function(r){var a=[];return this.edges.forEach(function(o){o.targetNodeId===r&&a.push(o)}),a}},{key:"getNodeOutgoingEdge",value:function(r){var a=[];return this.edges.forEach(function(o){o.sourceNodeId===r&&a.push(o)}),a}},{key:"getNodeIncomingNode",value:function(r){var a=this,o=[];return this.edges.forEach(function(u){u.targetNodeId===r&&o.push(a.nodesMap[u.sourceNodeId].model)}),o}},{key:"getNodeOutgoingNode",value:function(r){var a=this,o=[];return this.edges.forEach(function(u){u.sourceNodeId===r&&o.push(a.nodesMap[u.targetNodeId].model)}),o}},{key:"setTheme",value:function(r){this.theme=vp(xa(xa({},this.theme),r))}},{key:"resize",value:function(r,a){this.width=r||this.rootEl.getBoundingClientRect().width,this.height=a||this.rootEl.getBoundingClientRect().height,!this.width||this.height}},{key:"clearData",value:function(){this.nodes=[],this.edges=[]}},{key:"getVirtualRectSize",value:function(){var r=this.nodes,a=[],o=[];r.forEach(function(S){var k=S.x,R=S.y,X=S.width,W=S.height,oe=S.getNodeStyle().strokeWidth,re=oe===void 0?0:oe;a=a.concat([k+X/2+re,k-X/2-re]),o=o.concat([R+W/2+re,R-W/2-re])});var u=Math.min.apply(Math,_o(a)),p=Math.max.apply(Math,_o(a)),d=Math.min.apply(Math,_o(o)),O=p-u||0,_=Math.max.apply(Math,_o(o))-d||0;return{virtualRectWidth:O,virtualRectHeight:_,virtualRectCenterPositionX:u+O/2,virtualRectCenterPositionY:d+_/2}}},{key:"translateCenter",value:function(){var r=this.nodes,a=this.width,o=this.height,u=this.rootEl,p=this.transformModel;if(r.length){var d=a||u.clientWidth,O=o||u.clientHeight,_=this.getVirtualRectSize(),S=_.virtualRectCenterPositionX,k=_.virtualRectCenterPositionY;p.focusOn(S,k,d,O)}}},{key:"fitView",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:20,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:20,o=this.nodes,u=this.width,p=this.height,d=this.rootEl,O=this.transformModel;if(o.length){var _=u||d.clientWidth,S=p||d.clientHeight,k=this.getVirtualRectSize(),R=k.virtualRectWidth,X=k.virtualRectHeight,W=k.virtualRectCenterPositionX,oe=k.virtualRectCenterPositionY,re=(R+a)/_,de=(X+r)/S,me=0;me=1/Math.max(re,de);var ke=[_/2,S/2];O.zoom(me,ke),O.focusOn(W,oe,_,S)}}},{key:"openEdgeAnimation",value:function(r){this.getEdgeModelById(r).openEdgeAnimation()}},{key:"closeEdgeAnimation",value:function(r){this.getEdgeModelById(r).closeEdgeAnimation()}}],n&&lm(t.prototype,n),e}(),wd=We(fe.prototype,"width",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xd=We(fe.prototype,"height",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ed=We(fe.prototype,"edgeType",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Sd=We(fe.prototype,"nodes",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),jd=We(fe.prototype,"edges",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Pd=We(fe.prototype,"overlapMode",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Sn.DEFAULT}}),Ad=We(fe.prototype,"background",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kd=We(fe.prototype,"transformModel",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Td=We(fe.prototype,"editConfigModel",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Md=We(fe.prototype,"gridSize",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Dd=We(fe.prototype,"partial",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Nd=We(fe.prototype,"fakerNode",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),We(fe.prototype,"nodesMap",[c.m],Object.getOwnPropertyDescriptor(fe.prototype,"nodesMap"),fe.prototype),We(fe.prototype,"edgesMap",[c.m],Object.getOwnPropertyDescriptor(fe.prototype,"edgesMap"),fe.prototype),We(fe.prototype,"modelsMap",[c.m],Object.getOwnPropertyDescriptor(fe.prototype,"modelsMap"),fe.prototype),We(fe.prototype,"sortElements",[c.m],Object.getOwnPropertyDescriptor(fe.prototype,"sortElements"),fe.prototype),We(fe.prototype,"textEditElement",[c.m],Object.getOwnPropertyDescriptor(fe.prototype,"textEditElement"),fe.prototype),We(fe.prototype,"selectElements",[c.m],Object.getOwnPropertyDescriptor(fe.prototype,"selectElements"),fe.prototype),We(fe.prototype,"selectNodes",[c.m],Object.getOwnPropertyDescriptor(fe.prototype,"selectNodes"),fe.prototype),We(fe.prototype,"setFakerNode",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"setFakerNode"),fe.prototype),We(fe.prototype,"removeFakerNode",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"removeFakerNode"),fe.prototype),We(fe.prototype,"setModel",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"setModel"),fe.prototype),We(fe.prototype,"toFront",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"toFront"),fe.prototype),We(fe.prototype,"setElementZIndex",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"setElementZIndex"),fe.prototype),We(fe.prototype,"deleteNode",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"deleteNode"),fe.prototype),We(fe.prototype,"addNode",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"addNode"),fe.prototype),We(fe.prototype,"cloneNode",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"cloneNode"),fe.prototype),We(fe.prototype,"moveNode",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"moveNode"),fe.prototype),We(fe.prototype,"moveNode2Coordinate",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"moveNode2Coordinate"),fe.prototype),We(fe.prototype,"editText",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"editText"),fe.prototype),We(fe.prototype,"addEdge",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"addEdge"),fe.prototype),We(fe.prototype,"moveEdge",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"moveEdge"),fe.prototype),We(fe.prototype,"deleteEdgeBySourceAndTarget",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"deleteEdgeBySourceAndTarget"),fe.prototype),We(fe.prototype,"deleteEdgeById",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"deleteEdgeById"),fe.prototype),We(fe.prototype,"deleteEdgeBySource",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"deleteEdgeBySource"),fe.prototype),We(fe.prototype,"deleteEdgeByTarget",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"deleteEdgeByTarget"),fe.prototype),We(fe.prototype,"setElementStateById",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"setElementStateById"),fe.prototype),We(fe.prototype,"updateText",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"updateText"),fe.prototype),We(fe.prototype,"selectNodeById",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"selectNodeById"),fe.prototype),We(fe.prototype,"selectEdgeById",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"selectEdgeById"),fe.prototype),We(fe.prototype,"selectElementById",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"selectElementById"),fe.prototype),We(fe.prototype,"clearSelectElements",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"clearSelectElements"),fe.prototype),We(fe.prototype,"moveNodes",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"moveNodes"),fe.prototype),We(fe.prototype,"setDefaultEdgeType",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"setDefaultEdgeType"),fe.prototype),We(fe.prototype,"changeNodeType",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"changeNodeType"),fe.prototype),We(fe.prototype,"changeEdgeType",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"changeEdgeType"),fe.prototype),We(fe.prototype,"getNodeIncomingEdge",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"getNodeIncomingEdge"),fe.prototype),We(fe.prototype,"getNodeOutgoingEdge",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"getNodeOutgoingEdge"),fe.prototype),We(fe.prototype,"getNodeIncomingNode",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"getNodeIncomingNode"),fe.prototype),We(fe.prototype,"getNodeOutgoingNode",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"getNodeOutgoingNode"),fe.prototype),We(fe.prototype,"setTheme",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"setTheme"),fe.prototype),We(fe.prototype,"resize",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"resize"),fe.prototype),We(fe.prototype,"clearData",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"clearData"),fe.prototype),We(fe.prototype,"translateCenter",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"translateCenter"),fe.prototype),We(fe.prototype,"fitView",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"fitView"),fe.prototype),We(fe.prototype,"openEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"openEdgeAnimation"),fe.prototype),We(fe.prototype,"closeEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"closeEdgeAnimation"),fe.prototype),fe),fm=Bd;function Ns(e){return Ns=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ns(e)}function Cs(){return Cs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cs.apply(this,arguments)}function pm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rs(e,t){return Rs=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Rs(e,t)}function dm(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=Sa(e);if(t){var a=Sa(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return hm(this,n)}}function hm(e,t){if(t&&(Ns(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return er(e)}function er(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Sa(e){return Sa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Sa(e)}function yr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Fd,ym=Gn(Ld=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&Rs(o,u)})(a,e);var t,n,r=dm(a);function a(o){var u;(function(_,S){if(!(_ instanceof S))throw new TypeError("Cannot call a class as a function")})(this,a),yr(er(u=r.call(this)),"stepDrag",void 0),yr(er(u),"stepScrollX",0),yr(er(u),"stepScrollY",0),yr(er(u),"onDragging",function(_){var S=_.deltaX,k=_.deltaY;u.setState({isDragging:!0});var R=u.props.graphModel,X=R.transformModel;R.editConfigModel.stopMoveGraph||X.translate(S,k)}),yr(er(u),"onDragEnd",function(){u.setState({isDragging:!1})}),yr(er(u),"zoomHandler",function(_){var S=u.props,k=S.graphModel,R=k.editConfigModel,X=k.transformModel,W=k.gridSize,oe=S.graphModel,re=_.deltaX,de=_.deltaY;if(R.stopScrollGraph||_.ctrlKey===!0){if(!R.stopZoomGraph){_.preventDefault();var me=oe.getPointByClient({x:_.clientX,y:_.clientY}).canvasOverlayPosition,ke=me.x,Ee=me.y;X.zoom(_.deltaY<0,[ke,Ee])}}else{if(_.preventDefault(),u.stepScrollX+=re,u.stepScrollY+=de,Math.abs(u.stepScrollX)>=W){var He=u.stepScrollX%W,Te=u.stepScrollX-He;X.translate(-Te*X.SCALE_X,0),u.stepScrollX=He}if(Math.abs(u.stepScrollY)>=W){var Be=u.stepScrollY%W,Re=u.stepScrollY-Be;X.translate(0,-Re*X.SCALE_Y),u.stepScrollY=Be}}}),yr(er(u),"clickHandler",function(_){if(_.target.getAttribute("name")==="canvas-overlay"){var S=u.props.graphModel;S.selectElements.size>0&&S.clearSelectElements(),S.eventCenter.emit(tt.BLANK_CLICK,{e:_})}}),yr(er(u),"handleContextMenu",function(_){if(_.target.getAttribute("name")==="canvas-overlay"){_.preventDefault();var S=u.props.graphModel,k=S.getPointByClient({x:_.clientX,y:_.clientY});S.eventCenter.emit(tt.BLANK_CONTEXTMENU,{e:_,position:k})}}),yr(er(u),"mouseDownHandler",function(_){var S=u.props.graphModel,k=S.eventCenter,R=S.editConfigModel,X=S.transformModel.SCALE_X,W=S.gridSize,oe=_.target,re=!R.adjustEdge&&!R.adjustNodePosition;(oe.getAttribute("name")==="canvas-overlay"||re)&&(R.stopMoveGraph?k.emit(tt.BLANK_MOUSEDOWN,{e:_}):(u.stepDrag.setStep(W*X),u.stepDrag.handleMouseDown(_)),u.clickHandler(_))});var p=o.graphModel,d=p.gridSize,O=p.eventCenter;return u.stepDrag=new hr({onDragging:u.onDragging,onDragEnd:u.onDragEnd,step:d,eventType:"BLANK",isStopPropagation:!1,eventCenter:O,model:null}),u.state={isDragging:!1},u}return t=a,(n=[{key:"render",value:function(){var o=this.props.graphModel.transformModel.getTransformStyle().transform,u=this.props,p=u.children,d=u.dnd,O=this.state.isDragging;return Object(te.g)("svg",Cs({xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",name:"canvas-overlay",onWheel:this.zoomHandler,onMouseDown:this.mouseDownHandler,onContextMenu:this.handleContextMenu,className:O?"lf-canvas-overlay lf-dragging":"lf-canvas-overlay lf-drag-able"},d.eventMap()),Object(te.g)("g",{transform:o},p))}}])&&pm(t.prototype,n),a}(te.a))||Ld;function Is(e){return Is=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Is(e)}function gm(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ls(e,t){return Ls=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Ls(e,t)}function bm(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=ja(e);if(t){var a=ja(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return mm(this,n)}}function mm(e,t){if(t&&(Is(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function ja(e){return ja=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ja(e)}var Om=Gn(Fd=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&Ls(o,u)})(a,e);var t,n,r=bm(a);function a(){return gm(this,a),r.apply(this,arguments)}return t=a,(n=[{key:"componentDidMount",value:function(){this.triggerToolRender()}},{key:"componentDidUpdate",value:function(){this.triggerToolRender()}},{key:"getTools",value:function(){var o=this.props,u=o.tool,p=o.graphModel,d=u.getTools().map(function(O){return Object(te.g)(O,{graphModel:p,logicFlow:u.instance})});return u.components=d,d}},{key:"triggerToolRender",value:function(){var o=this.props,u=o.tool,p=o.graphModel,d=document.querySelector("#ToolOverlay_".concat(p.flowId)),O=u.getInstance();O.components.forEach(function(_){return _(O,d)}),O.components=[]}},{key:"render",value:function(){var o=this.props.graphModel;return Object(te.g)("div",{className:"lf-tool-overlay",id:"ToolOverlay_".concat(o.flowId)},this.getTools())}}])&&vm(t.prototype,n),a}(te.a))||Fd;function zs(e){return zs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zs(e)}function _m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bs(e,t){return Bs=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Bs(e,t)}function xm(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=Pa(e);if(t){var a=Pa(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Em(this,n)}}function Em(e,t){if(t&&(zs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function Pa(e){return Pa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Pa(e)}var Ud,Sm=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&Bs(o,u)})(a,e);var t,n,r=xm(a);function a(){return _m(this,a),r.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){var o=this.props.background;return Object(te.g)("div",{className:"lf-background"},Object(te.g)("div",{style:o,className:"lf-background-area"}))}}])&&wm(t.prototype,n),a}(te.a);function Fs(e){return Fs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fs(e)}function jm(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Us(e,t){return Us=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Us(e,t)}function Am(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=Aa(e);if(t){var a=Aa(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return km(this,n)}}function km(e,t){if(t&&(Fs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Hd(e)}function Hd(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Aa(e){return Aa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Aa(e)}function Tm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Gd=Gn(Ud=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&Us(o,u)})(a,e);var t,n,r=Am(a);function a(){var o;jm(this,a);for(var u=arguments.length,p=new Array(u),d=0;d<u;d++)p[d]=arguments[d];return Tm(Hd(o=r.call.apply(r,[this].concat(p))),"id",Dr()),o}return t=a,(n=[{key:"renderDot",value:function(){var o=this.props,u=o.config,p=u.color,d=u.thickness,O=d===void 0?2:d,_=o.size,S=o.visible,k=Math.min(Math.max(2,O),_/2),R=1;return S||(R=0),Object(te.g)("rect",{width:k,height:k,rx:k/2,ry:k/2,fill:p,opacity:R})}},{key:"renderMesh",value:function(){var o=this.props,u=o.config,p=u.color,d=u.thickness,O=d===void 0?1:d,_=o.size,S=o.visible,k=Math.min(Math.max(1,O),_/2),R="M ".concat(_," 0 H0 M0 0 V0 ").concat(_),X=1;return S||(X=0),Object(te.g)("path",{d:R,stroke:p,strokeWidth:k,opacity:X})}},{key:"render",value:function(){var o=this.props,u=o.type,p=o.size,d=o.graphModel.transformModel,O=[d.SCALE_X,d.SKEW_Y,d.SKEW_X,d.SCALE_Y,d.TRANSLATE_X,d.TRANSLATE_Y].join(","),_="matrix(".concat(O,")");return Object(te.g)("div",{className:"lf-grid"},Object(te.g)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%"},Object(te.g)("defs",null,Object(te.g)("pattern",{id:this.id,patternUnits:"userSpaceOnUse",patternTransform:_,x:"0",y:"0",width:p,height:p},u==="dot"&&this.renderDot(),u==="mesh"&&this.renderMesh())),Object(te.g)("rect",{width:"100%",height:"100%",fill:"url(#".concat(this.id,")")})))}}])&&Pm(t.prototype,n),a}(te.a))||Ud;Gd.defaultProps={size:20,visible:!0,type:"dot",config:{color:"#ababab",thickness:1}},i(52);function Hs(e){return Hs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hs(e)}function Mm(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var o,u,p=[],d=!0,O=!1;try{for(a=a.call(n);!(d=(o=a.next()).done)&&(p.push(o.value),!r||p.length!==r);d=!0);}catch(_){O=!0,u=_}finally{try{d||a.return==null||a.return()}finally{if(O)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return Xd(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Xd(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Xd(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Yd,wo=function(e){var t={x1:10,y1:10,x2:20,y2:20,stroke:"black"};return Object.entries(e).forEach(function(n){var r=Mm(n,2),a=r[0],o=r[1];(a==="style"||Hs(o)!=="object")&&(t[a]=o)}),Object(te.g)("line",t)};function Gs(e){return Gs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gs(e)}function Vd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function ka(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Vd(Object(n),!0).forEach(function(r){Dm(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Dm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nm(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Cm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xs(e,t){return Xs=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Xs(e,t)}function Rm(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=Ta(e);if(t){var a=Ta(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Im(this,n)}}function Im(e,t){if(t&&(Gs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function Ta(e){return Ta=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ta(e)}var Wd,Lm=Gn(Yd=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&Xs(o,u)})(a,e);var t,n,r=Rm(a);function a(){return Nm(this,a),r.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){var o=this.props.snaplineModel,u=o.position,p=o.isShowHorizontal,d=o.isShowVertical,O=o.getStyle(),_=u.x,S=_===void 0?0:_,k=u.y,R=k===void 0?0:k,X=ka(ka({x1:-1e5,y1:R,x2:1e5,y2:R},O),{},{stroke:p?O.stroke:"none"}),W=ka(ka({x1:S,y1:-1e5,x2:S,y2:1e5},O),{},{stroke:d?O.stroke:"none"});return Object(te.g)("g",{className:"lf-snapline"},Object(te.g)(wo,X),Object(te.g)(wo,W))}}])&&Cm(t.prototype,n),a}(te.a))||Yd;function Ys(e){return Ys=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ys(e)}function zm(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var o,u,p=[],d=!0,O=!1;try{for(a=a.call(n);!(d=(o=a.next()).done)&&(p.push(o.value),!r||p.length!==r);d=!0);}catch(_){O=!0,u=_}finally{try{d||a.return==null||a.return()}finally{if(O)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return Kd(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Kd(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Kd(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Rr(e){var t=e.x,n=e.y,r=e.width,a=e.height,o=e.className,u=e.radius,p=t-r/2,d=n-a/2,O={};return Object.entries(e).forEach(function(_){var S=zm(_,2),k=S[0],R=S[1];Ys(R)!=="object"&&(O[k]=R)}),O.className=o?"lf-basic-shape ".concat(o):"lf-basic-shape",u&&(O.rx=u,O.ry=u),O.x=p,O.y=d,Object(te.g)("rect",O)}function Vs(e){return Vs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vs(e)}function xo(){return xo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xo.apply(this,arguments)}function Zd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function qd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Zd(Object(n),!0).forEach(function(r){Bm(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Bm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fm(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Um(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ws(e,t){return Ws=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Ws(e,t)}function Hm(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=Ma(e);if(t){var a=Ma(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Gm(this,n)}}function Gm(e,t){if(t&&(Vs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function Ma(e){return Ma=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ma(e)}Rr.defaultProps={className:"",radius:""};var Jd,Xm=Gn(Wd=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&Ws(o,u)})(a,e);var t,n,r=Hm(a);function a(){return Fm(this,a),r.apply(this,arguments)}return t=a,(n=[{key:"getNodesOutline",value:function(){var o=this.props.graphModel,u=o.nodes,p=o.editConfigModel,d=p.hoverOutline,O=p.nodeSelectedOutline,_=[];return u.forEach(function(S){if(S.isHovered||S.isSelected){var k=S.isHovered,R=S.isSelected,X=S.x,W=S.y,oe=S.width,re=S.height;if(O&&R||d&&k){var de=S.getOutlineStyle(),me={};if(Object.keys(de).forEach(function(Ee){Ee!=="hover"&&(me[Ee]=de[Ee])}),k){var ke=de.hover;me=qd(qd({},me),ke)}_.push(Object(te.g)(Rr,xo({className:"lf-outline-node",x:X,y:W,width:oe+10,height:re+10},me)))}}}),_}},{key:"getEdgeOutline",value:function(){for(var o=this.props.graphModel,u=o.edges,p=o.editConfigModel,d=p.edgeSelectedOutline,O=p.hoverOutline,_=[],S=0;S<u.length;S++){var k=u[S];(d&&k.isSelected||O&&k.isHovered)&&(k.modelType===ht.LINE_EDGE?_.push(this.getLineOutline(k)):k.modelType===ht.POLYLINE_EDGE?_.push(this.getPolylineOutline(k)):k.modelType===ht.BEZIER_EDGE&&_.push(this.getBezierOutline(k)))}return _}},{key:"getLineOutline",value:function(o){var u=o.startPoint,p=o.endPoint,d=(u.x+p.x)/2,O=(u.y+p.y)/2,_=Math.abs(u.x-p.x)+10,S=Math.abs(u.y-p.y)+10,k=o.getOutlineStyle();return Object(te.g)(Rr,xo({className:"lf-outline-edge",x:d,y:O,width:_,height:S},k))}},{key:"getPolylineOutline",value:function(o){var u=o.points,p=eo(u),d=ui(p,8),O=d.x,_=d.y,S=d.width,k=d.height,R=o.getOutlineStyle();return Object(te.g)(Rr,xo({className:"lf-outline",x:O,y:_,width:S,height:k},R))}},{key:"getBezierOutline",value:function(o){var u=o.path,p=_a(u),d=ui(p,8),O=d.x,_=d.y,S=d.width,k=d.height,R=o.getOutlineStyle();return Object(te.g)(Rr,xo({className:"lf-outline",x:O,y:_,width:S,height:k},R))}},{key:"render",value:function(){return Object(te.g)("g",{className:"lf-outline"},this.getNodesOutline(),this.getEdgeOutline())}}])&&Um(t.prototype,n),a}(te.a))||Wd;function Ks(e){return Ks=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ks(e)}function Ym(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var o,u,p=[],d=!0,O=!1;try{for(a=a.call(n);!(d=(o=a.next()).done)&&(p.push(o.value),!r||p.length!==r);d=!0);}catch(_){O=!0,u=_}finally{try{d||a.return==null||a.return()}finally{if(O)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return $d(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return $d(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function $d(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function li(e){var t=e.x,n=t===void 0?0:t,r=e.y,a=r===void 0?0:r,o=e.r,u=o===void 0?4:o,p=e.className,d={cx:n,cy:a,r:u,fill:"transparent",fillOpacity:1,strokeWidth:"1",stroke:"#000",strokeOpacity:1};return Object.entries(e).forEach(function(O){var _=Ym(O,2),S=_[0],k=_[1];Ks(k)!=="object"&&(d[S]=k)}),d.className=p?"lf-basic-shape ".concat(p):"lf-basic-shape",Object(te.g)("circle",d)}function Zs(e){return Zs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zs(e)}function Vm(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var o,u,p=[],d=!0,O=!1;try{for(a=a.call(n);!(d=(o=a.next()).done)&&(p.push(o.value),!r||p.length!==r);d=!0);}catch(_){O=!0,u=_}finally{try{d||a.return==null||a.return()}finally{if(O)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return Qd(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Qd(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Qd(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function fi(){return fi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fi.apply(this,arguments)}function eh(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function th(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nh(e,t,n){return t&&th(e.prototype,t),n&&th(e,n),e}function rh(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qs(e,t)}function qs(e,t){return qs=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},qs(e,t)}function oh(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=Na(e);if(t){var a=Na(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Wm(this,n)}}function Wm(e,t){if(t&&(Zs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Da(e)}function Da(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Na(e){return Na=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Na(e)}function Js(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ih,ah=function(e){rh(n,e);var t=oh(n);function n(){var r;return eh(this,n),Js(Da(r=t.call(this)),"dragHandler",void 0),Js(Da(r),"onDragging",function(a){var o=a.event,u=r.props,p=u.graphModel,d=u.bezierModel,O=u.type,_=p.getPointByClient({x:o.clientX,y:o.clientY}).canvasOverlayPosition,S=_.x,k=_.y;d.updateAdjustAnchor({x:S,y:k},O)}),Js(Da(r),"onDragEnd",function(){r.props.bezierModel.isDragging=!1}),r.dragHandler=new hr({onDragging:r.onDragging,onDragEnd:r.onDragEnd}),r}return nh(n,[{key:"render",value:function(){var r=this,a=this.props.position,o=a.x,u=a.y,p=this.props.bezierModel.getEdgeStyle().adjustAnchor;return Object(te.g)(li,fi({className:"lf-bezier-adjust-anchor",x:o,y:u},p,{onMouseDown:function(d){r.dragHandler.handleMouseDown(d)}}))}}]),n}(te.a),Km=Gn(Jd=function(e){rh(n,e);var t=oh(n);function n(){return eh(this,n),t.apply(this,arguments)}return nh(n,[{key:"getBezierAdjust",value:function(r,a){var o=r.path,u=r.id,p=Vm(_a(o),4),d=p[0],O=p[1],_=p[2],S=p[3],k=r.getEdgeStyle().adjustLine,R=[];return R.push(Object(te.g)(wo,fi({x1:d.x,y1:d.y,x2:O.x,y2:O.y},k))),R.push(Object(te.g)(ah,{position:O,bezierModel:r,graphModel:a,key:"".concat(u,"_ePre"),type:"sNext"})),R.push(Object(te.g)(wo,fi({x1:S.x,y1:S.y,x2:_.x,y2:_.y},k))),R.push(Object(te.g)(ah,{position:_,bezierModel:r,graphModel:a,key:"".concat(u,"_sNext"),type:"ePre"})),R}},{key:"selectedBezierEdge",value:function(){for(var r=this.props.graphModel,a=r.edges,o=[],u=0;u<a.length;u++){var p=a[u];p.isSelected&&p.modelType===ht.BEZIER_EDGE&&p.draggable&&o.push(this.getBezierAdjust(p,r))}return o}},{key:"render",value:function(){return Object(te.g)("g",{className:"lf-bezier-adjust"},this.selectedBezierEdge())}}]),n}(te.a))||Jd;function $s(e){return $s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$s(e)}function Zm(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qs(e,t){return Qs=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Qs(e,t)}function Jm(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=Ca(e);if(t){var a=Ca(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return $m(this,n)}}function $m(e,t){if(t&&($s(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function Ca(e){return Ca=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ca(e)}var uh,Qm=Gn(ih=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&Qs(o,u)})(a,e);var t,n,r=Jm(a);function a(){return Zm(this,a),r.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){var o=this.props.graphModel.transformModel.getTransformStyle().transform,u=this.props.children;return Object(te.g)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%",className:"modification-overlay"},Object(te.g)("g",{transform:o},u))}}])&&qm(t.prototype,n),a}(te.a))||ih;function ec(e){return ec=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ec(e)}function tc(){return tc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tc.apply(this,arguments)}function e0(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nc(e,t){return nc=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},nc(e,t)}function n0(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=Ra(e);if(t){var a=Ra(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return r0(this,n)}}function r0(e,t){if(t&&(ec(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function Ra(e){return Ra=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ra(e)}var o0=Gn(uh=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&nc(o,u)})(a,e);var t,n,r=n0(a);function a(){return e0(this,a),r.apply(this,arguments)}return t=a,n=[{key:"getComponent",value:function(o,u){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"canvas-overlay",d=this.props.getView,O=d(o.type);return Object(te.g)(O,{key:o.id,model:o,graphModel:u,overlay:p})}},{key:"render",value:function(){var o=this,u=this.props,p=u.graphModel,d=u.tool,O=u.options,_=u.dnd,S=u.snaplineModel,k={};O.width&&(k.width="".concat(p.width,"px")),O.height&&(k.height="".concat(p.height,"px"));var R=O.grid,X=p.fakerNode,W=p.editConfigModel.adjustEdge;return Object(te.g)("div",{className:"lf-graph","flow-id":p.flowId,style:k},Object(te.g)(ym,{graphModel:p,dnd:_},Object(te.g)("g",{className:"lf-base"},ca(p.sortElements,function(oe){return o.getComponent(oe,p)})),X?this.getComponent(X,p):""),Object(te.g)(Qm,{graphModel:p},Object(te.g)(Xm,{graphModel:p}),W?Object(te.g)(Km,{graphModel:p}):"",O.snapline!==!1?Object(te.g)(Lm,{snaplineModel:S}):""),Object(te.g)(Om,{graphModel:p,tool:d}),O.background&&Object(te.g)(Sm,{background:O.background}),O.grid&&Object(te.g)(Gd,tc({},R,{graphModel:p})))}}],n&&t0(t.prototype,n),a}(te.a))||uh,i0=o0;function sh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Ia(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sh(Object(n),!0).forEach(function(r){gr(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sh(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function a0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u0=function(){function e(r){var a=this;(function(u,p){if(!(u instanceof p))throw new TypeError("Cannot call a class as a function")})(this,e),gr(this,"nodeConfig",void 0),gr(this,"lf",void 0),gr(this,"fakerNode",void 0),gr(this,"stopDrag",function(){a.nodeConfig=null,window.document.removeEventListener("mouseup",a.stopDrag)}),gr(this,"dragEnter",function(u){a.nodeConfig&&!a.fakerNode&&(a.fakerNode=a.lf.createFakerNode(Ia(Ia({},a.nodeConfig),a.clientToLocalPoint({x:u.clientX,y:u.clientY}))))}),gr(this,"onDragOver",function(u){if(u.preventDefault(),a.fakerNode){var p=a.clientToLocalPoint({x:u.clientX,y:u.clientY}),d=p.x,O=p.y;a.fakerNode.moveTo(d,O);var _=a.fakerNode.getData();a.lf.setNodeSnapLine(_),a.lf.graphModel.eventCenter.emit(tt.NODE_DND_DRAG,{data:_})}return!1}),gr(this,"onDragLeave",function(){a.fakerNode&&(a.lf.removeNodeSnapLine(),a.lf.graphModel.removeFakerNode(),a.fakerNode=null)}),gr(this,"onDrop",function(u){a.lf.graphModel&&u&&a.nodeConfig&&(a.lf.addNode(Ia(Ia({},a.nodeConfig),a.clientToLocalPoint({x:u.clientX,y:u.clientY})),tt.NODE_DND_ADD,u),u.preventDefault(),u.stopPropagation(),a.nodeConfig=null,a.lf.removeNodeSnapLine(),a.lf.graphModel.removeFakerNode(),a.fakerNode=null)});var o=r.lf;this.lf=o}var t,n;return t=e,(n=[{key:"clientToLocalPoint",value:function(r){var a=r.x,o=r.y,u=_f(this.lf.options,["grid","size"]),p=this.lf.graphModel.getPointByClient({x:a,y:o}).canvasOverlayPosition,d=p.x,O=p.y;return{x:Mr(d,u),y:Mr(O,u)}}},{key:"startDrag",value:function(r){this.nodeConfig=r,window.document.addEventListener("mouseup",this.stopDrag)}},{key:"eventMap",value:function(){return{onMouseEnter:this.dragEnter,onMouseOver:this.dragEnter,onMouseMove:this.onDragOver,onMouseLeave:this.onDragLeave,onMouseUp:this.onDrop}}}])&&a0(t.prototype,n),e}();function ch(e){var t=e.container,n=e.grid,r=e.width,a=e.height;if(!t)throw new Error("请检查 container 参数是否有效");if(typeof r=="string"||typeof a=="string")throw new Error("width或height不支持传入字符串，请传数字");return n&&(e.grid=cn({size:20,type:"dot",visible:!0,config:{color:"#ababab",thickness:1}},n)),cn({},fh,e)}var bt,lh,fh={background:!1,grid:!1,textEdit:!0,disabledTools:[]};function rc(e){return rc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rc(e)}function oc(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var o,u,p=[],d=!0,O=!1;try{for(a=a.call(n);!(d=(o=a.next()).done)&&(p.push(o.value),!r||p.length!==r);d=!0);}catch(_){O=!0,u=_}finally{try{d||a.return==null||a.return()}finally{if(O)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return ph(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return ph(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ph(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function dh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function La(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dh(Object(n),!0).forEach(function(r){hh(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dh(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function s0(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function c0(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pi(){return pi=typeof Reflect!="undefined"&&Reflect.get?Reflect.get:function(e,t,n){var r=f0(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},pi.apply(this,arguments)}function f0(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Ir(e))!==null;);return e}function ic(e,t){return ic=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},ic(e,t)}function p0(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=Ir(e);if(t){var a=Ir(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return d0(this,n)}}function d0(e,t){if(t&&(rc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return za(e)}function za(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ir(e){return Ir=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ir(e)}function hh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fn(e,t,n,r,a){var o={};return Object.keys(r).forEach(function(u){o[u]=r[u]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(u,p){return p(e,t,u)||u},o),a&&o.initializer!==void 0&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),o.initializer===void 0&&(Object.defineProperty(e,t,o),o=null),o}var ac=(bt=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&ic(o,u)})(a,e);var t,n,r=p0(a);function a(){var o;c0(this,a);for(var u=arguments.length,p=new Array(u),d=0;d<u;d++)p[d]=arguments[d];return hh(za(o=r.call.apply(r,[this].concat(p))),"modelType",ht.BEZIER_EDGE),s0(za(o),"path",lh,za(o)),o}return t=a,(n=[{key:"initEdgeData",value:function(o){this.offset=100,pi(Ir(a.prototype),"initEdgeData",this).call(this,o)}},{key:"getEdgeStyle",value:function(){var o=this.graphModel.theme.bezier;return La(La({},pi(Ir(a.prototype),"getEdgeStyle",this).call(this)),Nt(o))}},{key:"getTextPosition",value:function(){if(this.pointsList&&this.pointsList.length>0){var o=0,u=0;return this.pointsList.forEach(function(p){var d=p.x,O=p.y;o+=d,u+=O}),{x:o/this.pointsList.length,y:u/this.pointsList.length}}return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}}},{key:"getData",value:function(){var o=pi(Ir(a.prototype),"getData",this).call(this),u=this.pointsList.map(function(p){return{x:p.x,y:p.y}});return La(La({},o),{},{pointsList:u})}},{key:"getControls",value:function(){var o=this.startPoint,u=this.endPoint;return bd({start:o,end:u,sourceNode:this.sourceNode,targetNode:this.targetNode,offset:this.offset})}},{key:"getPath",value:function(o){var u=oc(o,4),p=u[0],d=u[1],O=u[2],_=u[3];return"M ".concat(p.x," ").concat(p.y,`
    C `).concat(d.x," ").concat(d.y,`,
    `).concat(O.x," ").concat(O.y,`,
    `).concat(_.x," ").concat(_.y)}},{key:"initPoints",value:function(){this.pointsList.length>0?this.path=this.getPath(this.pointsList):this.updatePoints()}},{key:"updatePoints",value:function(){var o=this.getControls(),u=o.sNext,p=o.ePre;this.updatePath(u,p)}},{key:"updatePath",value:function(o,u){o=Nt(o),u=Nt(u);var p={x:this.startPoint.x,y:this.startPoint.y},d={x:this.endPoint.x,y:this.endPoint.y};if(!o||!u){var O=this.getControls();o=O.sNext,u=O.ePre}this.pointsList=[p,o,u,d],this.path=this.getPath(this.pointsList)}},{key:"updateStartPoint",value:function(o){this.startPoint=o,this.updatePoints()}},{key:"updateEndPoint",value:function(o){this.endPoint=o,this.updatePoints()}},{key:"moveStartPoint",value:function(o,u){this.startPoint.x+=o,this.startPoint.y+=u;var p=oc(this.pointsList,3),d=p[1],O=p[2];d.x+=o,d.y+=u,this.updatePath(d,O)}},{key:"moveEndPoint",value:function(o,u){this.endPoint.x+=o,this.endPoint.y+=u;var p=oc(this.pointsList,3),d=p[1],O=p[2];O.x+=o,O.y+=u,this.updatePath(d,O)}},{key:"updateAdjustAnchor",value:function(o,u){u==="sNext"?this.pointsList[1]=o:u==="ePre"&&(this.pointsList[2]=o),this.path=this.getPath(this.pointsList),this.setText(Object.assign({},this.text,this.textPosition))}},{key:"getAdjustStart",value:function(){return this.pointsList[0]||this.startPoint}},{key:"getAdjustEnd",value:function(){var o=this.pointsList;return o[o.length-1]||this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(o){var u=o.startPoint,p=o.endPoint,d=o.sourceNode,O=o.targetNode,_=bd({start:u,end:p,sourceNode:d,targetNode:O,offset:this.offset}),S=_.sNext,k=_.ePre;this.pointsList=[u,S,k,p],this.initPoints()}}])&&l0(t.prototype,n),a}(ms),lh=Fn(bt.prototype,"path",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Fn(bt.prototype,"initPoints",[c.k],Object.getOwnPropertyDescriptor(bt.prototype,"initPoints"),bt.prototype),Fn(bt.prototype,"updatePoints",[c.k],Object.getOwnPropertyDescriptor(bt.prototype,"updatePoints"),bt.prototype),Fn(bt.prototype,"updateStartPoint",[c.k],Object.getOwnPropertyDescriptor(bt.prototype,"updateStartPoint"),bt.prototype),Fn(bt.prototype,"updateEndPoint",[c.k],Object.getOwnPropertyDescriptor(bt.prototype,"updateEndPoint"),bt.prototype),Fn(bt.prototype,"moveStartPoint",[c.k],Object.getOwnPropertyDescriptor(bt.prototype,"moveStartPoint"),bt.prototype),Fn(bt.prototype,"moveEndPoint",[c.k],Object.getOwnPropertyDescriptor(bt.prototype,"moveEndPoint"),bt.prototype),Fn(bt.prototype,"updateAdjustAnchor",[c.k],Object.getOwnPropertyDescriptor(bt.prototype,"updateAdjustAnchor"),bt.prototype),Fn(bt.prototype,"getAdjustStart",[c.k],Object.getOwnPropertyDescriptor(bt.prototype,"getAdjustStart"),bt.prototype),Fn(bt.prototype,"getAdjustEnd",[c.k],Object.getOwnPropertyDescriptor(bt.prototype,"getAdjustEnd"),bt.prototype),Fn(bt.prototype,"updateAfterAdjustStartAndEnd",[c.k],Object.getOwnPropertyDescriptor(bt.prototype,"updateAfterAdjustStartAndEnd"),bt.prototype),bt),Ne,yh,gh,vh,bh,mh,Oh,_h,wh,xh,Eh,Sh,jh,Ph,Ah,kh,Th,Mh,Dh,Nh,h0=function(e){return e==null};function uc(e){return uc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uc(e)}function y0(e,t){var n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(d,O){if(d){if(typeof d=="string")return Ch(d,O);var _=Object.prototype.toString.call(d).slice(8,-1);if(_==="Object"&&d.constructor&&(_=d.constructor.name),_==="Map"||_==="Set")return Array.from(d);if(_==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_))return Ch(d,O)}}(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(d){throw d},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,u=!0,p=!1;return{s:function(){n=n.call(e)},n:function(){var d=n.next();return u=d.done,d},e:function(d){p=!0,o=d},f:function(){try{u||n.return==null||n.return()}finally{if(p)throw o}}}}function Ch(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Rh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function fn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Rh(Object(n),!0).forEach(function(r){bn(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rh(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Wt(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function g0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pt(e,t,n,r,a){var o={};return Object.keys(r).forEach(function(u){o[u]=r[u]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(u,p){return p(e,t,u)||u},o),a&&o.initializer!==void 0&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),o.initializer===void 0&&(Object.defineProperty(e,t,o),o=null),o}var vr,Ih,br=(Ne=function(){function e(r,a){(function(o,u){if(!(o instanceof u))throw new TypeError("Cannot call a class as a function")})(this,e),bn(this,"id",""),Wt(this,"type",yh,this),Wt(this,"x",gh,this),Wt(this,"y",vh,this),Wt(this,"text",bh,this),Wt(this,"properties",mh,this),Wt(this,"_width",Oh,this),Wt(this,"_height",_h,this),Wt(this,"anchorsOffset",wh,this),Wt(this,"isSelected",xh,this),Wt(this,"isHovered",Eh,this),Wt(this,"isShowAnchor",Sh,this),Wt(this,"isDragging",jh,this),Wt(this,"isHitable",Ph,this),Wt(this,"draggable",Ah,this),Wt(this,"visible",kh,this),bn(this,"virtual",!1),bn(this,"graphModel",void 0),Wt(this,"zIndex",Th,this),Wt(this,"state",Mh,this),Wt(this,"autoToFront",Dh,this),Wt(this,"style",Nh,this),bn(this,"BaseType",Gt.NODE),bn(this,"modelType",ht.NODE),bn(this,"additionStateData",void 0),bn(this,"targetRules",[]),bn(this,"sourceRules",[]),bn(this,"moveRules",[]),bn(this,"hasSetTargetRules",!1),bn(this,"hasSetSourceRules",!1),this.graphModel=a,this.initNodeData(r),this.setAttributes()}var t,n;return t=e,n=[{key:"width",get:function(){return this._width},set:function(r){this._width=r}},{key:"height",get:function(){return this._height},set:function(r){this._height=r}},{key:"incoming",get:function(){return{nodes:this.graphModel.getNodeIncomingNode(this.id),edges:this.graphModel.getNodeIncomingEdge(this.id)}}},{key:"outgoing",get:function(){return{nodes:this.graphModel.getNodeOutgoingNode(this.id),edges:this.graphModel.getNodeOutgoingEdge(this.id)}}},{key:"initNodeData",value:function(r){if(r.properties||(r.properties={}),!r.id){var a=this.graphModel.idGenerator,o=a&&a(r.type),u=this.createId();r.id=u||o||Dr()}this.formatText(r),cn(this,function(p){return ei(p,["id","type","x","y","text","properties","virtual"])}(r)),this.graphModel.overlapMode===Sn.INCREASE&&(this.zIndex=r.zIndex||vs())}},{key:"setAttributes",value:function(){}},{key:"createId",value:function(){return null}},{key:"formatText",value:function(r){r.text||(r.text={value:"",x:r.x,y:r.y,draggable:!1,editable:!0}),r.text&&typeof r.text=="string"?r.text={value:r.text,x:r.x,y:r.y,draggable:!1,editable:!0}:r.text&&r.text.editable===void 0&&(r.text.editable=!0)}},{key:"getData",value:function(){var r=this.text,a=r.x,o=r.y,u=r.value,p=this.properties;Object(c.x)(p)&&(p=Object(c.I)(p));var d={id:this.id,type:this.type,x:this.x,y:this.y,properties:p};return this.graphModel.overlapMode===Sn.INCREASE&&(d.zIndex=this.zIndex),u&&(d.text={x:a,y:o,value:u}),d}},{key:"getHistoryData",value:function(){return this.getData()}},{key:"getProperties",value:function(){return Object(c.I)(this.properties)}},{key:"getNodeStyle",value:function(){return fn(fn({},this.graphModel.theme.baseNode),this.style)}},{key:"getTextStyle",value:function(){var r=this.graphModel.theme.nodeText;return Nt(r)}},{key:"getAnchorStyle",value:function(r){var a=this.graphModel.theme.anchor;return Nt(a)}},{key:"getAnchorLineStyle",value:function(r){var a=this.graphModel.theme.anchorLine;return Nt(a)}},{key:"getOutlineStyle",value:function(){var r=this.graphModel.theme.outline;return Nt(r)}},{key:"isAllowConnectedAsSource",value:function(r,a,o,u){var p=this.hasSetSourceRules?this.sourceRules:this.getConnectedSourceRules();this.hasSetSourceRules=!0;for(var d,O=!0,_=0;_<p.length;_++){var S=p[_];if(!S.validate.call(this,this,r,a,o,u)){O=!1,d=S.message;break}}return{isAllPass:O,msg:d}}},{key:"getConnectedSourceRules",value:function(){return this.sourceRules}},{key:"isAllowConnectedAsTarget",value:function(r,a,o,u){var p=this.hasSetTargetRules?this.targetRules:this.getConnectedTargetRules();this.hasSetTargetRules=!0;for(var d,O=!0,_=0;_<p.length;_++){var S=p[_];if(!S.validate.call(this,r,this,a,o,u)){O=!1,d=S.message;break}}return{isAllPass:O,msg:d}}},{key:"isAllowMoveNode",value:function(r,a){var o,u=!0,p=!0,d=y0(this.moveRules.concat(this.graphModel.nodeMoveRules));try{for(d.s();!(o=d.n()).done;){var O=(0,o.value)(this,r,a);if(!O)return!1;if(uc(O)==="object"){var _=O;if(_.x===!1&&_.y===!1)return!1;u=u&&_.x,p=p&&_.y}}}catch(S){d.e(S)}finally{d.f()}return{x:u,y:p}}},{key:"getConnectedTargetRules",value:function(){return this.targetRules}},{key:"getAnchorsByOffset",value:function(){var r=this.anchorsOffset,a=this.id,o=this.x,u=this.y;return r&&r.length>0?r.map(function(p,d){return p.length?(p=p,{id:"".concat(a,"_").concat(d),x:o+p[0],y:u+p[1]}):fn(fn({},p=p),{},{x:o+p.x,y:u+p.y,id:p.id||"".concat(a,"_").concat(d)})}):this.getDefaultAnchor()}},{key:"getDefaultAnchor",value:function(){return[]}},{key:"getTargetAnchor",value:function(r){return function(a,o){for(var u,p=hs(o),d=Number.MAX_SAFE_INTEGER,O=0;O<p.length;O++){var _=Jn(a.x,a.y,p[O].x,p[O].y);_<d&&(d=_,u={index:O,anchor:wp(wp({},p[O]),{},{x:p[O].x,y:p[O].y,id:p[O].id})})}return u}(r,this)}},{key:"getBounds",value:function(){return{x1:this.x-this.width/2,y1:this.y-this.height/2,x2:this.x+this.width/2,y2:this.y+this.height/2}}},{key:"anchors",get:function(){return this.getAnchorsByOffset()}},{key:"getAnchorInfo",value:function(r){if(!h0(r))for(var a=0;a<this.anchors.length;a++){var o=this.anchors[a];if(o.id===r)return o}}},{key:"addNodeMoveRules",value:function(r){this.moveRules.includes(r)||this.moveRules.push(r)}},{key:"move",value:function(r,a){var o=arguments.length>2&&arguments[2]!==void 0&&arguments[2],u=!1,p=!1;if(o)u=!0,p=!0;else{var d=this.isAllowMoveNode(r,a);typeof d=="boolean"?(u=d,p=d):(u=d.x,p=d.y)}if(u){var O=this.x+r;this.x=O,this.text&&this.moveText(r,0)}if(p){var _=this.y+a;this.y=_,this.text&&this.moveText(0,a)}return u||p}},{key:"getMoveDistance",value:function(r,a){var o=arguments.length>2&&arguments[2]!==void 0&&arguments[2],u=!1,p=!1,d=0,O=0;if(o)u=!0,p=!0;else{var _=this.isAllowMoveNode(r,a);typeof _=="boolean"?(u=_,p=_):(u=_.x,p=_.y)}if(u&&r){var S=this.x+r;this.x=S,this.text&&this.moveText(r,0),d=r}if(p&&a){var k=this.y+a;this.y=k,this.text&&this.moveText(0,a),O=a}return[d,O]}},{key:"moveTo",value:function(r,a){var o=arguments.length>2&&arguments[2]!==void 0&&arguments[2],u=r-this.x,p=a-this.y;return!(!o&&!this.isAllowMoveNode(u,p)||(this.text&&this.text&&this.moveText(u,p),this.x=r,this.y=a,0))}},{key:"moveText",value:function(r,a){var o=this.text,u=o.x,p=o.y,d=o.value,O=o.draggable,_=o.editable;this.text={value:d,editable:_,draggable:O,x:u+r,y:p+a}}},{key:"updateText",value:function(r){this.text=fn(fn({},Object(c.I)(this.text)),{},{value:r})}},{key:"setSelected",value:function(){var r=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isSelected=r}},{key:"setHovered",value:function(){var r=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHovered=r,this.setIsShowAnchor(r)}},{key:"setIsShowAnchor",value:function(){var r=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isShowAnchor=r}},{key:"setHitable",value:function(){var r=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHitable=r}},{key:"setElementState",value:function(r,a){this.state=r,this.additionStateData=a}},{key:"setProperty",value:function(r,a){this.properties=fn(fn({},Object(c.I)(this.properties)),{},bn({},r,nn(a))),this.setAttributes()}},{key:"setProperties",value:function(r){this.properties=fn(fn({},Object(c.I)(this.properties)),nn(r)),this.setAttributes()}},{key:"deleteProperty",value:function(r){delete this.properties[r],this.setAttributes()}},{key:"setStyle",value:function(r,a){this.style=fn(fn({},this.style),{},bn({},r,nn(a)))}},{key:"setStyles",value:function(r){this.style=fn(fn({},this.style),nn(r))}},{key:"updateStyles",value:function(r){this.style=fn({},nn(r))}},{key:"setZIndex",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.zIndex=r}},{key:"updateAttributes",value:function(r){cn(this,r)}}],n&&g0(t.prototype,n),e}(),yh=pt(Ne.prototype,"type",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),gh=pt(Ne.prototype,"x",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),vh=pt(Ne.prototype,"y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),bh=pt(Ne.prototype,"text",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{value:"",x:0,y:0,draggable:!1,editable:!0}}}),mh=pt(Ne.prototype,"properties",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Oh=pt(Ne.prototype,"_width",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),_h=pt(Ne.prototype,"_height",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 80}}),wh=pt(Ne.prototype,"anchorsOffset",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),xh=pt(Ne.prototype,"isSelected",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Eh=pt(Ne.prototype,"isHovered",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Sh=pt(Ne.prototype,"isShowAnchor",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),jh=pt(Ne.prototype,"isDragging",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ph=pt(Ne.prototype,"isHitable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ah=pt(Ne.prototype,"draggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),kh=pt(Ne.prototype,"visible",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Th=pt(Ne.prototype,"zIndex",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Mh=pt(Ne.prototype,"state",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Dh=pt(Ne.prototype,"autoToFront",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Nh=pt(Ne.prototype,"style",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),pt(Ne.prototype,"incoming",[c.m],Object.getOwnPropertyDescriptor(Ne.prototype,"incoming"),Ne.prototype),pt(Ne.prototype,"outgoing",[c.m],Object.getOwnPropertyDescriptor(Ne.prototype,"outgoing"),Ne.prototype),pt(Ne.prototype,"addNodeMoveRules",[c.k],Object.getOwnPropertyDescriptor(Ne.prototype,"addNodeMoveRules"),Ne.prototype),pt(Ne.prototype,"move",[c.k],Object.getOwnPropertyDescriptor(Ne.prototype,"move"),Ne.prototype),pt(Ne.prototype,"getMoveDistance",[c.k],Object.getOwnPropertyDescriptor(Ne.prototype,"getMoveDistance"),Ne.prototype),pt(Ne.prototype,"moveTo",[c.k],Object.getOwnPropertyDescriptor(Ne.prototype,"moveTo"),Ne.prototype),pt(Ne.prototype,"moveText",[c.k],Object.getOwnPropertyDescriptor(Ne.prototype,"moveText"),Ne.prototype),pt(Ne.prototype,"updateText",[c.k],Object.getOwnPropertyDescriptor(Ne.prototype,"updateText"),Ne.prototype),pt(Ne.prototype,"setSelected",[c.k],Object.getOwnPropertyDescriptor(Ne.prototype,"setSelected"),Ne.prototype),pt(Ne.prototype,"setHovered",[c.k],Object.getOwnPropertyDescriptor(Ne.prototype,"setHovered"),Ne.prototype),pt(Ne.prototype,"setIsShowAnchor",[c.k],Object.getOwnPropertyDescriptor(Ne.prototype,"setIsShowAnchor"),Ne.prototype),pt(Ne.prototype,"setHitable",[c.k],Object.getOwnPropertyDescriptor(Ne.prototype,"setHitable"),Ne.prototype),pt(Ne.prototype,"setElementState",[c.k],Object.getOwnPropertyDescriptor(Ne.prototype,"setElementState"),Ne.prototype),pt(Ne.prototype,"setProperty",[c.k],Object.getOwnPropertyDescriptor(Ne.prototype,"setProperty"),Ne.prototype),pt(Ne.prototype,"setProperties",[c.k],Object.getOwnPropertyDescriptor(Ne.prototype,"setProperties"),Ne.prototype),pt(Ne.prototype,"deleteProperty",[c.k],Object.getOwnPropertyDescriptor(Ne.prototype,"deleteProperty"),Ne.prototype),pt(Ne.prototype,"setStyle",[c.k],Object.getOwnPropertyDescriptor(Ne.prototype,"setStyle"),Ne.prototype),pt(Ne.prototype,"setStyles",[c.k],Object.getOwnPropertyDescriptor(Ne.prototype,"setStyles"),Ne.prototype),pt(Ne.prototype,"updateStyles",[c.k],Object.getOwnPropertyDescriptor(Ne.prototype,"updateStyles"),Ne.prototype),pt(Ne.prototype,"setZIndex",[c.k],Object.getOwnPropertyDescriptor(Ne.prototype,"setZIndex"),Ne.prototype),pt(Ne.prototype,"updateAttributes",[c.k],Object.getOwnPropertyDescriptor(Ne.prototype,"updateAttributes"),Ne.prototype),Ne);function sc(e){return sc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sc(e)}function Lh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function zh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Lh(Object(n),!0).forEach(function(r){Bh(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lh(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function v0(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function b0(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cc(){return cc=typeof Reflect!="undefined"&&Reflect.get?Reflect.get:function(e,t,n){var r=O0(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},cc.apply(this,arguments)}function O0(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Eo(e))!==null;);return e}function lc(e,t){return lc=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},lc(e,t)}function _0(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=Eo(e);if(t){var a=Eo(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w0(this,n)}}function w0(e,t){if(t&&(sc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ba(e)}function Ba(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Eo(e){return Eo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Eo(e)}function Bh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fc(e,t,n,r,a){var o={};return Object.keys(r).forEach(function(u){o[u]=r[u]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(u,p){return p(e,t,u)||u},o),a&&o.initializer!==void 0&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),o.initializer===void 0&&(Object.defineProperty(e,t,o),o=null),o}var rn,Fh,Uh,pc=(vr=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&lc(o,u)})(a,e);var t,n,r=_0(a);function a(){var o;b0(this,a);for(var u=arguments.length,p=new Array(u),d=0;d<u;d++)p[d]=arguments[d];return Bh(Ba(o=r.call.apply(r,[this].concat(p))),"modelType",ht.CIRCLE_NODE),v0(Ba(o),"r",Ih,Ba(o)),o}return t=a,(n=[{key:"width",get:function(){return 2*this.r}},{key:"height",get:function(){return 2*this.r}},{key:"getNodeStyle",value:function(){var o=cc(Eo(a.prototype),"getNodeStyle",this).call(this),u=this.graphModel.theme.circle;return zh(zh({},o),Nt(u))}},{key:"getDefaultAnchor",value:function(){var o=this.x,u=this.y,p=this.r;return[{x:o,y:u-p,id:"".concat(this.id,"_0")},{x:o+p,y:u,id:"".concat(this.id,"_1")},{x:o,y:u+p,id:"".concat(this.id,"_2")},{x:o-p,y:u,id:"".concat(this.id,"_3")}]}}])&&m0(t.prototype,n),a}(br),Ih=fc(vr.prototype,"r",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),fc(vr.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(vr.prototype,"width"),vr.prototype),fc(vr.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(vr.prototype,"height"),vr.prototype),vr);i(127);function dc(e){return dc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dc(e)}function hc(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var o,u,p=[],d=!0,O=!1;try{for(a=a.call(n);!(d=(o=a.next()).done)&&(p.push(o.value),!r||p.length!==r);d=!0);}catch(_){O=!0,u=_}finally{try{d||a.return==null||a.return()}finally{if(O)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return Hh(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Hh(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Hh(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Gh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Xh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Gh(Object(n),!0).forEach(function(r){Vh(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gh(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Yh(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function x0(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yc(){return yc=typeof Reflect!="undefined"&&Reflect.get?Reflect.get:function(e,t,n){var r=S0(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},yc.apply(this,arguments)}function S0(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=jo(e))!==null;);return e}function gc(e,t){return gc=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},gc(e,t)}function j0(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=jo(e);if(t){var a=jo(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return P0(this,n)}}function P0(e,t){if(t&&(dc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return So(e)}function So(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jo(e){return jo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},jo(e)}function Vh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Po(e,t,n,r,a){var o={};return Object.keys(r).forEach(function(u){o[u]=r[u]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(u,p){return p(e,t,u)||u},o),a&&o.initializer!==void 0&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),o.initializer===void 0&&(Object.defineProperty(e,t,o),o=null),o}var tr,Wh,Kh,vc=(rn=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&gc(o,u)})(a,e);var t,n,r=j0(a);function a(){var o;x0(this,a);for(var u=arguments.length,p=new Array(u),d=0;d<u;d++)p[d]=arguments[d];return Vh(So(o=r.call.apply(r,[this].concat(p))),"modelType",ht.DIAMOND_NODE),Yh(So(o),"rx",Fh,So(o)),Yh(So(o),"ry",Uh,So(o)),o}return t=a,(n=[{key:"getNodeStyle",value:function(){var o=yc(jo(a.prototype),"getNodeStyle",this).call(this),u=this.graphModel.theme.diamond;return Xh(Xh({},o),Nt(u))}},{key:"points",get:function(){var o=this.x,u=this.y,p=this.rx,d=this.ry;return[[o,u-d],[o+p,u],[o,u+d],[o-p,u]]}},{key:"pointsPosition",get:function(){return this.points.map(function(o){return{x:o[0],y:o[1]}})}},{key:"width",get:function(){var o=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(p){var d=hc(p,1)[0];d<o&&(o=d),d>u&&(u=d)}),u-o}},{key:"height",get:function(){var o=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(p){var d=hc(p,2)[1];d<o&&(o=d),d>u&&(u=d)}),u-o}},{key:"getDefaultAnchor",value:function(){var o=this;return this.points.map(function(u,p){var d=hc(u,2);return{x:d[0],y:d[1],id:"".concat(o.id,"_").concat(p)}})}}])&&E0(t.prototype,n),a}(br),Fh=Po(rn.prototype,"rx",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),Uh=Po(rn.prototype,"ry",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),Po(rn.prototype,"points",[c.m],Object.getOwnPropertyDescriptor(rn.prototype,"points"),rn.prototype),Po(rn.prototype,"pointsPosition",[c.m],Object.getOwnPropertyDescriptor(rn.prototype,"pointsPosition"),rn.prototype),Po(rn.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(rn.prototype,"width"),rn.prototype),Po(rn.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(rn.prototype,"height"),rn.prototype),rn);function bc(e){return bc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bc(e)}function Zh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function qh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Zh(Object(n),!0).forEach(function(r){$h(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zh(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Jh(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function A0(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mc(){return mc=typeof Reflect!="undefined"&&Reflect.get?Reflect.get:function(e,t,n){var r=T0(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},mc.apply(this,arguments)}function T0(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=ko(e))!==null;);return e}function Oc(e,t){return Oc=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Oc(e,t)}function M0(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=ko(e);if(t){var a=ko(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return D0(this,n)}}function D0(e,t){if(t&&(bc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ao(e)}function Ao(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ko(e){return ko=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ko(e)}function $h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fa(e,t,n,r,a){var o={};return Object.keys(r).forEach(function(u){o[u]=r[u]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(u,p){return p(e,t,u)||u},o),a&&o.initializer!==void 0&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),o.initializer===void 0&&(Object.defineProperty(e,t,o),o=null),o}var In,Qh,_c=(tr=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&Oc(o,u)})(a,e);var t,n,r=M0(a);function a(){var o;A0(this,a);for(var u=arguments.length,p=new Array(u),d=0;d<u;d++)p[d]=arguments[d];return $h(Ao(o=r.call.apply(r,[this].concat(p))),"modelType",ht.ELLIPSE_NODE),Jh(Ao(o),"rx",Wh,Ao(o)),Jh(Ao(o),"ry",Kh,Ao(o)),o}return t=a,(n=[{key:"getNodeStyle",value:function(){var o=mc(ko(a.prototype),"getNodeStyle",this).call(this),u=this.graphModel.theme.ellipse;return qh(qh({},o),Nt(u))}},{key:"width",get:function(){return 2*this.rx}},{key:"height",get:function(){return 2*this.ry}},{key:"getDefaultAnchor",value:function(){var o=this.x,u=this.y,p=this.rx,d=this.ry;return[{x:o,y:u-d,id:"".concat(this.id,"_0")},{x:o+p,y:u,id:"".concat(this.id,"_1")},{x:o,y:u+d,id:"".concat(this.id,"_2")},{x:o-p,y:u,id:"".concat(this.id,"_3")}]}}])&&k0(t.prototype,n),a}(br),Wh=Fa(tr.prototype,"rx",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),Kh=Fa(tr.prototype,"ry",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 45}}),Fa(tr.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(tr.prototype,"width"),tr.prototype),Fa(tr.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(tr.prototype,"height"),tr.prototype),tr);function wc(e){return wc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wc(e)}function xc(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var o,u,p=[],d=!0,O=!1;try{for(a=a.call(n);!(d=(o=a.next()).done)&&(p.push(o.value),!r||p.length!==r);d=!0);}catch(_){O=!0,u=_}finally{try{d||a.return==null||a.return()}finally{if(O)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return ey(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return ey(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ey(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ty(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function ny(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ty(Object(n),!0).forEach(function(r){ry(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ty(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function N0(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function C0(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ec(){return Ec=typeof Reflect!="undefined"&&Reflect.get?Reflect.get:function(e,t,n){var r=I0(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},Ec.apply(this,arguments)}function I0(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=To(e))!==null;);return e}function Sc(e,t){return Sc=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Sc(e,t)}function L0(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=To(e);if(t){var a=To(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return z0(this,n)}}function z0(e,t){if(t&&(wc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ua(e)}function Ua(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function To(e){return To=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},To(e)}function ry(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ha(e,t,n,r,a){var o={};return Object.keys(r).forEach(function(u){o[u]=r[u]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(u,p){return p(e,t,u)||u},o),a&&o.initializer!==void 0&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),o.initializer===void 0&&(Object.defineProperty(e,t,o),o=null),o}var jc,oy,Pc=(In=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&Sc(o,u)})(a,e);var t,n,r=L0(a);function a(){var o;C0(this,a);for(var u=arguments.length,p=new Array(u),d=0;d<u;d++)p[d]=arguments[d];return ry(Ua(o=r.call.apply(r,[this].concat(p))),"modelType",ht.POLYGON_NODE),N0(Ua(o),"points",Qh,Ua(o)),o}return t=a,(n=[{key:"getNodeStyle",value:function(){var o=Ec(To(a.prototype),"getNodeStyle",this).call(this),u=this.graphModel.theme.polygon;return ny(ny({},o),Nt(u))}},{key:"pointsPosition",get:function(){var o=this.x,u=this.y,p=this.width,d=this.height;return this.points.map(function(O){return{x:O[0]+o-p/2,y:O[1]+u-d/2}})}},{key:"width",get:function(){var o=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(p){var d=xc(p,1)[0];d<o&&(o=d),d>u&&(u=d)}),u-o}},{key:"height",get:function(){var o=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(p){var d=xc(p,2)[1];d<o&&(o=d),d>u&&(u=d)}),u-o}},{key:"getDefaultAnchor",value:function(){var o=this,u=this.x,p=this.y,d=this.width,O=this.height;return this.points.map(function(_,S){var k=xc(_,2),R=k[0],X=k[1];return{x:u+R-d/2,y:p+X-O/2,id:"".concat(o.id,"_").concat(S)}})}}])&&R0(t.prototype,n),a}(br),Qh=Ha(In.prototype,"points",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[[50,0],[100,50],[50,100],[0,50]]}}),Ha(In.prototype,"pointsPosition",[c.m],Object.getOwnPropertyDescriptor(In.prototype,"pointsPosition"),In.prototype),Ha(In.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(In.prototype,"width"),In.prototype),Ha(In.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(In.prototype,"height"),In.prototype),In);function Ac(e){return Ac=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ac(e)}function iy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function ay(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?iy(Object(n),!0).forEach(function(r){uy(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iy(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function B0(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function F0(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kc(){return kc=typeof Reflect!="undefined"&&Reflect.get?Reflect.get:function(e,t,n){var r=H0(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},kc.apply(this,arguments)}function H0(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Mo(e))!==null;);return e}function Tc(e,t){return Tc=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Tc(e,t)}function G0(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=Mo(e);if(t){var a=Mo(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return X0(this,n)}}function X0(e,t){if(t&&(Ac(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ga(e)}function Ga(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mo(e){return Mo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Mo(e)}function uy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Lr,Mc=(jc=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&Tc(o,u)})(a,e);var t,n,r=G0(a);function a(){var o;F0(this,a);for(var u=arguments.length,p=new Array(u),d=0;d<u;d++)p[d]=arguments[d];return uy(Ga(o=r.call.apply(r,[this].concat(p))),"modelType",ht.RECT_NODE),B0(Ga(o),"radius",oy,Ga(o)),o}return t=a,(n=[{key:"getDefaultAnchor",value:function(){var o=this.x,u=this.y,p=this.width,d=this.height;return[{x:o,y:u-d/2,id:"".concat(this.id,"_0")},{x:o+p/2,y:u,id:"".concat(this.id,"_1")},{x:o,y:u+d/2,id:"".concat(this.id,"_2")},{x:o-p/2,y:u,id:"".concat(this.id,"_3")}]}},{key:"getNodeStyle",value:function(){var o=kc(Mo(a.prototype),"getNodeStyle",this).call(this),u=this.graphModel.theme.rect;return ay(ay({},o),Nt(u))}}])&&U0(t.prototype,n),a}(br),oy=function(e,t,n,r,a){var o={};return Object.keys(r).forEach(function(u){o[u]=r[u]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(u,p){return p(e,t,u)||u},o),a&&o.initializer!==void 0&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),o.initializer===void 0&&(Object.defineProperty(e,t,o),o=null),o}(jc.prototype,"radius",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),jc);function Dc(e){return Dc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dc(e)}function sy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function cy(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sy(Object(n),!0).forEach(function(r){fy(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sy(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Y0(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Nc(){return Nc=typeof Reflect!="undefined"&&Reflect.get?Reflect.get:function(e,t,n){var r=W0(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},Nc.apply(this,arguments)}function W0(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Do(e))!==null;);return e}function Cc(e,t){return Cc=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Cc(e,t)}function K0(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=Do(e);if(t){var a=Do(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Z0(this,n)}}function Z0(e,t){if(t&&(Dc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ly(e)}function ly(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Do(e){return Do=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Do(e)}function fy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function py(e,t,n,r,a){var o={};return Object.keys(r).forEach(function(u){o[u]=r[u]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(u,p){return p(e,t,u)||u},o),a&&o.initializer!==void 0&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),o.initializer===void 0&&(Object.defineProperty(e,t,o),o=null),o}var Rc=(Lr=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&Cc(o,u)})(a,e);var t,n,r=K0(a);function a(){var o;Y0(this,a);for(var u=arguments.length,p=new Array(u),d=0;d<u;d++)p[d]=arguments[d];return fy(ly(o=r.call.apply(r,[this].concat(p))),"modelType",ht.TEXT_NODE),o}return t=a,(n=[{key:"getTextStyle",value:function(){var o=Nc(Do(a.prototype),"getTextStyle",this).call(this),u=this.graphModel.theme.text;return cy(cy({},o),Nt(u))}},{key:"width",get:function(){var o=String(this.text.value).split(/[\r\n]/g),u=this.getTextStyle().fontSize;return gs({rows:o,fontSize:u,rowsLength:o.length}).width}},{key:"height",get:function(){var o=String(this.text.value).split(/[\r\n]/g),u=this.getTextStyle().fontSize;return gs({rows:o,fontSize:u,rowsLength:o.length}).height}}])&&V0(t.prototype,n),a}(br),py(Lr.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(Lr.prototype,"width"),Lr.prototype),py(Lr.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(Lr.prototype,"height"),Lr.prototype),Lr);function Ic(e){return Ic=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ic(e)}function q0(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function J0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Lc(e,t){return Lc=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Lc(e,t)}function $0(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=Xa(e);if(t){var a=Xa(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Q0(this,n)}}function Q0(e,t){if(t&&(Ic(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dy(e)}function dy(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xa(e){return Xa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Xa(e)}function eO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Un,hy,yy,gy,zc=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&Lc(o,u)})(a,e);var t,n,r=$0(a);function a(){var o;q0(this,a);for(var u=arguments.length,p=new Array(u),d=0;d<u;d++)p[d]=arguments[d];return eO(dy(o=r.call.apply(r,[this].concat(p))),"modelType",ht.HTML_NODE),o}return t=a,(n=[{key:"getDefaultAnchor",value:function(){var o=this.x,u=this.y,p=this.width,d=this.height;return[{x:o,y:u-d/2,id:"".concat(this.id,"_0")},{x:o+p/2,y:u,id:"".concat(this.id,"_1")},{x:o,y:u+d/2,id:"".concat(this.id,"_2")},{x:o-p/2,y:u,id:"".concat(this.id,"_3")}]}}])&&J0(t.prototype,n),a}(br);function vy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Bc(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function tO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function by(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function di(e,t,n,r,a){var o={};return Object.keys(r).forEach(function(u){o[u]=r[u]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(u,p){return p(e,t,u)||u},o),a&&o.initializer!==void 0&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),o.initializer===void 0&&(Object.defineProperty(e,t,o),o=null),o}var my=(Un=function(){function e(r){(function(a,o){if(!(a instanceof o))throw new TypeError("Cannot call a class as a function")})(this,e),by(this,"graphModel",void 0),Bc(this,"isShowHorizontal",hy,this),Bc(this,"isShowVertical",yy,this),Bc(this,"position",gy,this),this.isShowHorizontal=!1,this.isShowVertical=!1,this.position={x:0,y:0},this.graphModel=r}var t,n;return t=e,n=[{key:"getStyle",value:function(){return function(r){for(var a=1;a<arguments.length;a++){var o=arguments[a]!=null?arguments[a]:{};a%2?vy(Object(o),!0).forEach(function(u){by(r,u,o[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):vy(Object(o)).forEach(function(u){Object.defineProperty(r,u,Object.getOwnPropertyDescriptor(o,u))})}return r}({},this.graphModel.theme.snapline)}},{key:"getCenterSnapLine",value:function(r,a){for(var o=r.x,u=r.y,p=!1,d=!1,O=0;O<a.length;O++){var _=a[O];if(_.id!==r.id&&(o===_.x&&(p=!0),u===_.y&&(d=!0),p&&d))break}return{isShowVertical:p,isShowHorizontal:d,position:{x:o,y:u}}}},{key:"getHorizontalSnapline",value:function(r,a){var o,u,p=!1,d=r.id;if(d){var O=this.graphModel.fakerNode;if(O&&O.id===d)u=jn(O);else{var _=this.graphModel.getNodeModelById(d);u=jn(_)}}for(var S=0;S<a.length;S++){var k=a[S];if(k.id!==r.id){var R=jn(k);if(R.minY===u.minY||R.maxY===u.minY){p=!0,o=u.minY;break}if(R.minY===u.maxY||R.maxY===u.maxY){p=!0,o=u.maxY;break}}}return cn({isShowHorizontal:p,position:{y:o}})}},{key:"getVerticalSnapline",value:function(r,a){var o,u,p=!1,d=r.id;if(d){var O=this.graphModel.fakerNode;if(O&&O.id===d)u=jn(O);else{var _=this.graphModel.getNodeModelById(d);u=jn(_)}}for(var S=0;S<a.length;S++){var k=a[S];if(k.id!==r.id){var R=jn(k);if(R.minX===u.minX||R.maxX===u.minX){p=!0,o=u.minX;break}if(R.minX===u.maxX||R.maxX===u.maxX){p=!0,o=u.maxX;break}}}return cn({isShowVertical:p,position:{x:o}})}},{key:"getSnapLinePosition",value:function(r,a){var o=this.getCenterSnapLine(r,a),u=o.isShowHorizontal,p=o.isShowVertical;if(!u){var d=this.getHorizontalSnapline(r,a);d.isShowHorizontal&&(o.isShowHorizontal=d.isShowHorizontal,o.position.y=d.position.y)}if(!p){var O=this.getVerticalSnapline(r,a);O.isShowVertical&&(o.isShowVertical=O.isShowVertical,o.position.x=O.position.x)}return o}},{key:"setSnaplineInfo",value:function(r){var a=r.isShowHorizontal,o=r.isShowVertical,u=r.position;this.position=u,this.isShowHorizontal=a,this.isShowVertical=o}},{key:"clearSnapline",value:function(){this.position={x:0,y:0},this.isShowHorizontal=!1,this.isShowVertical=!1}},{key:"setNodeSnapLine",value:function(r){var a=this.graphModel.nodes,o=this.getSnapLinePosition(r,a);this.setSnaplineInfo(o)}}],n&&tO(t.prototype,n),e}(),hy=di(Un.prototype,"isShowHorizontal",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yy=di(Un.prototype,"isShowVertical",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gy=di(Un.prototype,"position",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),di(Un.prototype,"clearSnapline",[c.k],Object.getOwnPropertyDescriptor(Un.prototype,"clearSnapline"),Un.prototype),di(Un.prototype,"setNodeSnapLine",[c.k],Object.getOwnPropertyDescriptor(Un.prototype,"setNodeSnapLine"),Un.prototype),Un),hi=new Map,Oy=function(e){var t=Dr(),n=window.requestAnimationFrame(function r(){if(e(),hi.get(t)){var a=window.requestAnimationFrame(r);hi.set(t,a)}});return hi.set(t,n),t},Ya=function(e){var t=hi.get(e);t&&(window.cancelAnimationFrame(t),hi.delete(e))};function Fc(e){return Fc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fc(e)}function yi(){return yi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yi.apply(this,arguments)}function _y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Va(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_y(Object(n),!0).forEach(function(r){rr(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_y(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function nO(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var o,u,p=[],d=!0,O=!1;try{for(a=a.call(n);!(d=(o=a.next()).done)&&(p.push(o.value),!r||p.length!==r);d=!0);}catch(_){O=!0,u=_}finally{try{d||a.return==null||a.return()}finally{if(O)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return wy(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return wy(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function wy(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function rO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Uc(e,t){return Uc=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Uc(e,t)}function oO(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=Wa(e);if(t){var a=Wa(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return iO(this,n)}}function iO(e,t){if(t&&(Fc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nr(e)}function nr(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wa(e){return Wa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Wa(e)}function rr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var aO=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&Uc(o,u)})(a,e);var t,n,r=oO(a);function a(){var o;return function(u,p){if(!(u instanceof p))throw new TypeError("Cannot call a class as a function")}(this,a),rr(nr(o=r.call(this)),"preTargetNode",void 0),rr(nr(o),"sourceRuleResults",void 0),rr(nr(o),"targetRuleResults",void 0),rr(nr(o),"dragHandler",void 0),rr(nr(o),"t",void 0),rr(nr(o),"onDragStart",function(u){var p=u.event,d=o.props,O=d.anchorData,_=d.nodeModel,S=d.graphModel,k=S.overlapMode;S.selectNodeById(_.id),k!==Sn.INCREASE&&_.autoToFront&&S.toFront(_.id),S.eventCenter.emit(tt.ANCHOR_DRAGSTART,{data:O,e:p,nodeModel:_}),o.setState({startX:O.x,startY:O.y,endX:O.x,endY:O.y})}),rr(nr(o),"onDragging",function(u){var p=u.event,d=o.props,O=d.graphModel,_=d.nodeModel,S=d.anchorData,k=O.transformModel,R=O.eventCenter,X=O.width,W=O.height,oe=O.editConfigModel,re=oe.autoExpand,de=oe.stopMoveGraph,me=p.clientX,ke=p.clientY,Ee=O.getPointByClient({x:me,y:ke}),He=Ee.domOverlayPosition,Te=He.x,Be=He.y,Re=Ee.canvasOverlayPosition,lt=Re.x,Et=Re.y;o.t&&Ya(o.t);var mt=[];Te<10?mt=[10,0]:Te+10>X?mt=[-10,0]:Be<10?mt=[0,10]:Be+10>W&&(mt=[0,-10]),o.setState({endX:lt,endY:Et,dragging:!0}),o.moveAnchorEnd(lt,Et),mt.length>0&&!de&&re&&(o.t=Oy(function(){var jt=nO(mt,2),Ut=jt[0],Kt=jt[1];k.translate(Ut,Kt);var dn=o.state,ar=dn.endX,Ln=dn.endY;o.setState({endX:ar-Ut,endY:Ln-Kt}),o.moveAnchorEnd(ar-Ut,Ln-Kt)})),R.emit(tt.ANCHOR_DRAG,{data:S,e:p,nodeModel:_})}),rr(nr(o),"onDragEnd",function(u){var p=u.event;o.t&&Ya(o.t),o.checkEnd(p),o.setState({startX:0,startY:0,endX:0,endY:0,dragging:!1}),o.sourceRuleResults.clear(),o.targetRuleResults.clear();var d=o.props,O=d.graphModel,_=d.nodeModel,S=d.anchorData;O.eventCenter.emit(tt.ANCHOR_DRAGEND,{data:S,e:p,nodeModel:_})}),rr(nr(o),"checkEnd",function(u){var p=o.props,d=p.graphModel,O=p.nodeModel,_=p.anchorData,S=_.x,k=_.y,R=_.id,X=(d.edgeType,o.state),W=X.endX,oe=X.endY,re=X.dragging,de=da({x:W,y:oe},d);if(o.preTargetNode&&o.preTargetNode.state!==_t.DEFAULT&&o.preTargetNode.setElementState(_t.DEFAULT),re&&de&&de.node){var me=de.node,ke=de.anchor.id,Ee="".concat(O.id,"_").concat(me.id,"_").concat(ke,"_").concat(R),He=o.sourceRuleResults.get(Ee)||{},Te=He.isAllPass,Be=He.msg,Re=o.targetRuleResults.get(Ee)||{},lt=Re.isAllPass,Et=Re.msg;if(Te&&lt){me.setElementState(_t.DEFAULT);var mt=d.edgeGenerator(O.getData(),d.getNodeModelById(de.node.id).getData()),jt=d.addEdge(Va(Va({},mt),{},{sourceNodeId:O.id,sourceAnchorId:R,startPoint:{x:S,y:k},targetNodeId:de.node.id,targetAnchorId:de.anchor.id,endPoint:{x:de.anchor.x,y:de.anchor.y}})),Ut=o.props.anchorData;d.eventCenter.emit(tt.ANCHOR_DROP,{data:Ut,e:u,nodeModel:O,edgeModel:jt})}else{var Kt=me.getData();d.eventCenter.emit(tt.CONNECTION_NOT_ALLOWED,{data:Kt,msg:Et||Be})}}}),o.sourceRuleResults=new Map,o.targetRuleResults=new Map,o.state={startX:0,startY:0,endX:0,endY:0,dragging:!1},o.dragHandler=new hr({onDragStart:o.onDragStart,onDragging:o.onDragging,onDragEnd:o.onDragEnd}),o}return t=a,(n=[{key:"getAnchorShape",value:function(){var o=this.props,u=o.anchorData,p=o.style,d=o.node.getAnchorShape(u);if(d)return d;var O=u.x,_=u.y,S=Va(Va({},p),p.hover);return Object(te.g)("g",null,Object(te.g)(li,yi({className:"lf-node-anchor-hover"},S,{x:O,y:_})),Object(te.g)(li,yi({className:"lf-node-anchor"},p,{x:O,y:_})))}},{key:"moveAnchorEnd",value:function(o,u){var p=this.props,d=p.graphModel,O=p.nodeModel,_=p.anchorData,S=da({x:o,y:u},d);if(S){var k=S.node,R=S.anchor.id;if(this.preTargetNode&&this.preTargetNode!==S.node&&this.preTargetNode.setElementState(_t.DEFAULT),_.id===R)return;this.preTargetNode=k;var X="".concat(O.id,"_").concat(k.id,"_").concat(R,"_").concat(_.id);if(!this.targetRuleResults.has(X)){var W=S.anchor,oe=O.isAllowConnectedAsSource(k,_,W),re=k.isAllowConnectedAsTarget(O,_,W);this.sourceRuleResults.set(X,ri(oe)),this.targetRuleResults.set(X,ri(re))}var de=this.sourceRuleResults.get(X).isAllPass,me=this.targetRuleResults.get(X).isAllPass;de&&me?k.setElementState(_t.ALLOW_CONNECT):k.setElementState(_t.NOT_ALLOW_CONNECT)}else this.preTargetNode&&this.preTargetNode.state!==_t.DEFAULT&&this.preTargetNode.setElementState(_t.DEFAULT)}},{key:"isShowLine",value:function(){var o=this.state,u=o.startX,p=o.startY,d=o.endX,O=o.endY;return Jn(u,p,d,O)>10}},{key:"render",value:function(){var o=this,u=this.state,p=u.startX,d=u.startY,O=u.endX,_=u.endY,S=this.props,k=S.anchorData.edgeAddable,R=S.edgeStyle;return Object(te.g)("g",{className:"lf-anchor"},Object(te.g)("g",{onMouseDown:function(X){k!==!1&&o.dragHandler.handleMouseDown(X)}},this.getAnchorShape()),this.isShowLine()&&Object(te.g)(wo,yi({x1:p,y1:d,x2:O,y2:_},R,{"pointer-events":"none"})))}}])&&rO(t.prototype,n),a}(te.a);i(80);function xy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function uO(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xy(Object(n),!0).forEach(function(r){sO(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xy(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function sO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hc(e){return Hc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hc(e)}function cO(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var o,u,p=[],d=!0,O=!1;try{for(a=a.call(n);!(d=(o=a.next()).done)&&(p.push(o.value),!r||p.length!==r);d=!0);}catch(_){O=!0,u=_}finally{try{d||a.return==null||a.return()}finally{if(O)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return Ey(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Ey(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ey(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Sy(e){var t=e.x,n=t===void 0?0:t,r=e.y,a=r===void 0?0:r,o=e.value,u=e.fontSize,p=e.fill,d=p===void 0?"currentColor":p,O=e.overflowMode,_=O===void 0?"default":O,S=e.textWidth,k=S===void 0?"":S,R=e.model,X={textAnchor:"middle","dominant-baseline":"middle",x:n,y:a,fill:d};if(Object.entries(e).forEach(function(ke){var Ee=cO(ke,2),He=Ee[0],Te=Ee[1];Hc(Te)!=="object"&&(X[He]=Te)}),o){var W=String(o).split(/[\r\n]/g),oe=W.length;if(_!=="default"){var re=R.BaseType,de=R.modelType;if(re===Gt.NODE&&de!==ht.TEXT_NODE||re===Gt.EDGE&&k)return function(ke){var Ee=ke.value,He=ke.fontSize,Te=ke.model,Be=ke.fontFamily,Re=Be===void 0?"":Be,lt=ke.lineHeight,Et=ke.wrapPadding,mt=Et===void 0?"0, 0":Et,jt=ke.overflowMode,Ut=ke.x,Kt=ke.y,dn=Te.width,ar=Te.textHeight,Ln=ke.textWidth||dn,Ro=String(Ee).split(/[\r\n]/g),gu=Ro.length,vu=Kp({rows:Ro,style:{fontSize:"".concat(He,"px"),width:"".concat(Ln,"px"),fontFamily:Re,lineHeight:lt,padding:mt},rowsLength:gu,className:"lf-get-text-height"}),oo=Te.height>vu?Te.height:vu;ar&&(oo=ar);var Fr=jt==="ellipsis";return Fr&&(oo=He+2),Object(te.g)("g",null,Object(te.g)("foreignObject",{width:Ln,height:oo,x:Ut-Ln/2,y:Kt-oo/2},Object(te.g)("div",{className:"lf-node-text-auto-wrap",style:{minHeight:oo,width:Ln,padding:mt}},Object(te.g)("div",{className:Fr?"lf-node-text-ellipsis-content":"lf-node-text-auto-wrap-content",title:Fr?Ro.join(""):"",style:uO({},ke)},Ro.map(function(Ur){return Object(te.g)("div",{className:"lf-node-text--auto-wrap-inner"},Ur)})))))}(e)}if(oe>1){var me=W.map(function(ke,Ee){var He=(Ee-(oe-1)/2)*(u+2);return Object(te.g)("tspan",{className:"lf-text-tspan",x:n,y:a+He},ke)});return Object(te.g)("text",X,me)}return Object(te.g)("text",X,o)}}function Gc(e){return Gc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gc(e)}function Xc(){return Xc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xc.apply(this,arguments)}function lO(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var o,u,p=[],d=!0,O=!1;try{for(a=a.call(n);!(d=(o=a.next()).done)&&(p.push(o.value),!r||p.length!==r);d=!0);}catch(_){O=!0,u=_}finally{try{d||a.return==null||a.return()}finally{if(O)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return jy(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return jy(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function jy(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function fO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Yc(e,t){return Yc=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Yc(e,t)}function pO(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=Ka(e);if(t){var a=Ka(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return dO(this,n)}}function dO(e,t){if(t&&(Gc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zr(e)}function zr(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ka(e){return Ka=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ka(e)}function to(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Py=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&Yc(o,u)})(a,e);var t,n,r=pO(a);function a(o){var u;(function(d,O){if(!(d instanceof O))throw new TypeError("Cannot call a class as a function")})(this,a),to(zr(u=r.call(this)),"dragHandler",void 0),to(zr(u),"sumDeltaX",0),to(zr(u),"sumDeltaY",0),to(zr(u),"stepDrag",void 0),to(zr(u),"onDragging",function(d){var O=d.deltaX,_=d.deltaY,S=u.props,k=S.model,R=lO(S.graphModel.transformModel.fixDeltaXY(O,_),2),X=R[0],W=R[1];k.moveText(X,W)}),to(zr(u),"dblClickHandler",function(){u.props.editable&&u.props.model.setElementState(_t.TEXT_EDIT)}),to(zr(u),"mouseDownHandle",function(d){var O=u.props,_=O.draggable,S=O.model,k=O.graphModel.editConfigModel.nodeTextDraggable;(_||k)&&(u.stepDrag.model=S,u.stepDrag.handleMouseDown(d))}),o.model;var p=o.draggable;return u.stepDrag=new hr({onDragging:u.onDragging,step:1,isStopPropagation:p}),u}return t=a,(n=[{key:"getShape",value:function(){var o=this.props,u=o.model,p=o.graphModel,d=u.text,O=p.editConfigModel,_=d.value,S=d.x,k=d.y,R=d.editable,X=d.draggable,W={x:S,y:k,className:"",value:_};R?W.className="lf-element-text":X||O.nodeTextDraggable?W.className="lf-text-draggable":W.className="lf-text-disabled";var oe=u.getTextStyle();return Object(te.g)(Sy,Xc({},W,oe,{model:u}))}},{key:"render",value:function(){if(this.props.model.text)return Object(te.g)("g",{onMouseDown:this.mouseDownHandle,onDblClick:this.dblClickHandler},this.getShape())}}])&&fO(t.prototype,n),a}(te.a),hO=window.navigator.userAgent.match(/MSIE|Trident/)!==null;function Vc(e){return Vc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vc(e)}function Za(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var o,u,p=[],d=!0,O=!1;try{for(a=a.call(n);!(d=(o=a.next()).done)&&(p.push(o.value),!r||p.length!==r);d=!0);}catch(_){O=!0,u=_}finally{try{d||a.return==null||a.return()}finally{if(O)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return Ay(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Ay(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ay(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ky(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wc(e,t){return Wc=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Wc(e,t)}function yO(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=qa(e);if(t){var a=qa(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return gO(this,n)}}function gO(e,t){if(t&&(Vc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return on(e)}function on(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qa(e){return qa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},qa(e)}function pn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var mr=function(e){(function(u,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");u.prototype=Object.create(p&&p.prototype,{constructor:{value:u,writable:!0,configurable:!0}}),p&&Wc(u,p)})(o,e);var t,n,r,a=yO(o);function o(u){var p;(function(k,R){if(!(k instanceof R))throw new TypeError("Cannot call a class as a function")})(this,o),pn(on(p=a.call(this)),"t",void 0),pn(on(p),"moveOffset",void 0),pn(on(p),"stepDrag",void 0),pn(on(p),"contextMenuTime",void 0),pn(on(p),"startTime",void 0),pn(on(p),"clickTimer",void 0),pn(on(p),"onDragStart",function(k){var R=k.event,X=R.clientX,W=R.clientY,oe=p.props,re=oe.model,de=oe.graphModel.getPointByClient({x:X,y:W}).canvasOverlayPosition,me=de.x,ke=de.y;p.moveOffset={x:re.x-me,y:re.y-ke}}),pn(on(p),"onDragging",function(k){var R=k.event,X=p.props,W=X.model,oe=X.graphModel,re=oe.editConfigModel,de=re.stopMoveGraph,me=re.autoExpand,ke=oe.transformModel,Ee=oe.selectNodes,He=oe.width,Te=oe.height,Be=oe.gridSize;W.isDragging=!0;var Re=R.clientX,lt=R.clientY,Et=oe.getPointByClient({x:Re,y:lt}).canvasOverlayPosition,mt=Et.x,jt=Et.y,Ut=Za(ke.CanvasPointToHtmlPoint([mt,jt]),2),Kt=Ut[0],dn=Ut[1];if(mt+=p.moveOffset.x,jt+=p.moveOffset.y,mt=Mr(mt,Be),jt=Mr(jt,Be),He&&Te){if(!me||de||!(Kt<0||dn<0||Kt>He||dn>Te)){var ar=Za(ke.CanvasPointToHtmlPoint([mt-W.width/2,jt-W.height/2]),2),Ln=ar[0],Ro=ar[1],gu=Za(ke.CanvasPointToHtmlPoint([mt+W.width/2,jt+W.height/2]),2),vu=gu[0],oo=gu[1],Fr=Math.max(Be,20),Ur=[];Ln<0?Ur=[Fr,0]:vu>oe.width?Ur=[-Fr,0]:Ro<0?Ur=[0,Fr]:oo>oe.height&&(Ur=[0,-Fr]),p.t&&Ya(p.t);var bu=Ee.map(function(mu){return mu.id});bu.indexOf(W.id)===-1&&(bu=[W.id]),Ur.length>0&&!de&&me?p.t=Oy(function(){var mu=Za(Ur,2),lg=mu[0],fg=mu[1];ke.translate(lg,fg);var iw=-lg/ke.SCALE_X,aw=-fg/ke.SCALE_X;oe.moveNodes(bu,iw,aw)}):oe.moveNodes(bu,mt-W.x,jt-W.y)}}else oe.moveNode2Coordinate(W.id,mt,jt)}),pn(on(p),"onDragEnd",function(){p.t&&Ya(p.t),p.props.model.isDragging=!1}),pn(on(p),"handleClick",function(k){if(p.startTime&&!(new Date().getTime()-p.startTime>200)){var R=p.props,X=R.model,W=R.graphModel,oe={data:X.getData(),e:k,position:W.getPointByClient({x:k.clientX,y:k.clientY}),isSelected:!1,isMultiple:!1},re=k.button===2,de=k.detail===2;if(!re){var me=W.editConfigModel,ke=Op(k,me);oe.isMultiple=ke,X.isSelected&&!de&&ke?(oe.isSelected=!1,X.setSelected(!1)):(W.selectNodeById(X.id,ke),oe.isSelected=!0,p.toFront()),de?(me.nodeTextEdit&&X.text.editable&&(X.setSelected(!1),W.setElementStateById(X.id,_t.TEXT_EDIT)),W.eventCenter.emit(tt.NODE_DBCLICK,oe)):(W.eventCenter.emit(tt.ELEMENT_CLICK,oe),W.eventCenter.emit(tt.NODE_CLICK,oe))}}}),pn(on(p),"handleContextMenu",function(k){k.preventDefault();var R=p.props,X=R.model,W=R.graphModel,oe=X.getData(),re=W.getPointByClient({x:k.clientX,y:k.clientY});W.setElementStateById(X.id,_t.SHOW_MENU,re.domOverlayPosition),X.isSelected||W.selectNodeById(X.id),W.eventCenter.emit(tt.NODE_CONTEXTMENU,{data:oe,e:k,position:re}),p.toFront()}),pn(on(p),"handleMouseDown",function(k){var R=p.props,X=R.model,W=R.graphModel;p.startTime=new Date().getTime(),W.editConfigModel.adjustNodePosition&&X.draggable&&p.stepDrag&&p.stepDrag.handleMouseDown(k)}),pn(on(p),"setHoverON",function(k){var R=p.props,X=R.model,W=R.graphModel;if(!X.isHovered){var oe=X.getData();X.setHovered(!0),W.eventCenter.emit(tt.NODE_MOUSEENTER,{data:oe,e:k})}}),pn(on(p),"setHoverOFF",function(k){var R=p.props,X=R.model,W=R.graphModel,oe=X.getData();X.isHovered&&(X.setHovered(!1),W.eventCenter.emit(tt.NODE_MOUSELEAVE,{data:oe,e:k}))}),pn(on(p),"onMouseOut",function(k){hO&&p.setHoverOFF(k)});var d=u.graphModel,O=d.gridSize,_=d.eventCenter,S=u.model;return p.stepDrag=new hr({onDragStart:p.onDragStart,onDragging:p.onDragging,onDragEnd:p.onDragEnd,step:O,eventType:"NODE",isStopPropagation:!1,eventCenter:_,model:S}),p}return t=o,r=[{key:"getModel",value:function(u){return u}}],(n=[{key:"getAnchorShape",value:function(u){return null}},{key:"getAnchors",value:function(){var u=this,p=this.props,d=p.model,O=p.graphModel,_=d.isSelected,S=d.isHitable,k=d.isDragging,R=d.isShowAnchor;return S&&(_||R)&&!k?ca(d.anchors,function(X,W){var oe=d.getAnchorLineStyle(X),re=d.getAnchorStyle(X);return Object(te.g)(aO,{anchorData:X,node:u,style:re,edgeStyle:oe,anchorIndex:W,nodeModel:d,graphModel:O,setHoverOFF:u.setHoverOFF})}):[]}},{key:"getText",value:function(){var u=this.props,p=u.model,d=u.graphModel;if(p.state===_t.TEXT_EDIT)return"";if(p.text){var O=d.editConfigModel,_=!1;return(p.text.draggable||O.nodeTextDraggable)&&(_=!0),Object(te.g)(Py,{editable:O.nodeTextEdit&&p.text.editable,model:p,graphModel:d,draggable:_})}}},{key:"getStateClassName",value:function(){var u=this.props.model,p=u.state,d=u.isDragging,O=u.isSelected,_="lf-node";switch(p){case _t.ALLOW_CONNECT:_+=" lf-node-allow";break;case _t.NOT_ALLOW_CONNECT:_+=" lf-node-not-allow";break;default:_+=" lf-node-default"}return d&&(_+=" lf-isDragging"),O&&(_+=" lf-node-selected"),_}},{key:"toFront",value:function(){var u=this.props,p=u.model,d=u.graphModel;d.overlapMode!==Sn.INCREASE&&p.autoToFront&&d.toFront(p.id)}},{key:"render",value:function(){var u,p=this.props,d=p.model,O=p.graphModel,_=O.editConfigModel,S=_.hideAnchors,k=_.adjustNodePosition,R=O.gridSize,X=O.transformModel.SCALE_X,W=d.isHitable,oe=d.draggable,re=Object(te.g)("g",{className:"lf-node-content"},this.getShape(),this.getText(),S?null:this.getAnchors());return W?(k&&oe&&this.stepDrag.setStep(R*X),u=Object(te.g)("g",{className:this.getStateClassName(),onMouseDown:this.handleMouseDown,onClick:this.handleClick,onMouseEnter:this.setHoverON,onMouseOver:this.setHoverON,onMouseLeave:this.setHoverOFF,onMouseOut:this.onMouseOut,onContextMenu:this.handleContextMenu},re)):u=Object(te.g)("g",{className:this.getStateClassName()},re),u}}])&&ky(t.prototype,n),r&&ky(t,r),o}(te.a);function Kc(e){return Kc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kc(e)}function Zc(){return Zc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zc.apply(this,arguments)}function vO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qc(e,t){return qc=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},qc(e,t)}function mO(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=Ja(e);if(t){var a=Ja(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return OO(this,n)}}function OO(e,t){if(t&&(Kc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function Ja(e){return Ja=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ja(e)}var Jc=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&qc(o,u)})(a,e);var t,n,r=mO(a);function a(){return vO(this,a),r.apply(this,arguments)}return t=a,(n=[{key:"getShape",value:function(){var o=this.props.model,u=o.getNodeStyle();return Object(te.g)(Rr,Zc({},u,{x:o.x,y:o.y,width:o.width,height:o.height,radius:o.radius}))}}])&&bO(t.prototype,n),a}(mr);function $c(e){return $c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$c(e)}function Qc(){return Qc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qc.apply(this,arguments)}function _O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function el(e,t){return el=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},el(e,t)}function xO(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=$a(e);if(t){var a=$a(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return EO(this,n)}}function EO(e,t){if(t&&($c(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function $a(e){return $a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},$a(e)}var tl=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&el(o,u)})(a,e);var t,n,r=xO(a);function a(){return _O(this,a),r.apply(this,arguments)}return t=a,(n=[{key:"getShape",value:function(){var o=this.props.model,u=o.x,p=o.y,d=o.r,O=o.getNodeStyle();return Object(te.g)(li,Qc({},O,{x:u,y:p,r:d}))}}])&&wO(t.prototype,n),a}(mr);function nl(e){return nl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nl(e)}function SO(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var o,u,p=[],d=!0,O=!1;try{for(a=a.call(n);!(d=(o=a.next()).done)&&(p.push(o.value),!r||p.length!==r);d=!0);}catch(_){O=!0,u=_}finally{try{d||a.return==null||a.return()}finally{if(O)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return Ty(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Ty(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ty(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function My(e){var t=e.points,n=e.className,r={fill:"transparent",fillOpacity:1,strokeWidth:1,stroke:"#000",strokeOpacity:1,points:""};return Object.entries(e).forEach(function(a){var o=SO(a,2),u=o[0],p=o[1];nl(p)!=="object"&&(r[u]=p)}),r.className=n?"lf-basic-shape ".concat(n):"lf-basic-shape",r.points=t.map(function(a){return a.join(",")}).join(" "),Object(te.g)("polygon",r)}function rl(e){return rl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rl(e)}function ol(){return ol=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ol.apply(this,arguments)}function jO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function PO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function il(e,t){return il=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},il(e,t)}function AO(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=Qa(e);if(t){var a=Qa(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return kO(this,n)}}function kO(e,t){if(t&&(rl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function Qa(e){return Qa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Qa(e)}var al=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&il(o,u)})(a,e);var t,n,r=AO(a);function a(){return jO(this,a),r.apply(this,arguments)}return t=a,(n=[{key:"getShape",value:function(){var o=this.props.model,u=o.x,p=o.y,d=o.width,O=o.height,_=o.points,S=o.getNodeStyle(),k={transform:"matrix(1 0 0 1 ".concat(u-d/2," ").concat(p-O/2,")")};return Object(te.g)("g",k,Object(te.g)(My,ol({},S,{points:_,x:u,y:p})))}}])&&PO(t.prototype,n),a}(mr);function ul(e){return ul=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ul(e)}function sl(){return sl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sl.apply(this,arguments)}function TO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function MO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cl(e,t){return cl=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},cl(e,t)}function DO(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=eu(e);if(t){var a=eu(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return NO(this,n)}}function NO(e,t){if(t&&(ul(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function eu(e){return eu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},eu(e)}var ll=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&cl(o,u)})(a,e);var t,n,r=DO(a);function a(){return TO(this,a),r.apply(this,arguments)}return t=a,(n=[{key:"getShape",value:function(){var o=this.props.model,u=o.getNodeStyle();return Object(te.g)("g",null,Object(te.g)(My,sl({},u,{points:o.points,x:o.x,y:o.y})))}}])&&MO(t.prototype,n),a}(mr);function fl(e){return fl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fl(e)}function CO(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var o,u,p=[],d=!0,O=!1;try{for(a=a.call(n);!(d=(o=a.next()).done)&&(p.push(o.value),!r||p.length!==r);d=!0);}catch(_){O=!0,u=_}finally{try{d||a.return==null||a.return()}finally{if(O)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return Dy(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Dy(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Dy(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function RO(e){var t=e.x,n=t===void 0?0:t,r=e.y,a=r===void 0?0:r,o=e.rx,u=o===void 0?4:o,p=e.ry,d=p===void 0?4:p,O=e.className,_={cx:n,cy:a,rx:u,ry:d,fill:"transparent",fillOpacity:1,strokeWidth:"1",stroke:"#000",strokeOpacity:1};return Object.entries(e).forEach(function(S){var k=CO(S,2),R=k[0],X=k[1];fl(X)!=="object"&&(_[R]=X)}),_.className=O?"lf-basic-shape ".concat(O):"lf-basic-shape",Object(te.g)("ellipse",_)}function pl(e){return pl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pl(e)}function dl(){return dl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dl.apply(this,arguments)}function IO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function LO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hl(e,t){return hl=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},hl(e,t)}function zO(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=tu(e);if(t){var a=tu(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return BO(this,n)}}function BO(e,t){if(t&&(pl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function tu(e){return tu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},tu(e)}var yl=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&hl(o,u)})(a,e);var t,n,r=zO(a);function a(){return IO(this,a),r.apply(this,arguments)}return t=a,(n=[{key:"getShape",value:function(){var o=this.props.model,u=o.getNodeStyle();return Object(te.g)(RO,dl({},u,{x:o.x,y:o.y,rx:o.rx,ry:o.ry}))}}])&&LO(t.prototype,n),a}(mr);function gl(e){return gl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gl(e)}function Ny(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Cy(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ny(Object(n),!0).forEach(function(r){FO(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ny(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function FO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function UO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function HO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vl(e,t){return vl=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},vl(e,t)}function GO(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=nu(e);if(t){var a=nu(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return XO(this,n)}}function XO(e,t){if(t&&(gl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function nu(e){return nu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},nu(e)}var bl=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&vl(o,u)})(a,e);var t,n,r=GO(a);function a(){return UO(this,a),r.apply(this,arguments)}return t=a,(n=[{key:"getBackground",value:function(){var o=this.props.model,u=o.getTextStyle(),p=o.width,d=o.height,O=o.x,_=o.y,S=Cy(Cy({},u.background),{},{x:O,y:_-1,width:p,height:d});return Object(te.g)(Rr,S)}},{key:"getShape",value:function(){return Object(te.g)("g",null,this.getBackground())}}])&&HO(t.prototype,n),a}(mr);function ml(e){return ml=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ml(e)}function Ol(){return Ol=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ol.apply(this,arguments)}function YO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function VO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _l(e,t){return _l=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},_l(e,t)}function WO(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=ru(e);if(t){var a=ru(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return KO(this,n)}}function KO(e,t){if(t&&(ml(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gi(e)}function gi(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ru(e){return ru=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ru(e)}function ou(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var wl=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&_l(o,u)})(a,e);var t,n,r=WO(a);function a(){var o;YO(this,a);for(var u=arguments.length,p=new Array(u),d=0;d<u;d++)p[d]=arguments[d];return ou(gi(o=r.call.apply(r,[this].concat(p))),"ref",void 0),ou(gi(o),"currentProperties",void 0),ou(gi(o),"preProperties",void 0),ou(gi(o),"setRef",function(O){o.ref=O}),o}return t=a,(n=[{key:"rootEl",get:function(){return this.ref}},{key:"setHtml",value:function(o){o.appendChild(document.createElement("div"))}},{key:"shouldUpdate",value:function(){if(!this.preProperties||this.preProperties!==this.currentProperties)return this.preProperties=this.currentProperties,!0}},{key:"componentDidMount",value:function(){this.shouldUpdate()&&this.setHtml(this.rootEl)}},{key:"componentDidUpdate",value:function(){this.shouldUpdate()&&this.setHtml(this.rootEl)}},{key:"getShape",value:function(){var o=this.props.model,u=o.x,p=o.y,d=o.height,O=o.width,_=o.getNodeStyle();return this.currentProperties=JSON.stringify(o.properties),Object(te.g)("foreignObject",Ol({},_,{x:u-O/2,y:p-d/2,width:O,height:d,ref:this.setRef}))}}])&&VO(t.prototype,n),a}(mr);function xl(e){return xl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xl(e)}function El(){return El=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},El.apply(this,arguments)}function Ry(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function no(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ry(Object(n),!0).forEach(function(r){Pl(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ry(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ZO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Sl(e,t){return Sl=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Sl(e,t)}function qO(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=iu(e);if(t){var a=iu(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return JO(this,n)}}function JO(e,t){if(t&&(xl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jl(e)}function jl(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function iu(e){return iu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},iu(e)}function Pl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var or,$O=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&Sl(o,u)})(a,e);var t,n,r=qO(a);function a(o){var u;return function(p,d){if(!(p instanceof d))throw new TypeError("Cannot call a class as a function")}(this,a),Pl(jl(u=r.call(this,o)),"setHoverON",function(){u.setState({isHovered:!0})}),Pl(jl(u),"setHoverOFF",function(){u.setState({isHovered:!1})}),u.state={isHovered:!1},u}return t=a,(n=[{key:"getBackground",value:function(){var o=this.props.model,u=o.getTextStyle(),p=o.text,d=o.width,O=u.background||{};if(this.state.isHovered&&u.hover&&u.hover.background&&(O=no(no({},O),u.hover.background)),p&&p.value&&O.fill!=="transparent"){var _,S=u.fontSize,k=u.overflowMode,R=u.lineHeight,X=u.wrapPadding,W=u.textWidth,oe=p.value,re=p.x,de=p.y,me=String(oe).split(/[\r\n]/g),ke=me.length;if(k==="autoWrap"&&W){var Ee=Kp({rows:me,style:{fontSize:"".concat(S,"px"),width:"".concat(W,"px"),lineHeight:R,padding:X},rowsLength:ke,className:"lf-get-text-height"});_=no(no({},O),{},{x:re-1,y:de-1,width:W,height:Ee})}else{me&&me.forEach(function(lt){vd(lt)});var He=gs({rows:me,fontSize:S,rowsLength:ke}),Te=He.width,Be=He.height;if(k==="ellipsis"&&(Te=W||d,Be=S+2),typeof O.wrapPadding=="string"){var Re=O.wrapPadding.split(",").filter(function(lt){return lt.trim()}).map(function(lt){return parseFloat(lt.trim())});Re.length>0&&Re.length<=4&&(Re.length===1?Re=[Re[0],Re[0],Re[0],Re[0]]:Re.length===2?Re=[Re[0],Re[1],Re[0],Re[1]]:Re.length===3&&(Re=[Re[0],Re[1],Re[2],Re[1]]),Te+=Re[1]+Re[3],Be+=Re[0]+Re[2],re+=(Re[1]-Re[3])/2,de+=(Re[2]-Re[0])/2)}_=no(no({},O),{},{x:re-1,y:de-1,width:Te,height:Be})}return Object(te.g)(Rr,_)}}},{key:"getShape",value:function(){var o=this.props.model,u=o.text,p=u.value,d=u.x,O=u.y;if(p){var _=no({x:d,y:O,className:"lf-element-text",value:p},o.getTextStyle());return Object(te.g)("g",{className:"lf-line-text",onMouseEnter:this.setHoverON,onMouseLeave:this.setHoverOFF},this.getBackground(),Object(te.g)(Sy,El({},_,{model:o})))}}}])&&ZO(t.prototype,n),a}(Py);function Al(e){return Al=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Al(e)}function Iy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Or(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Iy(Object(n),!0).forEach(function(r){An(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Iy(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function QO(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var o,u,p=[],d=!0,O=!1;try{for(a=a.call(n);!(d=(o=a.next()).done)&&(p.push(o.value),!r||p.length!==r);d=!0);}catch(_){O=!0,u=_}finally{try{d||a.return==null||a.return()}finally{if(O)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return Ly(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Ly(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ly(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function e_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kl(e,t){return kl=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},kl(e,t)}function t_(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=au(e);if(t){var a=au(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return n_(this,n)}}function n_(e,t){if(t&&(Al(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Pn(e)}function Pn(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function au(e){return au=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},au(e)}function An(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}(function(e){e.SOURCE="SOURCE",e.TARGET="TARGET"})(or||(or={}));var zy=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&kl(o,u)})(a,e);var t,n,r=t_(a);function a(o){var u;(function(_,S){if(!(_ instanceof S))throw new TypeError("Cannot call a class as a function")})(this,a),An(Pn(u=r.call(this)),"stepDragData",void 0),An(Pn(u),"stepDrag",void 0),An(Pn(u),"oldEdge",void 0),An(Pn(u),"preTargetNode",void 0),An(Pn(u),"targetRuleResults",void 0),An(Pn(u),"sourceRuleResults",void 0),An(Pn(u),"handleMouseDown",function(_){u.stepDrag&&u.stepDrag.handleMouseDown(_)}),An(Pn(u),"onDragStart",function(){var _=u.props,S=_.x,k=_.y,R=_.edgeModel,X=R.startPoint,W=R.endPoint,oe=R.pointsList;u.oldEdge={startPoint:X,endPoint:W,pointsList:oe},u.setState({endX:S,endY:k,dragging:!0})}),An(Pn(u),"onDragging",function(_){var S=_.deltaX,k=_.deltaY,R=u.state,X=R.endX,W=R.endY,oe=u.props,re=oe.graphModel,de=oe.type,me=re.transformModel,ke=re.editConfigModel,Ee=QO(me.moveCanvasPointByHtml([X,W],S,k),2),He=Ee[0],Te=Ee[1];u.setState({endX:He,endY:Te,dragging:!0});var Be=u.props.edgeModel,Re=da({x:X,y:W},re);if(Re&&Re.node&&u.isAllowAdjust(Re).pass){var lt,Et=Be.startPoint,mt=Be.endPoint,jt=Be.sourceNode,Ut=Be.targetNode;de===or.SOURCE?lt={startPoint:{x:Re.anchor.x,y:Re.anchor.y},endPoint:{x:mt.x,y:mt.y},sourceNode:Re.node,targetNode:Ut}:de===or.TARGET&&(lt={startPoint:{x:Et.x,y:Et.y},endPoint:{x:Re.anchor.x,y:Re.anchor.y},sourceNode:jt,targetNode:Re.node}),Be.updateAfterAdjustStartAndEnd(lt)}else de===or.SOURCE?Be.updateStartPoint({x:He,y:Te}):de===or.TARGET&&Be.updateEndPoint({x:He,y:Te});Be.text.value&&ke.adjustEdge&&Be.setText(Object.assign({},Be.text,Be.textPosition))}),An(Pn(u),"onDragEnd",function(_){var S=_.event;try{var k;u.setState({dragging:!1});var R=u.props,X=R.graphModel,W=R.edgeModel,oe=R.type,re=u.state,de=re.endX,me=re.endY,ke=re.dragging,Ee=da({x:de,y:me},X);if(!ke)return;var He,Te=!1;if(Ee&&Ee.node){var Be=u.isAllowAdjust(Ee),Re=Be.pass,lt=Be.msg,Et=Be.newTargetNode;if(Re){var mt,jt=W.getData();He=Or(Or({},jt),{},{sourceAnchorId:"",targetAnchorId:"",text:(jt==null||(mt=jt.text)===null||mt===void 0?void 0:mt.value)||""}),oe===or.SOURCE?(He=Or(Or({},X.edgeGenerator(X.getNodeModelById(Ee.node.id).getData(),X.getNodeModelById(W.targetNodeId).getData(),He)),{},{sourceNodeId:Ee.node.id,sourceAnchorId:Ee.anchor.id,startPoint:{x:Ee.anchor.x,y:Ee.anchor.y},targetNodeId:W.targetNodeId,endPoint:Or({},W.endPoint)}),W.sourceNodeId===Ee.node.id&&W.sourceAnchorId===Ee.anchor.id&&(Te=!0)):oe===or.TARGET&&(He=Or(Or({},X.edgeGenerator(X.getNodeModelById(W.sourceNodeId).getData(),X.getNodeModelById(Ee.node.id).getData(),He)),{},{sourceNodeId:W.sourceNodeId,startPoint:Or({},W.startPoint),targetNodeId:Ee.node.id,targetAnchorId:Ee.anchor.id,endPoint:{x:Ee.anchor.x,y:Ee.anchor.y}}),W.targetNodeId===Ee.node.id&&W.targetAnchorId===Ee.anchor.id&&(Te=!0))}else{Te=!0;var Ut=Et.getData();X.eventCenter.emit(tt.CONNECTION_NOT_ALLOWED,{data:Ut,msg:lt})}}else Te=!0;if(Te)u.recoveryEdge();else{var Kt=W.getData();X.deleteEdgeById(W.id);var dn=X.addEdge(Or({},He));X.eventCenter.emit(tt.EDGE_EXCHANGE_NODE,{data:{newEdge:dn.getData(),oldEdge:Kt}})}(k=u.preTargetNode)===null||k===void 0||k.setElementState(_t.DEFAULT)}finally{u.props.graphModel.eventCenter.emit(tt.ADJUST_POINT_DRAGEND,{e:S,data:u.stepDragData})}}),An(Pn(u),"recoveryEdge",function(){var _=u.props.edgeModel,S=u.oldEdge,k=S.startPoint,R=S.endPoint,X=S.pointsList;_.updateStartPoint(k),_.updateEndPoint(R),_.modelType!==ht.LINE_EDGE&&(_.pointsList=X,_.initPoints())}),An(Pn(u),"getAdjustPointStyle",function(){var _=u.props,S=_.graphModel.theme;return _.edgeModel,S.edgeAdjust}),u.state={dragging:!1,endX:0,endY:0},u.targetRuleResults=new Map,u.sourceRuleResults=new Map;var p=o.type,d=o.edgeModel,O=o.graphModel.eventCenter;return u.stepDragData={type:p,edgeData:d.getData()},u.stepDrag=new hr({onDragStart:u.onDragStart,onDragging:u.onDragging,onDragEnd:u.onDragEnd,eventType:"ADJUST_POINT",isStopPropagation:!1,eventCenter:O,data:u.stepDragData}),u}return t=a,(n=[{key:"isAllowAdjust",value:function(o){var u=this.props,p=u.edgeModel,d=p.id,O=p.sourceNode,_=p.targetNode,S=p.sourceAnchorId,k=p.targetAnchorId,R=u.type,X=null,W=null,oe=null,re=null;if(R===or.SOURCE?(X=o.node,W=_,oe=o.anchor,re=_.getAnchorInfo(k)):(X=O,W=o.node,re=o.anchor,oe=O.getAnchorInfo(S)),this.preTargetNode&&this.preTargetNode!==o.node&&this.preTargetNode.setElementState(_t.DEFAULT),this.preTargetNode=o.node,re.id===oe.id)return{pass:!1,msg:"",newTargetNode:W};var de="".concat(X.id,"_").concat(W.id,"_").concat(oe.id,"_").concat(re.id);if(!this.targetRuleResults.has(de)){var me=X.isAllowConnectedAsSource(W,oe,re,d),ke=W.isAllowConnectedAsTarget(X,oe,re,d);this.sourceRuleResults.set(de,ri(me)),this.targetRuleResults.set(de,ri(ke))}var Ee=this.sourceRuleResults.get(de),He=Ee.isAllPass,Te=Ee.msg,Be=this.targetRuleResults.get(de),Re=Be.isAllPass,lt=Be.msg,Et=He&&Re?_t.ALLOW_CONNECT:_t.NOT_ALLOW_CONNECT;return R===or.SOURCE?X.setElementState(Et):W.setElementState(Et),{pass:He&&Re,msg:lt||Te,newTargetNode:W}}},{key:"render",value:function(){var o=this.props,u=o.x,p=o.y,d=o.getAdjustPointShape,O=o.edgeModel,_=this.state.dragging;return Object(te.g)("g",{pointerEvents:_?"none":"",onMouseDown:this.handleMouseDown},_?"":d(u,p,O))}}])&&e_(t.prototype,n),a}(te.a);function Tl(e){return Tl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tl(e)}function vi(){return vi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vi.apply(this,arguments)}function r_(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var o,u,p=[],d=!0,O=!1;try{for(a=a.call(n);!(d=(o=a.next()).done)&&(p.push(o.value),!r||p.length!==r);d=!0);}catch(_){O=!0,u=_}finally{try{d||a.return==null||a.return()}finally{if(O)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return By(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return By(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function By(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ml(e,t){return Ml=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Ml(e,t)}function a_(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=uu(e);if(t){var a=uu(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return u_(this,n)}}function u_(e,t){if(t&&(Tl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Hn(e)}function Hn(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uu(e){return uu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},uu(e)}function ir(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var bi=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&Ml(o,u)})(a,e);var t,n,r=a_(a);function a(){var o;o_(this,a);for(var u=arguments.length,p=new Array(u),d=0;d<u;d++)p[d]=arguments[d];return ir(Hn(o=r.call.apply(r,[this].concat(p))),"startTime",void 0),ir(Hn(o),"contextMenuTime",void 0),ir(Hn(o),"clickTimer",void 0),ir(Hn(o),"textRef",Object(te.f)()),ir(Hn(o),"handleHover",function(O,_){var S=o.props,k=S.model,R=S.graphModel.eventCenter;k.setHovered(O);var X=O?tt.EDGE_MOUSEENTER:tt.EDGE_MOUSELEAVE,W=k.getData();R.emit(X,{data:W,e:_})}),ir(Hn(o),"setHoverON",function(O){o.props.model.isHovered||(o.textRef&&o.textRef.current&&o.textRef.current.setHoverON(),o.handleHover(!0,O))}),ir(Hn(o),"setHoverOFF",function(O){o.props.model.isHovered&&(o.textRef&&o.textRef.current&&o.textRef.current.setHoverOFF(),o.handleHover(!1,O))}),ir(Hn(o),"handleContextMenu",function(O){O.preventDefault(),o.contextMenuTime=new Date().getTime(),o.clickTimer&&clearTimeout(o.clickTimer);var _=o.props,S=_.model,k=_.graphModel,R=k.getPointByClient({x:O.clientX,y:O.clientY});k.setElementStateById(S.id,_t.SHOW_MENU,R.domOverlayPosition),o.toFront(),S.isSelected||k.selectEdgeById(S.id);var X=S==null?void 0:S.getData();k.eventCenter.emit(tt.EDGE_CONTEXTMENU,{data:X,e:O,position:R})}),ir(Hn(o),"handleMouseDown",function(O){O.stopPropagation(),o.startTime=new Date().getTime()}),ir(Hn(o),"handleMouseUp",function(O){if(o.startTime&&!(new Date().getTime()-o.startTime>200||O.button===2)){var _=O.detail===2,S=o.props,k=S.model,R=S.graphModel,X=k==null?void 0:k.getData(),W=R.getPointByClient({x:O.clientX,y:O.clientY});if(_){var oe=R.editConfigModel,re=R.textEditElement;if(re&&re.id===k.id&&R.setElementStateById(k.id,_t.DEFAULT),oe.edgeTextEdit&&k.text.editable&&R.setElementStateById(k.id,_t.TEXT_EDIT),k.modelType===ht.POLYLINE_EDGE){var de=k,me=R.getPointByClient({x:O.x,y:O.y}).canvasOverlayPosition,ke=me.x,Ee=me.y,He=Od({x:ke,y:Ee},de.points);de.dbClickPosition=He}R.eventCenter.emit(tt.EDGE_DBCLICK,{data:X,e:O,position:W})}else R.eventCenter.emit(tt.ELEMENT_CLICK,{data:X,e:O,position:W}),R.eventCenter.emit(tt.EDGE_CLICK,{data:X,e:O,position:W});var Te=R.editConfigModel;R.selectEdgeById(k.id,Op(O,Te)),o.toFront()}}),o}return t=a,(n=[{key:"getShape",value:function(){return Object(te.g)("g",null,this.getEdge())}},{key:"getTextStyle",value:function(){}},{key:"getText",value:function(){var o=this.props,u=o.model,p=o.graphModel;if(u.state===_t.TEXT_EDIT)return null;var d=!1,O=p.editConfigModel;return(u.text.draggable||O.edgeTextDraggable)&&(d=!0),Object(te.g)($O,{ref:this.textRef,editable:O.edgeTextEdit&&u.text.editable,model:u,graphModel:p,draggable:d})}},{key:"getArrowInfo",value:function(){var o=this.props.model,u=o.startPoint,p=o.endPoint,d=o.isSelected;return{start:u,end:p,hover:this.state.hover,isSelected:d}}},{key:"getLastTwoPoints",value:function(){var o=this.props.model;return[o.startPoint,o.endPoint]}},{key:"getArrowStyle",value:function(){return null}},{key:"getArrow",value:function(){var o=this.props.model,u=o.id,p=o.getArrowStyle(),d=p.refY,O=d===void 0?0:d,_=p.refX,S=_===void 0?2:_,k=r_(this.getLastTwoPoints(),2),R=k[0],X=k[1],W="auto";return R!==null&&X!==null&&(W=Qb({x:X.x-R.x,y:X.y-R.y,z:0})*(180/Math.PI)),Object(te.g)("g",null,Object(te.g)("defs",null,Object(te.g)("marker",{id:"marker-start-".concat(u),refX:-S,refY:O,overflow:"visible",orient:"auto",markerUnits:"userSpaceOnUse"},this.getStartArrow()),Object(te.g)("marker",{id:"marker-end-".concat(u),refX:S,refY:O,overflow:"visible",orient:W,markerUnits:"userSpaceOnUse"},this.getEndArrow())))}},{key:"getStartArrow",value:function(){var o=this.props.model.getArrowStyle();return o.stroke,o.strokeWidth,o.offset,o.verticalLength,Object(te.g)("path",null)}},{key:"getEndArrow",value:function(){var o=this.props.model.getArrowStyle(),u=o.stroke,p=o.strokeWidth,d=o.offset,O=o.verticalLength;return Object(te.g)("path",{stroke:u,fill:u,strokeWidth:p,transform:"rotate(180)",d:"M 0 0 L ".concat(d," -").concat(O," L ").concat(d," ").concat(O," Z")})}},{key:"getAdjustPointShape",value:function(o,u,p){var d=p.getAdjustPointStyle();return Object(te.g)(li,vi({className:"lf-edge-adjust-point"},d,{x:o,y:u}))}},{key:"getAdjustPoints",value:function(){var o=this.props,u=o.model,p=o.graphModel,d=u.getAdjustStart(),O=u.getAdjustEnd();return Object(te.g)("g",null,Object(te.g)(zy,vi({type:"SOURCE"},d,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:u,graphModel:p})),Object(te.g)(zy,vi({type:"TARGET"},O,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:u,graphModel:p})))}},{key:"getAnimation",value:function(){}},{key:"getAppendWidth",value:function(){return Object(te.g)("g",null)}},{key:"getAppend",value:function(){return Object(te.g)("g",{className:"lf-edge-append"},this.getAppendWidth())}},{key:"getEdge",value:function(){return null}},{key:"toFront",value:function(){var o=this.props,u=o.graphModel,p=o.model;u.overlapMode!==Sn.INCREASE&&u.toFront(p.id)}},{key:"render",value:function(){var o=this.props,u=o.model,p=u.isSelected,d=u.isHitable,O=u.isShowAdjustPoint;return o.graphModel.animation,Object(te.g)("g",null,Object(te.g)("g",{className:["lf-edge",!d&&"pointer-none",p&&"lf-edge-selected"].filter(Boolean).join(" "),onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onContextMenu:this.handleContextMenu,onMouseOver:this.setHoverON,onMouseEnter:this.setHoverON,onMouseLeave:this.setHoverOFF},this.getShape(),this.getAppend(),this.getText(),this.getArrow()),O&&p?this.getAdjustPoints():"")}}])&&i_(t.prototype,n),a}(te.a);function Dl(e){return Dl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dl(e)}function s_(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var o,u,p=[],d=!0,O=!1;try{for(a=a.call(n);!(d=(o=a.next()).done)&&(p.push(o.value),!r||p.length!==r);d=!0);}catch(_){O=!0,u=_}finally{try{d||a.return==null||a.return()}finally{if(O)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return Fy(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Fy(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Fy(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var mi=function(e){var t={d:""};return Object.entries(e).forEach(function(n){var r=s_(n,2),a=r[0],o=r[1],u=Dl(o);a!=="style"&&u==="object"||(t[a]=o)}),Object(te.g)("path",t)};function Nl(e){return Nl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nl(e)}function Cl(){return Cl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cl.apply(this,arguments)}function c_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rl(e,t){return Rl=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Rl(e,t)}function f_(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=su(e);if(t){var a=su(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p_(this,n)}}function p_(e,t){if(t&&(Nl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function su(e){return su=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},su(e)}var Il=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&Rl(o,u)})(a,e);var t,n,r=f_(a);function a(){return c_(this,a),r.apply(this,arguments)}return t=a,(n=[{key:"getEdge",value:function(){var o=this.props.model,u=o.startPoint,p=o.endPoint,d=o.isAnimation,O=o.arrowConfig,_=o.getEdgeStyle(),S=o.getEdgeAnimationStyle(),k=S.strokeDasharray,R=S.stroke,X=S.strokeDashoffset,W=S.animationName,oe=S.animationDuration,re=S.animationIterationCount,de=S.animationTimingFunction,me=S.animationDirection;return Object(te.g)(wo,Cl({},_,{x1:u.x,y1:u.y,x2:p.x,y2:p.y},O,d?{strokeDasharray:k,stroke:R,style:{strokeDashoffset:X,animationName:W,animationDuration:oe,animationIterationCount:re,animationTimingFunction:de,animationDirection:me}}:{}))}},{key:"getAppendWidth",value:function(){var o=this.props.model,u=function(k){var R,X=k.start,W=k.end;if(X.x===W.x&&X.y===W.y)R="";else{var oe={start:X,end:W,offset:10,verticalLength:5},re=ai(ha(ha({},oe),{},{type:"start"})),de=ai(ha(ha({},oe),{},{type:"end"}));R="M".concat(re.leftX," ").concat(re.leftY,` 
    L`).concat(re.rightX," ").concat(re.rightY,` 
    L`).concat(de.rightX," ").concat(de.rightY,`
    L`).concat(de.leftX," ").concat(de.leftY," z")}return{d:R,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}}({start:o.startPoint,end:o.endPoint}),p=u.d,d=u.strokeWidth,O=u.fill,_=u.strokeDasharray,S=u.stroke;return Object(te.g)(mi,{d:p,fill:O,strokeWidth:d,stroke:S,strokeDasharray:_})}}])&&l_(t.prototype,n),a}(bi);function Ll(e){return Ll=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ll(e)}function d_(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var o,u,p=[],d=!0,O=!1;try{for(a=a.call(n);!(d=(o=a.next()).done)&&(p.push(o.value),!r||p.length!==r);d=!0);}catch(_){O=!0,u=_}finally{try{d||a.return==null||a.return()}finally{if(O)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return Uy(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Uy(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Uy(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var h_=function(e){var t={points:"",fill:"none"};return Object.entries(e).forEach(function(n){var r=d_(n,2),a=r[0],o=r[1];(a==="style"||Ll(o)!=="object")&&(t[a]=o)}),Object(te.g)("polyline",t)};function zl(e){return zl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zl(e)}function Hy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function cu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Hy(Object(n),!0).forEach(function(r){wr(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hy(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Bl(){return Bl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bl.apply(this,arguments)}function y_(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var o,u,p=[],d=!0,O=!1;try{for(a=a.call(n);!(d=(o=a.next()).done)&&(p.push(o.value),!r||p.length!==r);d=!0);}catch(_){O=!0,u=_}finally{try{d||a.return==null||a.return()}finally{if(O)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return Gy(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Gy(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Gy(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fl(e,t){return Fl=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Fl(e,t)}function v_(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=lu(e);if(t){var a=lu(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return b_(this,n)}}function b_(e,t){if(t&&(zl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _r(e)}function _r(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lu(e){return lu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},lu(e)}function wr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ul=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&Fl(o,u)})(a,e);var t,n,r=v_(a);function a(){var o;return function(u,p){if(!(u instanceof p))throw new TypeError("Cannot call a class as a function")}(this,a),wr(_r(o=r.call(this)),"drag",void 0),wr(_r(o),"isDragging",void 0),wr(_r(o),"isShowAdjustPointTemp",void 0),wr(_r(o),"appendInfo",void 0),wr(_r(o),"onDragStart",function(){var u=o.props.model;u.dragAppendStart(),o.isShowAdjustPointTemp=u.isShowAdjustPoint,u.isShowAdjustPoint=!1}),wr(_r(o),"onDragging",function(u){var p=u.deltaX,d=u.deltaY,O=o.props,_=O.model,S=O.graphModel;o.isDragging=!0;var k=S.transformModel,R=S.editConfigModel,X=y_(k.fixDeltaXY(p,d),2),W=X[0],oe=X[1],re=_,de=R.adjustEdgeMiddle;o.appendInfo=de?re.dragAppendSimple(o.appendInfo,{x:W,y:oe}):re.dragAppend(o.appendInfo,{x:W,y:oe})}),wr(_r(o),"onDragEnd",function(){var u=o.props,p=u.model,d=u.graphModel.eventCenter,O=p;O.dragAppendEnd(),o.isDragging=!1,O.isShowAdjustPoint=o.isShowAdjustPointTemp,o.appendInfo=void 0,d.emit(tt.EDGE_ADJUST,{data:O.getData()})}),wr(_r(o),"beforeDragStart",function(u,p){p.dragAble&&o.drag.handleMouseDown(u),o.appendInfo=p}),o.drag=new hr({onDragStart:o.onDragStart,onDragging:o.onDragging,onDragEnd:o.onDragEnd,isStopPropagation:!1}),o}return t=a,(n=[{key:"getEdge",value:function(){var o=this.props.model,u=o.points,p=o.isAnimation,d=o.arrowConfig,O=o.getEdgeStyle(),_=o.getEdgeAnimationStyle(),S=_.strokeDasharray,k=_.stroke,R=_.strokeDashoffset,X=_.animationName,W=_.animationDuration,oe=_.animationIterationCount,re=_.animationTimingFunction,de=_.animationDirection;return Object(te.g)(h_,Bl({points:u},O,d,p?{strokeDasharray:S,stroke:k,style:{strokeDashoffset:R,animationName:X,animationDuration:W,animationIterationCount:oe,animationTimingFunction:re,animationDirection:de}}:{}))}},{key:"getArrowInfo",value:function(){var o=this.props.model,u=o.points,p=o.isSelected,d={start:null,end:null,hover:this.state.hover,isSelected:p},O=eo(u);return O.length>=2&&(d.start=O[O.length-2],d.end=O[O.length-1]),d}},{key:"getLastTwoPoints",value:function(){var o=this.props.model.points,u=eo(o);return u.length>=2?[u[u.length-2],u[u.length-1]]:[null,null]}},{key:"getAppendAttributes",value:function(o){var u,p=o.start,d=o.end;if(p.x===d.x&&p.y===d.y)u="";else{var O={start:p,end:d,offset:10,verticalLength:5},_=ai(cu(cu({},O),{},{type:"start"})),S=ai(cu(cu({},O),{},{type:"end"}));u="M".concat(_.leftX," ").concat(_.leftY,` 
      L`).concat(_.rightX," ").concat(_.rightY,` 
      L`).concat(S.rightX," ").concat(S.rightY,`
      L`).concat(S.leftX," ").concat(S.leftY," z")}return{d:u,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}}},{key:"getAppendShape",value:function(o){var u=this.getAppendAttributes(o),p=u.d,d=u.strokeWidth,O=u.fill,_=u.strokeDasharray,S=u.stroke;return Object(te.g)(mi,{d:p,fill:O,strokeWidth:d,stroke:S,strokeDasharray:_})}},{key:"getAppendWidth",value:function(){for(var o=this,u=this.props,p=u.model,d=u.graphModel,O=p.pointsList,_=p.draggable,S=[],k=O.length,R=function(W){var oe="lf-polyline-append",re={start:{x:O[W].x,y:O[W].y},end:{x:O[W+1].x,y:O[W+1].y},startIndex:W,endIndex:W+1,direction:"",dragAble:!0},de=Object(te.g)("g",{className:oe},o.getAppendShape(re)),me=d.editConfigModel,ke=me.adjustEdge,Ee=me.adjustEdgeMiddle;if(ke&&_){var He=re.startIndex,Te=re.endIndex,Be=Ee&&(He===0||Te===k-1);re.dragAble=!Be,re.start.x===re.end.x?(re.dragAble&&(oe+="-ew-resize"),re.direction=Tt.VERTICAL):re.start.y===re.end.y&&(re.dragAble&&(oe+="-ns-resize"),re.direction=Tt.HORIZONTAL),de=Object(te.g)("g",{className:o.isDragging?"lf-dragging":"lf-drag-able",onMouseDown:function(Re){return o.beforeDragStart(Re,re)}},Object(te.g)("g",{className:oe},o.getAppendShape(re)))}S.push(de)},X=0;X<k-1;X++)R(X);return Object(te.g)("g",null,S)}}])&&g_(t.prototype,n),a}(bi);function Hl(e){return Hl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hl(e)}function m_(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var o,u,p=[],d=!0,O=!1;try{for(a=a.call(n);!(d=(o=a.next()).done)&&(p.push(o.value),!r||p.length!==r);d=!0);}catch(_){O=!0,u=_}finally{try{d||a.return==null||a.return()}finally{if(O)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return Xy(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Xy(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Xy(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Gl(){return Gl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Gl.apply(this,arguments)}function O_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function __(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xl(e,t){return Xl=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Xl(e,t)}function w_(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=fu(e);if(t){var a=fu(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return x_(this,n)}}function x_(e,t){if(t&&(Hl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function fu(e){return fu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},fu(e)}var Yl=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&Xl(o,u)})(a,e);var t,n,r=w_(a);function a(){return O_(this,a),r.apply(this,arguments)}return t=a,(n=[{key:"getEdge",value:function(){var o=this.props.model,u=o.getEdgeStyle(),p=o.path,d=o.isAnimation,O=o.arrowConfig,_=o.getEdgeAnimationStyle(),S=_.strokeDasharray,k=_.stroke,R=_.strokeDashoffset,X=_.animationName,W=_.animationDuration,oe=_.animationIterationCount,re=_.animationTimingFunction,de=_.animationDirection;return Object(te.g)(mi,Gl({d:p},u,O,d?{strokeDasharray:S,stroke:k,style:{strokeDashoffset:R,animationName:X,animationDuration:W,animationIterationCount:oe,animationTimingFunction:re,animationDirection:de}}:{}))}},{key:"getAppendWidth",value:function(){var o=this.props.model.path;return Object(te.g)(mi,{d:o,strokeWidth:10,stroke:"transparent",fill:"none"})}},{key:"getArrowInfo",value:function(){var o=this.props.model,u=this.state.hover,p=o,d=p.path,O=p.isSelected,_=m_(md(d),2);return{start:_[0],end:_[1],hover:u,isSelected:O}}},{key:"getLastTwoPoints",value:function(){var o=this.props.model.path;return md(o)}}])&&__(t.prototype,n),a}(bi);function Vl(e){return Vl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vl(e)}function Yy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function E_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wl(e,t){return Wl=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Wl(e,t)}function P_(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=pu(e);if(t){var a=pu(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return A_(this,n)}}function A_(e,t){if(t&&(Vl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function pu(e){return pu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},pu(e)}var k_=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&Wl(o,u)})(a,e);var t,n,r=P_(a);function a(){return S_(this,a),r.apply(this,arguments)}return t=a,n=[{key:"getArrowAttributes",value:function(){var o=this.props,u=o.arrowInfo,p=o.style,d=u.start,O=u.end,_={start:d,end:O,offset:p.offset,verticalLength:p.verticalLength,type:"end"},S=ai(_),k=S.leftX,R=S.leftY,X=S.rightX,W=S.rightY;return function(oe){for(var re=1;re<arguments.length;re++){var de=arguments[re]!=null?arguments[re]:{};re%2?Yy(Object(de),!0).forEach(function(me){E_(oe,me,de[me])}):Object.getOwnPropertyDescriptors?Object.defineProperties(oe,Object.getOwnPropertyDescriptors(de)):Yy(Object(de)).forEach(function(me){Object.defineProperty(oe,me,Object.getOwnPropertyDescriptor(de,me))})}return oe}({d:"M".concat(k," ").concat(R," L").concat(O.x," ").concat(O.y," L").concat(X," ").concat(W," z")},p)}},{key:"getShape",value:function(){var o=this.getArrowAttributes(),u=o.d,p=o.strokeWidth,d=o.stroke,O=o.fill;return Object(te.g)(mi,{d:u,fill:O,strokeWidth:p,stroke:d})}},{key:"render",value:function(){return Object(te.g)("g",{className:"lf-arrow"},this.getShape())}}],n&&j_(t.prototype,n),a}(te.a),Vy=function(e,t){return pe(e,t)},T_=function(e){var t=e==null?0:e.length;return t?e[t-1]:void 0},Kl=function(){return Xe.a.Date.now()},M_=/\s/,D_=function(e){for(var t=e.length;t--&&M_.test(e.charAt(t)););return t},N_=/^\s+/,C_=function(e){return e&&e.slice(0,D_(e)+1).replace(N_,"")},R_=/^[-+]0x[0-9a-f]+$/i,I_=/^0b[01]+$/i,L_=/^0o[0-7]+$/i,z_=parseInt,Wy=function(e){if(typeof e=="number")return e;if(ct(e))return NaN;if(Dt(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Dt(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=C_(e);var n=I_.test(e);return n||L_.test(e)?z_(e.slice(2),n?2:8):R_.test(e)?NaN:+e},B_=Math.max,F_=Math.min,U_=function(e,t,n){var r,a,o,u,p,d,O=0,_=!1,S=!1,k=!0;if(typeof e!="function")throw new TypeError("Expected a function");function R(me){var ke=r,Ee=a;return r=a=void 0,O=me,u=e.apply(Ee,ke)}function X(me){return O=me,p=setTimeout(oe,t),_?R(me):u}function W(me){var ke=me-d;return d===void 0||ke>=t||ke<0||S&&me-O>=o}function oe(){var me=Kl();if(W(me))return re(me);p=setTimeout(oe,function(ke){var Ee=t-(ke-d);return S?F_(Ee,o-(ke-O)):Ee}(me))}function re(me){return p=void 0,k&&r?R(me):(r=a=void 0,u)}function de(){var me=Kl(),ke=W(me);if(r=arguments,a=this,d=me,ke){if(p===void 0)return X(d);if(S)return clearTimeout(p),p=setTimeout(oe,t),R(d)}return p===void 0&&(p=setTimeout(oe,t)),u}return t=Wy(t)||0,Dt(n)&&(_=!!n.leading,o=(S="maxWait"in n)?B_(Wy(n.maxWait)||0,t):o,k="trailing"in n?!!n.trailing:k),de.cancel=function(){p!==void 0&&clearTimeout(p),O=0,r=d=a=p=void 0},de.flush=function(){return p===void 0?u:re(Kl())},de},H_=i(167);function G_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Br(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ky,Zy,qy,X_=function(){function e(r){(function(a,o){if(!(a instanceof o))throw new TypeError("Cannot call a class as a function")})(this,e),Br(this,"undos",[]),Br(this,"redos",[]),Br(this,"callbacks",[]),Br(this,"stopWatch",null),Br(this,"curData",null),Br(this,"maxSize",50),Br(this,"waitTime",100),Br(this,"eventCenter",void 0),this.eventCenter=r}var t,n;return t=e,(n=[{key:"add",value:function(r){Vy(T_(this.undos),r)||(this.undos.push(r),Vy(this.curData,r)||(this.redos=[]),this.eventCenter.emit(tt.HISTORY_CHANGE,{data:{undos:this.undos,redos:this.redos,undoAble:this.undos.length>1,redoAble:this.redos.length>0}}),this.undos.length>this.maxSize&&this.undos.shift())}},{key:"undoAble",value:function(){return this.undos.length>1}},{key:"undo",value:function(){if(this.undoAble()){var r=this.undos.pop();this.redos.push(r);var a=this.undos.pop();return this.curData=Nt(a),a}}},{key:"redoAble",value:function(){return this.redos.length>0}},{key:"redo",value:function(){if(this.redoAble()){var r=this.redos.pop();return this.curData=Nt(r),r}}},{key:"watch",value:function(r){var a=this;this.stopWatch&&this.stopWatch(),this.undos.push(r.modelToGraphData()),this.stopWatch=Object(H_.a)(r,U_(function(){var o=r.modelToHistoryData();o&&a.add(o)},this.waitTime))}}])&&G_(t.prototype,n),e}();function Zl(e){return Zl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zl(e)}function Y_(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var o,u,p=[],d=!0,O=!1;try{for(a=a.call(n);!(d=(o=a.next()).done)&&(p.push(o.value),!r||p.length!==r);d=!0);}catch(_){O=!0,u=_}finally{try{d||a.return==null||a.return()}finally{if(O)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return Jy(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Jy(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Jy(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function No(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$y(Object(n),!0).forEach(function(r){ro(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$y(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Qy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ql(e,t){return ql=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},ql(e,t)}function V_(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=du(e);if(t){var a=du(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return W_(this,n)}}function W_(e,t){if(t&&(Zl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Co(e)}function Co(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function du(e){return du=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},du(e)}function ro(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var eg,tg,ng,Jl=Gn((qy=Zy=function(e){(function(u,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");u.prototype=Object.create(p&&p.prototype,{constructor:{value:u,writable:!0,configurable:!0}}),p&&ql(u,p)})(o,e);var t,n,r,a=V_(o);function o(){var u;return function(p,d){if(!(p instanceof d))throw new TypeError("Cannot call a class as a function")}(this,o),ro(Co(u=a.call(this)),"ref",Object(te.f)()),ro(Co(u),"__prevText",{type:"",text:"",id:""}),ro(Co(u),"keyupHandler",function(p){var d=u.props.graphModel.textEditElement;p.key==="Enter"&&p.altKey&&d.setElementState(0)}),ro(Co(u),"inputHandler",function(p){var d=p.target.innerText,O=u.props.graphModel.textEditElement;u.__prevText={type:O.type,text:d.replace(/(\r\n)+$|(\n)+$/,""),id:O.id}}),ro(Co(u),"keydownHandler",function(p){p.stopPropagation()}),u.state={style:{left:0,top:0}},u}return t=o,r=[{key:"getDerivedStateFromProps",value:function(u){var p,d=u.graphModel,O=d.transformModel,_=d.theme,S=d.textEditElement;if(S){var k;if((k=S.text)===null||k===void 0||!k.value)if(S.BaseType===Gt.EDGE){var R=(S=S).text,X=S.textPosition,W=X.x,oe=X.y;R.x=W,R.y=oe,S.setText(R)}else S=S;var re={resize:"auto",whiteSpace:"normal",wordBreak:"break-all"};if(S.BaseType===Gt.EDGE){var de=_.edgeText,me=de.overflowMode,ke=de.lineHeight,Ee=de.wrapPadding,He=de.textWidth;He&&me==="autoWrap"&&(p=No(No({},re),{},{width:He,minWidth:He,lineHeight:ke,padding:Ee}))}else if(S.BaseType===Gt.NODE){var Te=_.nodeText,Be=Te.overflowMode,Re=Te.lineHeight,lt=Te.wrapPadding,Et=Te.textWidth,mt=S,jt=mt.width,Ut=mt.modelType;(Ut!==ht.TEXT_NODE&&Be==="autoWrap"||Ut===ht.TEXT_NODE&&Et)&&(p=No(No({},re),{},{width:Et||jt,minWidth:Et||jt,lineHeight:Re,padding:lt}))}var Kt=S.text,dn=Kt.x,ar=Kt.y,Ln=Y_(O.CanvasPointToHtmlPoint([dn,ar]),2);return{style:No({left:Ln[0],top:Ln[1]},p)}}}}],(n=[{key:"componentDidUpdate",value:function(){var u=this.props.graphModel;if(this.ref.current&&(this.ref.current.focus(),this.placeCaretAtEnd(this.ref.current)),this.__prevText.id!==""){var p=this.__prevText,d=p.text,O=p.id;u.updateText(O,d),u.eventCenter.emit(tt.TEXT_UPDATE,No({},this.__prevText)),this.__prevText.id="",this.__prevText.text="",this.__prevText.type=""}}},{key:"placeCaretAtEnd",value:function(u){if(window.getSelection!==void 0&&document.createRange!==void 0){var p=document.createRange();p.selectNodeContents(u),p.collapse(!1);var d=window.getSelection();d.removeAllRanges(),d.addRange(p)}}},{key:"render",value:function(){var u,p=this.props.graphModel.textEditElement,d=this.state.style;return p?Object(te.g)("div",{contentEditable:!0,className:"lf-text-input",style:d,ref:this.ref,key:p.id,onKeyUp:this.keyupHandler,onKeyDown:this.keydownHandler,onKeyPress:this.keydownHandler,onInput:this.inputHandler},(u=p.text)===null||u===void 0?void 0:u.value):null}}])&&Qy(t.prototype,n),r&&Qy(t,r),o}(te.a),ro(Zy,"toolName","textEdit"),Ky=qy))||Ky,K_=function(e){return e.modelType===ht.LINE_EDGE?function(t){var n=t.startPoint,r=t.endPoint,a=(n.x+r.x)/2,o=(n.y+r.y)/2,u=Math.abs(n.x-r.x)+10,p=Math.abs(n.y-r.y)+10;return{x:a-u/2,y:o-p/2,x1:a+u/2,y1:o+p/2}}(e):e.modelType===ht.POLYLINE_EDGE?function(t){var n=t.points,r=eo(n),a=ui(r,8),o=a.x,u=a.y,p=a.width,d=a.height;return{x:o-p/2,y:u-d/2,x1:o+p/2,y1:u+d/2}}(e):e.modelType===ht.BEZIER_EDGE?function(t){var n=t.path,r=_a(n),a=ui(r,8),o=a.x,u=a.y,p=a.width,d=a.height;return{x:o-p/2,y:u-d/2,x1:o+p/2,y1:u+d/2}}(e):void 0};function $l(e){return $l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$l(e)}function rg(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var o,u,p=[],d=!0,O=!1;try{for(a=a.call(n);!(d=(o=a.next()).done)&&(p.push(o.value),!r||p.length!==r);d=!0);}catch(_){O=!0,u=_}finally{try{d||a.return==null||a.return()}finally{if(O)throw u}}return p}}(e,t)||og(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Z_(e){return function(t){if(Array.isArray(t))return Ql(t)}(e)||function(t){if(typeof Symbol!="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||og(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function og(e,t){if(e){if(typeof e=="string")return Ql(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ql(e,t):void 0}}function Ql(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function q_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ef(e,t){return ef=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},ef(e,t)}function J_(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=hu(e);if(t){var a=hu(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return $_(this,n)}}function $_(e,t){if(t&&($l(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Oi(e)}function Oi(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hu(e){return hu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},hu(e)}function _i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var tf=Gn((ng=tg=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&ef(o,u)})(a,e);var t,n,r=J_(a);function a(o){var u;(function(_,S){if(!(_ instanceof S))throw new TypeError("Cannot call a class as a function")})(this,a),_i(Oi(u=r.call(this)),"stepDrag",void 0),_i(Oi(u),"handleMouseDown",function(_){u.stepDrag.handleMouseDown(_)}),_i(Oi(u),"onDragging",function(_){var S=_.deltaX,k=_.deltaY,R=u.props.graphModel,X=R.getSelectElements(!0);R.moveNodes(X.nodes.map(function(W){return W.id}),S,k)}),_i(Oi(u),"handleContextMenu",function(_){_.preventDefault();var S=u.props,k=S.graphModel,R=S.graphModel,X=R.eventCenter,W=R.selectElements,oe=k.getPointByClient({x:_.clientX,y:_.clientY}),re={nodes:[],edges:[]};Z_(W.values()).forEach(function(de){de.BaseType===Gt.NODE&&re.nodes.push(de.getData()),de.BaseType===Gt.EDGE&&re.edges.push(de.getData())}),X.emit(tt.SELECTION_CONTEXTMENU,{data:re,e:_,position:oe})});var p=o.graphModel,d=p.gridSize,O=p.eventCenter;return u.stepDrag=new hr({onDragging:u.onDragging,step:d,eventType:"SELECTION",eventCenter:O}),u}return t=a,(n=[{key:"render",value:function(){var o=this.props.graphModel,u=o.selectElements,p=o.transformModel;if(!(u.size<=1)){var d=Number.MAX_SAFE_INTEGER,O=Number.MAX_SAFE_INTEGER,_=Number.MIN_SAFE_INTEGER,S=Number.MIN_SAFE_INTEGER;u.forEach(function(W){var oe={x:0,y:0,x1:0,y1:0};W.BaseType===Gt.NODE&&(oe=function(re){var de=re.x,me=re.y,ke=re.width,Ee=re.height;return{x:de-ke/2,y:me-Ee/2,x1:de+ke/2,y1:me+Ee/2}}(W)),W.BaseType===Gt.EDGE&&(oe=K_(W)),d=Math.min(d,oe.x),O=Math.min(O,oe.y),_=Math.max(_,oe.x1),S=Math.max(S,oe.y1)});var k=rg(p.CanvasPointToHtmlPoint([d,O]),2);d=k[0],O=k[1];var R=rg(p.CanvasPointToHtmlPoint([_,S]),2);_=R[0],S=R[1];var X={left:"".concat(d-10,"px"),top:"".concat(O-10,"px"),width:"".concat(_-d+20,"px"),height:"".concat(S-O+20,"px")};return Object(te.g)("div",{className:"lf-multiple-select",style:X,onMouseDown:this.handleMouseDown,onContextMenu:this.handleContextMenu})}}}])&&q_(t.prototype,n),a}(te.a),_i(tg,"toolName","multipleSelect"),eg=ng))||eg;function Q_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ew=function(){function e(r){(function(o,u){if(!(o instanceof u))throw new TypeError("Cannot call a class as a function")})(this,e),yu(this,"tools",void 0),yu(this,"components",void 0),yu(this,"toolMap",new Map),yu(this,"instance",void 0),this.instance=r,this.isDisabledTool(Jl.toolName)||this.registerTool(Jl.toolName,Jl),this.isDisabledTool(tf.toolName)||this.registerTool(tf.toolName,tf);var a=r.graphModel;a.eventCenter.on("".concat(tt.GRAPH_TRANSFORM,",").concat(tt.NODE_CLICK,",").concat(tt.BLANK_CLICK," "),function(){var o=a.textEditElement,u=a.editConfigModel,p=u.edgeTextEdit,d=u.nodeTextEdit;(p||d)&&o&&a.textEditElement.setElementState(_t.DEFAULT)})}var t,n;return t=e,(n=[{key:"isDisabledTool",value:function(r){return this.instance.options.disabledTools.indexOf(r)!==-1}},{key:"registerTool",value:function(r,a){this.toolMap.set(r,a)}},{key:"getTools",value:function(){return Array.from(this.toolMap.values())}},{key:"getInstance",value:function(){return this.instance}}])&&Q_(t.prototype,n),e}(),tw=i(168),nw=i.n(tw);function rw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ig=function(){function e(r){(function(o,u){if(!(o instanceof u))throw new TypeError("Cannot call a class as a function")})(this,e),nf(this,"mousetrap",void 0),nf(this,"options",void 0),nf(this,"target",void 0),r.keyboard||(r.keyboard={enabled:!1}),this.options=r;var a=r.lf;this.target=a.container,this.mousetrap=new nw.a(this.target),r.keyboard.enabled&&this.enable(!0)}var t,n;return t=e,(n=[{key:"initShortcuts",value:function(){var r=this,a=this.options.keyboard.shortcuts;if(a)if($t(a))a.forEach(function(d){var O=d.keys,_=d.callback,S=d.action;return r.on(O,_,S)});else{var o=a.keys,u=a.callback,p=a.action;this.on(o,u,p)}}},{key:"on",value:function(r,a,o){this.mousetrap.bind(this.getKeys(r),a,o)}},{key:"disabled",get:function(){return this.options.keyboard.enabled!==!0}},{key:"off",value:function(r,a){this.mousetrap.unbind(this.getKeys(r),a)}},{key:"enable",value:function(r){(this.disabled||r)&&(this.options.keyboard.enabled=!0,this.target instanceof HTMLElement&&(this.target.setAttribute("tabindex","-1"),this.target.style.outline="none"))}},{key:"disable",value:function(){this.disabled||(this.options.keyboard.enabled=!1,this.target instanceof HTMLElement&&this.target.removeAttribute("tabindex"))}},{key:"getKeys",value:function(r){var a=this;return(Array.isArray(r)?r:[r]).map(function(o){return a.formatKey(o)})}},{key:"formatKey",value:function(r){return r.toLowerCase().replace(/\s/g,"").replace("delete","del").replace("cmd","command")}}])&&rw(t.prototype,n),e}(),ow=ig,xr=null;function ag(e,t){return e.x+=t,e.y+=t,e.text&&(e.text.x+=t,e.text.y+=t),e}function ug(e,t){return e.startPoint&&(e.startPoint.x+=t,e.startPoint.y+=t),e.endPoint&&(e.endPoint.x+=t,e.endPoint.y+=t),e.pointsList&&e.pointsList.length>0&&e.pointsList.forEach(function(n){n.x+=t,n.y+=t}),e.text&&(e.text.x+=t,e.text.y+=t),e}function rf(e){return rf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rf(e)}function sg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function wi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sg(Object(n),!0).forEach(function(r){Ft(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sg(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function cg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ft(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var of=function(){function e(a){var o,u,p=this;(function(d,O){if(!(d instanceof O))throw new TypeError("Cannot call a class as a function")})(this,e),Ft(this,"container",void 0),Ft(this,"width",void 0),Ft(this,"height",void 0),Ft(this,"graphModel",void 0),Ft(this,"history",void 0),Ft(this,"viewMap",new Map),Ft(this,"tool",void 0),Ft(this,"keyboard",void 0),Ft(this,"dnd",void 0),Ft(this,"options",void 0),Ft(this,"snaplineModel",void 0),Ft(this,"components",[]),Ft(this,"plugins",void 0),Ft(this,"extension",{}),Ft(this,"adapterIn",void 0),Ft(this,"adapterOut",void 0),Ft(this,"getView",function(d){return p.viewMap.get(d)}),a=ch(a),this.options=a,this.container=this.initContainer(a.container),this.plugins=a.plugins,this.graphModel=new fm(wi({},a)),this.tool=new ew(this),this.history=new X_(this.graphModel.eventCenter),this.dnd=new u0({lf:this}),this.keyboard=new ow({lf:this,keyboard:a.keyboard}),a.snapline!==!1&&(this.snaplineModel=new my(this.graphModel),o=this.graphModel.eventCenter,u=this.snaplineModel,o.on("node:mousemove",function(d){var O=d.data;u.setNodeSnapLine(O)}),o.on("node:mouseup",function(){u.clearSnapline()})),function(d,O){var _=d.keyboard,S=_.options.keyboard;_.on(["cmd + c","ctrl + c"],function(){if(!S.enabled||O.textEditElement)return!0;var k=d.options.guards,R=O.getSelectElements(!1);return k&&k.beforeClone&&!k.beforeClone(R)||R.nodes.length===0&&R.edges.length===0?(xr=null,!0):((xr=R).nodes.forEach(function(X){return ag(X,40)}),xr.edges.forEach(function(X){return ug(X,40)}),!1)}),_.on(["cmd + v","ctrl + v"],function(){if(!S.enabled||O.textEditElement)return!0;if(xr&&(xr.nodes||xr.edges)){d.clearSelectElements();var k=d.addElements(xr);if(!k)return!0;k.nodes.forEach(function(R){return d.selectElementById(R.id,!0)}),k.edges.forEach(function(R){return d.selectElementById(R.id,!0)}),xr.nodes.forEach(function(R){return ag(R,40)}),xr.edges.forEach(function(R){return ug(R,40)})}return!1}),_.on(["cmd + z","ctrl + z"],function(){return!S.enabled||!!O.textEditElement||(d.undo(),!1)}),_.on(["cmd + y","ctrl + y"],function(){return!S.enabled||!!O.textEditElement||(d.redo(),!1)}),_.on(["backspace"],function(){if(!S.enabled||O.textEditElement)return!0;var k=O.getSelectElements(!0);return d.clearSelectElements(),k.edges.forEach(function(R){return d.deleteEdge(R.id)}),k.nodes.forEach(function(R){return d.deleteNode(R.id)}),!1})}(this,this.graphModel),this.keyboard.initShortcuts(),this.defaultRegister(),this.installPlugins(a.disabledPlugins)}var t,n,r;return t=e,n=[{key:"register",value:function(a,o){var u=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(typeof a=="string"){var p={BaseEdge:bi,BaseEdgeModel:bs,BaseNode:mr,BaseNodeModel:br,RectNode:Jc,RectNodeModel:Mc,CircleNode:tl,CircleNodeModel:pc,PolygonNode:al,PolygonNodeModel:Pc,TextNode:bl,TextNodeModel:Rc,LineEdge:Il,LineEdgeModel:xs,DiamondNode:ll,DiamondNodeModel:vc,PolylineEdge:Ul,PolylineEdgeModel:Ps,BezierEdge:Yl,BezierEdgeModel:ac,EllipseNode:yl,EllipseNodeModel:_c,HtmlNode:wl,HtmlNodeModel:zc,h:te.g,type:a};this.viewMap.forEach(function(k){var R=k.extendKey;R&&(p[R]=k)}),this.graphModel.modelMap.forEach(function(k){var R=k.extendKey;R&&(p[R]=k)});var d=o(p),O=d.view,_=d.model,S=O;u&&!S.isObervered&&(S.isObervered=!0,S=Ue(S)),this.setView(a,S),this.graphModel.setModel(a,_)}else this.registerElement(a)}},{key:"registerElement",value:function(a){var o=a.view;a.isObserverView===!1||o.isObervered||(o.isObervered=!0,o=Ue(o)),this.setView(a.type,o),this.graphModel.setModel(a.type,a.model)}},{key:"batchRegister",value:function(){var a=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];o.forEach(function(u){a.registerElement(u)})}},{key:"defaultRegister",value:function(){this.registerElement({view:Jc,model:Mc,type:"rect"}),this.registerElement({type:"circle",view:tl,model:pc}),this.registerElement({type:"polygon",view:al,model:Pc}),this.registerElement({type:"line",view:Il,model:xs}),this.registerElement({type:"polyline",view:Ul,model:Ps}),this.registerElement({type:"bezier",view:Yl,model:ac}),this.registerElement({type:"text",view:bl,model:Rc}),this.registerElement({type:"ellipse",view:yl,model:_c}),this.registerElement({type:"diamond",view:ll,model:vc}),this.registerElement({type:"html",view:wl,model:zc})}},{key:"selectElementById",value:function(a){var o=arguments.length>1&&arguments[1]!==void 0&&arguments[1],u=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];this.graphModel.selectElementById(a,o),!o&&u&&this.graphModel.toFront(a)}},{key:"focusOn",value:function(a){var o=this.graphModel.transformModel,u=a.coordinate,p=a.id;if(!u){var d=this.getNodeModelById(p);d&&(u=d.getData());var O=this.getEdgeModelById(p);O&&(u=O.textPosition)}var _=u,S=_.x,k=_.y;o.focusOn(S,k,this.graphModel.width,this.graphModel.height)}},{key:"setTheme",value:function(a){this.graphModel.setTheme(a)}},{key:"resize",value:function(a,o){this.graphModel.resize(a,o),this.options.width=this.graphModel.width,this.options.height=this.graphModel.height}},{key:"setDefaultEdgeType",value:function(a){this.graphModel.setDefaultEdgeType(a)}},{key:"updateText",value:function(a,o){this.graphModel.updateText(a,o)}},{key:"deleteElement",value:function(a){var o,u,p,d=this.getModelById(a);return!!d&&(u=(p=(Ft(o={},Gt.NODE,this.deleteNode),Ft(o,Gt.EDGE,this.deleteEdge),o)[d.BaseType])===null||p===void 0?void 0:p.call(this,a))!==null&&u!==void 0&&u}},{key:"getModelById",value:function(a){return this.graphModel.getElement(a)}},{key:"getDataById",value:function(a){var o;return(o=this.graphModel.getElement(a))===null||o===void 0?void 0:o.getData()}},{key:"changeNodeType",value:function(a,o){this.graphModel.changeNodeType(a,o)}},{key:"changeEdgeType",value:function(a,o){this.graphModel.changeEdgeType(a,o)}},{key:"getNodeEdges",value:function(a){return this.graphModel.getNodeEdges(a)}},{key:"addNode",value:function(a){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:tt.NODE_ADD,u=arguments.length>2?arguments[2]:void 0;return this.graphModel.addNode(a,o,u)}},{key:"deleteNode",value:function(a){var o=this.graphModel.getNodeModelById(a);if(!o)return!1;var u=o.getData(),p=this.options.guards,d=!p||!p.beforeDelete||p.beforeDelete(u);return d&&this.graphModel.deleteNode(a),d}},{key:"cloneNode",value:function(a){var o=this.graphModel.getNodeModelById(a).getData(),u=this.options.guards;if(!u||!u.beforeClone||u.beforeClone(o))return this.graphModel.cloneNode(a)}},{key:"changeNodeId",value:function(a,o){return this.graphModel.changeNodeId(a,o)}},{key:"getNodeModelById",value:function(a){return this.graphModel.getNodeModelById(a)}},{key:"getNodeDataById",value:function(a){var o;return(o=this.graphModel.getNodeModelById(a))===null||o===void 0?void 0:o.getData()}},{key:"addEdge",value:function(a){return this.graphModel.addEdge(a)}},{key:"deleteEdge",value:function(a){var o=this.options.guards,u=this.graphModel.edgesMap[a];if(!u)return!1;var p=u.model.getData(),d=!o||!o.beforeDelete||o.beforeDelete(p);return d&&this.graphModel.deleteEdgeById(a),d}},{key:"deleteEdgeByNodeId",value:function(a){var o=a.sourceNodeId,u=a.targetNodeId;o&&u?this.graphModel.deleteEdgeBySourceAndTarget(o,u):o?this.graphModel.deleteEdgeBySource(o):u&&this.graphModel.deleteEdgeByTarget(u)}},{key:"changeEdgeId",value:function(a,o){return this.graphModel.changeEdgeId(a,o)}},{key:"getEdgeModelById",value:function(a){var o;return(o=this.graphModel.edgesMap[a])===null||o===void 0?void 0:o.model}},{key:"getEdgeModels",value:function(a){var o=this.graphModel.edges,u=a.sourceNodeId,p=a.targetNodeId;if(u&&p){var d=[];return o.forEach(function(S){S.sourceNodeId===u&&S.targetNodeId===p&&d.push(S)}),d}if(u){var O=[];return o.forEach(function(S){S.sourceNodeId===u&&O.push(S)}),O}if(p){var _=[];return o.forEach(function(S){S.targetNodeId===p&&_.push(S)}),_}return[]}},{key:"getEdgeDataById",value:function(a){var o;return(o=this.getEdgeModelById(a))===null||o===void 0?void 0:o.getData()}},{key:"getNodeIncomingEdge",value:function(a){return this.graphModel.getNodeIncomingEdge(a)}},{key:"getNodeOutgoingEdge",value:function(a){return this.graphModel.getNodeOutgoingEdge(a)}},{key:"getNodeIncomingNode",value:function(a){return this.graphModel.getNodeIncomingNode(a)}},{key:"getNodeOutgoingNode",value:function(a){return this.graphModel.getNodeOutgoingNode(a)}},{key:"editText",value:function(a){this.graphModel.editText(a)}},{key:"setProperties",value:function(a,o){var u;(u=this.graphModel.getElement(a))===null||u===void 0||u.setProperties(nn(o))}},{key:"deleteProperty",value:function(a,o){var u;(u=this.graphModel.getElement(a))===null||u===void 0||u.deleteProperty(o)}},{key:"getProperties",value:function(a){var o;return(o=this.graphModel.getElement(a))===null||o===void 0?void 0:o.getProperties()}},{key:"toFront",value:function(a){this.graphModel.toFront(a)}},{key:"setElementZIndex",value:function(a,o){return this.graphModel.setElementZIndex(a,o)}},{key:"addElements",value:function(a){for(var o=this,u=a.nodes,p=a.edges,d={},O={nodes:[],edges:[]},_=0;_<u.length;_++){var S=u[_],k=S.id,R=this.addNode(S);if(!R)return;k&&(d[k]=R.id),O.nodes.push(R)}return p.forEach(function(X){var W=X.sourceNodeId,oe=X.targetNodeId;d[W]&&(W=d[W]),d[oe]&&(oe=d[oe]);var re=o.graphModel.addEdge(wi(wi({},X),{},{sourceNodeId:W,targetNodeId:oe}));O.edges.push(re)}),O}},{key:"getAreaElement",value:function(a,o){var u=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],p=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],d=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return this.graphModel.getAreaElement(a,o,u,p,d).map(function(O){return O.getData()})}},{key:"getSelectElements",value:function(){var a=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return this.graphModel.getSelectElements(a)}},{key:"clearSelectElements",value:function(){this.graphModel.clearSelectElements()}},{key:"getGraphData",value:function(){var a=this.graphModel.modelToGraphData();if(this.adapterOut){for(var o=arguments.length,u=new Array(o),p=0;p<o;p++)u[p]=arguments[p];return this.adapterOut.apply(this,[a].concat(u))}return a}},{key:"getGraphRawData",value:function(){return this.graphModel.modelToGraphData()}},{key:"clearData",value:function(){this.graphModel.clearData()}},{key:"updateEditConfig",value:function(a){this.graphModel.editConfigModel.updateEditConfig(a)}},{key:"getEditConfig",value:function(){return this.graphModel.editConfigModel.getConfig()}},{key:"getPointByClient",value:function(a,o){return this.graphModel.getPointByClient({x:a,y:o})}},{key:"undo",value:function(){if(this.history.undoAble()){var a=nn(this.history.undo());this.clearSelectElements(),this.graphModel.graphDataToModel(a)}}},{key:"redo",value:function(){if(this.history.redoAble()){var a=nn(this.history.redo());this.clearSelectElements(),this.graphModel.graphDataToModel(a)}}},{key:"zoom",value:function(a,o){return this.graphModel.transformModel.zoom(a,o)}},{key:"resetZoom",value:function(){this.graphModel.transformModel.resetZoom()}},{key:"setZoomMiniSize",value:function(a){this.graphModel.transformModel.setZoomMiniSize(a)}},{key:"setZoomMaxSize",value:function(a){this.graphModel.transformModel.setZoomMaxSize(a)}},{key:"getTransform",value:function(){var a=this.graphModel.transformModel;return{SCALE_X:a.SCALE_X,SCALE_Y:a.SCALE_Y,TRANSLATE_X:a.TRANSLATE_X,TRANSLATE_Y:a.TRANSLATE_Y}}},{key:"translate",value:function(a,o){this.graphModel.transformModel.translate(a,o)}},{key:"resetTranslate",value:function(){var a=this.graphModel.transformModel,o=a.TRANSLATE_X,u=a.TRANSLATE_Y;this.translate(-o,-u)}},{key:"translateCenter",value:function(){this.graphModel.translateCenter()}},{key:"fitView",value:function(a,o){o===void 0&&(o=a),this.graphModel.fitView(a,o)}},{key:"openEdgeAnimation",value:function(a){this.graphModel.openEdgeAnimation(a)}},{key:"closeEdgeAnimation",value:function(a){this.graphModel.closeEdgeAnimation(a)}},{key:"on",value:function(a,o){this.graphModel.eventCenter.on(a,o)}},{key:"off",value:function(a,o){this.graphModel.eventCenter.off(a,o)}},{key:"once",value:function(a,o){this.graphModel.eventCenter.once(a,o)}},{key:"emit",value:function(a,o){this.graphModel.eventCenter.emit(a,o)}},{key:"initContainer",value:function(a){var o=document.createElement("div");return o.style.position="relative",o.style.width="100%",o.style.height="100%",a.innerHTML="",a.appendChild(o),o}},{key:"installPlugins",value:function(){var a,o=this,u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],p=(a=this.plugins)!==null&&a!==void 0?a:e.extensions;p.forEach(function(d){var O=d.pluginName||d.name;u.indexOf(O)===-1&&o.installPlugin(d)})}},{key:"installPlugin",value:function(a){if(rf(a)==="object"){var o=a.install,u=a.render;return o&&o.call(a,this,e),u&&this.components.push(u.bind(a)),void(this.extension[a.pluginName]=a)}var p=a,d=new p({lf:this,LogicFlow:e,options:this.options.pluginsOptions});d.render&&this.components.push(d.render.bind(d)),this.extension[p.pluginName]=d}},{key:"updateAttributes",value:function(a,o){this.graphModel.updateAttributes(a,o)}},{key:"createFakerNode",value:function(a){var o=this.graphModel.modelMap.get(a.type);if(o){var u=new o(wi(wi({},a),{},{virtual:!0}),this.graphModel);return this.graphModel.setFakerNode(u),u}}},{key:"removeFakerNode",value:function(){this.graphModel.removeFakerNode()}},{key:"setNodeSnapLine",value:function(a){this.snaplineModel&&this.snaplineModel.setNodeSnapLine(a)}},{key:"removeNodeSnapLine",value:function(){this.snaplineModel&&this.snaplineModel.clearSnapline()}},{key:"setView",value:function(a,o){this.viewMap.set(a,o)}},{key:"renderRawData",value:function(a){this.graphModel.graphDataToModel(nn(a)),this.options.history!==!1&&this.history.watch(this.graphModel),Object(te.j)(Object(te.g)(i0,{getView:this.getView,tool:this.tool,options:this.options,dnd:this.dnd,snaplineModel:this.snaplineModel,graphModel:this.graphModel}),this.container),this.emit(tt.GRAPH_RENDERED,this.graphModel.modelToGraphData())}},{key:"render",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.adapterIn&&(a=this.adapterIn(a)),this.renderRawData(a)}}],r=[{key:"use",value:function(a){var o=a.pluginName;o||(o=a.name);var u=this.extensions.get(o);u&&u.destroy&&u.destroy(),this.extensions.set(o,a)}}],n&&cg(t.prototype,n),r&&cg(t,r),e}();function Gn(e){return Ue(e)}Ft(of,"extensions",new Map),f.default=of}])})})(cf,cf.exports);var Je=cf.exports;const Io=kw(Je);var zw=new Gg([32,32,1]);function Uo(){return zw.next()}var Yg=globalThis&&globalThis.__extends||function(){var v=function(h,s){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,i){f.__proto__=i}||function(f,i){for(var l in i)i.hasOwnProperty(l)&&(f[l]=i[l])},v(h,s)};return function(h,s){v(h,s);function f(){this.constructor=h}h.prototype=s===null?Object.create(s):(f.prototype=s.prototype,new f)}}(),Bw=function(v){Yg(h,v);function h(s,f){var i=this;return s.id||(s.id="Event_"+Uo()),s.text||(s.text=""),s.text&&typeof s.text=="string"&&(s.text={value:s.text,x:s.x,y:s.y+40}),i=v.call(this,s,f)||this,i}return h.prototype.setAttributes=function(){this.r=18},h.prototype.getConnectedTargetRules=function(){var s=v.prototype.getConnectedTargetRules.call(this),f={message:"起始节点不能作为边的终点",validate:function(){return!1}};return s.push(f),s},h.extendKey="StartEventModel",h}(Je.CircleNodeModel),Fw=function(v){Yg(h,v);function h(){return v!==null&&v.apply(this,arguments)||this}return h.extendKey="StartEventNode",h}(Je.CircleNode),Uw={type:"bpmn:startEvent",view:Fw,model:Bw},Vg=globalThis&&globalThis.__extends||function(){var v=function(h,s){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,i){f.__proto__=i}||function(f,i){for(var l in i)i.hasOwnProperty(l)&&(f[l]=i[l])},v(h,s)};return function(h,s){v(h,s);function f(){this.constructor=h}h.prototype=s===null?Object.create(s):(f.prototype=s.prototype,new f)}}(),Pu=globalThis&&globalThis.__assign||function(){return Pu=Object.assign||function(v){for(var h,s=1,f=arguments.length;s<f;s++){h=arguments[s];for(var i in h)Object.prototype.hasOwnProperty.call(h,i)&&(v[i]=h[i])}return v},Pu.apply(this,arguments)},Hw=function(v){Vg(h,v);function h(s,f){var i=this;return s.id||(s.id="Event_"+Uo()),s.text||(s.text=""),s.text&&typeof s.text=="string"&&(s.text={value:s.text,x:s.x,y:s.y+40}),i=v.call(this,s,f)||this,i}return h.prototype.setAttributes=function(){this.r=18},h.prototype.getConnectedSourceRules=function(){var s=v.prototype.getConnectedSourceRules.call(this),f={message:"结束节点不能作为边的起点",validate:function(){return!1}};return s.push(f),s},h.extendKey="EndEventModel",h}(Je.CircleNodeModel),Gw=function(v){Vg(h,v);function h(){return v!==null&&v.apply(this,arguments)||this}return h.prototype.getAnchorStyle=function(){return{visibility:"hidden"}},h.prototype.getShape=function(){var s=this.props.model,f=s.getNodeStyle(),i=s.x,l=s.y,c=s.r,b=v.prototype.getShape.call(this);return Je.h("g",{},b,Je.h("circle",Pu(Pu({},f),{cx:i,cy:l,r:c-5})))},h.extendKey="EndEventView",h}(Je.CircleNode),Xw={type:"bpmn:endEvent",view:Gw,model:Hw},Wg=globalThis&&globalThis.__extends||function(){var v=function(h,s){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,i){f.__proto__=i}||function(f,i){for(var l in i)i.hasOwnProperty(l)&&(f[l]=i[l])},v(h,s)};return function(h,s){v(h,s);function f(){this.constructor=h}h.prototype=s===null?Object.create(s):(f.prototype=s.prototype,new f)}}(),Pi=globalThis&&globalThis.__assign||function(){return Pi=Object.assign||function(v){for(var h,s=1,f=arguments.length;s<f;s++){h=arguments[s];for(var i in h)Object.prototype.hasOwnProperty.call(h,i)&&(v[i]=h[i])}return v},Pi.apply(this,arguments)},Yw=function(v){Wg(h,v);function h(s,f){var i=this;return s.id||(s.id="Gateway_"+Uo()),s.text||(s.text=""),s.text&&typeof s.text=="string"&&(s.text={value:s.text,x:s.x,y:s.y+40}),i=v.call(this,s,f)||this,i.points=[[25,0],[50,25],[25,50],[0,25]],i}return h.extendKey="ExclusiveGatewayModel",h}(Je.PolygonNodeModel),Vw=function(v){Wg(h,v);function h(){return v!==null&&v.apply(this,arguments)||this}return h.prototype.getShape=function(){var s=this.props.model,f=s.x,i=s.y,l=s.width,c=s.height,b=s.points,m=s.getNodeStyle();return Je.h("g",{transform:"matrix(1 0 0 1 "+(f-l/2)+" "+(i-c/2)+")"},Je.h("polygon",Pi(Pi({},m),{x:f,y:i,points:b})),Je.h("path",Pi({d:"m 16,15 7.42857142857143,9.714285714285715 -7.42857142857143,9.714285714285715 3.428571428571429,0 5.714285714285715,-7.464228571428572 5.714285714285715,7.464228571428572 3.428571428571429,0 -7.42857142857143,-9.714285714285715 7.42857142857143,-9.714285714285715 -3.428571428571429,0 -5.714285714285715,7.464228571428572 -5.714285714285715,-7.464228571428572 -3.428571428571429,0 z"},m)))},h.extendKey="ExclusiveGatewayNode",h}(Je.PolygonNode),Ww={type:"bpmn:exclusiveGateway",view:Vw,model:Yw},Kg=globalThis&&globalThis.__extends||function(){var v=function(h,s){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,i){f.__proto__=i}||function(f,i){for(var l in i)i.hasOwnProperty(l)&&(f[l]=i[l])},v(h,s)};return function(h,s){v(h,s);function f(){this.constructor=h}h.prototype=s===null?Object.create(s):(f.prototype=s.prototype,new f)}}(),Au=globalThis&&globalThis.__assign||function(){return Au=Object.assign||function(v){for(var h,s=1,f=arguments.length;s<f;s++){h=arguments[s];for(var i in h)Object.prototype.hasOwnProperty.call(h,i)&&(v[i]=h[i])}return v},Au.apply(this,arguments)},Kw=function(v){Kg(h,v);function h(s,f){var i=this;return s.id||(s.id="Activity_"+Uo()),i=v.call(this,s,f)||this,i}return h.extendKey="UserTaskModel",h}(Je.RectNodeModel),Zw=function(v){Kg(h,v);function h(){return v!==null&&v.apply(this,arguments)||this}return h.prototype.getLabelShape=function(){var s=this.props.model,f=s.x,i=s.y,l=s.width,c=s.height,b=s.getNodeStyle();return Je.h("svg",{x:f-l/2+5,y:i-c/2+5,width:25,height:25,viewBox:"0 0 1274 1024"},Je.h("path",{fill:b.stroke,d:"M655.807326 287.35973m-223.989415 0a218.879 218.879 0 1 0 447.978829 0 218.879 218.879 0 1 0-447.978829 0ZM1039.955839 895.482975c-0.490184-212.177424-172.287821-384.030443-384.148513-384.030443-211.862739 0-383.660376 171.85302-384.15056 384.030443L1039.955839 895.482975z"}))},h.prototype.getShape=function(){var s=this.props.model,f=s.x,i=s.y,l=s.width,c=s.height,b=s.radius,m=s.getNodeStyle();return Je.h("g",{},[Je.h("rect",Au(Au({},m),{x:f-l/2,y:i-c/2,rx:b,ry:b,width:l,height:c})),this.getLabelShape()])},h.extendKey="UserTaskNode",h}(Je.RectNode),qw={type:"bpmn:userTask",view:Zw,model:Kw},Zg=globalThis&&globalThis.__extends||function(){var v=function(h,s){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,i){f.__proto__=i}||function(f,i){for(var l in i)i.hasOwnProperty(l)&&(f[l]=i[l])},v(h,s)};return function(h,s){v(h,s);function f(){this.constructor=h}h.prototype=s===null?Object.create(s):(f.prototype=s.prototype,new f)}}(),lf=globalThis&&globalThis.__assign||function(){return lf=Object.assign||function(v){for(var h,s=1,f=arguments.length;s<f;s++){h=arguments[s];for(var i in h)Object.prototype.hasOwnProperty.call(h,i)&&(v[i]=h[i])}return v},lf.apply(this,arguments)},Jw=function(v){Zg(h,v);function h(s,f){var i=this;return s.id||(s.id="Activity_"+Uo()),i=v.call(this,s,f)||this,i}return h.extendKey="ServiceTaskModel",h}(Je.RectNodeModel),$w=function(v){Zg(h,v);function h(){return v!==null&&v.apply(this,arguments)||this}return h.prototype.getLabelShape=function(){var s=this.props.model,f=s.x,i=s.y,l=s.width,c=s.height,b=s.getNodeStyle();return Je.h("svg",{x:f-l/2+5,y:i-c/2+5,width:30,height:30,viewBox:"0 0 1274 1024"},Je.h("path",{fill:b.stroke,d:"M882.527918 434.149934c-2.234901-5.303796-7.311523-8.853645-13.059434-9.138124l-61.390185-3.009544c-6.635117-20.973684-15.521508-41.175795-26.513864-60.282968l42.051745-47.743374c4.308119-4.889357 4.955872-12.004405 1.602498-17.59268-46.384423-77.30362-103.969956-101.422947-106.400309-102.410438-5.332449-2.170432-11.432377-1.090844-15.693424 2.77009L654.674467 240.664222c-17.004279-8.654101-35.092239-15.756869-53.995775-21.210068l-3.26537-66.490344c-0.280386-5.747911-3.833305-10.824533-9.134031-13.059434-1.683339-0.709151-30.193673-12.391215-76.866668-12.051477-46.672996-0.339738-75.18333 11.342326-76.866668 12.051477-5.300726 2.234901-8.853645 7.311523-9.134031 13.059434l-3.26537 66.490344c-18.903535 5.453199-36.991496 12.555967-53.995775 21.210068l-48.450479-43.922349c-4.261047-3.860934-10.360975-4.940522-15.693424-2.77009-2.430352 0.98749-60.015885 25.106818-106.400309 102.410438-3.353374 5.588275-2.705622 12.703323 1.602498 17.59268l42.051745 47.743374c-10.992355 19.107173-19.878746 39.309284-26.513864 60.282968l-61.390185 3.009544c-5.747911 0.284479-10.824533 3.834328-13.059434 9.138124-1.01512 2.415003-24.687262 60.190871-2.822278 147.651828 1.583055 6.324032 7.072069 10.893094 13.57518 11.308557 5.892197 0.37146 11.751648 0.523933 17.419741 0.667196 14.498202 0.372483 28.193109 0.723477 40.908712 4.63353 4.212952 1.294482 6.435573 8.270361 9.349949 18.763342 1.287319 4.640694 2.617617 9.43693 4.484128 14.010085 1.794879 4.393054 3.75758 8.570189 5.66093 12.607132 1.302669 2.765997 2.529613 5.380544 3.689019 8.018627 2.986007 6.803963 2.682086 9.773598 2.578732 10.349719-3.061732 3.672646-6.391571 7.238868-9.91379 11.015891-1.810229 1.943258-3.680832 3.949962-5.523807 5.980201l-22.560832 24.8909c-3.865028 4.261047-4.940522 10.365068-2.774183 15.693424 0.991584 2.426259 25.102724 60.011792 102.414531 106.400309 5.588275 3.353374 12.703323 2.701528 17.591657-1.603521l23.476691-20.682042c2.346441-2.061962 4.64888-4.336772 6.875594-6.534833 9.05319-8.93858 14.018272-12.95608 17.73185-11.576663 3.305279 1.222851 6.907317 3.166109 10.720156 5.228071 3.325745 1.794879 6.764054 3.650133 10.465352 5.288446 6.016017 2.662643 12.120039 4.688789 18.019399 6.65149 6.827499 2.266623 13.279445 4.409426 18.819624 7.275707 1.518586 0.782829 1.926886 0.994654 2.358721 7.830339 0.726547 11.496845 1.25048 23.276123 1.753947 34.672684 0.264013 5.900384 0.528026 11.803837 0.815575 17.700127 0.284479 5.743818 3.833305 10.82044 9.138124 13.05534 1.654686 0.698918 29.371958 12.063757 74.869175 12.063757 0.328481 0 3.65832 0 3.986801 0 45.497217 0 73.214489-11.364839 74.869175-12.063757 5.304819-2.234901 8.853645-7.311523 9.138124-13.05534 0.287549-5.89629 0.551562-11.799744 0.815575-17.700127 0.503467-11.396561 1.027399-23.175839 1.753947-34.672684 0.431835-6.835685 0.840134-7.04751 2.358721-7.830339 5.54018-2.866281 11.992125-5.009084 18.819624-7.275707 5.89936-1.962701 12.003382-3.988848 18.019399-6.65149 3.701299-1.638313 7.139607-3.493567 10.465352-5.288446 3.812839-2.061962 7.414877-4.00522 10.720156-5.228071 3.713578-1.379417 8.67866 2.638083 17.73185 11.576663 2.226714 2.198062 4.529153 4.472871 6.875594 6.534833l23.476691 20.682042c4.888334 4.305049 12.003382 4.956895 17.591657 1.603521 77.311807-46.388517 101.422947-103.97405 102.414531-106.400309 2.166339-5.328355 1.090844-11.432377-2.774183-15.693424l-22.560832-24.8909c-1.842974-2.030239-3.713578-4.036943-5.523807-5.980201-3.52222-3.777023-6.852058-7.343245-9.91379-11.015891-0.103354-0.576121-0.407276-3.545756 2.578732-10.349719 1.159406-2.638083 2.38635-5.252631 3.689019-8.018627 1.90335-4.036943 3.866051-8.214079 5.66093-12.607132 1.866511-4.573155 3.196809-9.369392 4.484128-14.010085 2.914376-10.492982 5.136997-17.46886 9.349949-18.763342 12.715603-3.910053 26.41051-4.261047 40.908712-4.63353 5.668093-0.143263 11.527544-0.295735 17.419741-0.667196 6.503111-0.415462 11.992125-4.984524 13.57518-11.308557C907.21518 494.340805 883.543038 436.564937 882.527918 434.149934zM643.49894 643.761929c-35.280528 35.280528-82.191954 54.711066-132.086317 54.711066s-96.806813-19.430538-132.086317-54.711066c-35.280528-35.279504-54.711066-82.191954-54.711066-132.086317 0-49.894364 19.430538-96.80272 54.711066-132.082224 35.283598-35.284621 82.191954-54.711066 132.086317-54.711066s96.80579 19.426445 132.086317 54.711066c35.279504 35.279504 54.711066 82.187861 54.711066 132.082224C698.210006 561.569976 678.782537 608.482425 643.49894 643.761929z"}))},h.prototype.getShape=function(){var s=this.props.model,f=s.x,i=s.y,l=s.width,c=s.height,b=s.radius,m=s.getNodeStyle();return Je.h("g",{},[Je.h("rect",lf({x:f-l/2,y:i-c/2,rx:b,ry:b,width:l,height:c},m)),this.getLabelShape()])},h.extendKey="ServiceTaskNode",h}(Je.RectNode),Qw={type:"bpmn:serviceTask",view:$w,model:Jw},qg=globalThis&&globalThis.__extends||function(){var v=function(h,s){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,i){f.__proto__=i}||function(f,i){for(var l in i)i.hasOwnProperty(l)&&(f[l]=i[l])},v(h,s)};return function(h,s){v(h,s);function f(){this.constructor=h}h.prototype=s===null?Object.create(s):(f.prototype=s.prototype,new f)}}(),e1=function(v){qg(h,v);function h(s,f){var i=this;return s.id||(s.id="Flow_"+Uo()),i=v.call(this,s,f)||this,i}return h.extendKey="SequenceFlowModel",h}(Je.PolylineEdgeModel),t1=function(v){qg(h,v);function h(){return v!==null&&v.apply(this,arguments)||this}return h.extendKey="SequenceFlowEdge",h}(Je.PolylineEdge),n1={type:"bpmn:sequenceFlow",view:t1,model:e1},vg={width:40,height:40},bg={width:40,height:40},mg={width:40,height:40},Og={width:100,height:80},_g={width:100,height:80},r1={rect:{radius:5,stroke:"rgb(24, 125, 255)"},circle:{r:18,stroke:"rgb(24, 125, 255)"},polygon:{stroke:"rgb(24, 125, 255)"},polyline:{stroke:"rgb(24, 125, 255)",hoverStroke:"rgb(24, 125, 255)",selectedStroke:"rgb(24, 125, 255)"},edgeText:{background:{fill:"white",height:14,stroke:"transparent",radius:3}}},o1=function(){function v(h){var s=h.lf;s.setTheme(r1),s.register(Uw),s.register(Xw),s.register(Ww),s.register(qw),s.register(Qw),s.options.customBpmnEdge||(s.register(n1),s.setDefaultEdgeType("bpmn:sequenceFlow"))}return v.pluginName="bpmnElement",v}(),i1=function(){function v(h){var s=this,f=h.lf;this.lf=f,this.customCssRules="",this.useGlobalRules=!0,f.getSnapshot=function(i,l){s.getSnapshot(i,l)},f.getSnapshotBlob=function(i){return s.getSnapshotBlob(i)},f.getSnapshotBase64=function(i){return s.getSnapshotBase64(i)}}return v.prototype.getSvgRootElement=function(h){var s=h.container.querySelector(".lf-canvas-overlay");return s},v.prototype.triggerDownload=function(h){var s=new MouseEvent("click",{view:window,bubbles:!1,cancelable:!0}),f=document.createElement("a");f.setAttribute("download",this.fileName),f.setAttribute("href",h),f.setAttribute("target","_blank"),f.dispatchEvent(s)},v.prototype.removeAnchor=function(h){for(var s=h.childNodes,f=h.childNodes&&h.childNodes.length,i=0;i<f;i++){var l=s[i],c=l.classList&&Array.from(l.classList)||[];c.indexOf("lf-anchor")>-1&&(h.removeChild(h.childNodes[i]),f--,i--)}},v.prototype.getSnapshot=function(h,s){var f=this;this.fileName=h||"logic-flow."+Date.now()+".png";var i=this.getSvgRootElement(this.lf);this.getCanvasData(i,s).then(function(l){var c=l.toDataURL("image/png").replace("image/png","image/octet-stream");f.triggerDownload(c)})},v.prototype.getSnapshotBase64=function(h){var s=this,f=this.getSvgRootElement(this.lf);return new Promise(function(i){s.getCanvasData(f,h).then(function(l){var c=l.toDataURL("image/png");i({data:c,width:l.width,height:l.height})})})},v.prototype.getSnapshotBlob=function(h){var s=this,f=this.getSvgRootElement(this.lf);return new Promise(function(i){s.getCanvasData(f,h).then(function(l){l.toBlob(function(c){i({data:c,width:l.width,height:l.height})},"image/png")})})},v.prototype.getClassRules=function(){var h="";if(this.useGlobalRules)for(var s=document.styleSheets,f=0;f<s.length;f++)for(var i=s[f],l=0;l<i.cssRules.length;l++)h+=i.cssRules[l].cssText;return this.customCssRules&&(h+=this.customCssRules),h},v.prototype.getCanvasData=function(h,s){var f=this,i=h.cloneNode(!0),l=i.lastChild,c=l.childNodes&&l.childNodes.length;if(c)for(var b=0;b<c;b++){var m=l.childNodes[b],E=m.classList&&Array.from(m.classList);if(E&&E.indexOf("lf-base")<0)l.removeChild(l.childNodes[b]),c--,b--;else{var w=l.childNodes[b];w&&w.childNodes.forEach(function(le){var ce=le;f.removeAnchor(ce.firstChild)})}}var P=window.devicePixelRatio||1,A=document.createElement("canvas"),j=this.lf.graphModel.rootEl.querySelector(".lf-base"),M=j.getBoundingClientRect(),N=document.querySelector(".lf-canvas-overlay").getBoundingClientRect(),I=M.x-N.x,B=M.y-N.y,H=this.lf.graphModel,ee=H.transformModel,ie=ee.SCALE_X,J=ee.SCALE_Y,V=ee.TRANSLATE_X,Z=ee.TRANSLATE_Y;i.lastChild.style.transform="matrix(1, 0, 0, 1, "+((-I+V)*(1/ie)+10)+", "+((-B+Z)*(1/J)+10)+")";var z=Math.ceil(M.width/ie),D=Math.ceil(M.height/J);A.style.width=z+"px",A.style.height=D+"px",A.width=z*P+80,A.height=D*P+80;var L=A.getContext("2d");L.clearRect(0,0,A.width,A.height),L.scale(P,P),s?(L.fillStyle=s,L.fillRect(0,0,z*P+80,D*P+80)):L.clearRect(0,0,z,D);var C=new Image,F=document.createElement("style");F.innerHTML=this.getClassRules();var $=document.createElement("foreignObject");return $.appendChild(F),i.appendChild($),new Promise(function(le){C.onload=function(){var xe=navigator.userAgent.indexOf("Firefox")>-1;try{xe?createImageBitmap(C,{resizeWidth:A.width,resizeHeight:A.height}).then(function(ge){L.drawImage(ge,0,0),le(A)}):(L.drawImage(C,0,0),le(A))}catch(ge){L.drawImage(C,0,0),le(A)}};var ce="data:image/svg+xml;charset=utf-8,"+new XMLSerializer().serializeToString(i),ye=ce.replace(/\n/g,"").replace(/\t/g,"").replace(/#/g,"%23");C.src=ye})},v.pluginName="snapshot",v}(),a1=new Gg([32,32,1]);function wg(){return a1.next()}function Jg(v){return Object.prototype.toString.call(v)}function u1(v){return"  ".repeat(v)}function ku(v){var h=v;return Jg(v)==="[object Object]"?(h={},Object.keys(v).forEach(function(s){var f=s;s.charAt(0)==="-"&&(f=s.substring(1)),h[f]=ku(v[s])})):Array.isArray(v)&&(h=[],v.forEach(function(s,f){h[f]=ku(s)})),h}function s1(v){var h=v;try{typeof h!="string"&&(h=JSON.parse(v))}catch(s){h=JSON.stringify(ku(v)).replace(/"/g,"'")}return h}var Lo=`	
`;function xu(v,h,s){var f=u1(s),i="";if(h==="#text")return Lo+f+v;if(h==="#cdata-section")return Lo+f+"<![CDATA["+v+"]]>";if(h==="#comment")return Lo+f+"<!--"+v+"-->";if((""+h).charAt(0)==="-")return" "+h.substring(1)+'="'+s1(v)+'"';if(Array.isArray(v))v.forEach(function(m){i+=xu(m,h,s+1)});else if(Jg(v)==="[object Object]"){var l=Object.keys(v),c="",b="";i+=(s===0?"":Lo+f)+"<"+h,l.forEach(function(m){m.charAt(0)==="-"?c+=xu(v[m],m,s+1):b+=xu(v[m],m,s+1)}),i+=c+(b!==""?">"+b+(Lo+f)+"</"+h+">":" />")}else i+=Lo+f+("<"+h+">"+v.toString()+"</"+h+">");return i}function c1(v){var h="";for(var s in v)h+=xu(v[s],s,0);return h}var hn=function(){};hn.ObjTree=function(){return this};hn.ObjTree.VERSION="0.23";hn.ObjTree.prototype.xmlDecl=`<?xml version="1.0" encoding="UTF-8" ?>
`;hn.ObjTree.prototype.attr_prefix="-";hn.ObjTree.prototype.parseXML=function(v){var h;if(window.DOMParser){var s=new DOMParser,f=s.parseFromString(v,"application/xml");if(!f)return;h=f.documentElement}else window.ActiveXObject&&(s=new ActiveXObject("Microsoft.XMLDOM"),s.async=!1,s.loadXML(v),h=s.documentElement);if(h)return this.parseDOM(h)};hn.ObjTree.prototype.parseHTTP=function(v,h,s){var f={};for(var i in h)f[i]=h[i];if(f.method||(typeof f.postBody=="undefined"&&typeof f.postbody=="undefined"&&typeof f.parameters=="undefined"?f.method="get":f.method="post"),s){f.asynchronous=!0;var l=this,c=s,b=f.onComplete;f.onComplete=function(w){var P;w&&w.responseXML&&w.responseXML.documentElement&&(P=l.parseDOM(w.responseXML.documentElement)),c(P,w),b&&b(w)}}else f.asynchronous=!1;var m;if(typeof HTTP!="undefined"&&HTTP.Request){f.uri=v;var E=new HTTP.Request(f);E&&(m=E.transport)}else if(typeof Ajax!="undefined"&&Ajax.Request){var E=new Ajax.Request(v,f);E&&(m=E.transport)}if(s)return m;if(m&&m.responseXML&&m.responseXML.documentElement)return this.parseDOM(m.responseXML.documentElement)};hn.ObjTree.prototype.parseDOM=function(v){if(v){if(this.__force_array={},this.force_array)for(var h=0;h<this.force_array.length;h++)this.__force_array[this.force_array[h]]=1;var s=this.parseElement(v);if(this.__force_array[v.nodeName]&&(s=[s]),v.nodeType!=11){var f={};f[v.nodeName]=s,s=f}return s}};hn.ObjTree.prototype.parseElement=function(v){if(v.nodeType!=7){if(v.nodeType==3||v.nodeType==4||v.nodeType==8){var h=v.nodeValue.match(/[^\x00-\x20]/);return h==null?void 0:v.nodeValue}var s=null,f={};if(v.attributes&&v.attributes.length){s={};for(var i=0;i<v.attributes.length;i++){var l=v.attributes[i].nodeName;if(typeof l=="string"){var c=v.attributes[i].nodeValue;try{c=JSON.parse(v.attributes[i].nodeValue.replace(/'/g,'"'))}catch(E){c=v.attributes[i].nodeValue}c&&(l=this.attr_prefix+l,typeof f[l]=="undefined"&&(f[l]=0),f[l]++,this.addNode(s,l,f[l],c))}}}if(v.childNodes&&v.childNodes.length){var b=!0;s&&(b=!1);for(var i=0;i<v.childNodes.length&&b;i++){var m=v.childNodes[i].nodeType;m==3||m==4||m==8||(b=!1)}if(b){s||(s="");for(var i=0;i<v.childNodes.length;i++)s+=v.childNodes[i].nodeValue}else{s||(s={});for(var i=0;i<v.childNodes.length;i++){var l=v.childNodes[i].nodeName;if(typeof l=="string"){var c=this.parseElement(v.childNodes[i]);c&&(typeof f[l]=="undefined"&&(f[l]=0),f[l]++,this.addNode(s,l,f[l],c))}}}}else s===null&&(s={});return s}};hn.ObjTree.prototype.addNode=function(v,h,s,f){this.__force_array[h]?(s==1&&(v[h]=[]),v[h][v[h].length]=f):s==1?v[h]=f:s==2?v[h]=[v[h],f]:v[h][v[h].length]=f};hn.ObjTree.prototype.writeXML=function(v){var h=this.hash_to_xml(null,v);return this.xmlDecl+h};hn.ObjTree.prototype.hash_to_xml=function(v,h){var s=[],f=[];for(var i in h)if(h.hasOwnProperty(i)){var l=h[i];i.charAt(0)!=this.attr_prefix?typeof l=="undefined"||l==null?s[s.length]="<"+i+" />":typeof l=="object"&&l.constructor==Array?s[s.length]=this.array_to_xml(i,l):typeof l=="object"?s[s.length]=this.hash_to_xml(i,l):s[s.length]=this.scalar_to_xml(i,l):f[f.length]=" "+i.substring(1)+'="'+this.xml_escape(l)+'"'}var c=f.join(""),b=s.join("");return typeof v=="undefined"||v==null||(s.length>0?b.match(/\n/)?b="<"+v+c+`>
`+b+"</"+v+`>
`:b="<"+v+c+">"+b+"</"+v+`>
`:b="<"+v+c+` />
`),b};hn.ObjTree.prototype.array_to_xml=function(v,h){for(var s=[],f=0;f<h.length;f++){var i=h[f];typeof i=="undefined"||i==null?s[s.length]="<"+v+" />":typeof i=="object"&&i.constructor==Array?s[s.length]=this.array_to_xml(v,i):typeof i=="object"?s[s.length]=this.hash_to_xml(v,i):s[s.length]=this.scalar_to_xml(v,i)}return s.join("")};hn.ObjTree.prototype.scalar_to_xml=function(v,h){return v=="#text"?this.xml_escape(h):"<"+v+">"+this.xml_escape(h)+"</"+v+`>
`};hn.ObjTree.prototype.xml_escape=function(v){return v.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"')};var l1=function(v){return new hn.ObjTree().parseXML(v)},f1=globalThis&&globalThis.__extends||function(){var v=function(h,s){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,i){f.__proto__=i}||function(f,i){for(var l in i)i.hasOwnProperty(l)&&(f[l]=i[l])},v(h,s)};return function(h,s){v(h,s);function f(){this.constructor=h}h.prototype=s===null?Object.create(s):(f.prototype=s.prototype,new f)}}(),ff=globalThis&&globalThis.__assign||function(){return ff=Object.assign||function(v){for(var h,s=1,f=arguments.length;s<f;s++){h=arguments[s];for(var i in h)Object.prototype.hasOwnProperty.call(h,i)&&(v[i]=h[i])}return v},ff.apply(this,arguments)},Ru=globalThis&&globalThis.__read||function(v,h){var s=typeof Symbol=="function"&&v[Symbol.iterator];if(!s)return v;var f=s.call(v),i,l=[],c;try{for(;(h===void 0||h-- >0)&&!(i=f.next()).done;)l.push(i.value)}catch(b){c={error:b}}finally{try{i&&!i.done&&(s=f.return)&&s.call(f)}finally{if(c)throw c.error}}return l},ur;(function(v){v.START="bpmn:startEvent",v.END="bpmn:endEvent",v.GATEWAY="bpmn:exclusiveGateway",v.USER="bpmn:userTask",v.SYSTEM="bpmn:serviceTask",v.FLOW="bpmn:sequenceFlow"})(ur||(ur={}));var $g=["-name","-id","bpmn:incoming","bpmn:outgoing","-sourceRef","-targetRef"],xg=["properties","startPoint","endPoint","pointsList"];function Eg(v){var h=v?xg.concat(v):xg;return function(s){function f(i){var l={};return typeof i=="string"?i:Array.isArray(i)?i.map(function(c){return f(c)}):(Object.entries(i).forEach(function(c){var b=Ru(c,2),m=b[0],E=b[1];typeof E!="object"?m.indexOf("-")===0||["#text","#cdata-section","#comment"].includes(m)?l[m]=E:l["-"+m]=E:h.includes(m)?l["-"+m]=f(E):l[m]=f(E)}),l)}return f(s)}}function Tu(v){var h={};return Object.entries(v).forEach(function(s){var f=Ru(s,2),i=f[0],l=f[1];i.indexOf("-")===0?h[i.substring(1)]=ku(l):typeof l=="string"?h[i]=l:Object.prototype.toString.call(l)==="[object Object]"?h[i]=Tu(l):Array.isArray(l)?h[i]=l.map(function(c){return Tu(c)}):h[i]=l}),h}function p1(v,h,s){var f=new Map;h.nodes.forEach(function(l){var c,b={"-id":l.id};if(!((c=l.text)===null||c===void 0)&&c.value&&(b["-name"]=l.text.value),l.properties){var m=Eg(s)(l.properties);Object.assign(b,m)}f.set(l.id,b),v[l.type]?Array.isArray(v[l.type])?v[l.type].push(b):v[l.type]=[v[l.type],b]:v[l.type]=b});var i=h.edges.map(function(l){var c,b,m=f.get(l.targetNodeId);m["bpmn:incoming"]?Array.isArray(m["bpmn:incoming"])?m["bpmn:incoming"].push(l.id):m["bpmn:incoming"]=[m["bpmn:incoming"],l.id]:m["bpmn:incoming"]=l.id;var E={"-id":l.id,"-sourceRef":l.sourceNodeId,"-targetRef":l.targetNodeId};if(!((c=l.text)===null||c===void 0)&&c.value&&(E["-name"]=(b=l.text)===null||b===void 0?void 0:b.value),l.properties){var w=Eg(s)(l.properties);Object.assign(E,w)}return E});h.edges.forEach(function(l){var c=f.get(l.sourceNodeId);c["bpmn:outgoing"]?Array.isArray(c["bpmn:outgoing"])?c["bpmn:outgoing"].push(l.id):c["bpmn:outgoing"]=[c["bpmn:outgoing"],l.id]:c["bpmn:outgoing"]=l.id}),v[ur.FLOW]=i}function d1(v,h){v["bpmndi:BPMNEdge"]=h.edges.map(function(s){var f,i=s.id,l=s.pointsList.map(function(b){var m=b.x,E=b.y;return{"-x":m,"-y":E}}),c={"-id":i+"_di","-bpmnElement":i,"di:waypoint":l};return!((f=s.text)===null||f===void 0)&&f.value&&(c["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":s.text.x-s.text.value.length*10/2,"-y":s.text.y-7,"-width":s.text.value.length*10,"-height":14}}),c}),v["bpmndi:BPMNShape"]=h.nodes.map(function(s){var f,i=s.id,l=100,c=80,b=s.x,m=s.y,E=Xr.shapeConfigMap.get(s.type);E&&(l=E.width,c=E.height),b-=l/2,m-=c/2;var w={"-id":i+"_di","-bpmnElement":i,"dc:Bounds":{"-x":b,"-y":m,"-width":l,"-height":c}};return!((f=s.text)===null||f===void 0)&&f.value&&(w["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":s.text.x-s.text.value.length*10/2,"-y":s.text.y-7,"-width":s.text.value.length*10,"-height":14}}),w})}function h1(v){var h=[],s=[],f=v["bpmn:definitions"];if(f){var i=f["bpmn:process"];Object.keys(i).forEach(function(l){if(l.indexOf("bpmn:")===0){var c=i[l];if(l===ur.FLOW){var b=f["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];s=g1(c,b)}else{var m=f["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];h=h.concat(y1(c,m,l))}}})}return{nodes:h,edges:s}}function y1(v,h,s){var f=[];if(Array.isArray(v))v.forEach(function(c){var b;Array.isArray(h)?b=h.find(function(E){return E["-bpmnElement"]===c["-id"]}):b=h;var m=Sg(b,s,c);f.push(m)});else{var i=void 0;Array.isArray(h)?i=h.find(function(c){return c["-bpmnElement"]===v["-id"]}):i=h;var l=Sg(i,s,v);f.push(l)}return f}function Sg(v,h,s){var f=Number(v["dc:Bounds"]["-x"]),i=Number(v["dc:Bounds"]["-y"]),l=s["-name"],c=Xr.shapeConfigMap.get(h);c&&(f+=c.width/2,i+=c.height/2);var b;Object.entries(s).forEach(function(P){var A=Ru(P,2),j=A[0],M=A[1];$g.indexOf(j)===-1&&(b||(b={}),b[j]=M)}),b&&(b=Tu(b));var m;if(l&&(m={x:f,y:i,value:l},v["bpmndi:BPMNLabel"]&&v["bpmndi:BPMNLabel"]["dc:Bounds"])){var E=v["bpmndi:BPMNLabel"]["dc:Bounds"];m.x=Number(E["-x"])+Number(E["-width"])/2,m.y=Number(E["-y"])+Number(E["-height"])/2}var w={id:v["-bpmnElement"],type:h,x:f,y:i,properties:b};return m&&(w.text=m),w}function g1(v,h){var s=[];if(Array.isArray(v))v.forEach(function(i){var l;Array.isArray(h)?l=h.find(function(c){return c["-bpmnElement"]===i["-id"]}):l=h,s.push(jg(l,i))});else{var f=void 0;Array.isArray(h)?f=h.find(function(i){return i["-bpmnElement"]===v["-id"]}):f=h,s.push(jg(f,v))}return s}function jg(v,h){var s,f=h["-name"];if(f){var i=v["bpmndi:BPMNLabel"]["dc:Bounds"],l=0;f.split(`
`).forEach(function(m){l<m.length&&(l=m.length)}),s={value:f,x:Number(i["-x"])+l*10/2,y:Number(i["-y"])+7}}var c;Object.entries(h).forEach(function(m){var E=Ru(m,2),w=E[0],P=E[1];$g.indexOf(w)===-1&&(c||(c={}),c[w]=P)}),c&&(c=Tu(c));var b={id:h["-id"],type:ur.FLOW,pointsList:v["di:waypoint"].map(function(m){return{x:Number(m["-x"]),y:Number(m["-y"])}}),sourceNodeId:h["-sourceRef"],targetNodeId:h["-targetRef"],properties:c};return s&&(b.text=s),b}var Xr=function(){function v(h){var s=this,f=h.lf;this.adapterOut=function(i,l){var c=ff({},s.processAttributes);p1(c,i,l);var b={"-id":"BPMNPlane_1","-bpmnElement":c["-id"]};d1(b,i);var m=s.definitionAttributes;m["bpmn:process"]=c,m["bpmndi:BPMNDiagram"]={"-id":"BPMNDiagram_1","bpmndi:BPMNPlane":b};var E={"bpmn:definitions":m};return E},this.adapterIn=function(i){if(i)return h1(i)},f.adapterIn=function(i){return s.adapterIn(i)},f.adapterOut=function(i,l){return s.adapterOut(i,l)},this.processAttributes={"-isExecutable":"true","-id":"Process_"+wg()},this.definitionAttributes={"-id":"Definitions_"+wg(),"-xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","-xmlns:bpmn":"http://www.omg.org/spec/BPMN/20100524/MODEL","-xmlns:bpmndi":"http://www.omg.org/spec/BPMN/20100524/DI","-xmlns:dc":"http://www.omg.org/spec/DD/20100524/DC","-xmlns:di":"http://www.omg.org/spec/DD/20100524/DI","-targetNamespace":"http://logic-flow.org","-exporter":"logicflow","-exporterVersion":"1.2.0"}}return v.prototype.setCustomShape=function(h,s){v.shapeConfigMap.set(h,s)},v.pluginName="bpmn-adapter",v.shapeConfigMap=new Map,v}();Xr.shapeConfigMap.set(ur.START,{width:vg.width,height:vg.height});Xr.shapeConfigMap.set(ur.END,{width:bg.width,height:bg.height});Xr.shapeConfigMap.set(ur.GATEWAY,{width:mg.width,height:mg.height});Xr.shapeConfigMap.set(ur.SYSTEM,{width:Og.width,height:Og.height});Xr.shapeConfigMap.set(ur.USER,{width:_g.width,height:_g.height});(function(v){f1(h,v);function h(s){var f=v.call(this,s)||this;f.adapterXmlIn=function(l){var c=l1(l);return f.adapterIn(c)},f.adapterXmlOut=function(l,c){var b=f.adapterOut(l,c);return c1(b)};var i=s.lf;return i.adapterIn=f.adapterXmlIn,i.adapterOut=f.adapterXmlOut,f}return h.pluginName="bpmnXmlAdapter",h})(Xr);var Pg=globalThis&&globalThis.__assign||function(){return Pg=Object.assign||function(v){for(var h,s=1,f=arguments.length;s<f;s++){h=arguments[s];for(var i in h)Object.prototype.hasOwnProperty.call(h,i)&&(v[i]=h[i])}return v},Pg.apply(this,arguments)};globalThis&&globalThis.__read;var Ag;(function(v){v.HORIZONTAL="horizontal",v.VERTICAL="vertical"})(Ag||(Ag={}));var v1=globalThis&&globalThis.__read||function(v,h){var s=typeof Symbol=="function"&&v[Symbol.iterator];if(!s)return v;var f=s.call(v),i,l=[],c;try{for(;(h===void 0||h-- >0)&&!(i=f.next()).done;)l.push(i.value)}catch(b){c={error:b}}finally{try{i&&!i.done&&(s=f.return)&&s.call(f)}finally{if(c)throw c.error}}return l};globalThis&&globalThis.__spread;var b1=globalThis&&globalThis.__read||function(v,h){var s=typeof Symbol=="function"&&v[Symbol.iterator];if(!s)return v;var f=s.call(v),i,l=[],c;try{for(;(h===void 0||h-- >0)&&!(i=f.next()).done;)l.push(i.value)}catch(b){c={error:b}}finally{try{i&&!i.done&&(s=f.return)&&s.call(f)}finally{if(c)throw c.error}}return l};globalThis&&globalThis.__spread;var m1=globalThis&&globalThis.__read||function(v,h){var s=typeof Symbol=="function"&&v[Symbol.iterator];if(!s)return v;var f=s.call(v),i,l=[],c;try{for(;(h===void 0||h-- >0)&&!(i=f.next()).done;)l.push(i.value)}catch(b){c={error:b}}finally{try{i&&!i.done&&(s=f.return)&&s.call(f)}finally{if(c)throw c.error}}return l},O1=globalThis&&globalThis.__spread||function(){for(var v=[],h=0;h<arguments.length;h++)v=v.concat(m1(arguments[h]));return v},xi="lf:defaultNodeMenu",Ei="lf:defaultEdgeMenu",Si="lf:defaultGraphMenu",kg="lf:defaultSelectionMenu",_1=function(){function v(h){var s=this,f=h.lf;this.__menuDOM=document.createElement("ul"),this.lf=f,this.menuTypeMap=new Map,this.init(),this.lf.setMenuConfig=function(i){s.setMenuConfig(i)},this.lf.addMenuConfig=function(i){s.addMenuConfig(i)},this.lf.setMenuByType=function(i){s.setMenuByType(i)}}return v.prototype.init=function(){var h=this,s=[{text:"删除",callback:function(l){h.lf.deleteNode(l.id)}},{text:"编辑文本",callback:function(l){h.lf.graphModel.editText(l.id)}},{text:"复制",callback:function(l){h.lf.cloneNode(l.id)}}];this.menuTypeMap.set(xi,s);var f=[{text:"删除",callback:function(l){h.lf.deleteEdge(l.id)}},{text:"编辑文本",callback:function(l){h.lf.graphModel.editText(l.id)}}];this.menuTypeMap.set(Ei,f),this.menuTypeMap.set(Si,[]);var i=[{text:"删除",callback:function(l){h.lf.clearSelectElements(),l.edges.forEach(function(c){return h.lf.deleteEdge(c.id)}),l.nodes.forEach(function(c){return h.lf.deleteNode(c.id)})}}];this.menuTypeMap.set(kg,i)},v.prototype.render=function(h,s){var f=this;this.__container=s,this.__currentData=null,this.__menuDOM.className="lf-menu",s.appendChild(this.__menuDOM),this.__menuDOM.addEventListener("click",function(i){i.stopPropagation();for(var l=i.target;Array.from(l.classList).indexOf("lf-menu-item")===-1&&Array.from(l.classList).indexOf("lf-menu")===-1;)l=l.parentElement;Array.from(l.classList).indexOf("lf-menu-item")>-1&&(l.onclickCallback(f.__currentData),f.__menuDOM.style.display="none",f.__currentData=null)},!0),this.lf.on("node:contextmenu",function(i){var l=i.data,c=i.position,b=c.domOverlayPosition,m=b.x,E=b.y,w=l.id,P=f.lf.graphModel.getNodeModelById(w),A=[],j=f.menuTypeMap.get(P.type);P&&P.menu&&Array.isArray(P.menu)?A=P.menu:j?A=j:A=f.menuTypeMap.get(xi),f.__currentData=l,f.showMenu(m,E,A)}),this.lf.on("edge:contextmenu",function(i){var l=i.data,c=i.position,b=c.domOverlayPosition,m=b.x,E=b.y,w=l.id,P=f.lf.graphModel.getEdgeModelById(w),A=[],j=f.menuTypeMap.get(P.type);P&&P.menu&&Array.isArray(P.menu)?A=P.menu:j?A=j:A=f.menuTypeMap.get(Ei),f.__currentData=l,f.showMenu(m,E,A)}),this.lf.on("blank:contextmenu",function(i){var l=i.position,c=f.menuTypeMap.get(Si),b=l.domOverlayPosition,m=b.x,E=b.y;f.showMenu(m,E,c)}),this.lf.on("selection:contextmenu",function(i){var l=i.data,c=i.position,b=f.menuTypeMap.get(kg),m=c.domOverlayPosition,E=m.x,w=m.y;f.__currentData=l,f.showMenu(E,w,b)}),this.lf.on("node:mousedown",function(){f.__menuDOM.style.display="none"}),this.lf.on("edge:click",function(){f.__menuDOM.style.display="none"}),this.lf.on("blank:click",function(){f.__menuDOM.style.display="none"})},v.prototype.destroy=function(){var h;(h=this===null||this===void 0?void 0:this.__container)===null||h===void 0||h.removeChild(this.__menuDOM),this.__menuDOM=null},v.prototype.showMenu=function(h,s,f){if(!(!f||!f.length)){var i=this.__menuDOM;i.innerHTML="",i.append.apply(i,O1(this.__getMenuDom(f))),i.children.length&&(i.style.display="block",i.style.top=s+"px",i.style.left=h+"px")}},v.prototype.setMenuByType=function(h){!h.type||!h.menu||this.menuTypeMap.set(h.type,h.menu)},v.prototype.__getMenuDom=function(h){var s=[];return h&&h.length>0&&h.forEach(function(f){var i=document.createElement("li");if(f.className?i.className="lf-menu-item "+f.className:i.className="lf-menu-item",f.icon===!0){var l=document.createElement("span");l.className="lf-menu-item-icon",i.appendChild(l)}var c=document.createElement("span");c.className="lf-menu-item-text",f.text&&(c.innerText=f.text),i.appendChild(c),i.onclickCallback=f.callback,s.push(i)}),s},v.prototype.setMenuConfig=function(h){h&&(h.nodeMenu!==void 0&&this.menuTypeMap.set(xi,h.nodeMenu?h.nodeMenu:[]),h.edgeMenu!==void 0&&this.menuTypeMap.set(Ei,h.edgeMenu?h.edgeMenu:[]),h.graphMenu!==void 0&&this.menuTypeMap.set(Si,h.graphMenu?h.graphMenu:[]))},v.prototype.addMenuConfig=function(h){if(h){if(Array.isArray(h.nodeMenu)){var s=this.menuTypeMap.get(xi);this.menuTypeMap.set(xi,s.concat(h.nodeMenu))}if(Array.isArray(h.edgeMenu)){var s=this.menuTypeMap.get(Ei);this.menuTypeMap.set(Ei,s.concat(h.edgeMenu))}if(Array.isArray(h.graphMenu)){var s=this.menuTypeMap.get(Si);this.menuTypeMap.set(Si,s.concat(h.graphMenu))}}},v.prototype.changeMenuItem=function(h,s){if(h==="add")this.addMenuConfig(s);else if(h==="reset")this.setMenuConfig(s);else throw new Error("The first parameter of changeMenuConfig should be 'add' or 'reset'")},v.pluginName="menu",v}();globalThis&&globalThis.__read;var w1=function(){function v(h){var s=this,f=h.lf;this.lf=f,this.lf.setPatternItems=function(i){s.setPatternItems(i)}}return v.prototype.render=function(h,s){var f=this;if(this.destroy(),!this.shapeList||this.shapeList.length===0){this.domContainer=s;return}this.panelEl=document.createElement("div"),this.panelEl.className="lf-dndpanel",this.shapeList.forEach(function(i){f.panelEl.appendChild(f.createDndItem(i))}),s.appendChild(this.panelEl),this.domContainer=s},v.prototype.destroy=function(){this.domContainer&&this.panelEl&&this.domContainer.contains(this.panelEl)&&this.domContainer.removeChild(this.panelEl)},v.prototype.setPatternItems=function(h){this.shapeList=h,this.domContainer&&this.render(this.lf,this.domContainer)},v.prototype.createDndItem=function(h){var s=this,f=document.createElement("div");f.className=h.className?"lf-dnd-item "+h.className:"lf-dnd-item";var i=document.createElement("div");if(i.className="lf-dnd-shape",h.icon&&(i.style.backgroundImage="url("+h.icon+")"),f.appendChild(i),h.label){var l=document.createElement("div");l.innerText=h.label,l.className="lf-dnd-text",f.appendChild(l)}return f.onmousedown=function(){h.type&&s.lf.dnd.startDrag({type:h.type,properties:h.properties,text:h.text}),h.callback&&h.callback(s.lf,s.domContainer)},f.ondblclick=function(c){s.lf.graphModel.eventCenter.emit("dnd:panel-dbclick",{e:c,data:h})},f.onclick=function(c){s.lf.graphModel.eventCenter.emit("dnd:panel-click",{e:c,data:h})},f.oncontextmenu=function(c){s.lf.graphModel.eventCenter.emit("dnd:panel-contextmenu",{e:c,data:h})},f},v.pluginName="dndPanel",v}(),x1=function(){function v(h){var s=this,f=h.lf;this.__disabled=!1,this.isDefaultStopMoveGraph=!1,this.isWholeNode=!0,this.isWholeEdge=!0,this.__draw=function(l){var c=s.lf.getPointByClient(l.clientX,l.clientY).domOverlayPosition,b=c.x,m=c.y;s.endPoint={x:b,y:m};var E=s.startPoint,w=E.x,P=E.y,A=s.wrapper.style,j=w,M=P,N=b-w,I=m-P;b<w&&(j=b,N=w-b),m<P&&(M=m,I=P-m),A.left=j+"px",A.top=M+"px",A.width=N+"px",A.height=I+"px"},this.__drawOff=function(){document.removeEventListener("mousemove",s.__draw),document.removeEventListener("mouseup",s.__drawOff),s.wrapper.oncontextmenu=null,s.__domContainer.removeChild(s.wrapper);var l=s.startPoint,c=l.x,b=l.y,m=s.endPoint,E=m.x,w=m.y;if(!(Math.abs(E-c)<10&&Math.abs(w-b)<10)){var P=[Math.min(c,E),Math.min(b,w)],A=[Math.max(c,E),Math.max(b,w)],j=s.lf.graphModel.getAreaElement(P,A,s.isWholeEdge,s.isWholeNode,!0),M=s.lf.graphModel.group;j.forEach(function(N){(!M||!M.getNodeGroup(N.id))&&s.lf.selectElementById(N.id,!0)}),s.lf.emit("selection:selected",j)}},this.lf=f;var i=f.getEditConfig().stopMoveGraph;this.isDefaultStopMoveGraph=i,f.openSelectionSelect=function(){s.openSelectionSelect()},f.closeSelectionSelect=function(){s.closeSelectionSelect()}}return v.prototype.render=function(h,s){var f=this;this.__domContainer=s,h.on("blank:mousedown",function(i){var l=i.e,c=h.getEditConfig();if(!(!c.stopMoveGraph||f.__disabled)){var b=l.button===2;if(!b){var m=h.getPointByClient(l.clientX,l.clientY).domOverlayPosition,E=m.x,w=m.y;f.startPoint={x:E,y:w},f.endPoint={x:E,y:w};var P=document.createElement("div");P.className="lf-selection-select",P.oncontextmenu=function(j){j.preventDefault()},P.style.top=f.startPoint.y+"px",P.style.left=f.startPoint.x+"px",s.appendChild(P),f.wrapper=P,document.addEventListener("mousemove",f.__draw),document.addEventListener("mouseup",f.__drawOff)}}})},v.prototype.setSelectionSense=function(h,s){h===void 0&&(h=!0),s===void 0&&(s=!0),this.isWholeEdge=h,this.isWholeNode=s},v.prototype.openSelectionSelect=function(){var h=this.lf.getEditConfig().stopMoveGraph;h||(this.isDefaultStopMoveGraph=!1,this.lf.updateEditConfig({stopMoveGraph:!0})),this.open()},v.prototype.closeSelectionSelect=function(){this.isDefaultStopMoveGraph||this.lf.updateEditConfig({stopMoveGraph:!1}),this.close()},v.prototype.open=function(){this.__disabled=!1},v.prototype.close=function(){this.__disabled=!0},v.pluginName="selectionSelect",v}();globalThis&&globalThis.__values;function E1(v){if(v.length<=1)return!1;for(var h=0,s=v.length-1;h!==s&&h+1!==s&&s-1!==h;)h++,s--;return h===s?[--h,s]:[h,s]}var Qg=globalThis&&globalThis.__extends||function(){var v=function(h,s){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,i){f.__proto__=i}||function(f,i){for(var l in i)i.hasOwnProperty(l)&&(f[l]=i[l])},v(h,s)};return function(h,s){v(h,s);function f(){this.constructor=h}h.prototype=s===null?Object.create(s):(f.prototype=s.prototype,new f)}}(),zo=globalThis&&globalThis.__assign||function(){return zo=Object.assign||function(v){for(var h,s=1,f=arguments.length;s<f;s++){h=arguments[s];for(var i in h)Object.prototype.hasOwnProperty.call(h,i)&&(v[i]=h[i])}return v},zo.apply(this,arguments)},Er=globalThis&&globalThis.__read||function(v,h){var s=typeof Symbol=="function"&&v[Symbol.iterator];if(!s)return v;var f=s.call(v),i,l=[],c;try{for(;(h===void 0||h-- >0)&&!(i=f.next()).done;)l.push(i.value)}catch(b){c={error:b}}finally{try{i&&!i.done&&(s=f.return)&&s.call(f)}finally{if(c)throw c.error}}return l};(function(v){Qg(h,v);function h(){return v!==null&&v.apply(this,arguments)||this}return h.prototype.pointFilter=function(s){for(var f=s,i=1;i<f.length-1;){var l=Er(f[i-1],2),c=l[0],b=l[1],m=Er(f[i],2),E=m[0],w=m[1],P=Er(f[i+1],2),A=P[0],j=P[1];c===E&&E===A||b===w&&w===j?f.splice(i,1):i++}return f},h.prototype.getEdge=function(){var s=this.props.model,f=s.points,i=s.isAnimation,l=s.arrowConfig,c=s.radius,b=c===void 0?5:c,m=s.getEdgeStyle(),E=s.getEdgeAnimationStyle(),w=this.pointFilter(f.split(" ").map(function(Pe){return Pe.split(",").map(function(Ce){return Number(Ce)})})),P=E1(w);if(P){var A=Er(P,2),j=A[0],M=A[1],N=w[j],I=w[M],B=N.some(function(Pe,Ce){return Pe===I[Ce]});if(!B){var H=(I[1]-N[1])/2,ee=[I[0],I[1]-H],ie=[N[0],N[1]+H];w.splice(j+1,0,ie,ee)}}for(var J=Er(w[0],2),V=J[0],Z=J[1],z="M"+V+" "+Z,D=1;D<w.length-1;D++){var L=Er(w[D-1],2),C=L[0],F=L[1],$=Er(w[D],2),le=$[0],ce=$[1],ye=Er(w[D+1],2),xe=ye[0],ge=ye[1];if(le===C&&ce!==F){var ue=ce>F?ce-b:ce+b;z=z+" L "+le+" "+ue}if(ce===F&&le!==C){var he=le>C?le-b:le+b;z=z+" L "+he+" "+ce}if(z=z+" Q "+le+" "+ce,le===xe&&ce!==ge){var ue=ce>ge?ce-b:ce+b;z=z+" "+le+" "+ue}if(ce===ge&&le!==xe){var he=le>xe?le-b:le+b;z=z+" "+he+" "+ce}}var be=Er(w[w.length-1],2),Se=be[0],Ie=be[1];z=z+" L "+Se+" "+Ie;var Ke=zo(zo(zo({d:z,style:i?E:{}},m),l),{fill:"none"});return Je.h("path",zo({d:z},Ke))},h})(Je.PolylineEdge);(function(v){Qg(h,v);function h(){return v!==null&&v.apply(this,arguments)||this}return h})(Je.PolylineEdgeModel);var vf,Vt,ev,io,Tg,tv,pf,nv={},rv=[],S1=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,bf=Array.isArray;function Gr(v,h){for(var s in h)v[s]=h[s];return v}function ov(v){var h=v.parentNode;h&&h.removeChild(v)}function Ai(v,h,s){var f,i,l,c={};for(l in h)l=="key"?f=h[l]:l=="ref"?i=h[l]:c[l]=h[l];if(arguments.length>2&&(c.children=arguments.length>3?vf.call(arguments,2):s),typeof v=="function"&&v.defaultProps!=null)for(l in v.defaultProps)c[l]===void 0&&(c[l]=v.defaultProps[l]);return Eu(v,c,f,i,null)}function Eu(v,h,s,f,i){var l={type:v,props:h,key:s,ref:f,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:i==null?++ev:i};return i==null&&Vt.vnode!=null&&Vt.vnode(l),l}function mf(v){return v.children}function Fo(v,h){this.props=v,this.context=h}function Mi(v,h){if(h==null)return v.__?Mi(v.__,v.__.__k.indexOf(v)+1):null;for(var s;h<v.__k.length;h++)if((s=v.__k[h])!=null&&s.__e!=null)return s.__e;return typeof v.type=="function"?Mi(v):null}function iv(v){var h,s;if((v=v.__)!=null&&v.__c!=null){for(v.__e=v.__c.base=null,h=0;h<v.__k.length;h++)if((s=v.__k[h])!=null&&s.__e!=null){v.__e=v.__c.base=s.__e;break}return iv(v)}}function Mg(v){(!v.__d&&(v.__d=!0)&&io.push(v)&&!Mu.__r++||Tg!==Vt.debounceRendering)&&((Tg=Vt.debounceRendering)||tv)(Mu)}function Mu(){var v,h,s,f,i,l,c,b;for(io.sort(pf);v=io.shift();)v.__d&&(h=io.length,f=void 0,i=void 0,c=(l=(s=v).__v).__e,(b=s.__P)&&(f=[],(i=Gr({},l)).__v=l.__v+1,lv(b,l,i,s.__n,b.ownerSVGElement!==void 0,l.__h!=null?[c]:null,f,c==null?Mi(l):c,l.__h),P1(f,l),l.__e!=c&&iv(l)),io.length>h&&io.sort(pf));Mu.__r=0}function av(v,h,s,f,i,l,c,b,m,E){var w,P,A,j,M,N,I,B=f&&f.__k||rv,H=B.length;for(s.__k=[],w=0;w<h.length;w++)if((j=s.__k[w]=(j=h[w])==null||typeof j=="boolean"||typeof j=="function"?null:typeof j=="string"||typeof j=="number"||typeof j=="bigint"?Eu(null,j,null,null,j):bf(j)?Eu(mf,{children:j},null,null,null):j.__b>0?Eu(j.type,j.props,j.key,j.ref?j.ref:null,j.__v):j)!=null){if(j.__=s,j.__b=s.__b+1,(A=B[w])===null||A&&j.key==A.key&&j.type===A.type)B[w]=void 0;else for(P=0;P<H;P++){if((A=B[P])&&j.key==A.key&&j.type===A.type){B[P]=void 0;break}A=null}lv(v,j,A=A||nv,i,l,c,b,m,E),M=j.__e,(P=j.ref)&&A.ref!=P&&(I||(I=[]),A.ref&&I.push(A.ref,null,j),I.push(P,j.__c||M,j)),M!=null?(N==null&&(N=M),typeof j.type=="function"&&j.__k===A.__k?j.__d=m=uv(j,m,v):m=sv(v,j,A,B,M,m),typeof s.type=="function"&&(s.__d=m)):m&&A.__e==m&&m.parentNode!=v&&(m=Mi(A))}for(s.__e=N,w=H;w--;)B[w]!=null&&(typeof s.type=="function"&&B[w].__e!=null&&B[w].__e==s.__d&&(s.__d=cv(f).nextSibling),pv(B[w],B[w]));if(I)for(w=0;w<I.length;w++)fv(I[w],I[++w],I[++w])}function uv(v,h,s){for(var f,i=v.__k,l=0;i&&l<i.length;l++)(f=i[l])&&(f.__=v,h=typeof f.type=="function"?uv(f,h,s):sv(s,f,f,i,f.__e,h));return h}function sv(v,h,s,f,i,l){var c,b,m;if(h.__d!==void 0)c=h.__d,h.__d=void 0;else if(s==null||i!=l||i.parentNode==null)e:if(l==null||l.parentNode!==v)v.appendChild(i),c=null;else{for(b=l,m=0;(b=b.nextSibling)&&m<f.length;m+=1)if(b==i)break e;v.insertBefore(i,l),c=l}return c!==void 0?c:i.nextSibling}function cv(v){var h,s,f;if(v.type==null||typeof v.type=="string")return v.__e;if(v.__k){for(h=v.__k.length-1;h>=0;h--)if((s=v.__k[h])&&(f=cv(s)))return f}return null}function j1(v,h,s,f,i){var l;for(l in s)l==="children"||l==="key"||l in h||Du(v,l,null,s[l],f);for(l in h)i&&typeof h[l]!="function"||l==="children"||l==="key"||l==="value"||l==="checked"||s[l]===h[l]||Du(v,l,h[l],s[l],f)}function Dg(v,h,s){h[0]==="-"?v.setProperty(h,s==null?"":s):v[h]=s==null?"":typeof s!="number"||S1.test(h)?s:s+"px"}function Du(v,h,s,f,i){var l;e:if(h==="style")if(typeof s=="string")v.style.cssText=s;else{if(typeof f=="string"&&(v.style.cssText=f=""),f)for(h in f)s&&h in s||Dg(v.style,h,"");if(s)for(h in s)f&&s[h]===f[h]||Dg(v.style,h,s[h])}else if(h[0]==="o"&&h[1]==="n")l=h!==(h=h.replace(/Capture$/,"")),h=h.toLowerCase()in v?h.toLowerCase().slice(2):h.slice(2),v.l||(v.l={}),v.l[h+l]=s,s?f||v.addEventListener(h,l?Cg:Ng,l):v.removeEventListener(h,l?Cg:Ng,l);else if(h!=="dangerouslySetInnerHTML"){if(i)h=h.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(h!=="width"&&h!=="height"&&h!=="href"&&h!=="list"&&h!=="form"&&h!=="tabIndex"&&h!=="download"&&h!=="rowSpan"&&h!=="colSpan"&&h in v)try{v[h]=s==null?"":s;break e}catch(c){}typeof s=="function"||(s==null||s===!1&&h[4]!=="-"?v.removeAttribute(h):v.setAttribute(h,s))}}function Ng(v){return this.l[v.type+!1](Vt.event?Vt.event(v):v)}function Cg(v){return this.l[v.type+!0](Vt.event?Vt.event(v):v)}function lv(v,h,s,f,i,l,c,b,m){var E,w,P,A,j,M,N,I,B,H,ee,ie,J,V,Z,z=h.type;if(h.constructor!==void 0)return null;s.__h!=null&&(m=s.__h,b=h.__e=s.__e,h.__h=null,l=[b]),(E=Vt.__b)&&E(h);try{e:if(typeof z=="function"){if(I=h.props,B=(E=z.contextType)&&f[E.__c],H=E?B?B.props.value:E.__:f,s.__c?N=(w=h.__c=s.__c).__=w.__E:("prototype"in z&&z.prototype.render?h.__c=w=new z(I,H):(h.__c=w=new Fo(I,H),w.constructor=z,w.render=k1),B&&B.sub(w),w.props=I,w.state||(w.state={}),w.context=H,w.__n=f,P=w.__d=!0,w.__h=[],w._sb=[]),w.__s==null&&(w.__s=w.state),z.getDerivedStateFromProps!=null&&(w.__s==w.state&&(w.__s=Gr({},w.__s)),Gr(w.__s,z.getDerivedStateFromProps(I,w.__s))),A=w.props,j=w.state,w.__v=h,P)z.getDerivedStateFromProps==null&&w.componentWillMount!=null&&w.componentWillMount(),w.componentDidMount!=null&&w.__h.push(w.componentDidMount);else{if(z.getDerivedStateFromProps==null&&I!==A&&w.componentWillReceiveProps!=null&&w.componentWillReceiveProps(I,H),!w.__e&&w.shouldComponentUpdate!=null&&w.shouldComponentUpdate(I,w.__s,H)===!1||h.__v===s.__v){for(h.__v!==s.__v&&(w.props=I,w.state=w.__s,w.__d=!1),w.__e=!1,h.__e=s.__e,h.__k=s.__k,h.__k.forEach(function(D){D&&(D.__=h)}),ee=0;ee<w._sb.length;ee++)w.__h.push(w._sb[ee]);w._sb=[],w.__h.length&&c.push(w);break e}w.componentWillUpdate!=null&&w.componentWillUpdate(I,w.__s,H),w.componentDidUpdate!=null&&w.__h.push(function(){w.componentDidUpdate(A,j,M)})}if(w.context=H,w.props=I,w.__P=v,ie=Vt.__r,J=0,"prototype"in z&&z.prototype.render){for(w.state=w.__s,w.__d=!1,ie&&ie(h),E=w.render(w.props,w.state,w.context),V=0;V<w._sb.length;V++)w.__h.push(w._sb[V]);w._sb=[]}else do w.__d=!1,ie&&ie(h),E=w.render(w.props,w.state,w.context),w.state=w.__s;while(w.__d&&++J<25);w.state=w.__s,w.getChildContext!=null&&(f=Gr(Gr({},f),w.getChildContext())),P||w.getSnapshotBeforeUpdate==null||(M=w.getSnapshotBeforeUpdate(A,j)),av(v,bf(Z=E!=null&&E.type===mf&&E.key==null?E.props.children:E)?Z:[Z],h,s,f,i,l,c,b,m),w.base=h.__e,h.__h=null,w.__h.length&&c.push(w),N&&(w.__E=w.__=null),w.__e=!1}else l==null&&h.__v===s.__v?(h.__k=s.__k,h.__e=s.__e):h.__e=A1(s.__e,h,s,f,i,l,c,m);(E=Vt.diffed)&&E(h)}catch(D){h.__v=null,(m||l!=null)&&(h.__e=b,h.__h=!!m,l[l.indexOf(b)]=null),Vt.__e(D,h,s)}}function P1(v,h){Vt.__c&&Vt.__c(h,v),v.some(function(s){try{v=s.__h,s.__h=[],v.some(function(f){f.call(s)})}catch(f){Vt.__e(f,s.__v)}})}function A1(v,h,s,f,i,l,c,b){var m,E,w,P=s.props,A=h.props,j=h.type,M=0;if(j==="svg"&&(i=!0),l!=null){for(;M<l.length;M++)if((m=l[M])&&"setAttribute"in m==!!j&&(j?m.localName===j:m.nodeType===3)){v=m,l[M]=null;break}}if(v==null){if(j===null)return document.createTextNode(A);v=i?document.createElementNS("http://www.w3.org/2000/svg",j):document.createElement(j,A.is&&A),l=null,b=!1}if(j===null)P===A||b&&v.data===A||(v.data=A);else{if(l=l&&vf.call(v.childNodes),E=(P=s.props||nv).dangerouslySetInnerHTML,w=A.dangerouslySetInnerHTML,!b){if(l!=null)for(P={},M=0;M<v.attributes.length;M++)P[v.attributes[M].name]=v.attributes[M].value;(w||E)&&(w&&(E&&w.__html==E.__html||w.__html===v.innerHTML)||(v.innerHTML=w&&w.__html||""))}if(j1(v,A,P,i,b),w)h.__k=[];else if(av(v,bf(M=h.props.children)?M:[M],h,s,f,i&&j!=="foreignObject",l,c,l?l[0]:s.__k&&Mi(s,0),b),l!=null)for(M=l.length;M--;)l[M]!=null&&ov(l[M]);b||("value"in A&&(M=A.value)!==void 0&&(M!==v.value||j==="progress"&&!M||j==="option"&&M!==P.value)&&Du(v,"value",M,P.value,!1),"checked"in A&&(M=A.checked)!==void 0&&M!==v.checked&&Du(v,"checked",M,P.checked,!1))}return v}function fv(v,h,s){try{typeof v=="function"?v(h):v.current=h}catch(f){Vt.__e(f,s)}}function pv(v,h,s){var f,i;if(Vt.unmount&&Vt.unmount(v),(f=v.ref)&&(f.current&&f.current!==v.__e||fv(f,null,h)),(f=v.__c)!=null){if(f.componentWillUnmount)try{f.componentWillUnmount()}catch(l){Vt.__e(l,h)}f.base=f.__P=null,v.__c=void 0}if(f=v.__k)for(i=0;i<f.length;i++)f[i]&&pv(f[i],h,s||typeof v.type!="function");s||v.__e==null||ov(v.__e),v.__=v.__e=v.__d=void 0}function k1(v,h,s){return this.constructor(v,s)}vf=rv.slice,Vt={__e:function(v,h,s,f){for(var i,l,c;h=h.__;)if((i=h.__c)&&!i.__)try{if((l=i.constructor)&&l.getDerivedStateFromError!=null&&(i.setState(l.getDerivedStateFromError(v)),c=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(v,f||{}),c=i.__d),c)return i.__E=i}catch(b){v=b}throw v}},ev=0,Fo.prototype.setState=function(v,h){var s;s=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Gr({},this.state),typeof v=="function"&&(v=v(Gr({},s),this.props)),v&&Gr(s,v),v!=null&&this.__v&&(h&&this._sb.push(h),Mg(this))},Fo.prototype.forceUpdate=function(v){this.__v&&(this.__e=!0,v&&this.__h.push(v),Mg(this))},Fo.prototype.render=mf,io=[],tv=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,pf=function(v,h){return v.__v.__b-h.__v.__b},Mu.__r=0;var ki=globalThis&&globalThis.__assign||function(){return ki=Object.assign||function(v){for(var h,s=1,f=arguments.length;s<f;s++){h=arguments[s];for(var i in h)Object.prototype.hasOwnProperty.call(h,i)&&(v[i]=h[i])}return v},ki.apply(this,arguments)};function Of(v){var h=v.x,s=v.y,f=v.width,i=v.height,l=v.radius,c=v.className,b=h-f/2,m=s-i/2,E=ki(ki({width:10,height:10,cx:0,cy:0,rx:l||0,ry:l||0,fill:"transparent",fillOpacity:1,strokeWidth:"1px",stroke:"#000",strokeOpacity:1,className:"lf-basic-shape "+c},v),{x:b,y:m});return Je.h("rect",ki({},E))}Of.defaultProps={radius:0,stroke:"",strokeDasharray:"",className:""};var Bo;(function(v){v.NODE="node",v.CIRCLE_NODE="circle-node",v.POLYGON_NODE="polygon-node",v.RECT_NODE="rect-node",v.HTML_NODE="html-node",v.TEXT_NODE="text-node",v.ELLIPSE_NODE="ellipse-node",v.DIAMOND_NODE="diamond-node",v.EDGE="edge",v.LINE_EDGE="line-edge",v.POLYLINE_EDGE="polyline-edge",v.BEZIER_EDGE="bezier-edge",v.GRAPH="graph"})(Bo||(Bo={}));function Su(v){var h=v.x,s=v.y,f=v.width,i=v.height;return{minX:h-f/2,minY:s-i/2,maxX:h+f/2,maxY:s+i/2}}function Rg(v){var h=Su(v),s=v.radius,f=h.minX,i=h.minY,l=h.maxX,c=h.maxY;return[{x:f+s,y:i+s},{x:l-s,y:i+s},{x:l-s,y:c-s},{x:f+s,y:c-s}]}function Ig(v){var h=v.point,s=v.beforeNode,f=v.afterNode,i=h.x,l=h.y,c={x:i,y:l},b=s.radius,m=Su(s),E=Su(f);if(i===m.minX){c.x=E.minX;var w=(l-s.y)/(s.height/2-b);w?c.y=f.y+(f.height/2-b)*w:c.y=f.y}else if(i===m.maxX){c.x=E.maxX;var w=(l-s.y)/(s.height/2-b);w?c.y=f.y+(f.height/2-b)*w:c.y=f.y}else if(l===m.minY){c.y=E.minY;var w=(i-s.x)/(s.width/2-b);w?c.x=f.x+(f.width/2-b)*w:c.x=f.x}else if(l===m.maxY){c.y=E.maxY;var w=(i-s.x)/(s.width/2-b);w?c.x=f.x+(f.width/2-b)*w:c.x=f.x}else{var P=Rg(s),A=Rg(f),j=Su(s),M=j.minX,N=j.minY,I=j.maxX,B=j.maxY,H=-1;if(i-M<b&&l-N<b?H=0:I-i<b&&l-N<b?H=1:I-i<b&&B-l<b?H=2:i-M<b&&N-l<b&&(H=3),H>-1){var ee=Math.atan2(l-P[H].y,i-P[H].x);c.x=A[H].x+b*Math.cos(ee),c.y=A[H].y+b*Math.sin(ee)}}return c}function Lg(v){var h=v.point,s=v.beforeNode,f=v.afterNode,i=f.rx,l=f.ry,c=h,b=(h.y-s.y)/(h.x-s.x),m=i,E=l,w,P;return b>=1/0?(w=0,P=E):b<=-1/0?(w=0,P=-E):h.x-s.x>0?(w=m*E/Math.sqrt(E*E+m*m*b*b),P=m*E*b/Math.sqrt(E*E+m*m*b*b)):(w=-(m*E)/Math.sqrt(E*E+m*m*b*b),P=-(m*E*b)/Math.sqrt(E*E+m*m*b*b)),c={x:w+f.x,y:P+f.y},c}function zg(v){var h=v.point,s=v.beforeNode,f=v.afterNode,i=h,l,c,b=h.x-s.x,m=h.y-s.y,E=s.rx,w=s.ry,P=Math.sqrt((E-Math.abs(b))*(E-Math.abs(b))+m*m)/Math.sqrt(E*E+w*w),A=f.rx,j=f.ry,M=Math.sqrt((A*A+j*j)*P*P*(A*A/(A*A+j*j))),N=M*(j/A);return b>=0?l=A-M:l=M-A,m>0?c=N:c=-N,i={x:l+f.x,y:c+f.y},i}var T1=globalThis&&globalThis.__extends||function(){var v=function(h,s){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,i){f.__proto__=i}||function(f,i){for(var l in i)i.hasOwnProperty(l)&&(f[l]=i[l])},v(h,s)};return function(h,s){v(h,s);function f(){this.constructor=h}h.prototype=s===null?Object.create(s):(f.prototype=s.prototype,new f)}}(),ao=globalThis&&globalThis.__assign||function(){return ao=Object.assign||function(v){for(var h,s=1,f=arguments.length;s<f;s++){h=arguments[s];for(var i in h)Object.prototype.hasOwnProperty.call(h,i)&&(v[i]=h[i])}return v},ao.apply(this,arguments)},M1=globalThis&&globalThis.__read||function(v,h){var s=typeof Symbol=="function"&&v[Symbol.iterator];if(!s)return v;var f=s.call(v),i,l=[],c;try{for(;(h===void 0||h-- >0)&&!(i=f.next()).done;)l.push(i.value)}catch(b){c={error:b}}finally{try{i&&!i.done&&(s=f.return)&&s.call(f)}finally{if(c)throw c.error}}return l},D1=Je.LogicFlowUtil.StepDrag,N1=function(v){T1(h,v);function h(s){var f=v.call(this)||this;return f.updatePosition=function(i){var l=i.deltaX,c=i.deltaY,b=f.nodeModel,m=b.x,E=b.y;f.nodeModel.x=m+l/2,f.nodeModel.y=E+c/2,f.nodeModel.moveText(l/2,c/2)},f.getResize=function(i){var l=i.index,c=i.deltaX,b=i.deltaY,m=i.width,E=i.height,w=i.PCTResizeInfo,P=i.pct,A=P===void 0?1:P,j={width:m,height:E,deltaX:c,deltaY:b};if(w){var M=4,N=0,I=0;switch(l){case 0:I=(c*-1-b)/M;break;case 1:I=(c-b)/M;break;case 2:I=(c+b)/M;break;case 3:I=(c*-1+b)/M;break}I!==0&&(N=Math.round(I/w.ResizeBasis.basisHeight*1e5)/1e3),w.ResizePCT.widthPCT=Math.max(Math.min(w.ResizePCT.widthPCT+N,w.ScaleLimit.maxScaleLimit),w.ScaleLimit.minScaleLimit),w.ResizePCT.hightPCT=Math.max(Math.min(w.ResizePCT.hightPCT+N,w.ScaleLimit.maxScaleLimit),w.ScaleLimit.minScaleLimit);var B=Math.round(w.ResizePCT.widthPCT*w.ResizeBasis.basisWidth/100),H=Math.round(w.ResizePCT.hightPCT*w.ResizeBasis.basisHeight/100);switch(l){case 0:c=m-B,b=E-H;break;case 1:c=B-m,b=E-H;break;case 2:c=B-m,b=H-E;break;case 3:c=m-B,b=H-E;break}return j.width=B,j.height=H,j.deltaX=c/A,j.deltaY=b/A,j}switch(l){case 0:j.width=m-c*A,j.height=E-b*A;break;case 1:j.width=m+c*A,j.height=E-b*A;break;case 2:j.width=m+c*A,j.height=E+b*A;break;case 3:j.width=m-c*A,j.height=E+b*A;break}return j},f.updateRect=function(i){var l=i.deltaX,c=i.deltaY,b=f.nodeModel,m=b.id,E=b.x,w=b.y,P=b.width,A=b.height,j=b.radius,M=b.PCTResizeInfo,N=f.index,I=f.getResize({index:N,deltaX:l,deltaY:c,width:P,height:A,PCTResizeInfo:M,pct:1}),B=f.nodeModel,H=B.minWidth,ee=B.minHeight,ie=B.maxWidth,J=B.maxHeight;if(I.width<H||I.width>ie||I.height<ee||I.height>J){f.dragHandler.cancelDrag();return}f.updatePosition({deltaX:I.deltaX,deltaY:I.deltaY}),f.nodeModel.width=I.width,f.nodeModel.height=I.height,f.nodeModel.setProperties({nodeSize:{width:I.width,height:I.height}});var V=f.getNodeEdges(m),Z={x:E,y:w,width:P,height:A,radius:j},z={x:f.nodeModel.x,y:f.nodeModel.y,width:f.nodeModel.width,height:f.nodeModel.height,radius:j},D={point:"",beforeNode:Z,afterNode:z},L;V.sourceEdges.forEach(function(C){D.point=C.startPoint,L=Ig(D),C.updateStartPoint(L)}),V.targetEdges.forEach(function(C){D.point=C.endPoint,L=Ig(D),C.updateEndPoint(L)}),f.eventEmit({beforeNode:Z,afterNode:z})},f.updateEllipse=function(i){var l=i.deltaX,c=i.deltaY,b=f.nodeModel,m=b.id,E=b.rx,w=b.ry,P=b.x,A=b.y,j=b.PCTResizeInfo,M=f.index,N=E,I=w,B=f.getResize({index:M,deltaX:l,deltaY:c,width:N,height:I,PCTResizeInfo:j,pct:1/2}),H=f.nodeModel,ee=H.minWidth,ie=H.minHeight,J=H.maxWidth,V=H.maxHeight;if(B.width<ee/2||B.width>J/2||B.height<ie/2||B.height>V/2){f.dragHandler.cancelDrag();return}f.updatePosition({deltaX:B.deltaX,deltaY:B.deltaY}),f.nodeModel.rx=B.width,f.nodeModel.ry=B.height,f.nodeModel.setProperties({nodeSize:{rx:B.width,ry:B.height}});var Z=f.getNodeEdges(m),z={x:P,y:A},D={rx:B.width,ry:B.height,x:f.nodeModel.x,y:f.nodeModel.y},L={point:{},beforeNode:z,afterNode:D},C;Z.sourceEdges.forEach(function(F){L.point=F.startPoint,C=Lg(L),F.updateStartPoint(C)}),Z.targetEdges.forEach(function(F){L.point=F.endPoint,C=Lg(L),F.updateEndPoint(C)}),f.eventEmit({beforeNode:ao(ao({},z),{rx:E,ry:w}),afterNode:D})},f.updateDiamond=function(i){var l=i.deltaX,c=i.deltaY,b=f.nodeModel,m=b.id,E=b.rx,w=b.ry,P=b.x,A=b.y,j=b.PCTResizeInfo,M=f.index,N=E,I=w,B=f.getResize({index:M,deltaX:l,deltaY:c,width:N,height:I,PCTResizeInfo:j,pct:1/2}),H=f.nodeModel,ee=H.minWidth,ie=H.minHeight,J=H.maxWidth,V=H.maxHeight;if(B.width<ee/2||B.width>J/2||B.height<ie/2||B.height>V/2){f.dragHandler.cancelDrag();return}f.updatePosition({deltaX:B.deltaX,deltaY:B.deltaY}),f.nodeModel.rx=B.width,f.nodeModel.ry=B.height,f.nodeModel.setProperties({nodeSize:{rx:B.width,ry:B.height}});var Z={x:P,y:A,rx:E,ry:w},z={rx:B.width,ry:B.height,x:f.nodeModel.x,y:f.nodeModel.y},D={point:{},beforeNode:Z,afterNode:z},L,C=f.getNodeEdges(m);C.sourceEdges.forEach(function(F){D.point=F.startPoint,L=zg(D),F.updateStartPoint(L)}),C.targetEdges.forEach(function(F){D.point=F.endPoint,L=zg(D),F.updateEndPoint(L)}),f.eventEmit({beforeNode:Z,afterNode:z})},f.eventEmit=function(i){var l=i.beforeNode,c=i.afterNode,b=f.nodeModel,m=b.id,E=b.modelType,w=b.type,P=ao({id:m,modelType:E,type:w},l),A=ao({id:m,modelType:E,type:w},c);f.graphModel.eventCenter.emit("node:resize",{oldNodeSize:P,newNodeSize:A})},f.onDragging=function(i){var l,c=i.deltaX,b=i.deltaY,m=f.graphModel.transformModel,E=f.nodeModel.modelType;l=M1(m.fixDeltaXY(c,b),2),c=l[0],b=l[1],E===Bo.RECT_NODE||E===Bo.HTML_NODE?f.updateRect({deltaX:c,deltaY:b}):E===Bo.ELLIPSE_NODE?f.updateEllipse({deltaX:c,deltaY:b}):E===Bo.DIAMOND_NODE&&f.updateDiamond({deltaX:c,deltaY:b})},f.onDragEnd=function(){var i=f.graphModel.gridSize,l=i===void 0?1:i,c=l*Math.round(f.nodeModel.x/l),b=l*Math.round(f.nodeModel.y/l);f.nodeModel.moveTo(c,b)},f.index=s.index,f.nodeModel=s.model,f.graphModel=s.graphModel,f.state={},f.dragHandler=new D1({onDragging:f.onDragging,onDragEnd:f.onDragEnd,step:1}),f}return h.prototype.getNodeEdges=function(s){for(var f=this.graphModel,i=f.edges,l=[],c=[],b=0;b<i.length;b++){var m=i[b];m.sourceNodeId===s?l.push(m):i[b].targetNodeId===s&&c.push(m)}return{sourceEdges:l,targetEdges:c}},h.prototype.render=function(){var s=this.props,f=s.x,i=s.y,l=s.index,c=s.model,b=c.getControlPointStyle();return Ai("g",{className:"lf-resize-control-"+l},Ai(Of,ao({className:"lf-node-control"},{x:f,y:i},b,{onMouseDown:this.dragHandler.handleMouseDown})))},h}(Fo),C1=globalThis&&globalThis.__extends||function(){var v=function(h,s){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,i){f.__proto__=i}||function(f,i){for(var l in i)i.hasOwnProperty(l)&&(f[l]=i[l])},v(h,s)};return function(h,s){v(h,s);function f(){this.constructor=h}h.prototype=s===null?Object.create(s):(f.prototype=s.prototype,new f)}}(),Nu=globalThis&&globalThis.__assign||function(){return Nu=Object.assign||function(v){for(var h,s=1,f=arguments.length;s<f;s++){h=arguments[s];for(var i in h)Object.prototype.hasOwnProperty.call(h,i)&&(v[i]=h[i])}return v},Nu.apply(this,arguments)},Iu=function(v){C1(h,v);function h(){var s=v.call(this)||this;return s.state={},s}return h.prototype.getResizeControl=function(){var s=this.props,f=s.model,i=s.graphModel,l=f.x,c=f.y,b=f.width,m=f.height,E={minX:l-b/2,minY:c-m/2,maxX:l+b/2,maxY:c+m/2},w=E.minX,P=E.minY,A=E.maxX,j=E.maxY,M=[{x:w,y:P},{x:A,y:P},{x:A,y:j},{x:w,y:j}];return M.map(function(N,I){return Ai(N1,Nu({index:I},N,{model:f,graphModel:i}))})},h.prototype.getGroupSolid=function(){var s=this.props.model,f=s.x,i=s.y,l=s.width,c=s.height,b=s.getResizeOutlineStyle();return Ai(Of,Nu({fill:"none"},b,{x:f,y:i,width:l,height:c}))},h.prototype.render=function(){return Ai("g",{className:"lf-resize-control"},this.getGroupSolid(),this.getResizeControl())},h}(Fo),dv=globalThis&&globalThis.__extends||function(){var v=function(h,s){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,i){f.__proto__=i}||function(f,i){for(var l in i)i.hasOwnProperty(l)&&(f[l]=i[l])},v(h,s)};return function(h,s){v(h,s);function f(){this.constructor=h}h.prototype=s===null?Object.create(s):(f.prototype=s.prototype,new f)}}(),R1=function(v){dv(h,v);function h(s,f){var i=v.call(this,s,f)||this,l=i.properties.nodeSize;return l&&(i.width=l.width,i.height=l.height),i}return h.prototype.initNodeData=function(s){v.prototype.initNodeData.call(this,s),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},h.prototype.getOutlineStyle=function(){var s=v.prototype.getOutlineStyle.call(this),f=this.graphModel.editConfigModel.isSilentMode;return f||(s.stroke="none",s.hover&&(s.hover.stroke="none")),s},h.prototype.getResizeOutlineStyle=function(){return{fill:"none",stroke:"transparent",strokeWidth:1,strokeDasharray:"3,3"}},h.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},h.prototype.resize=function(s,f){},h.prototype.enableProportionResize=function(s){if(s===void 0&&(s=!0),s){var f={widthPCT:100,hightPCT:100},i={basisWidth:this.width,basisHeight:this.height},l={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:f,ResizeBasis:i,ScaleLimit:l}}else delete this.PCTResizeInfo},h}(Je.RectNodeModel),I1=function(v){dv(h,v);function h(){return v!==null&&v.apply(this,arguments)||this}return h.prototype.getControlGroup=function(){var s=this.props,f=s.model,i=s.graphModel;return Je.h(Iu,{model:f,graphModel:i})},h.prototype.getResizeShape=function(){return v.prototype.getShape.call(this)},h.prototype.getShape=function(){var s=this.props,f=s.model.isSelected,i=s.graphModel.editConfigModel.isSilentMode;return Je.h("g",null,this.getResizeShape(),f&&!i?this.getControlGroup():"")},h}(Je.RectNode),hv={type:"rect",view:I1,model:R1},yv=globalThis&&globalThis.__extends||function(){var v=function(h,s){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,i){f.__proto__=i}||function(f,i){for(var l in i)i.hasOwnProperty(l)&&(f[l]=i[l])},v(h,s)};return function(h,s){v(h,s);function f(){this.constructor=h}h.prototype=s===null?Object.create(s):(f.prototype=s.prototype,new f)}}();(function(v){yv(h,v);function h(s,f){var i=v.call(this,s,f)||this,l=i.properties.nodeSize;return l&&(i.rx=l.rx,i.ry=l.ry),i}return h.prototype.initNodeData=function(s){v.prototype.initNodeData.call(this,s),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},h.prototype.getOutlineStyle=function(){var s=v.prototype.getOutlineStyle.call(this),f=this.graphModel.editConfigModel.isSilentMode;return f||(s.stroke="none",s.hover&&(s.hover.stroke="none")),s},h.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},h.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},h.prototype.enableProportionResize=function(s){if(s===void 0&&(s=!0),s){var f={widthPCT:100,hightPCT:100},i={basisWidth:this.rx,basisHeight:this.ry},l={maxScaleLimit:Math.min(this.maxWidth/(this.rx*2)*100,this.maxHeight/(this.ry*2)*100),minScaleLimit:Math.max(this.minWidth/(this.rx*2)*100,this.minHeight/(this.ry*2)*100)};this.PCTResizeInfo={ResizePCT:f,ResizeBasis:i,ScaleLimit:l}}else delete this.PCTResizeInfo},h})(Je.EllipseNodeModel);(function(v){yv(h,v);function h(){return v!==null&&v.apply(this,arguments)||this}return h.prototype.getControlGroup=function(){var s=this.props,f=s.model,i=s.graphModel;return Je.h(Iu,{model:f,graphModel:i})},h.prototype.getResizeShape=function(){return v.prototype.getShape.call(this)},h.prototype.getShape=function(){var s=this.props,f=s.model,i=s.graphModel.editConfigModel.isSilentMode;return Je.h("g",null,this.getResizeShape(),f.isSelected&&!i?this.getControlGroup():"")},h})(Je.EllipseNode);var df=globalThis&&globalThis.__assign||function(){return df=Object.assign||function(v){for(var h,s=1,f=arguments.length;s<f;s++){h=arguments[s];for(var i in h)Object.prototype.hasOwnProperty.call(h,i)&&(v[i]=h[i])}return v},df.apply(this,arguments)};function L1(v){var h=v.fillOpacity,s=h===void 0?1:h,f=v.strokeWidth,i=f===void 0?1:f,l=v.strokeOpacity,c=l===void 0?1:l,b=v.fill,m=b===void 0?"transparent":b,E=v.stroke,w=E===void 0?"#000":E,P=v.points,A=v.className,j=A===void 0?"lf-basic-shape":A,M={fill:m,fillOpacity:s,strokeWidth:i,stroke:w,strokeOpacity:c,points:"",className:j};return M.points=P.map(function(N){return N.join(",")}).join(" "),Je.h("polygon",df({},M))}var gv=globalThis&&globalThis.__extends||function(){var v=function(h,s){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,i){f.__proto__=i}||function(f,i){for(var l in i)i.hasOwnProperty(l)&&(f[l]=i[l])},v(h,s)};return function(h,s){v(h,s);function f(){this.constructor=h}h.prototype=s===null?Object.create(s):(f.prototype=s.prototype,new f)}}(),hf=globalThis&&globalThis.__assign||function(){return hf=Object.assign||function(v){for(var h,s=1,f=arguments.length;s<f;s++){h=arguments[s];for(var i in h)Object.prototype.hasOwnProperty.call(h,i)&&(v[i]=h[i])}return v},hf.apply(this,arguments)};(function(v){gv(h,v);function h(s,f){var i=v.call(this,s,f)||this,l=i.properties.nodeSize;return l&&(i.rx=l.rx,i.ry=l.ry),i}return h.prototype.initNodeData=function(s){v.prototype.initNodeData.call(this,s),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3,this.gridSize=1},h.prototype.getOutlineStyle=function(){var s=v.prototype.getOutlineStyle.call(this),f=this.graphModel.editConfigModel.isSilentMode;return f||(s.stroke="none",s.hover&&(s.hover.stroke="none")),s},h.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},h.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},h.prototype.enableProportionResize=function(s){if(s===void 0&&(s=!0),s){var f={widthPCT:100,hightPCT:100},i={basisWidth:this.rx,basisHeight:this.ry},l={maxScaleLimit:Math.min(this.maxWidth/(this.rx*2)*100,this.maxHeight/(this.ry*2)*100),minScaleLimit:Math.max(this.minWidth/(this.rx*2)*100,this.minHeight/(this.ry*2)*100)};this.PCTResizeInfo={ResizePCT:f,ResizeBasis:i,ScaleLimit:l}}else delete this.PCTResizeInfo},h})(Je.DiamondNodeModel);(function(v){gv(h,v);function h(){return v!==null&&v.apply(this,arguments)||this}return h.prototype.getControlGroup=function(){var s=this.props,f=s.model,i=s.graphModel;return Je.h(Iu,{model:f,graphModel:i})},h.prototype.getResizeShape=function(){var s=this.props.model,f=s.points,i=s.getNodeStyle();return Je.h("g",null,Je.h(L1,hf({},i,{points:f})))},h.prototype.getShape=function(){var s=this.props,f=s.model.isSelected,i=s.graphModel.editConfigModel.isSilentMode;return Je.h("g",null,this.getResizeShape(),f&&!i?this.getControlGroup():"")},h})(Je.DiamondNode);var vv=globalThis&&globalThis.__extends||function(){var v=function(h,s){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,i){f.__proto__=i}||function(f,i){for(var l in i)i.hasOwnProperty(l)&&(f[l]=i[l])},v(h,s)};return function(h,s){v(h,s);function f(){this.constructor=h}h.prototype=s===null?Object.create(s):(f.prototype=s.prototype,new f)}}();(function(v){vv(h,v);function h(s,f){var i=v.call(this,s,f)||this,l=i.properties.nodeSize;return l&&(i.width=l.width,i.height=l.height),i}return h.prototype.initNodeData=function(s){v.prototype.initNodeData.call(this,s),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},h.prototype.getOutlineStyle=function(){var s=v.prototype.getOutlineStyle.call(this),f=this.graphModel.editConfigModel.isSilentMode;return f||(s.stroke="none",s.hover&&(s.hover.stroke="none")),s},h.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},h.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},h.prototype.enableProportionResize=function(s){if(s===void 0&&(s=!0),s){var f={widthPCT:100,hightPCT:100},i={basisWidth:this.width,basisHeight:this.height},l={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:f,ResizeBasis:i,ScaleLimit:l}}else delete this.PCTResizeInfo},h})(Je.HtmlNodeModel);(function(v){vv(h,v);function h(){return v!==null&&v.apply(this,arguments)||this}return h.prototype.getControlGroup=function(){var s=this.props,f=s.model,i=s.graphModel;return Je.h(Iu,{model:f,graphModel:i})},h.prototype.getResizeShape=function(){return v.prototype.getShape.call(this)},h.prototype.getShape=function(){var s=this.props,f=s.model.isSelected,i=s.graphModel.editConfigModel.isSilentMode;return Je.h("g",null,this.getResizeShape(),f&&!i?this.getControlGroup():"")},h})(Je.HtmlNode);var bv=globalThis&&globalThis.__extends||function(){var v=function(h,s){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,i){f.__proto__=i}||function(f,i){for(var l in i)i.hasOwnProperty(l)&&(f[l]=i[l])},v(h,s)};return function(h,s){v(h,s);function f(){this.constructor=h}h.prototype=s===null?Object.create(s):(f.prototype=s.prototype,new f)}}(),Cu=globalThis&&globalThis.__assign||function(){return Cu=Object.assign||function(v){for(var h,s=1,f=arguments.length;s<f;s++){h=arguments[s];for(var i in h)Object.prototype.hasOwnProperty.call(h,i)&&(v[i]=h[i])}return v},Cu.apply(this,arguments)},z1=globalThis&&globalThis.__read||function(v,h){var s=typeof Symbol=="function"&&v[Symbol.iterator];if(!s)return v;var f=s.call(v),i,l=[],c;try{for(;(h===void 0||h-- >0)&&!(i=f.next()).done;)l.push(i.value)}catch(b){c={error:b}}finally{try{i&&!i.done&&(s=f.return)&&s.call(f)}finally{if(c)throw c.error}}return l},B1=globalThis&&globalThis.__spread||function(){for(var v=[],h=0;h<arguments.length;h++)v=v.concat(z1(arguments[h]));return v},Bg=500,Fg=300,F1=-1e4;(function(v){bv(h,v);function h(){var s=v!==null&&v.apply(this,arguments)||this;return s.isGroup=!0,s.unfoldedWidth=Bg,s.unfoldedHight=Fg,s.childrenLastFoldStatus={},s}return h.prototype.initNodeData=function(s){var f=this;v.prototype.initNodeData.call(this,s);var i=[];Array.isArray(s.children)&&(i=s.children),this.children=new Set(i),this.width=Bg,this.height=Fg,this.foldedWidth=80,this.foldedHeight=60,this.zIndex=F1,this.radius=0,this.text.editable=!1,this.text.draggable=!1,this.isRestrict=!1,this.resizable=!1,this.autoToFront=!1,this.foldable=!1,this.properties.isFolded===void 0&&(this.properties.isFolded=!1),this.isFolded=this.properties.isFolded,setTimeout(function(){f.isFolded&&f.foldGroup(f.isFolded)})},h.prototype.getResizeOutlineStyle=function(){var s=v.prototype.getResizeOutlineStyle.call(this);return s.stroke="none",s},h.prototype.foldGroup=function(s){var f=this;if(s!==this.isFolded){this.setProperty("isFolded",s),this.isFolded=s,s?(this.x=this.x-this.width/2+this.foldedWidth/2,this.y=this.y-this.height/2+this.foldedHeight/2,this.unfoldedWidth=this.width,this.unfoldedHight=this.height,this.width=this.foldedWidth,this.height=this.foldedHeight):(this.width=this.unfoldedWidth,this.height=this.unfoldedHight,this.x=this.x+this.width/2-this.foldedWidth/2,this.y=this.y+this.height/2-this.foldedHeight/2);var i=this.incoming.edges.concat(this.outgoing.edges);this.children.forEach(function(l){var c=f.graphModel.getElement(l),b=c.isFolded;if(c.isGroup&&!c.isFolded&&c.foldGroup(s),c.isGroup&&!s){var m=f.childrenLastFoldStatus[l];m!==void 0&&m!==c.isFolded&&c.foldGroup(m)}f.childrenLastFoldStatus[l]=b,c.visible=!s,i=i.concat(c.incoming.edges.concat(c.outgoing.edges))}),this.foldEdge(s,i)}},h.prototype.getAnchorStyle=function(s){var f=v.prototype.getAnchorStyle.call(this,s);return f.stroke="transparent",f.fill="transparent",f.hover.fill="transparent",f.hover.stroke="transparent",f},h.prototype.foldEdge=function(s,f){var i=this;f.forEach(function(l,c){var b=l.id,m=l.sourceNodeId,E=l.targetNodeId,w=l.startPoint,P=l.endPoint,A=l.type,j=l.text,M=l.getProperties(),N={id:b+"__"+c,sourceNodeId:m,targetNodeId:E,startPoint:w,endPoint:P,type:A,properties:M,text:j==null?void 0:j.value};l.virtual&&i.graphModel.deleteEdgeById(l.id);var I=i.graphModel.group.getNodeGroup(E);I||(I=i.graphModel.getNodeModelById(E));var B=i.graphModel.group.getNodeGroup(m);B||(B=i.graphModel.getNodeModelById(m)),s&&l.visible!==!1&&(i.children.has(m)||i.id===m?(N.startPoint=void 0,N.sourceNodeId=i.id):(N.endPoint=void 0,N.targetNodeId=i.id),(I.id!==i.id||B.id!==i.id)&&i.createVirtualEdge(N),l.visible=!1),!s&&l.visible===!1&&(I&&I.isGroup&&I.isFolded?(N.targetNodeId=I.id,N.endPoint=void 0,i.createVirtualEdge(N)):B&&B.isGroup&&B.isFolded?(N.sourceNodeId=B.id,N.startPoint=void 0,i.createVirtualEdge(N)):l.visible=!0)})},h.prototype.createVirtualEdge=function(s){s.pointsList=void 0;var f=this.graphModel.addEdge(s);f.virtual=!0,f.text.editable=!1,f.isFoldedEdge=!0},h.prototype.isInRange=function(s){var f=s.x1,i=s.y1,l=s.x2,c=s.y2;return f>=this.x-this.width/2&&l<=this.x+this.width/2&&i>=this.y-this.height/2&&c<=this.y+this.height/2},h.prototype.isAllowMoveTo=function(s){var f=s.x1,i=s.y1,l=s.x2,c=s.y2;return{x:f>=this.x-this.width/2&&l<=this.x+this.width/2,y:i>=this.y-this.height/2&&c<=this.y+this.height/2}},h.prototype.setAllowAppendChild=function(s){this.setProperty("groupAddable",s)},h.prototype.addChild=function(s){this.children.add(s)},h.prototype.removeChild=function(s){this.children.delete(s)},h.prototype.getAddableOutlineStyle=function(){return{stroke:"#FEB663",strokeWidth:2,strokeDasharray:"4 4",fill:"transparent"}},h.prototype.getData=function(){var s=this,f=v.prototype.getData.call(this);f.children=[],this.children.forEach(function(l){var c=s.graphModel.getNodeModelById(l);c&&!c.virtual&&f.children.push(l)});var i=f.properties;return delete i.groupAddable,delete i.isFolded,f},h.prototype.getHistoryData=function(){var s=v.prototype.getData.call(this);s.children=B1(this.children),s.isGroup=!0;var f=s.properties;return delete f.groupAddable,f.isFolded&&(s.x=s.x+this.unfoldedWidth/2-this.foldedWidth/2,s.y=s.y+this.unfoldedHight/2-this.foldedHeight/2),s},h.prototype.isAllowAppendIn=function(s){return!0},h.prototype.toBack=function(){this.zIndex--},h})(hv.model);(function(v){bv(h,v);function h(){return v!==null&&v.apply(this,arguments)||this}return h.prototype.getControlGroup=function(){var s=this.props.model,f=s.resizable,i=s.properties;return f&&!i.isFolded?v.prototype.getControlGroup.call(this):null},h.prototype.getAddableShape=function(){var s=this.props.model,f=s.width,i=s.height,l=s.x,c=s.y,b=s.radius,m=s.properties;if(!m.groupAddable)return null;var E=this.props.model.getNodeStyle().strokeWidth,w=this.props.model.getAddableOutlineStyle(),P=f+E+8,A=i+E+8;return Je.h("rect",Cu(Cu({},w),{width:P,height:A,x:l-P/2,y:c-A/2,rx:b,ry:b}))},h.prototype.getFoldIcon=function(){var s=this.props.model,f=s.x-s.width/2+5,i=s.y-s.height/2+5;if(!s.foldable)return null;var l=Je.h("path",{fill:"none",stroke:"#818281",strokeWidth:2,"pointer-events":"none",d:s.properties.isFolded?"M "+(f+3)+","+(i+6)+" "+(f+11)+","+(i+6)+" M"+(f+7)+","+(i+2)+" "+(f+7)+","+(i+10):"M "+(f+3)+","+(i+6)+" "+(f+11)+","+(i+6)+" "});return Je.h("g",{},[Je.h("rect",{height:12,width:14,rx:2,ry:2,strokeWidth:1,fill:"#F4F5F6",stroke:"#CECECE",cursor:"pointer",x:s.x-s.width/2+5,y:s.y-s.height/2+5,onClick:function(){s.foldGroup(!s.properties.isFolded)}}),l])},h.prototype.getResizeShape=function(){return Je.h("g",{},[this.getAddableShape(),v.prototype.getResizeShape.call(this),this.getFoldIcon()])},h})(hv.view);var U1=globalThis&&globalThis.__read||function(v,h){var s=typeof Symbol=="function"&&v[Symbol.iterator];if(!s)return v;var f=s.call(v),i,l=[],c;try{for(;(h===void 0||h-- >0)&&!(i=f.next()).done;)l.push(i.value)}catch(b){c={error:b}}finally{try{i&&!i.done&&(s=f.return)&&s.call(f)}finally{if(c)throw c.error}}return l};globalThis&&globalThis.__spread;var Ug=globalThis&&globalThis.__assign||function(){return Ug=Object.assign||function(v){for(var h,s=1,f=arguments.length;s<f;s++){h=arguments[s];for(var i in h)Object.prototype.hasOwnProperty.call(h,i)&&(v[i]=h[i])}return v},Ug.apply(this,arguments)},Hg=globalThis&&globalThis.__assign||function(){return Hg=Object.assign||function(v){for(var h,s=1,f=arguments.length;s<f;s++){h=arguments[s];for(var i in h)Object.prototype.hasOwnProperty.call(h,i)&&(v[i]=h[i])}return v},Hg.apply(this,arguments)},H1=globalThis&&globalThis.__read||function(v,h){var s=typeof Symbol=="function"&&v[Symbol.iterator];if(!s)return v;var f=s.call(v),i,l=[],c;try{for(;(h===void 0||h-- >0)&&!(i=f.next()).done;)l.push(i.value)}catch(b){c={error:b}}finally{try{i&&!i.done&&(s=f.return)&&s.call(f)}finally{if(c)throw c.error}}return l};globalThis&&globalThis.__spread;const G1={SEQUENCE_FLOW:1,START_EVENT:2,END_EVENT:3,USER_TASK:4,SERVICE_TASK:5,EXCLUSIVE_GATEWAY:6};function X1(v){const{incoming:h,outgoing:s,properties:f,key:i}=v,{text:l,startPoint:c,endPoint:b,pointsList:m,logicFlowType:E}=f,w={id:i,type:E,sourceNodeId:h[0],targetNodeId:s[0],text:l,startPoint:c,endPoint:b,pointsList:m,properties:{}},P=["startPoint","endPoint","pointsList","text","logicFlowType"];return Object.keys(v.properties).forEach(A=>{P.indexOf(A)===-1&&(w.properties[A]=v.properties[A])}),w}function Y1(v){const{properties:h,key:s}=v,{x:f,y:i,text:l,logicFlowType:c}=h,b={id:s,type:c,x:f,y:i,text:l,properties:{}},m=["x","y","text","logicFlowType"];return Object.keys(v.properties).forEach(E=>{m.indexOf(E)===-1&&(b.properties[E]=v.properties[E])}),b}function V1(v){const h={nodes:[],edges:[]},s=v.flowElementList;return s&&s.length>0&&s.forEach(f=>{if(f.type===G1.SEQUENCE_FLOW){const i=X1(f);h.edges.push(i)}else{const i=Y1(f);h.nodes.push(i)}}),h}function W1(v){return[{text:"选区",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAAH6ji2bAAAABGdBTUEAALGPC/xhBQAAAOVJREFUOBGtVMENwzAIjKP++2026ETdpv10iy7WFbqFyyW6GBywLCv5gI+Dw2Bluj1znuSjhb99Gkn6QILDY2imo60p8nsnc9bEo3+QJ+AKHfMdZHnl78wyTnyHZD53Zzx73MRSgYvnqgCUHj6gwdck7Zsp1VOrz0Uz8NbKunzAW+Gu4fYW28bUYutYlzSa7B84Fh7d1kjLwhcSdYAYrdkMQVpsBr5XgDGuXwQfQr0y9zwLda+DUYXLaGKdd2ZTtvbolaO87pdo24hP7ov16N0zArH1ur3iwJpXxm+v7oAJNR4JEP8DoAuSFEkYH7cAAAAASUVORK5CYII=",callback:()=>{v.updateEditConfig({stopMoveGraph:!0})}},{type:"circle",text:"开始",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAAH6ji2bAAAABGdBTUEAALGPC/xhBQAAAnBJREFUOBGdVL1rU1EcPfdGBddmaZLiEhdx1MHZQXApraCzQ7GKLgoRBxMfcRELuihWKcXFRcEWF8HBf0DdDCKYRZpnl7p0svLe9Zzbd29eQhTbC8nv+9zf130AT63jvooOGS8Vf9Nt5zxba7sXQwODfkWpkbjTQfCGUd9gIp3uuPP8bZ946g56dYQvnBg+b1HB8VIQmMFrazKcKSvFW2dQTxJnJdQ77urmXWOMBCmXM2Rke4S7UAW+/8ywwFoewmBps2tu7mbTdp8VMOkIRAkKfrVawalJTtIliclFbaOBqa0M2xImHeVIfd/nKAfVq/LGnPss5Kh00VEdSzfwnBXPUpmykNss4lUI9C1ga+8PNrBD5YeqRY2Zz8PhjooIbfJXjowvQJBqkmEkVnktWhwu2SM7SMx7Cj0N9IC0oQXRo8xwAGzQms+xrB/nNSUWVveI48ayrFGyC2+E2C+aWrZHXvOuz+CiV6iycWe1Rd1Q6+QUG07nb5SbPrL4426d+9E1axKjY3AoRrlEeSQo2Eu0T6BWAAr6COhTcWjRaYfKG5csnvytvUr/WY4rrPMB53Uo7jZRjXaG6/CFfNMaXEu75nG47X+oepU7PKJvvzGDY1YLSKHJrK7vFUwXKkaxwhCW3u+sDFMVrIju54RYYbFKpALZAo7sB6wcKyyrd+aBMryMT2gPyD6GsQoRFkGHr14TthZni9ck0z+Pnmee460mHXbRAypKNy3nuMdrWgVKj8YVV8E7PSzp1BZ9SJnJAsXdryw/h5ctboUVi4AFiCd+lQaYMw5z3LGTBKjLQOeUF35k89f58Vv/tGh+l+PE/wG0rgfIUbZK5AAAAABJRU5ErkJggg=="},{type:"rect",text:"用户任务",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAEFVwZaAAAABGdBTUEAALGPC/xhBQAAAqlJREFUOBF9VM9rE0EUfrMJNUKLihGbpLGtaCOIR8VjQMGDePCgCCIiCNqzCAp2MyYUCXhUtF5E0D+g1t48qAd7CCLqQUQKEWkStcEfVGlLdp/fm3aW2QQdyLzf33zz5m2IsAZ9XhDpyaaIZkTS4ASzK41TFao88GuJ3hsr2pAbipHxuSYyKRugagICGANkfFnNh3HeE2N0b3nN2cgnpcictw5veJIzxmDamSlxxQZicq/mflxhbaH8BLRbuRwNtZp0JAhoplVRUdzmCe/vO27wFuuA3S5qXruGdboy5/PRGFsbFGKo/haRtQHIrM83bVeTrOgNhZReWaYGnE4aUQgTJNvijJFF4jQ8BxJE5xfKatZWmZcTQ+BVgh7s8SgPlCkcec4mGTmieTP4xd7PcpIEg1TX6gdeLW8rTVMVLVvb7ctXoH0Cydl2QOPJBG21STE5OsnbweVYzAnD3A7PVILuY0yiiyDwSm2g441r6rMSgp6iK42yqroI2QoXeJVeA+YeZSa47gZdXaZWQKTrG93rukk/l2Al6Kzh5AZEl7dDQy+JjgFahQjRopSxPbrbvK7GRe9ePWBo1wcU7sYrFZtavXALwGw/7Dnc50urrHJuTPSoO2IMV3gUQGNg87IbSOIY9BpiT9HV7FCZ94nPXb3MSnwHn/FFFE1vG6DTby+r31KAkUktB3Qf6ikUPWxW1BkXSPQeMHHiW0+HAd2GelJsZz1OJegCxqzl+CLVHa/IibuHeJ1HAKzhuDR+ymNaRFM+4jU6UWKXorRmbyqkq/D76FffevwdCp+jN3UAN/C9JRVTDuOxC/oh+EdMnqIOrlYteKSfadVRGLJFJPSB/ti/6K8f0CNymg/iH2gO/f0DwE0yjAFO6l8JaR5j0VPwPwfaYHqOqrCI319WzwhwzNW/aQAAAABJRU5ErkJggg==",cls:"important-node"},{type:"rect",text:"系统任务",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAEFVwZaAAAABGdBTUEAALGPC/xhBQAAAqlJREFUOBF9VM9rE0EUfrMJNUKLihGbpLGtaCOIR8VjQMGDePCgCCIiCNqzCAp2MyYUCXhUtF5E0D+g1t48qAd7CCLqQUQKEWkStcEfVGlLdp/fm3aW2QQdyLzf33zz5m2IsAZ9XhDpyaaIZkTS4ASzK41TFao88GuJ3hsr2pAbipHxuSYyKRugagICGANkfFnNh3HeE2N0b3nN2cgnpcictw5veJIzxmDamSlxxQZicq/mflxhbaH8BLRbuRwNtZp0JAhoplVRUdzmCe/vO27wFuuA3S5qXruGdboy5/PRGFsbFGKo/haRtQHIrM83bVeTrOgNhZReWaYGnE4aUQgTJNvijJFF4jQ8BxJE5xfKatZWmZcTQ+BVgh7s8SgPlCkcec4mGTmieTP4xd7PcpIEg1TX6gdeLW8rTVMVLVvb7ctXoH0Cydl2QOPJBG21STE5OsnbweVYzAnD3A7PVILuY0yiiyDwSm2g441r6rMSgp6iK42yqroI2QoXeJVeA+YeZSa47gZdXaZWQKTrG93rukk/l2Al6Kzh5AZEl7dDQy+JjgFahQjRopSxPbrbvK7GRe9ePWBo1wcU7sYrFZtavXALwGw/7Dnc50urrHJuTPSoO2IMV3gUQGNg87IbSOIY9BpiT9HV7FCZ94nPXb3MSnwHn/FFFE1vG6DTby+r31KAkUktB3Qf6ikUPWxW1BkXSPQeMHHiW0+HAd2GelJsZz1OJegCxqzl+CLVHa/IibuHeJ1HAKzhuDR+ymNaRFM+4jU6UWKXorRmbyqkq/D76FffevwdCp+jN3UAN/C9JRVTDuOxC/oh+EdMnqIOrlYteKSfadVRGLJFJPSB/ti/6K8f0CNymg/iH2gO/f0DwE0yjAFO6l8JaR5j0VPwPwfaYHqOqrCI319WzwhwzNW/aQAAAABJRU5ErkJggg==",cls:"import_icon"},{type:"diamond",text:"条件判断",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAYAAAHeEJUAAAAABGdBTUEAALGPC/xhBQAAAvVJREFUOBGNVEFrE0EU/mY3bQoiFlOkaUJrQUQoWMGePLX24EH0IIoHKQiCV0G8iE1covgLiqA/QTzVm1JPogc9tIJYFaQtlhQxqYjSpunu+L7JvmUTU3AgmTfvffPNN++9WSA1DO182f6xwILzD5btfAoQmwL5KJEwiQyVbSVZ0IgRyV6PTpIJ81E5ZvqfHQR0HUOBHW4L5Et2kQ6Zf7iAOhTFAA8s0pEP7AXO1uAA52SbqGk6h/6J45LaLhO64ByfcUzM39V7ZiAdS2yCePPEIQYvTUHqM/n7dgQNfBKWPjpF4ISk8q3J4nB11qw6X8l+FsF3EhlkEMfrjIer3wJTLwS2aCNcj4DbGxXTw00JmAuO+Ni6bBxVUCvS5d9aa04+so4pHW5jLTywuXAL7jJ+D06sl82Sgl2JuVBQn498zkc2bGKxULHjCnSMadBKYDYYHAtsby1EQ5lNGrQd4Y3v4Zo0XdGEmDno46yCM9Tk+RiJmUYHS/aXHPNTcjxcbTFna000PFJHIVZ5lFRqRpJWk9/+QtlOUYJj9HG5pVFEU7zqIYDVsw2s+AJaD8wTd2umgSCCyUxgGsS1Y6TBwXQQTFuZaHcd8gAGioE90hlsY+wMcs30RduYtxanjMGal8H5dMW67dmT1JFtYUEe8LiQLRsPZ6IIc7A4J5tqco3T0pnv/4u0kyzrYUq7gASuEyI8VXKvB9Odytv6jS/PNaZBln0nioJG/AVQRZvApOdhjj3Jt8QC8Im09SafwdBdvIpztpxWxpeKCC+EsFdS8DCyuCn2munFpL7ctHKp+Xc5cMybeIyMAN33SPL3ZR9QV1XVwLyzHm6Iv0/yeUuUb7PPlZC4D4HZkeu6dpF4v9j9MreGtMbxMMRLIcjJic9yHi7WQ3yVKzZVWUr5UrViJvn1FfUlwe/KYVfYyWRLSGNu16hR01U9IacajXPei0wx/5BqgInvJN+MMNtNme7ReU9SBbgntovn0kKHpFg7UogZvaZiOue/q1SBo9ktHzQAAAAASUVORK5CYII="},{type:"circle",text:"结束",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAAH6ji2bAAAABGdBTUEAALGPC/xhBQAAA1BJREFUOBFtVE1IVUEYPXOf+tq40Y3vPcmFIdSjIorWoRG0ERWUgnb5FwVhYQSl72oUoZAboxKNFtWiwKRN0M+jpfSzqJAQclHo001tKkjl3emc8V69igP3znzfnO/M9zcDcKT67azmjYWTwl9Vn7Vumeqzj1DVb6cleQY4oAVnIOPb+mKAGxQmKI5CWNJ2aLPatxWa3aB9K7/fB+/Z0jUF6TmMlFLQqrkECWQzOZxYGjTlOl8eeKaIY5yHnFn486xBustDjWT6dG7pmjHOJd+33t0iitTPkK6tEvjxq4h2MozQ6WFSX/LkDUGfFwfhEZj1Auz/U4pyAi5Sznd7uKzznXeVHlI/Aywmk6j7fsUsEuCGADrWARXXwjxWQsUbIupDHJI7kF5dRktg0eN81IbiZXiTESic50iwS+t1oJgL83jAiBupLDCQqwziaWSoAFSeIR3P5Xv5az00wyIn35QRYTwdSYbz8pH8fxUUAtxnFvYmEmgI0wYXUXcCCSpeEVpXlsRhBnCEATxWylL9+EKCAYhe1NGstUa6356kS9NVvt3DU2fd+Wtbm/+lSbylJqsqkSm9CRhvoJVlvKPvF1RKY/FcPn5j4UfIMLn8D4UYb54BNsilTDXKnF4CfTobA0FpoW/LSp306wkXM+XaOJhZaFkcNM82ASNAWMrhrUbRfmyeI1FvRBTpN06WKxa9BK0o2E4Pd3zfBBEwPsv9sQBnmLVbLEIZ/Xe9LYwJu/Er17W6HYVBc7vmuk0xUQ+pqxdom5Fnp55SiytXLPYoMXNM4u4SNSCFWnrVIzKG3EGyMXo6n/BQOe+bX3FClY4PwydVhthOZ9NnS+ntiLh0fxtlUJHAuGaFoVmttpVMeum0p3WEXbcll94l1wM/gZ0Ccczop77VvN2I7TlsZCsuXf1WHvWEhjO8DPtyOVg2/mvK9QqboEth+7pD6NUQC1HN/TwvydGBARi9MZSzLE4b8Ru3XhX2PBxf8E1er2A6516o0w4sIA+lwURhAON82Kwe2iDAC1Watq4XHaGQ7skLcFOtI5lDxuM2gZe6WFIotPAhbaeYlU4to5cuarF1QrcZ/lwrLaCJl66JBocYZnrNlvm2+MBCTmUymPrYZVbjdlr/BxlMjmNmNI3SAAAAAElFTkSuQmCC"}]}const K1=yf({name:"FlowChart",__name:"FlowChart",props:{flowOptions:{type:Object,default:()=>({})},data:{type:Object,default:()=>({})},toolbar:{type:Boolean,default:!0},patternItems:{type:Array}},setup(v){const h=v,s=_u(null),f=_u({}),i=_u(null),{prefixCls:l}=dw("flow-chart"),c=hw(),[b,{openModal:m}]=Tw();Cw({logicFlow:i});const E=Ew(()=>{const{flowOptions:j}=h;return af({grid:!0,background:{color:c.getDarkMode==="light"?"#f7f9ff":"#151515"},keyboard:{enabled:!0}},j)});gg(()=>h.data,()=>{P()}),gg(()=>Mt(E),j=>{var M;(M=Mt(i))==null||M.updateEditConfig(j)});function w(){return Ou(this,null,function*(){yield uf();const j=Mt(s);if(!j)return;Io.use(w1),Io.use(i1),Io.use(o1),Io.use(_1),Io.use(x1),i.value=new Io(hg(af({},Mt(E)),{container:j}));const M=Mt(i);M==null||M.setDefaultEdgeType("line"),P(),M==null||M.setPatternItems(h.patternItems||W1(M))})}function P(){return Ou(this,null,function*(){yield uf();const j=Mt(i);if(!j)return;const M=V1(h.data);j.render(M)})}function A(){const j=Mt(i);j&&(f.value=Mt(j).getGraphData(),m())}return Sw(w),(j,M)=>(Hr(),ji("div",{class:wu(["h-full",Mt(l)])},[v.toolbar?(Hr(),gf(Lw,{key:0,prefixCls:Mt(l),onViewData:A},null,8,["prefixCls"])):sf("",!0),jw("div",{ref_key:"lfElRef",ref:s,class:"h-full"},null,512),Ti(Mt(Mw),{onRegister:Mt(b),title:"流程数据",width:"50%"},{default:ju(()=>[Ti(Mt(Dw),{data:f.value},null,8,["data"])]),_:1},8,["onRegister"])],2))}}),Z1=yw(K1),q1=[{incoming:[],outgoing:["Flow_33inf2k"],dockers:[],type:2,properties:{a:"efrwe",b:"wewe",name:"开始",x:280,y:200,text:{x:280,y:200,value:"开始"},logicFlowType:"bpmn:startEvent"},key:"Event_1d42u4p"},{incoming:["Flow_379e0o9"],outgoing:[],dockers:[],type:3,properties:{a:"efrwe",b:"wewe",name:"结束",x:920,y:200,text:{x:920,y:200,value:"结束"},logicFlowType:"bpmn:endEvent"},key:"Event_08p8i6q"},{incoming:["Flow_0pfouf0"],outgoing:["Flow_3918lhh"],dockers:[],type:6,properties:{a:"efrwe",b:"wewe",name:"网关",x:580,y:200,text:{x:580,y:200,value:"网关"},logicFlowType:"bpmn:exclusiveGateway"},key:"Gateway_1fngqgj"},{incoming:["Flow_33inf2k"],outgoing:["Flow_0pfouf0"],dockers:[],type:4,properties:{a:"efrwe",b:"wewe",name:"用户",x:420,y:200,text:{x:420,y:200,value:"用户"},logicFlowType:"bpmn:userTask"},key:"Activity_2mgtaia"},{incoming:["Flow_3918lhh"],outgoing:["Flow_379e0o9"],dockers:[],type:5,properties:{a:"efrwe",b:"wewe",name:"服务",x:760,y:200,text:{x:760,y:200,value:"服务"},logicFlowType:"bpmn:serviceTask"},key:"Activity_1sp8qc8"},{incoming:["Event_1d42u4p"],outgoing:["Activity_2mgtaia"],type:1,dockers:[],properties:{name:"边",text:{x:331,y:200,value:"边"},startPoint:{x:298,y:200},endPoint:{x:370,y:200},pointsList:[{x:298,y:200},{x:370,y:200}],logicFlowType:"bpmn:sequenceFlow"},key:"Flow_33inf2k"},{incoming:["Activity_2mgtaia"],outgoing:["Gateway_1fngqgj"],type:1,dockers:[],properties:{name:"边2",text:{x:507,y:200,value:"边2"},startPoint:{x:470,y:200},endPoint:{x:555,y:200},pointsList:[{x:470,y:200},{x:555,y:200}],logicFlowType:"bpmn:sequenceFlow"},key:"Flow_0pfouf0"},{incoming:["Gateway_1fngqgj"],outgoing:["Activity_1sp8qc8"],type:1,dockers:[],properties:{name:"边3",text:{x:664,y:200,value:"边3"},startPoint:{x:605,y:200},endPoint:{x:710,y:200},pointsList:[{x:605,y:200},{x:710,y:200}],logicFlowType:"bpmn:sequenceFlow"},key:"Flow_3918lhh"},{incoming:["Activity_1sp8qc8"],outgoing:["Event_08p8i6q"],type:1,dockers:[],properties:{name:"边4",text:{x:871,y:200,value:"边4"},startPoint:{x:810,y:200},endPoint:{x:902,y:200},pointsList:[{x:810,y:200},{x:902,y:200}],logicFlowType:"bpmn:sequenceFlow"},key:"Flow_379e0o9"}],J1={flowElementList:q1},cx=yf({__name:"index",setup(v){return(h,s)=>(Hr(),gf(Mt(Nw),{title:"流程图",content:"简单流程图示例,具体功能需要自己完善",contentFullHeight:"",fixedHeight:""},{default:ju(()=>[Ti(Mt(Z1),{data:Mt(J1)},null,8,["data"])]),_:1}))}});export{cx as default};
