import{_ as b}from"./BasicTable.vue_vue_type_script_setup_true_lang-68f7da80.js";import"./TableImg.vue_vue_type_style_index_0_lang-c025c7d6.js";import{a as C}from"./BasicForm.vue_vue_type_style_index_0_lang-1d0165cd.js";import{u as _}from"./useTable-dd83d9cb.js";import{A as B,g as T,c as A,s as k,d as M}from"./AreaModal-960362b1.js";import{a as E,c as S}from"./index.js";import{b as w}from"./index-6bb63bf0.js";import{d as y,a6 as s,Z as g,_ as R,l as d,a8 as m,E as $,a7 as F,aa as P}from"./vue-f7f38239.js";import"./BasicForm.vue_vue_type_script_setup_true_lang-b5fd2c2d.js";import"./antd-bebda08e.js";import"./useForm-d2875f1c.js";import"./uuid-31b8b5a4.js";import"./sortable.esm-4ae27e0b.js";import"./onMountedOrActivated-a837e8fb.js";import"./useWindowSizeFn-01ffbee2.js";import"./index-1b9aa1da.js";import"./useSortable-9ec2a7be.js";import"./download-2647fd8d.js";import"./base64Conver-39fc0d26.js";import"./index-b34be3ab.js";import"./IconPicker.vue_vue_type_script_setup_true_lang-af62677b.js";import"./copyTextToClipboard-ad844e61.js";import"./index-091b1c05.js";import"./constantEnum-c819fa5f.js";const{createMessage:D}=E(),v=y({name:"Area",components:{BasicTable:b,TableAction:C,AreaModal:B},setup(){const[t,{openModal:a,setModalProps:n}]=w(),[f,{reload:i}]=_({title:"列表",api:T,columns:A,formConfig:{labelWidth:120,schemas:k,showAdvancedButton:!1,showResetButton:!1,autoSubmitOnEnter:!0},expandRowByClick:!0,isTreeTable:!0,canColDrag:!0,pagination:!1,useSearchForm:!0,showTableSetting:!1,bordered:!0,showIndexColumn:!1,actionColumn:{width:120,title:"操作",dataIndex:"action",fixed:!1}});function h(){n({title:"新增区域"}),a(!0,{isUpdate:!1})}function r(e,o){o.stopPropagation(),n({title:"修改区域"}),a(!0,{record:e,isUpdate:!0})}function l(e,o){o.stopPropagation(),n({title:"新增【"+e.name+"】的子区域"}),e={pcode:e.code},a(!0,{record:e,isUpdate:!0})}function c(e,o){if(o.stopPropagation(),e.children&&e.children.length>0){D.warning("有子节点，不能删除！");return}M(e.code).then(()=>{i()})}function u(){i()}function p(){setTimeout(()=>{i()},200)}return{registerTable:f,registerModal:t,handleCreate:h,handleEdit:r,handleCreateChild:l,handleDelete:c,handleSuccess:p,doSearch:u}}});function x(t,a,n,f,i,h){const r=s("a-button"),l=s("TableAction"),c=s("BasicTable"),u=s("AreaModal");return g(),R("div",null,[d(c,{onRegister:t.registerTable},{toolbar:m(()=>[d(r,{type:"primary",onClick:t.handleCreate},{default:m(()=>[$(" 新增 ")]),_:1},8,["onClick"])]),bodyCell:m(({column:p,record:e})=>[p.key==="action"?(g(),F(l,{key:0,actions:[{tooltip:"添加子节点",icon:"ant-design:plus-outlined",onClick:t.handleCreateChild.bind(null,e)},{tooltip:"修改",icon:"clarity:note-edit-line",onClick:t.handleEdit.bind(null,e)},{tooltip:"删除",icon:"ant-design:delete-outlined",color:"error",onClick:o=>{o.stopPropagation()},popConfirm:{title:"是否确认删除",confirm:t.handleDelete.bind(null,e),placement:"left"}}]},null,8,["actions"])):P("",!0)]),_:1},8,["onRegister"]),d(u,{onRegister:t.registerModal,onSuccess:t.handleSuccess},null,8,["onRegister","onSuccess"])])}const se=S(v,[["render",x]]);export{se as default};
