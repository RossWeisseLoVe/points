var b=(e,s,t)=>new Promise((l,c)=>{var d=o=>{try{a(t.next(o))}catch(i){c(i)}},n=o=>{try{a(t.throw(o))}catch(i){c(i)}},a=o=>o.done?l(o.value):Promise.resolve(o.value).then(d,n);a((t=t.apply(e,s)).next())});import{_ as E}from"./BasicTable.vue_vue_type_script_setup_true_lang-68f7da80.js";import"./TableImg.vue_vue_type_style_index_0_lang-c025c7d6.js";import{a as w}from"./BasicForm.vue_vue_type_style_index_0_lang-1d0165cd.js";import{u as S}from"./useTable-dd83d9cb.js";import{b as B}from"./index-6bb63bf0.js";import{L as A,c as M,s as k}from"./SysOperRecordModal-10e40ee6.js";import{b as C,a as L,c as D}from"./index.js";import{P as $}from"./perEnum-60978fa7.js";import{A as P}from"./index-17e4a920.js";import{d as N,a6 as u,Z as _,_ as v,l as p,a8 as f,E as O,a7 as z,aa as F}from"./vue-f7f38239.js";import"./BasicForm.vue_vue_type_script_setup_true_lang-b5fd2c2d.js";import"./antd-bebda08e.js";import"./useForm-d2875f1c.js";import"./uuid-31b8b5a4.js";import"./sortable.esm-4ae27e0b.js";import"./onMountedOrActivated-a837e8fb.js";import"./useWindowSizeFn-01ffbee2.js";import"./index-1b9aa1da.js";import"./useSortable-9ec2a7be.js";import"./download-2647fd8d.js";import"./base64Conver-39fc0d26.js";import"./index-b34be3ab.js";import"./IconPicker.vue_vue_type_script_setup_true_lang-af62677b.js";import"./copyTextToClipboard-ad844e61.js";import"./index-091b1c05.js";import"./index-59aab1ab.js";import"./index-18f7ddaa.js";import"./useDescription-bcbe13f7.js";const I=e=>{const s=e&&{pageNum:e.pageNum,pageSize:e.pageSize};let t=e||{};return e.dateRange&&e.dateRange.length>0&&(t.startTime=e.dateRange[0],t.endTime=e.dateRange[1]),t&&(delete t.pageNum,delete t.pageSize,delete t.dateRange),C.post({url:"/flow/log/sysOperRecord/getPagerModel",params:{query:s,entity:t}})},y=e=>C.post({url:"/flow/log/sysOperRecord/delete",params:e}),V=N({name:"SysOperRecord",components:{BasicTable:E,TableAction:w,LoginLogModal:A,Authority:P},setup(){const{createMessage:e,createConfirm:s}=L(),[t,{openModal:l,setModalProps:c}]=B(),[d,{reload:n,getSelectRows:a}]=S({title:"列表",api:I,columns:M,formConfig:{labelWidth:120,schemas:k,showAdvancedButton:!1,showResetButton:!1,autoSubmitOnEnter:!0},rowSelection:{type:"checkbox",columnWidth:30},canColDrag:!0,useSearchForm:!0,bordered:!0,showIndexColumn:!1,actionColumn:{width:60,title:"操作",dataIndex:"action",fixed:!1}});function o(){l(!0,{isUpdate:!1})}function i(r){l(!0,{record:r,isUpdate:!0}),c({title:"查看详情",width:850})}function g(r){y([r.id]).then(()=>{n()})}function h(){const r=a();if(r&&r.length<=0){e.warn("请选择行！");return}s({iconType:"warning",title:"提示",content:"确定要删除所选行吗？",onOk:()=>b(this,null,function*(){const R=r.map(T=>T.id);y(R).then(()=>{n()})})})}function m(){n()}return{PerEnum:$,registerTable:d,registerModal:t,handleCreate:o,handleDetail:i,handleDelete:g,handleDeleteAll:h,handleSuccess:m}}});function x(e,s,t,l,c,d){const n=u("a-button"),a=u("Authority"),o=u("TableAction"),i=u("BasicTable"),g=u("LoginLogModal");return _(),v("div",null,[p(i,{onRegister:e.registerTable},{toolbar:f(()=>[p(a,{value:this.$options.name+":"+e.PerEnum.DELETE},{default:f(()=>[p(n,{type:"danger",onClick:e.handleDeleteAll},{default:f(()=>[O(" 删除 ")]),_:1},8,["onClick"])]),_:1},8,["value"])]),bodyCell:f(({column:h,record:m})=>[h.key==="action"?(_(),z(o,{key:0,actions:[{tooltip:"详情",icon:"ant-design:file-search-outlined",onClick:e.handleDetail.bind(null,m)},{tooltip:"删除",auth:this.$options.name+":"+e.PerEnum.DELETE,icon:"ant-design:delete-outlined",color:"error",popConfirm:{title:"是否确认删除",confirm:e.handleDelete.bind(null,m),placement:"left"}}]},null,8,["actions"])):F("",!0)]),_:1},8,["onRegister"]),p(g,{onRegister:e.registerModal,onSuccess:e.handleSuccess},null,8,["onRegister","onSuccess"])])}const be=D(V,[["render",x]]);export{be as default};
