var u=(t,i,o)=>new Promise((m,r)=>{var p=e=>{try{a(o.next(e))}catch(s){r(s)}},l=e=>{try{a(o.throw(e))}catch(s){r(s)}},a=e=>e.done?m(e.value):Promise.resolve(e.value).then(p,l);a((o=o.apply(t,i)).next())});import{B as _,a as y}from"./index-6bb63bf0.js";import{_ as I}from"./BasicTable.vue_vue_type_script_setup_true_lang-68f7da80.js";import"./TableImg.vue_vue_type_style_index_0_lang-c025c7d6.js";import{a as x}from"./BasicForm.vue_vue_type_style_index_0_lang-1d0165cd.js";import{u as S}from"./useTable-dd83d9cb.js";import{_ as T}from"./BasicForm.vue_vue_type_script_setup_true_lang-b5fd2c2d.js";import{g as R}from"./role-b83ceaa0.js";import{P as B}from"./index-5a8cda67.js";import P from"./CompanyTree-d7d2dbca.js";import{F as C}from"./constantEnum-c819fa5f.js";import{d as $,c as q,a6 as c,Z as k,a7 as v,a8 as f,l as d,ab as M}from"./vue-f7f38239.js";import{c as F}from"./index.js";import"./antd-bebda08e.js";import"./useWindowSizeFn-01ffbee2.js";import"./useForm-d2875f1c.js";import"./uuid-31b8b5a4.js";import"./sortable.esm-4ae27e0b.js";import"./onMountedOrActivated-a837e8fb.js";import"./index-1b9aa1da.js";import"./useSortable-9ec2a7be.js";import"./download-2647fd8d.js";import"./base64Conver-39fc0d26.js";import"./index-b34be3ab.js";import"./IconPicker.vue_vue_type_script_setup_true_lang-af62677b.js";import"./copyTextToClipboard-ad844e61.js";import"./index-091b1c05.js";import"./useContentViewHeight-4f74c208.js";import"./index-f9546e03.js";import"./useContextMenu-b66322cd.js";import"./company-7689c9fc.js";const W=[{title:"名称",dataIndex:"name",width:150,align:"left"},{title:"标识",dataIndex:"sn",width:120,align:"left"},{title:"公司",dataIndex:"companyName",width:120,align:"left"}],E=[{field:"keyword",label:"关键字",component:"Input",labelWidth:60,colProps:{span:12,lg:{span:12,offset:0},sm:{span:10,offset:0},xs:{span:16,offset:0}}}];new RegExp(C.SN),new RegExp("^(13[0-9]|14[5|7]|15[0|1|2|3|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\\d{8}$"),new RegExp("^\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*$");const N=$({name:"RoleSelector",components:{BasicModal:_,BasicForm:T,BasicTable:I,PageWrapper:B,CompanyTree:P,TableAction:x},setup(t,{emit:i}){let o="";const[m,{setModalProps:r,closeModal:p}]=y(n=>u(this,null,function*(){r({wrapClassName:"selector-content"}),o=n.personalId,a({searchInfo:{personalId:o}})})),[l,{reload:a,getSelectRows:e}]=S({title:"",api:R,immediate:!1,columns:W,rowSelection:{type:"checkbox",columnWidth:30},formConfig:{labelWidth:60,schemas:E,showResetButton:!1,showAdvancedButton:!1,autoSubmitOnEnter:!0},size:"small",canResize:!1,useSearchForm:!0,showTableSetting:!1,showIndexColumn:!1,bordered:!0,scroll:{y:300}}),s=q(()=>"选择角色");function g(){a()}function b(){const n=e();i("success",n),p()}function w(n){let h={companyId:n?n.id:"",personalId:o};a({searchInfo:h})}return{registerTable:l,registerModal:m,getTitle:s,handleSubmit:b,handleSuccess:g,handleSelect:w}}});function A(t,i,o,m,r,p){const l=c("CompanyTree"),a=c("BasicTable"),e=c("PageWrapper"),s=c("BasicModal");return k(),v(s,M({wrapClassName:"selector-body "},t.$attrs,{onRegister:t.registerModal,title:t.getTitle,onOk:t.handleSubmit}),{default:f(()=>[d(e,{dense:"",contentClass:"flex"},{default:f(()=>[d(l,{class:"w-1/4 xl:w-3/10",onSelect:t.handleSelect},null,8,["onSelect"]),d(a,{onRegister:t.registerTable,class:"w-3/4 xl:w-7/10"},null,8,["onRegister"])]),_:1})]),_:1},16,["onRegister","title","onOk"])}const be=F(N,[["render",A]]);export{be as default};
