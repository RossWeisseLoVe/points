import{p as S,f as v,n as w,bE as x,c as C}from"./index.js";import{G as $}from"./antd-bebda08e.js";import{d as L,f as i,c as W,u as p,o as k,x as E,a6 as H,Z as z,_ as F,l as N,a8 as R,$ as B,a1 as _,ae as g}from"./vue-f7f38239.js";import{u as I}from"./useWindowSizeFn-01ffbee2.js";const T=L({name:"IFrame",components:{Spin:$},props:{frameSrc:S.string.def(""),onLoad:{type:Function,default:()=>{}}},emits:["onLoadSuccess"],setup(t,{emit:r}){const a=i(!1),f=i(50),c=i(window.innerHeight),o=i(null),{prefixCls:l}=v("iframe-page");I(u,150);const h=W(()=>({height:`${p(c)}px`}));function u(){const e=p(o);if(!e)return;let{top:n}=w(e);n+=20,f.value=n,c.value=window.innerHeight-n;const s=document.documentElement.clientHeight-n;e.style.height=`${s}px`}function d(){a.value=!1,u()}function y(){E(()=>{const e=p(o);if(!e)return;const n=e;n.attachEvent?n.attachEvent("onload",()=>{try{r("onLoadSuccess"),m(n)}catch(s){}d()}):e.onload=()=>{try{r("onLoadSuccess"),m(e)}catch(s){}d()}})}const m=e=>{const n=e.contentWindow,s={type:"userInfo",message:{token:x()}};n.postMessage(JSON.stringify(s),"*")};return k(()=>{a.value=!0,y()}),{getWrapStyle:h,loading:a,frameRef:o,prefixCls:l}}});const V=["src"];function M(t,r,a,f,c,o){const l=H("Spin");return z(),F("div",{class:_(t.prefixCls),style:g(t.getWrapStyle)},[N(l,{wrapperClassName:"custom-spin-container",spinning:t.loading,size:"large",style:g(t.getWrapStyle)},{default:R(()=>[B("iframe",{class:_(["w-full",`${t.prefixCls}__main`]),src:t.frameSrc,ref:"frameRef"},null,10,V)]),_:1},8,["spinning","style"])],6)}const J=C(T,[["render",M],["__scopeId","data-v-2a9ec071"]]);export{J as default};
