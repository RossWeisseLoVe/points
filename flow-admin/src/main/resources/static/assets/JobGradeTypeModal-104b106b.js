var B=Object.defineProperty,F=Object.defineProperties;var N=Object.getOwnPropertyDescriptors;var b=Object.getOwnPropertySymbols;var S=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;var w=(t,s,e)=>s in t?B(t,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[s]=e,_=(t,s)=>{for(var e in s||(s={}))S.call(s,e)&&w(t,e,s[e]);if(b)for(var e of b(s))k.call(s,e)&&w(t,e,s[e]);return t},P=(t,s)=>F(t,N(s));var f=(t,s,e)=>new Promise((l,a)=>{var d=r=>{try{n(e.next(r))}catch(c){a(c)}},i=r=>{try{n(e.throw(r))}catch(c){a(c)}},n=r=>r.done?l(r.value):Promise.resolve(r.value).then(d,i);n((e=e.apply(t,s)).next())});import{B as q,a as v}from"./index-6bb63bf0.js";import{_ as R}from"./BasicForm.vue_vue_type_script_setup_true_lang-b5fd2c2d.js";import"./BasicForm.vue_vue_type_style_index_0_lang-1d0165cd.js";import{u as T}from"./useForm-d2875f1c.js";import{m as $,d as C,f as V,u as g,c as O,a6 as y,Z as j,a7 as E,a8 as G,l as J,ab as L}from"./vue-f7f38239.js";import{Q as U}from"./antd-bebda08e.js";import{c as A,s as D}from"./jobGradeType-e57de368.js";import{F as W}from"./constantEnum-c819fa5f.js";import{c as z}from"./index.js";const ie=[{title:"名称",dataIndex:"name",align:"left"},{title:"编码",dataIndex:"code",align:"left"},{title:"状态",dataIndex:"status",width:80,customRender:({record:t})=>{const e=~~t.status===1,l=e?"green":"red",a=e?"启用":"停用";return $(U,{color:l},()=>a)}},{title:"排序编号",dataIndex:"orderNo",width:100,align:"left"},{title:"备注",dataIndex:"note",align:"left"}],ce=[{field:"keyword",label:"关键字",component:"Input",componentProps:{placeholder:"请输入名称/编码"},labelWidth:60,colProps:{span:6,lg:{span:6,offset:0},sm:{span:10,offset:0},xs:{span:16,offset:0}}}],Q=[{field:"id",label:"",required:!1,component:"Input",show:!1},{field:"code",label:"编码",required:!0,component:"Input",show:!0,colProps:{span:24}},{field:"name",label:"名称",required:!0,component:"Input",show:!0,rules:[{required:!0,whitespace:!0,message:"名称不能为空！"},{max:80,message:"字符长度不能大于80！"}],colProps:{span:24}},{field:"status",label:"状态",required:!1,component:"Switch",defaultValue:!0,componentProps:{checkedChildren:"启用",unCheckedChildren:"停用"},colProps:{span:24}},{field:"orderNo",label:"排序编号",required:!1,component:"InputNumber",show:!0},{field:"note",label:"备注",required:!1,component:"InputTextArea",show:!0,rules:[{max:255,message:"字符长度不能大于255！"}],colProps:{span:24}}],Z=C({name:"JobGradeTypeModal",components:{BasicModal:q,BasicForm:R},emits:["success","register"],setup(t,{emit:s}){const e=V(!0),[l,{resetFields:a,updateSchema:d,setFieldsValue:i,validate:n}]=T({labelWidth:100,schemas:Q,showActionButtonGroup:!1}),r=o=>[{trigger:"blur",validator:(m,h)=>h?A({id:o.id,field:o.field,fieldValue:h,fieldName:o.fieldName}).then(p=>p?Promise.resolve():Promise.reject(o.fieldName+"已存在，请修改！")).catch(p=>Promise.reject(p)):Promise.resolve()}],[c,{setModalProps:u,closeModal:x}]=v(o=>f(this,null,function*(){yield a(),u({confirmLoading:!1}),e.value=!!(o!=null&&o.isUpdate);let m=o.record;yield d([{field:"code",dynamicRules:()=>[{required:!0,whitespace:!0,message:"标识不能为空！"},{pattern:new RegExp(W.SN),type:"string",message:"请输入英文或数字！"},{max:40,message:"字符长度不能大于40！"},...r({id:g(e)&&m&&m.id||"",field:"code",fieldValue:"",fieldName:"标识"})]}]),g(e)&&i(P(_({},o.record),{status:o.record.status===1}))})),I=O(()=>g(e)?"修改":"新增");function M(){return f(this,null,function*(){try{u({confirmLoading:!0});const o=yield n();o.status=o.status?1:0,yield D(o),x(),s("success")}finally{u({confirmLoading:!1})}})}return{registerModal:c,registerForm:l,getTitle:I,handleSubmit:M}}});function H(t,s,e,l,a,d){const i=y("BasicForm"),n=y("BasicModal");return j(),E(n,L(t.$attrs,{onRegister:t.registerModal,title:t.getTitle,onOk:t.handleSubmit}),{default:G(()=>[J(i,{onRegister:t.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}const K=z(Z,[["render",H]]),de=Object.freeze(Object.defineProperty({__proto__:null,default:K},Symbol.toStringTag,{value:"Module"}));export{K as J,de as a,ie as c,ce as s};
