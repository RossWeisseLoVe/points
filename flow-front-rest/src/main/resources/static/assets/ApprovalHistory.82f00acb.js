import{a as k,O as F,V as z,R as A,S as d,m as o,T as L,ap as q,ao as G,ak as U,a7 as W,L as X,C as Y,cM as Z,bQ as ee,v as j,h as te,J as oe,aF as f,o as ne,i as ae,z as r,l as x,B as T,t as S}from"./index.2b16d9a1.js";import{L as w}from"./index.2958f281.js";import"./index.6d6145ef.js";import{A as le}from"./index.0da486db.js";import{S as ie}from"./index.3f55bd74.js";import{T as re}from"./index.beefe435.js";import se from"./FlowDiagramModal.91db7d0c.js";import ce from"./index.c9b078f0.js";import{m as me}from"./process.32df2958.js";import{C as ue}from"./ClockCircleOutlined.2fc96921.js";import{R as de,C as pe}from"./index.6149f0c4.js";import{A as ve}from"./ApartmentOutlined.64aa62a3.js";import"./eagerComputed.bb8c5d26.js";import"./useFlexGapSupport.5b5e1140.js";import"./useSize.a2b98417.js";import"./index.e7eaeed7.js";import"./useWindowSizeFn.ed3cc4b0.js";import"./FullscreenOutlined.acb862b9.js";import"./Viewer.91f06516.js";import"./index.a877f91e.js";import"./index.e4a19c05.js";import"./useContentViewHeight.0617d761.js";import"./ArrowLeftOutlined.cb29a710.js";import"./index.8fed1b97.js";import"./transButton.25002429.js";import"./index.10c38a71.js";import"./throttleByAnimationFrame.06f05db1.js";import"./index.10701bf8.js";import"./PlusOutlined.097c7aec.js";var fe=function(){return{prefixCls:String,color:String,dot:L.any,pending:{type:Boolean,default:void 0},position:L.oneOf(q("left","right","")).def(""),label:L.any}},M=k({compatConfig:{MODE:3},name:"ATimelineItem",props:F(fe(),{color:"blue",pending:!1}),slots:["dot","label"],setup:function(n,I){var t=I.slots,p=z("timeline",n),e=p.prefixCls;return function(){var _,v,l,i,c,a=n.color,g=a===void 0?"":a,m=n.pending,C=n.label,u=C===void 0?(_=t.label)===null||_===void 0?void 0:_.call(t):C,y=n.dot,N=y===void 0?(v=t.dot)===null||v===void 0?void 0:v.call(t):y,O=A((l={},d(l,"".concat(e.value,"-item"),!0),d(l,"".concat(e.value,"-item-pending"),m),l)),B=A((i={},d(i,"".concat(e.value,"-item-head"),!0),d(i,"".concat(e.value,"-item-head-custom"),N),d(i,"".concat(e.value,"-item-head-").concat(g),!0),i)),D=/blue|red|green|gray/.test(g||"")?void 0:g;return o("li",{class:O},[u&&o("div",{class:"".concat(e.value,"-item-label")},[u]),o("div",{class:"".concat(e.value,"-item-tail")},null),o("div",{class:B,style:{borderColor:D,color:D}},[N]),o("div",{class:"".concat(e.value,"-item-content")},[(c=t.default)===null||c===void 0?void 0:c.call(t)])])}}}),_e=function(){return{prefixCls:String,pending:L.any,pendingDot:L.any,reverse:{type:Boolean,default:void 0},mode:L.oneOf(q("left","alternate","right",""))}},$=k({compatConfig:{MODE:3},name:"ATimeline",props:F(_e(),{reverse:!1,mode:""}),slots:["pending","pendingDot"],setup:function(n,I){var t=I.slots,p=z("timeline",n),e=p.prefixCls,_=p.direction,v=function(i,c){var a=i.props||{};return n.mode==="alternate"?a.position==="right"?"".concat(e.value,"-item-right"):a.position==="left"||c%2===0?"".concat(e.value,"-item-left"):"".concat(e.value,"-item-right"):n.mode==="left"?"".concat(e.value,"-item-left"):n.mode==="right"||a.position==="right"?"".concat(e.value,"-item-right"):""};return function(){var l,i,c,a,g=n.pending,m=g===void 0?(l=t.pending)===null||l===void 0?void 0:l.call(t):g,C=n.pendingDot,u=C===void 0?(i=t.pendingDot)===null||i===void 0?void 0:i.call(t):C,y=n.reverse,N=n.mode,O=typeof m=="boolean"?null:m,B=G((c=t.default)===null||c===void 0?void 0:c.call(t)),D=m?o(M,{pending:!!m,dot:u||o(U,null,null)},{default:function(){return[O]}}):null;D&&B.push(D);var R=y?B.reverse():B,E=R.length,V="".concat(e.value,"-item-last"),J=R.map(function(b,h){var P=h===E-2?V:"",Q=h===E-1?V:"";return W(b,{class:A([!y&&!!m?P:Q,v(b,h)])})}),H=R.some(function(b){var h,P;return!!((h=b.props)!==null&&h!==void 0&&h.label||(P=b.children)!==null&&P!==void 0&&P.label)}),K=A(e.value,(a={},d(a,"".concat(e.value,"-pending"),!!m),d(a,"".concat(e.value,"-reverse"),!!y),d(a,"".concat(e.value,"-").concat(N),!!N&&!H),d(a,"".concat(e.value,"-label"),H),d(a,"".concat(e.value,"-rtl"),_.value==="rtl"),a));return o("ul",{class:K},[J])}}});$.Item=M;$.install=function(s){return s.component($.name,$),s.component(M.name,M),s};const ge=k({name:"ApprovalHistory",components:{Button:Y,Tag:re,Row:de,Col:pe,Space:ie,ApartmentOutlined:ve,FlowDiagramModal:se,BpmnPreviewModal:ce,Timeline:$,TimelineItem:$.Item,List:w,ListItem:w.Item,ListItemMeta:w.Item.Meta,ClockCircleOutlined:ue,CollapseContainer:Z,Avatar:le},setup(s,{emit:n}){const{currentRoute:I}=ee(),t=j([]),p=j(!1),{params:{modelKey:e},query:{taskId:_,procInstId:v}}=te(I);return oe(()=>{p.value=!0,me({procInstId:v}).then(l=>{t.value=l}).finally(()=>{p.value=!1})}),{historyList:t,approvalHistoryLoading:p}}}),Ce=x("div",{class:"font-bold"},"\u5BA1\u6279\u8BB0\u5F55",-1),he=x("br",null,null,-1),Ie={class:"font-bold"};function ye(s,n,I,t,p,e){const _=f("Tag"),v=f("Space"),l=f("Col"),i=f("Row"),c=f("Avatar"),a=f("ListItemMeta"),g=f("ListItem"),m=f("List"),C=f("CollapseContainer");return ne(),ae(C,{canExpan:!0},{title:r(()=>[Ce]),default:r(()=>[x("div",null,[o(m,{loading:s.approvalHistoryLoading,"item-layout":"horizontal",dataSource:s.historyList},{renderItem:r(({item:u})=>[o(g,null,{default:r(()=>[o(a,null,{description:r(()=>[T(S(u.message||"\u65E0"),1),he]),title:r(()=>[o(i,null,{default:r(()=>[o(l,{span:"14"},{default:r(()=>[o(v,null,{default:r(()=>[o(_,null,{default:r(()=>[T(S(u.personalName),1)]),_:2},1024),x("span",Ie,S(u.activityName),1)]),_:2},1024)]),_:2},1024),o(l,{span:"10",class:"text-right"},{default:r(()=>[T(S(u.time),1)]),_:2},1024)]),_:2},1024)]),avatar:r(()=>[o(c,null,{default:r(()=>[T(S(u.typeName),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1},8,["loading","dataSource"])])]),_:1})}var Xe=X(ge,[["render",ye]]);export{Xe as default};
