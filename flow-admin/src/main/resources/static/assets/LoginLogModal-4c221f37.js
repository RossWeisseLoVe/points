var L=Object.defineProperty;var g=Object.getOwnPropertySymbols;var _=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var u=(e,o,t)=>o in e?L(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t,m=(e,o)=>{for(var t in o||(o={}))_.call(o,t)&&u(e,t,o[t]);if(g)for(var t of g(o))P.call(o,t)&&u(e,t,o[t]);return e};var c=(e,o,t)=>new Promise((s,r)=>{var p=a=>{try{n(t.next(a))}catch(d){r(d)}},l=a=>{try{n(t.throw(a))}catch(d){r(d)}},n=a=>a.done?s(a.value):Promise.resolve(a.value).then(p,l);n((t=t.apply(e,o)).next())});import{B as y,a as M}from"./index-6bb63bf0.js";import{_ as B}from"./BasicForm.vue_vue_type_script_setup_true_lang-b5fd2c2d.js";import"./BasicForm.vue_vue_type_style_index_0_lang-1d0165cd.js";import{u as R}from"./useForm-d2875f1c.js";import{ay as S,b as f,c as v}from"./index.js";import{d as q,f as F,u as h,c as T,a6 as w,Z as x,a7 as k,a8 as $,l as O,ab as U}from"./vue-f7f38239.js";const J=[{title:"访问IP",dataIndex:"ip",width:100,align:"left"},{title:"操作人ID",dataIndex:"operationId",width:100,align:"left"},{title:"操作人的姓名",dataIndex:"operationUsername",width:100,align:"left"},{title:"操作人姓名",dataIndex:"operationPerson",width:100,align:"left"},{title:"操作内容",dataIndex:"operationContent",width:100,align:"left"},{title:"操作时间",dataIndex:"operationTime",width:100,align:"left",customRender:({text:e})=>S(e)}],K=[{field:"keyword",label:"关键字",component:"Input",componentProps:{placeholder:"请输入名称/编码"},labelWidth:60,colProps:{span:6,lg:{span:6,offset:0},sm:{span:10,offset:0},xs:{span:16,offset:0}}},{field:"dateRange",label:"时间范围",component:"RangePicker",labelWidth:80,colProps:{span:6,lg:{span:6,offset:0},sm:{span:10,offset:0},xs:{span:16,offset:0}}}],C=[{field:"ip",label:"访问ip",required:!1,component:"Input",show:!0},{field:"operationId",label:"操作人id",required:!1,component:"Input",show:!0},{field:"operationUsername",label:"操作人的姓名",required:!1,component:"Input",show:!0,rules:[{required:!1,whitespace:!0,message:"操作人的姓名不能为空！"},{max:32,message:"字符长度不能大于32！"}]},{field:"operationPerson",label:"操作人姓名",required:!1,component:"Input",show:!0},{field:"operationContent",label:"操作内容",required:!1,component:"Input",show:!0},{field:"operationTime",label:"操作时间",required:!0,component:"DatePicker",show:!0}],Q=e=>{const o=e&&{pageNum:e.pageNum,pageSize:e.pageSize};let t=e||{};e.dateRange&&e.dateRange.length>0&&(t.startTimeStr=e.dateRange[0],t.endTimeStr=e.dateRange[1]),t&&(delete t.pageNum,delete t.pageSize,delete t.dateRange);const s={query:o,entity:t};return f.post({url:"/flow/privilege/loginLog/getPagerModel",params:s})},z=e=>f.post({url:"/flow/privilege/loginLog/saveOrUpdate",params:e}),X=e=>f.post({url:"/flow/privilege/loginLog/delete",params:e}),N=q({name:"LoginLogModal",components:{BasicModal:y,BasicForm:B},emits:["success","register"],setup(e,{emit:o}){const t=F(!0),[s,{resetFields:r,setFieldsValue:p,validate:l}]=R({labelWidth:100,schemas:C,showActionButtonGroup:!1}),[n,{setModalProps:a,closeModal:d}]=M(i=>c(this,null,function*(){r(),a({confirmLoading:!1}),t.value=!!(i!=null&&i.isUpdate),h(t)&&p(m({},i.record))})),b=T(()=>h(t)?"修改":"新增");function I(){return c(this,null,function*(){try{a({confirmLoading:!0});const i=yield l();yield z(i),d(),o("success")}finally{a({confirmLoading:!1})}})}return{registerModal:n,registerForm:s,getTitle:b,handleSubmit:I}}});function D(e,o,t,s,r,p){const l=w("BasicForm"),n=w("BasicModal");return x(),k(n,U(e.$attrs,{onRegister:e.registerModal,title:e.getTitle,onOk:e.handleSubmit}),{default:$(()=>[O(l,{onRegister:e.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}const W=v(N,[["render",D]]),Y=Object.freeze(Object.defineProperty({__proto__:null,default:W},Symbol.toStringTag,{value:"Module"}));export{W as L,Y as a,J as c,X as d,Q as g,K as s};
