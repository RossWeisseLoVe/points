var w=Object.defineProperty;var d=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable;var f=(o,s,e)=>s in o?w(o,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[s]=e,u=(o,s)=>{for(var e in s||(s={}))F.call(s,e)&&f(o,e,s[e]);if(d)for(var e of d(s))$.call(s,e)&&f(o,e,s[e]);return o};var p=(o,s,e)=>new Promise((l,m)=>{var c=t=>{try{r(e.next(t))}catch(a){m(a)}},i=t=>{try{r(e.throw(t))}catch(a){m(a)}},r=t=>t.done?l(t.value):Promise.resolve(t.value).then(c,i);r((e=e.apply(o,s)).next())});import{B as v,a as b}from"./index-6bb63bf0.js";import{_ as k}from"./BasicForm.vue_vue_type_script_setup_true_lang-b5fd2c2d.js";import"./BasicForm.vue_vue_type_style_index_0_lang-1d0165cd.js";import{u as y}from"./useForm-d2875f1c.js";import{f as R,s as S}from"./module-b7c977cb.js";import{d as C,f as L,u as g,c as O,a6 as h,Z as P,a7 as U,a8 as V,l as T,ab as A}from"./vue-f7f38239.js";import{c as G}from"./index.js";import"./antd-bebda08e.js";import"./useWindowSizeFn-01ffbee2.js";import"./index-1b9aa1da.js";import"./uuid-31b8b5a4.js";import"./useSortable-9ec2a7be.js";import"./download-2647fd8d.js";import"./base64Conver-39fc0d26.js";import"./index-b34be3ab.js";import"./IconPicker.vue_vue_type_script_setup_true_lang-af62677b.js";import"./copyTextToClipboard-ad844e61.js";import"./index-091b1c05.js";const I=C({name:"ModuleModal",components:{BasicModal:v,BasicForm:k},emits:["success","register"],setup(o,{emit:s}){const e=L(!0),[l,{resetFields:m,setFieldsValue:c,updateSchema:i,validate:r}]=y({labelWidth:100,schemas:R,showActionButtonGroup:!1}),[t,{setModalProps:a,closeModal:M}]=b(n=>p(this,null,function*(){m(),a({confirmLoading:!1}),e.value=!!(n!=null&&n.isUpdate),g(e)?(c(u({},n.record)),i([{field:"component",show:!1},{field:"url",show:!1}])):i([{field:"component",show:!0},{field:"url",show:!0}])})),_=O(()=>g(e)?"修改":"新增");function B(){return p(this,null,function*(){try{a({confirmLoading:!0});const n=yield r();yield S(n),M(),s("success")}finally{a({confirmLoading:!1})}})}return{registerModal:t,registerForm:l,getTitle:_,handleSubmit:B}}});function N(o,s,e,l,m,c){const i=h("BasicForm"),r=h("BasicModal");return P(),U(r,A(o.$attrs,{onRegister:o.registerModal,title:o.getTitle,onOk:o.handleSubmit}),{default:V(()=>[T(i,{onRegister:o.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}const ae=G(I,[["render",N]]);export{ae as default};
