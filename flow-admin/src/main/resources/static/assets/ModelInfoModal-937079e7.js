var F=Object.defineProperty;var d=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var u=(o,t,e)=>t in o?F(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e,f=(o,t)=>{for(var e in t||(t={}))I.call(t,e)&&u(o,e,t[e]);if(d)for(var e of d(t))w.call(t,e)&&u(o,e,t[e]);return o};var c=(o,t,e)=>new Promise((m,n)=>{var p=s=>{try{r(e.next(s))}catch(a){n(a)}},i=s=>{try{r(e.throw(s))}catch(a){n(a)}},r=s=>s.done?m(s.value):Promise.resolve(s.value).then(p,i);r((e=e.apply(o,t)).next())});import{B as y,a as q}from"./index-6bb63bf0.js";import{_ as S}from"./BasicForm.vue_vue_type_script_setup_true_lang-b5fd2c2d.js";import"./BasicForm.vue_vue_type_style_index_0_lang-1d0165cd.js";import{u as $}from"./useForm-d2875f1c.js";import{a as C}from"./app-72ac4173.js";import{d as P,f as R,u as g,c as k,a6 as h,Z as v,a7 as L,a8 as A,l as O,ab as x}from"./vue-f7f38239.js";import{c as D}from"./index.js";import"./antd-bebda08e.js";import"./useWindowSizeFn-01ffbee2.js";import"./index-1b9aa1da.js";import"./uuid-31b8b5a4.js";import"./useSortable-9ec2a7be.js";import"./download-2647fd8d.js";import"./base64Conver-39fc0d26.js";import"./index-b34be3ab.js";import"./IconPicker.vue_vue_type_script_setup_true_lang-af62677b.js";import"./copyTextToClipboard-ad844e61.js";import"./index-091b1c05.js";const T=[{field:"id",label:"ID",required:!1,component:"Input",show:!1},{field:"categoryCode",label:"ID",required:!1,component:"Input",show:!1},{field:"name",label:"名称",component:"Input",required:!0,rules:[{required:!0,whitespace:!0,message:"名称不能为空！"},{max:200,message:"字符长度不能大于200！"}]},{field:"modelKey",label:"标识",component:"Input",required:!0,rules:[{required:!0,whitespace:!0,message:"标识不能为空！"},{pattern:new RegExp("^[0-9a-zA-Z_]{1,}$"),type:"string",message:"请输入英文或数字！"},{max:150,message:"字符长度不能大于150！"}]},{field:"appSn",label:"所属系统",component:"Select",componentProps:{getPopupContainer:()=>document.body},required:!0}],U=P({name:"ModelInfoModal",components:{BasicModal:y,BasicForm:S},emits:["success","register"],setup(o,{emit:t}){const e=R(!0),[m,{setFieldsValue:n,updateSchema:p,resetFields:i,validate:r}]=$({labelWidth:100,schemas:T,showActionButtonGroup:!1,actionColOptions:{span:23}}),[s,{setModalProps:a,closeModal:_}]=q(l=>c(this,null,function*(){i(),a({confirmLoading:!1}),e.value=!!(l!=null&&l.isUpdate);const B=yield C();p([{field:"appSn",componentProps:{options:B,labelField:"id"}}]),g(e)&&n(f({},l.record))})),M=k(()=>g(e)?"编辑":"新增");function b(){return c(this,null,function*(){try{a({confirmLoading:!0});const l=yield r();_(),t("success")}finally{a({confirmLoading:!1})}})}return{registerModal:s,registerForm:m,getTitle:M,handleSubmit:b}}});function V(o,t,e,m,n,p){const i=h("BasicForm"),r=h("BasicModal");return v(),L(r,x(o.$attrs,{onRegister:o.registerModal,title:o.getTitle,onOk:o.handleSubmit}),{default:A(()=>[O(i,{onRegister:o.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}const ne=D(U,[["render",V]]);export{ne as default};
